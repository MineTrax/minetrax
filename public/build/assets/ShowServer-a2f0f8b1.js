import{I as Rr,u as Or}from"./AppLayout-3157e4a2.js";import{_ as Lr,l as Ke,o as qe,d as qt,a as U,n as Sr,t as te,e as _r,c as xr,B as Dr,ad as dr,q as Tr,w as Br,b as Ue,f as Cr,j as wr,i as Pr,v as Ir}from"./app-0e0bee07.js";import Hr from"./ServerSubMenu-17f79a0e.js";import{_ as jr}from"./millify-2865c83f.js";import{_ as Fr}from"./AdminLayout-740a5fa8.js";import{u as Wr}from"./useAuthorizable-8eccef14.js";import"./CloudArrowDownIcon-d1d7f067.js";import"./index-d161bd52.js";var Er={exports:{}};(function($,de){(function(G,re){$.exports=re()})(self,function(){return(()=>{var G={4567:function(H,c,C){var _,u=this&&this.__extends||(_=function(i,e){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])},_(i,e)},function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function t(){this.constructor=i}_(i,e),i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)});Object.defineProperty(c,"__esModule",{value:!0}),c.AccessibilityManager=void 0;var f=C(9042),d=C(6114),m=C(9924),v=C(3656),o=C(844),s=C(5596),p=C(9631),h=function(i){function e(t,r){var n=i.call(this)||this;n._terminal=t,n._renderService=r,n._liveRegionLineCount=0,n._charsToConsume=[],n._charsToAnnounce="",n._accessibilityTreeRoot=document.createElement("div"),n._accessibilityTreeRoot.classList.add("xterm-accessibility"),n._accessibilityTreeRoot.tabIndex=0,n._rowContainer=document.createElement("div"),n._rowContainer.setAttribute("role","list"),n._rowContainer.classList.add("xterm-accessibility-tree"),n._rowElements=[];for(var l=0;l<n._terminal.rows;l++)n._rowElements[l]=n._createAccessibilityTreeNode(),n._rowContainer.appendChild(n._rowElements[l]);if(n._topBoundaryFocusListener=function(a){return n._onBoundaryFocus(a,0)},n._bottomBoundaryFocusListener=function(a){return n._onBoundaryFocus(a,1)},n._rowElements[0].addEventListener("focus",n._topBoundaryFocusListener),n._rowElements[n._rowElements.length-1].addEventListener("focus",n._bottomBoundaryFocusListener),n._refreshRowsDimensions(),n._accessibilityTreeRoot.appendChild(n._rowContainer),n._renderRowsDebouncer=new m.TimeBasedDebouncer(n._renderRows.bind(n)),n._refreshRows(),n._liveRegion=document.createElement("div"),n._liveRegion.classList.add("live-region"),n._liveRegion.setAttribute("aria-live","assertive"),n._accessibilityTreeRoot.appendChild(n._liveRegion),!n._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");return n._terminal.element.insertAdjacentElement("afterbegin",n._accessibilityTreeRoot),n.register(n._renderRowsDebouncer),n.register(n._terminal.onResize(function(a){return n._onResize(a.rows)})),n.register(n._terminal.onRender(function(a){return n._refreshRows(a.start,a.end)})),n.register(n._terminal.onScroll(function(){return n._refreshRows()})),n.register(n._terminal.onA11yChar(function(a){return n._onChar(a)})),n.register(n._terminal.onLineFeed(function(){return n._onChar(`
`)})),n.register(n._terminal.onA11yTab(function(a){return n._onTab(a)})),n.register(n._terminal.onKey(function(a){return n._onKey(a.key)})),n.register(n._terminal.onBlur(function(){return n._clearLiveRegion()})),n.register(n._renderService.onDimensionsChange(function(){return n._refreshRowsDimensions()})),n._screenDprMonitor=new s.ScreenDprMonitor,n.register(n._screenDprMonitor),n._screenDprMonitor.setListener(function(){return n._refreshRowsDimensions()}),n.register((0,v.addDisposableDomListener)(window,"resize",function(){return n._refreshRowsDimensions()})),n}return u(e,i),e.prototype.dispose=function(){i.prototype.dispose.call(this),(0,p.removeElementFromParent)(this._accessibilityTreeRoot),this._rowElements.length=0},e.prototype._onBoundaryFocus=function(t,r){var n=t.target,l=this._rowElements[r===0?1:this._rowElements.length-2];if(n.getAttribute("aria-posinset")!==(r===0?"1":""+this._terminal.buffer.lines.length)&&t.relatedTarget===l){var a,g;if(r===0?(a=n,g=this._rowElements.pop(),this._rowContainer.removeChild(g)):(a=this._rowElements.shift(),g=n,this._rowContainer.removeChild(a)),a.removeEventListener("focus",this._topBoundaryFocusListener),g.removeEventListener("focus",this._bottomBoundaryFocusListener),r===0){var S=this._createAccessibilityTreeNode();this._rowElements.unshift(S),this._rowContainer.insertAdjacentElement("afterbegin",S)}else S=this._createAccessibilityTreeNode(),this._rowElements.push(S),this._rowContainer.appendChild(S);this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(r===0?-1:1),this._rowElements[r===0?1:this._rowElements.length-2].focus(),t.preventDefault(),t.stopImmediatePropagation()}},e.prototype._onResize=function(t){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(var r=this._rowContainer.children.length;r<this._terminal.rows;r++)this._rowElements[r]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[r]);for(;this._rowElements.length>t;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()},e.prototype._createAccessibilityTreeNode=function(){var t=document.createElement("div");return t.setAttribute("role","listitem"),t.tabIndex=-1,this._refreshRowDimensions(t),t},e.prototype._onTab=function(t){for(var r=0;r<t;r++)this._onChar(" ")},e.prototype._onChar=function(t){var r=this;this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==t&&(this._charsToAnnounce+=t):this._charsToAnnounce+=t,t===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=f.tooMuchOutput)),d.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(function(){r._accessibilityTreeRoot.appendChild(r._liveRegion)},0))},e.prototype._clearLiveRegion=function(){this._liveRegion.textContent="",this._liveRegionLineCount=0,d.isMac&&(0,p.removeElementFromParent)(this._liveRegion)},e.prototype._onKey=function(t){this._clearLiveRegion(),this._charsToConsume.push(t)},e.prototype._refreshRows=function(t,r){this._renderRowsDebouncer.refresh(t,r,this._terminal.rows)},e.prototype._renderRows=function(t,r){for(var n=this._terminal.buffer,l=n.lines.length.toString(),a=t;a<=r;a++){var g=n.translateBufferLineToString(n.ydisp+a,!0),S=(n.ydisp+a+1).toString(),y=this._rowElements[a];y&&(g.length===0?y.innerText="Â ":y.textContent=g,y.setAttribute("aria-posinset",S),y.setAttribute("aria-setsize",l))}this._announceCharacters()},e.prototype._refreshRowsDimensions=function(){if(this._renderService.dimensions.actualCellHeight){this._rowElements.length!==this._terminal.rows&&this._onResize(this._terminal.rows);for(var t=0;t<this._terminal.rows;t++)this._refreshRowDimensions(this._rowElements[t])}},e.prototype._refreshRowDimensions=function(t){t.style.height=this._renderService.dimensions.actualCellHeight+"px"},e.prototype._announceCharacters=function(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")},e}(o.Disposable);c.AccessibilityManager=h},3614:(H,c)=>{function C(d){return d.replace(/\r?\n/g,"\r")}function _(d,m){return m?"\x1B[200~"+d+"\x1B[201~":d}function u(d,m,v){d=_(d=C(d),v.decPrivateModes.bracketedPasteMode),v.triggerDataEvent(d,!0),m.value=""}function f(d,m,v){var o=v.getBoundingClientRect(),s=d.clientX-o.left-10,p=d.clientY-o.top-10;m.style.width="20px",m.style.height="20px",m.style.left=s+"px",m.style.top=p+"px",m.style.zIndex="1000",m.focus()}Object.defineProperty(c,"__esModule",{value:!0}),c.rightClickHandler=c.moveTextAreaUnderMouseCursor=c.paste=c.handlePasteEvent=c.copyHandler=c.bracketTextForPaste=c.prepareTextForTerminal=void 0,c.prepareTextForTerminal=C,c.bracketTextForPaste=_,c.copyHandler=function(d,m){d.clipboardData&&d.clipboardData.setData("text/plain",m.selectionText),d.preventDefault()},c.handlePasteEvent=function(d,m,v){d.stopPropagation(),d.clipboardData&&u(d.clipboardData.getData("text/plain"),m,v)},c.paste=u,c.moveTextAreaUnderMouseCursor=f,c.rightClickHandler=function(d,m,v,o,s){f(d,m,v),s&&o.rightClickSelect(d),m.value=o.selectionText,m.select()}},7239:(H,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.ColorContrastCache=void 0;var C=function(){function _(){this._color={},this._rgba={}}return _.prototype.clear=function(){this._color={},this._rgba={}},_.prototype.setCss=function(u,f,d){this._rgba[u]||(this._rgba[u]={}),this._rgba[u][f]=d},_.prototype.getCss=function(u,f){return this._rgba[u]?this._rgba[u][f]:void 0},_.prototype.setColor=function(u,f,d){this._color[u]||(this._color[u]={}),this._color[u][f]=d},_.prototype.getColor=function(u,f){return this._color[u]?this._color[u][f]:void 0},_}();c.ColorContrastCache=C},5680:function(H,c,C){var _=this&&this.__read||function(h,i){var e=typeof Symbol=="function"&&h[Symbol.iterator];if(!e)return h;var t,r,n=e.call(h),l=[];try{for(;(i===void 0||i-- >0)&&!(t=n.next()).done;)l.push(t.value)}catch(a){r={error:a}}finally{try{t&&!t.done&&(e=n.return)&&e.call(n)}finally{if(r)throw r.error}}return l};Object.defineProperty(c,"__esModule",{value:!0}),c.ColorManager=c.DEFAULT_ANSI_COLORS=void 0;var u=C(8055),f=C(7239),d=u.css.toColor("#ffffff"),m=u.css.toColor("#000000"),v=u.css.toColor("#ffffff"),o=u.css.toColor("#000000"),s={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};c.DEFAULT_ANSI_COLORS=Object.freeze(function(){for(var h=[u.css.toColor("#2e3436"),u.css.toColor("#cc0000"),u.css.toColor("#4e9a06"),u.css.toColor("#c4a000"),u.css.toColor("#3465a4"),u.css.toColor("#75507b"),u.css.toColor("#06989a"),u.css.toColor("#d3d7cf"),u.css.toColor("#555753"),u.css.toColor("#ef2929"),u.css.toColor("#8ae234"),u.css.toColor("#fce94f"),u.css.toColor("#729fcf"),u.css.toColor("#ad7fa8"),u.css.toColor("#34e2e2"),u.css.toColor("#eeeeec")],i=[0,95,135,175,215,255],e=0;e<216;e++){var t=i[e/36%6|0],r=i[e/6%6|0],n=i[e%6];h.push({css:u.channels.toCss(t,r,n),rgba:u.channels.toRgba(t,r,n)})}for(e=0;e<24;e++){var l=8+10*e;h.push({css:u.channels.toCss(l,l,l),rgba:u.channels.toRgba(l,l,l)})}return h}());var p=function(){function h(i,e){this.allowTransparency=e;var t=i.createElement("canvas");t.width=1,t.height=1;var r=t.getContext("2d");if(!r)throw new Error("Could not get rendering context");this._ctx=r,this._ctx.globalCompositeOperation="copy",this._litmusColor=this._ctx.createLinearGradient(0,0,1,1),this._contrastCache=new f.ColorContrastCache,this.colors={foreground:d,background:m,cursor:v,cursorAccent:o,selectionTransparent:s,selectionOpaque:u.color.blend(m,s),selectionForeground:void 0,ansi:c.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache},this._updateRestoreColors()}return h.prototype.onOptionsChange=function(i){i==="minimumContrastRatio"&&this._contrastCache.clear()},h.prototype.setTheme=function(i){i===void 0&&(i={}),this.colors.foreground=this._parseColor(i.foreground,d),this.colors.background=this._parseColor(i.background,m),this.colors.cursor=this._parseColor(i.cursor,v,!0),this.colors.cursorAccent=this._parseColor(i.cursorAccent,o,!0),this.colors.selectionTransparent=this._parseColor(i.selection,s,!0),this.colors.selectionOpaque=u.color.blend(this.colors.background,this.colors.selectionTransparent);var e={css:"",rgba:0};this.colors.selectionForeground=i.selectionForeground?this._parseColor(i.selectionForeground,e):void 0,this.colors.selectionForeground===e&&(this.colors.selectionForeground=void 0),u.color.isOpaque(this.colors.selectionTransparent)&&(this.colors.selectionTransparent=u.color.opacity(this.colors.selectionTransparent,.3)),this.colors.ansi[0]=this._parseColor(i.black,c.DEFAULT_ANSI_COLORS[0]),this.colors.ansi[1]=this._parseColor(i.red,c.DEFAULT_ANSI_COLORS[1]),this.colors.ansi[2]=this._parseColor(i.green,c.DEFAULT_ANSI_COLORS[2]),this.colors.ansi[3]=this._parseColor(i.yellow,c.DEFAULT_ANSI_COLORS[3]),this.colors.ansi[4]=this._parseColor(i.blue,c.DEFAULT_ANSI_COLORS[4]),this.colors.ansi[5]=this._parseColor(i.magenta,c.DEFAULT_ANSI_COLORS[5]),this.colors.ansi[6]=this._parseColor(i.cyan,c.DEFAULT_ANSI_COLORS[6]),this.colors.ansi[7]=this._parseColor(i.white,c.DEFAULT_ANSI_COLORS[7]),this.colors.ansi[8]=this._parseColor(i.brightBlack,c.DEFAULT_ANSI_COLORS[8]),this.colors.ansi[9]=this._parseColor(i.brightRed,c.DEFAULT_ANSI_COLORS[9]),this.colors.ansi[10]=this._parseColor(i.brightGreen,c.DEFAULT_ANSI_COLORS[10]),this.colors.ansi[11]=this._parseColor(i.brightYellow,c.DEFAULT_ANSI_COLORS[11]),this.colors.ansi[12]=this._parseColor(i.brightBlue,c.DEFAULT_ANSI_COLORS[12]),this.colors.ansi[13]=this._parseColor(i.brightMagenta,c.DEFAULT_ANSI_COLORS[13]),this.colors.ansi[14]=this._parseColor(i.brightCyan,c.DEFAULT_ANSI_COLORS[14]),this.colors.ansi[15]=this._parseColor(i.brightWhite,c.DEFAULT_ANSI_COLORS[15]),this._contrastCache.clear(),this._updateRestoreColors()},h.prototype.restoreColor=function(i){if(i!==void 0)switch(i){case 256:this.colors.foreground=this._restoreColors.foreground;break;case 257:this.colors.background=this._restoreColors.background;break;case 258:this.colors.cursor=this._restoreColors.cursor;break;default:this.colors.ansi[i]=this._restoreColors.ansi[i]}else for(var e=0;e<this._restoreColors.ansi.length;++e)this.colors.ansi[e]=this._restoreColors.ansi[e]},h.prototype._updateRestoreColors=function(){this._restoreColors={foreground:this.colors.foreground,background:this.colors.background,cursor:this.colors.cursor,ansi:this.colors.ansi.slice()}},h.prototype._parseColor=function(i,e,t){if(t===void 0&&(t=this.allowTransparency),i===void 0)return e;if(this._ctx.fillStyle=this._litmusColor,this._ctx.fillStyle=i,typeof this._ctx.fillStyle!="string")return console.warn("Color: "+i+" is invalid using fallback "+e.css),e;this._ctx.fillRect(0,0,1,1);var r=this._ctx.getImageData(0,0,1,1).data;if(r[3]!==255){if(!t)return console.warn("Color: "+i+" is using transparency, but allowTransparency is false. Using fallback "+e.css+"."),e;var n=_(this._ctx.fillStyle.substring(5,this._ctx.fillStyle.length-1).split(",").map(function(b){return Number(b)}),4),l=n[0],a=n[1],g=n[2],S=n[3],y=Math.round(255*S);return{rgba:u.channels.toRgba(l,a,g,y),css:i}}return{css:this._ctx.fillStyle,rgba:u.channels.toRgba(r[0],r[1],r[2],r[3])}},h}();c.ColorManager=p},9631:function(H,c){var C=this&&this.__values||function(_){var u=typeof Symbol=="function"&&Symbol.iterator,f=u&&_[u],d=0;if(f)return f.call(_);if(_&&typeof _.length=="number")return{next:function(){return _&&d>=_.length&&(_=void 0),{value:_&&_[d++],done:!_}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(c,"__esModule",{value:!0}),c.removeElementFromParent=void 0,c.removeElementFromParent=function(){for(var _,u,f,d=[],m=0;m<arguments.length;m++)d[m]=arguments[m];try{for(var v=C(d),o=v.next();!o.done;o=v.next()){var s=o.value;(f=s==null?void 0:s.parentElement)===null||f===void 0||f.removeChild(s)}}catch(p){_={error:p}}finally{try{o&&!o.done&&(u=v.return)&&u.call(v)}finally{if(_)throw _.error}}}},3656:(H,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.addDisposableDomListener=void 0,c.addDisposableDomListener=function(C,_,u,f){C.addEventListener(_,u,f);var d=!1;return{dispose:function(){d||(d=!0,C.removeEventListener(_,u,f))}}}},3551:function(H,c,C){var _=this&&this.__decorate||function(o,s,p,h){var i,e=arguments.length,t=e<3?s:h===null?h=Object.getOwnPropertyDescriptor(s,p):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,s,p,h);else for(var r=o.length-1;r>=0;r--)(i=o[r])&&(t=(e<3?i(t):e>3?i(s,p,t):i(s,p))||t);return e>3&&t&&Object.defineProperty(s,p,t),t},u=this&&this.__param||function(o,s){return function(p,h){s(p,h,o)}};Object.defineProperty(c,"__esModule",{value:!0}),c.MouseZone=c.Linkifier=void 0;var f=C(8460),d=C(2585),m=function(){function o(s,p,h){this._bufferService=s,this._logService=p,this._unicodeService=h,this._linkMatchers=[],this._nextLinkMatcherId=0,this._onShowLinkUnderline=new f.EventEmitter,this._onHideLinkUnderline=new f.EventEmitter,this._onLinkTooltip=new f.EventEmitter,this._rowsToLinkify={start:void 0,end:void 0}}return Object.defineProperty(o.prototype,"onShowLinkUnderline",{get:function(){return this._onShowLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"onHideLinkUnderline",{get:function(){return this._onHideLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"onLinkTooltip",{get:function(){return this._onLinkTooltip.event},enumerable:!1,configurable:!0}),o.prototype.attachToDom=function(s,p){this._element=s,this._mouseZoneManager=p},o.prototype.linkifyRows=function(s,p){var h=this;this._mouseZoneManager&&(this._rowsToLinkify.start===void 0||this._rowsToLinkify.end===void 0?(this._rowsToLinkify.start=s,this._rowsToLinkify.end=p):(this._rowsToLinkify.start=Math.min(this._rowsToLinkify.start,s),this._rowsToLinkify.end=Math.max(this._rowsToLinkify.end,p)),this._mouseZoneManager.clearAll(s,p),this._rowsTimeoutId&&clearTimeout(this._rowsTimeoutId),this._rowsTimeoutId=setTimeout(function(){return h._linkifyRows()},o._timeBeforeLatency))},o.prototype._linkifyRows=function(){this._rowsTimeoutId=void 0;var s=this._bufferService.buffer;if(this._rowsToLinkify.start!==void 0&&this._rowsToLinkify.end!==void 0){var p=s.ydisp+this._rowsToLinkify.start;if(!(p>=s.lines.length)){for(var h=s.ydisp+Math.min(this._rowsToLinkify.end,this._bufferService.rows)+1,i=Math.ceil(2e3/this._bufferService.cols),e=this._bufferService.buffer.iterator(!1,p,h,i,i);e.hasNext();)for(var t=e.next(),r=0;r<this._linkMatchers.length;r++)this._doLinkifyRow(t.range.first,t.content,this._linkMatchers[r]);this._rowsToLinkify.start=void 0,this._rowsToLinkify.end=void 0}}else this._logService.debug("_rowToLinkify was unset before _linkifyRows was called")},o.prototype.registerLinkMatcher=function(s,p,h){if(h===void 0&&(h={}),!p)throw new Error("handler must be defined");var i={id:this._nextLinkMatcherId++,regex:s,handler:p,matchIndex:h.matchIndex,validationCallback:h.validationCallback,hoverTooltipCallback:h.tooltipCallback,hoverLeaveCallback:h.leaveCallback,willLinkActivate:h.willLinkActivate,priority:h.priority||0};return this._addLinkMatcherToList(i),i.id},o.prototype._addLinkMatcherToList=function(s){if(this._linkMatchers.length!==0){for(var p=this._linkMatchers.length-1;p>=0;p--)if(s.priority<=this._linkMatchers[p].priority)return void this._linkMatchers.splice(p+1,0,s);this._linkMatchers.splice(0,0,s)}else this._linkMatchers.push(s)},o.prototype.deregisterLinkMatcher=function(s){for(var p=0;p<this._linkMatchers.length;p++)if(this._linkMatchers[p].id===s)return this._linkMatchers.splice(p,1),!0;return!1},o.prototype._doLinkifyRow=function(s,p,h){for(var i,e=this,t=new RegExp(h.regex.source,(h.regex.flags||"")+"g"),r=-1,n=function(){var a=i[typeof h.matchIndex!="number"?0:h.matchIndex];if(!a)return l._logService.debug("match found without corresponding matchIndex",i,h),"break";if(r=p.indexOf(a,r+1),t.lastIndex=r+a.length,r<0)return"break";var g=l._bufferService.buffer.stringIndexToBufferIndex(s,r);if(g[0]<0)return"break";var S=l._bufferService.buffer.lines.get(g[0]);if(!S)return"break";var y=S.getFg(g[1]),b=y?y>>9&511:void 0;h.validationCallback?h.validationCallback(a,function(w){e._rowsTimeoutId||w&&e._addLink(g[1],g[0]-e._bufferService.buffer.ydisp,a,h,b)}):l._addLink(g[1],g[0]-l._bufferService.buffer.ydisp,a,h,b)},l=this;(i=t.exec(p))!==null&&n()!=="break";);},o.prototype._addLink=function(s,p,h,i,e){var t=this;if(this._mouseZoneManager&&this._element){var r=this._unicodeService.getStringCellWidth(h),n=s%this._bufferService.cols,l=p+Math.floor(s/this._bufferService.cols),a=(n+r)%this._bufferService.cols,g=l+Math.floor((n+r)/this._bufferService.cols);a===0&&(a=this._bufferService.cols,g--),this._mouseZoneManager.add(new v(n+1,l+1,a+1,g+1,function(S){if(i.handler)return i.handler(S,h);var y=window.open();y?(y.opener=null,y.location.href=h):console.warn("Opening link blocked as opener could not be cleared")},function(){t._onShowLinkUnderline.fire(t._createLinkHoverEvent(n,l,a,g,e)),t._element.classList.add("xterm-cursor-pointer")},function(S){t._onLinkTooltip.fire(t._createLinkHoverEvent(n,l,a,g,e)),i.hoverTooltipCallback&&i.hoverTooltipCallback(S,h,{start:{x:n,y:l},end:{x:a,y:g}})},function(){t._onHideLinkUnderline.fire(t._createLinkHoverEvent(n,l,a,g,e)),t._element.classList.remove("xterm-cursor-pointer"),i.hoverLeaveCallback&&i.hoverLeaveCallback()},function(S){return!i.willLinkActivate||i.willLinkActivate(S,h)}))}},o.prototype._createLinkHoverEvent=function(s,p,h,i,e){return{x1:s,y1:p,x2:h,y2:i,cols:this._bufferService.cols,fg:e}},o._timeBeforeLatency=200,o=_([u(0,d.IBufferService),u(1,d.ILogService),u(2,d.IUnicodeService)],o)}();c.Linkifier=m;var v=function(o,s,p,h,i,e,t,r,n){this.x1=o,this.y1=s,this.x2=p,this.y2=h,this.clickCallback=i,this.hoverCallback=e,this.tooltipCallback=t,this.leaveCallback=r,this.willLinkActivate=n};c.MouseZone=v},6465:function(H,c,C){var _,u=this&&this.__extends||(_=function(e,t){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(r[l]=n[l])},_(e,t)},function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}_(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}),f=this&&this.__decorate||function(e,t,r,n){var l,a=arguments.length,g=a<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(e,t,r,n);else for(var S=e.length-1;S>=0;S--)(l=e[S])&&(g=(a<3?l(g):a>3?l(t,r,g):l(t,r))||g);return a>3&&g&&Object.defineProperty(t,r,g),g},d=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}},m=this&&this.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},v=this&&this.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n,l,a=r.call(e),g=[];try{for(;(t===void 0||t-- >0)&&!(n=a.next()).done;)g.push(n.value)}catch(S){l={error:S}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(l)throw l.error}}return g};Object.defineProperty(c,"__esModule",{value:!0}),c.Linkifier2=void 0;var o=C(2585),s=C(8460),p=C(844),h=C(3656),i=function(e){function t(r){var n=e.call(this)||this;return n._bufferService=r,n._linkProviders=[],n._linkCacheDisposables=[],n._isMouseOut=!0,n._activeLine=-1,n._onShowLinkUnderline=n.register(new s.EventEmitter),n._onHideLinkUnderline=n.register(new s.EventEmitter),n.register((0,p.getDisposeArrayDisposable)(n._linkCacheDisposables)),n}return u(t,e),Object.defineProperty(t.prototype,"currentLink",{get:function(){return this._currentLink},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onShowLinkUnderline",{get:function(){return this._onShowLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onHideLinkUnderline",{get:function(){return this._onHideLinkUnderline.event},enumerable:!1,configurable:!0}),t.prototype.registerLinkProvider=function(r){var n=this;return this._linkProviders.push(r),{dispose:function(){var l=n._linkProviders.indexOf(r);l!==-1&&n._linkProviders.splice(l,1)}}},t.prototype.attachToDom=function(r,n,l){var a=this;this._element=r,this._mouseService=n,this._renderService=l,this.register((0,h.addDisposableDomListener)(this._element,"mouseleave",function(){a._isMouseOut=!0,a._clearCurrentLink()})),this.register((0,h.addDisposableDomListener)(this._element,"mousemove",this._onMouseMove.bind(this))),this.register((0,h.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,h.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))},t.prototype._onMouseMove=function(r){if(this._lastMouseEvent=r,this._element&&this._mouseService){var n=this._positionFromMouseEvent(r,this._element,this._mouseService);if(n){this._isMouseOut=!1;for(var l=r.composedPath(),a=0;a<l.length;a++){var g=l[a];if(g.classList.contains("xterm"))break;if(g.classList.contains("xterm-hover"))return}this._lastBufferCell&&n.x===this._lastBufferCell.x&&n.y===this._lastBufferCell.y||(this._onHover(n),this._lastBufferCell=n)}}},t.prototype._onHover=function(r){if(this._activeLine!==r.y)return this._clearCurrentLink(),void this._askForLink(r,!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,r)||(this._clearCurrentLink(),this._askForLink(r,!0))},t.prototype._askForLink=function(r,n){var l,a,g,S,y=this;this._activeProviderReplies&&n||((g=this._activeProviderReplies)===null||g===void 0||g.forEach(function(x){x==null||x.forEach(function(R){R.link.dispose&&R.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=r.y);var b=!1,w=function(x,R){n?!((S=M._activeProviderReplies)===null||S===void 0)&&S.get(x)&&(b=M._checkLinkProviderResult(x,r,b)):R.provideLinks(r.y,function(T){var q,N;if(!y._isMouseOut){var F=T==null?void 0:T.map(function(K){return{link:K}});(q=y._activeProviderReplies)===null||q===void 0||q.set(x,F),b=y._checkLinkProviderResult(x,r,b),((N=y._activeProviderReplies)===null||N===void 0?void 0:N.size)===y._linkProviders.length&&y._removeIntersectingLinks(r.y,y._activeProviderReplies)}})},M=this;try{for(var L=m(this._linkProviders.entries()),k=L.next();!k.done;k=L.next()){var E=v(k.value,2);w(E[0],E[1])}}catch(x){l={error:x}}finally{try{k&&!k.done&&(a=L.return)&&a.call(L)}finally{if(l)throw l.error}}},t.prototype._removeIntersectingLinks=function(r,n){for(var l=new Set,a=0;a<n.size;a++){var g=n.get(a);if(g)for(var S=0;S<g.length;S++)for(var y=g[S],b=y.link.range.start.y<r?0:y.link.range.start.x,w=y.link.range.end.y>r?this._bufferService.cols:y.link.range.end.x,M=b;M<=w;M++){if(l.has(M)){g.splice(S--,1);break}l.add(M)}}},t.prototype._checkLinkProviderResult=function(r,n,l){var a,g=this;if(!this._activeProviderReplies)return l;for(var S=this._activeProviderReplies.get(r),y=!1,b=0;b<r;b++)this._activeProviderReplies.has(b)&&!this._activeProviderReplies.get(b)||(y=!0);if(!y&&S){var w=S.find(function(L){return g._linkAtPosition(L.link,n)});w&&(l=!0,this._handleNewLink(w))}if(this._activeProviderReplies.size===this._linkProviders.length&&!l)for(b=0;b<this._activeProviderReplies.size;b++){var M=(a=this._activeProviderReplies.get(b))===null||a===void 0?void 0:a.find(function(L){return g._linkAtPosition(L.link,n)});if(M){l=!0,this._handleNewLink(M);break}}return l},t.prototype._handleMouseDown=function(){this._mouseDownLink=this._currentLink},t.prototype._handleMouseUp=function(r){if(this._element&&this._mouseService&&this._currentLink){var n=this._positionFromMouseEvent(r,this._element,this._mouseService);n&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,n)&&this._currentLink.link.activate(r,this._currentLink.link.text)}},t.prototype._clearCurrentLink=function(r,n){this._element&&this._currentLink&&this._lastMouseEvent&&(!r||!n||this._currentLink.link.range.start.y>=r&&this._currentLink.link.range.end.y<=n)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,p.disposeArray)(this._linkCacheDisposables))},t.prototype._handleNewLink=function(r){var n=this;if(this._element&&this._lastMouseEvent&&this._mouseService){var l=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);l&&this._linkAtPosition(r.link,l)&&(this._currentLink=r,this._currentLink.state={decorations:{underline:r.link.decorations===void 0||r.link.decorations.underline,pointerCursor:r.link.decorations===void 0||r.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,r.link,this._lastMouseEvent),r.link.decorations={},Object.defineProperties(r.link.decorations,{pointerCursor:{get:function(){var a,g;return(g=(a=n._currentLink)===null||a===void 0?void 0:a.state)===null||g===void 0?void 0:g.decorations.pointerCursor},set:function(a){var g,S;!((g=n._currentLink)===null||g===void 0)&&g.state&&n._currentLink.state.decorations.pointerCursor!==a&&(n._currentLink.state.decorations.pointerCursor=a,n._currentLink.state.isHovered&&((S=n._element)===null||S===void 0||S.classList.toggle("xterm-cursor-pointer",a)))}},underline:{get:function(){var a,g;return(g=(a=n._currentLink)===null||a===void 0?void 0:a.state)===null||g===void 0?void 0:g.decorations.underline},set:function(a){var g,S,y;!((g=n._currentLink)===null||g===void 0)&&g.state&&((y=(S=n._currentLink)===null||S===void 0?void 0:S.state)===null||y===void 0?void 0:y.decorations.underline)!==a&&(n._currentLink.state.decorations.underline=a,n._currentLink.state.isHovered&&n._fireUnderlineEvent(r.link,a))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(function(a){var g=a.start===0?0:a.start+1+n._bufferService.buffer.ydisp;n._clearCurrentLink(g,a.end+1+n._bufferService.buffer.ydisp)})))}},t.prototype._linkHover=function(r,n,l){var a;!((a=this._currentLink)===null||a===void 0)&&a.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(n,!0),this._currentLink.state.decorations.pointerCursor&&r.classList.add("xterm-cursor-pointer")),n.hover&&n.hover(l,n.text)},t.prototype._fireUnderlineEvent=function(r,n){var l=r.range,a=this._bufferService.buffer.ydisp,g=this._createLinkUnderlineEvent(l.start.x-1,l.start.y-a-1,l.end.x,l.end.y-a-1,void 0);(n?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(g)},t.prototype._linkLeave=function(r,n,l){var a;!((a=this._currentLink)===null||a===void 0)&&a.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(n,!1),this._currentLink.state.decorations.pointerCursor&&r.classList.remove("xterm-cursor-pointer")),n.leave&&n.leave(l,n.text)},t.prototype._linkAtPosition=function(r,n){var l=r.range.start.y===r.range.end.y,a=r.range.start.y<n.y,g=r.range.end.y>n.y;return(l&&r.range.start.x<=n.x&&r.range.end.x>=n.x||a&&r.range.end.x>=n.x||g&&r.range.start.x<=n.x||a&&g)&&r.range.start.y<=n.y&&r.range.end.y>=n.y},t.prototype._positionFromMouseEvent=function(r,n,l){var a=l.getCoords(r,n,this._bufferService.cols,this._bufferService.rows);if(a)return{x:a[0],y:a[1]+this._bufferService.buffer.ydisp}},t.prototype._createLinkUnderlineEvent=function(r,n,l,a,g){return{x1:r,y1:n,x2:l,y2:a,cols:this._bufferService.cols,fg:g}},f([d(0,o.IBufferService)],t)}(p.Disposable);c.Linkifier2=i},9042:(H,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.tooMuchOutput=c.promptLabel=void 0,c.promptLabel="Terminal input",c.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},6954:function(H,c,C){var _,u=this&&this.__extends||(_=function(h,i){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},_(h,i)},function(h,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function e(){this.constructor=h}_(h,i),h.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)}),f=this&&this.__decorate||function(h,i,e,t){var r,n=arguments.length,l=n<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(h,i,e,t);else for(var a=h.length-1;a>=0;a--)(r=h[a])&&(l=(n<3?r(l):n>3?r(i,e,l):r(i,e))||l);return n>3&&l&&Object.defineProperty(i,e,l),l},d=this&&this.__param||function(h,i){return function(e,t){i(e,t,h)}};Object.defineProperty(c,"__esModule",{value:!0}),c.MouseZoneManager=void 0;var m=C(844),v=C(3656),o=C(4725),s=C(2585),p=function(h){function i(e,t,r,n,l,a){var g=h.call(this)||this;return g._element=e,g._screenElement=t,g._bufferService=r,g._mouseService=n,g._selectionService=l,g._optionsService=a,g._zones=[],g._areZonesActive=!1,g._lastHoverCoords=[void 0,void 0],g._initialSelectionLength=0,g.register((0,v.addDisposableDomListener)(g._element,"mousedown",function(S){return g._onMouseDown(S)})),g._mouseMoveListener=function(S){return g._onMouseMove(S)},g._mouseLeaveListener=function(S){return g._onMouseLeave(S)},g._clickListener=function(S){return g._onClick(S)},g}return u(i,h),i.prototype.dispose=function(){h.prototype.dispose.call(this),this._deactivate()},i.prototype.add=function(e){this._zones.push(e),this._zones.length===1&&this._activate()},i.prototype.clearAll=function(e,t){if(this._zones.length!==0){e&&t||(e=0,t=this._bufferService.rows-1);for(var r=0;r<this._zones.length;r++){var n=this._zones[r];(n.y1>e&&n.y1<=t+1||n.y2>e&&n.y2<=t+1||n.y1<e&&n.y2>t+1)&&(this._currentZone&&this._currentZone===n&&(this._currentZone.leaveCallback(),this._currentZone=void 0),this._zones.splice(r--,1))}this._zones.length===0&&this._deactivate()}},i.prototype._activate=function(){this._areZonesActive||(this._areZonesActive=!0,this._element.addEventListener("mousemove",this._mouseMoveListener),this._element.addEventListener("mouseleave",this._mouseLeaveListener),this._element.addEventListener("click",this._clickListener))},i.prototype._deactivate=function(){this._areZonesActive&&(this._areZonesActive=!1,this._element.removeEventListener("mousemove",this._mouseMoveListener),this._element.removeEventListener("mouseleave",this._mouseLeaveListener),this._element.removeEventListener("click",this._clickListener))},i.prototype._onMouseMove=function(e){this._lastHoverCoords[0]===e.pageX&&this._lastHoverCoords[1]===e.pageY||(this._onHover(e),this._lastHoverCoords=[e.pageX,e.pageY])},i.prototype._onHover=function(e){var t=this,r=this._findZoneEventAt(e);r!==this._currentZone&&(this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout)),r&&(this._currentZone=r,r.hoverCallback&&r.hoverCallback(e),this._tooltipTimeout=window.setTimeout(function(){return t._onTooltip(e)},this._optionsService.rawOptions.linkTooltipHoverDuration)))},i.prototype._onTooltip=function(e){this._tooltipTimeout=void 0;var t=this._findZoneEventAt(e);t==null||t.tooltipCallback(e)},i.prototype._onMouseDown=function(e){if(this._initialSelectionLength=this._getSelectionLength(),this._areZonesActive){var t=this._findZoneEventAt(e);t!=null&&t.willLinkActivate(e)&&(e.preventDefault(),e.stopImmediatePropagation())}},i.prototype._onMouseLeave=function(e){this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout))},i.prototype._onClick=function(e){var t=this._findZoneEventAt(e),r=this._getSelectionLength();t&&r===this._initialSelectionLength&&(t.clickCallback(e),e.preventDefault(),e.stopImmediatePropagation())},i.prototype._getSelectionLength=function(){var e=this._selectionService.selectionText;return e?e.length:0},i.prototype._findZoneEventAt=function(e){var t=this._mouseService.getCoords(e,this._screenElement,this._bufferService.cols,this._bufferService.rows);if(t)for(var r=t[0],n=t[1],l=0;l<this._zones.length;l++){var a=this._zones[l];if(a.y1===a.y2){if(n===a.y1&&r>=a.x1&&r<a.x2)return a}else if(n===a.y1&&r>=a.x1||n===a.y2&&r<a.x2||n>a.y1&&n<a.y2)return a}},f([d(2,s.IBufferService),d(3,o.IMouseService),d(4,o.ISelectionService),d(5,s.IOptionsService)],i)}(m.Disposable);c.MouseZoneManager=p},6193:function(H,c){var C=this&&this.__values||function(u){var f=typeof Symbol=="function"&&Symbol.iterator,d=f&&u[f],m=0;if(d)return d.call(u);if(u&&typeof u.length=="number")return{next:function(){return u&&m>=u.length&&(u=void 0),{value:u&&u[m++],done:!u}}};throw new TypeError(f?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(c,"__esModule",{value:!0}),c.RenderDebouncer=void 0;var _=function(){function u(f){this._renderCallback=f,this._refreshCallbacks=[]}return u.prototype.dispose=function(){this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},u.prototype.addRefreshCallback=function(f){var d=this;return this._refreshCallbacks.push(f),this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){return d._innerRefresh()})),this._animationFrame},u.prototype.refresh=function(f,d,m){var v=this;this._rowCount=m,f=f!==void 0?f:0,d=d!==void 0?d:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,f):f,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,d):d,this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){return v._innerRefresh()}))},u.prototype._innerRefresh=function(){if(this._animationFrame=void 0,this._rowStart!==void 0&&this._rowEnd!==void 0&&this._rowCount!==void 0){var f=Math.max(this._rowStart,0),d=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(f,d),this._runRefreshCallbacks()}else this._runRefreshCallbacks()},u.prototype._runRefreshCallbacks=function(){var f,d;try{for(var m=C(this._refreshCallbacks),v=m.next();!v.done;v=m.next())(0,v.value)(0)}catch(o){f={error:o}}finally{try{v&&!v.done&&(d=m.return)&&d.call(m)}finally{if(f)throw f.error}}this._refreshCallbacks=[]},u}();c.RenderDebouncer=_},5596:function(H,c,C){var _,u=this&&this.__extends||(_=function(d,m){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,o){v.__proto__=o}||function(v,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(v[s]=o[s])},_(d,m)},function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");function v(){this.constructor=d}_(d,m),d.prototype=m===null?Object.create(m):(v.prototype=m.prototype,new v)});Object.defineProperty(c,"__esModule",{value:!0}),c.ScreenDprMonitor=void 0;var f=function(d){function m(){var v=d!==null&&d.apply(this,arguments)||this;return v._currentDevicePixelRatio=window.devicePixelRatio,v}return u(m,d),m.prototype.setListener=function(v){var o=this;this._listener&&this.clearListener(),this._listener=v,this._outerListener=function(){o._listener&&(o._listener(window.devicePixelRatio,o._currentDevicePixelRatio),o._updateDpr())},this._updateDpr()},m.prototype.dispose=function(){d.prototype.dispose.call(this),this.clearListener()},m.prototype._updateDpr=function(){var v;this._outerListener&&((v=this._resolutionMediaMatchList)===null||v===void 0||v.removeListener(this._outerListener),this._currentDevicePixelRatio=window.devicePixelRatio,this._resolutionMediaMatchList=window.matchMedia("screen and (resolution: "+window.devicePixelRatio+"dppx)"),this._resolutionMediaMatchList.addListener(this._outerListener))},m.prototype.clearListener=function(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)},m}(C(844).Disposable);c.ScreenDprMonitor=f},3236:function(H,c,C){var _,u=this&&this.__extends||(_=function(Y,W){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,D){O.__proto__=D}||function(O,D){for(var j in D)Object.prototype.hasOwnProperty.call(D,j)&&(O[j]=D[j])},_(Y,W)},function(Y,W){if(typeof W!="function"&&W!==null)throw new TypeError("Class extends value "+String(W)+" is not a constructor or null");function O(){this.constructor=Y}_(Y,W),Y.prototype=W===null?Object.create(W):(O.prototype=W.prototype,new O)}),f=this&&this.__values||function(Y){var W=typeof Symbol=="function"&&Symbol.iterator,O=W&&Y[W],D=0;if(O)return O.call(Y);if(Y&&typeof Y.length=="number")return{next:function(){return Y&&D>=Y.length&&(Y=void 0),{value:Y&&Y[D++],done:!Y}}};throw new TypeError(W?"Object is not iterable.":"Symbol.iterator is not defined.")},d=this&&this.__read||function(Y,W){var O=typeof Symbol=="function"&&Y[Symbol.iterator];if(!O)return Y;var D,j,Z=O.call(Y),X=[];try{for(;(W===void 0||W-- >0)&&!(D=Z.next()).done;)X.push(D.value)}catch(ee){j={error:ee}}finally{try{D&&!D.done&&(O=Z.return)&&O.call(Z)}finally{if(j)throw j.error}}return X},m=this&&this.__spreadArray||function(Y,W,O){if(O||arguments.length===2)for(var D,j=0,Z=W.length;j<Z;j++)!D&&j in W||(D||(D=Array.prototype.slice.call(W,0,j)),D[j]=W[j]);return Y.concat(D||Array.prototype.slice.call(W))};Object.defineProperty(c,"__esModule",{value:!0}),c.Terminal=void 0;var v=C(2950),o=C(1680),s=C(3614),p=C(2584),h=C(5435),i=C(3525),e=C(3551),t=C(9312),r=C(6114),n=C(3656),l=C(9042),a=C(357),g=C(6954),S=C(4567),y=C(1296),b=C(7399),w=C(8460),M=C(8437),L=C(5680),k=C(3230),E=C(4725),x=C(428),R=C(8934),T=C(6465),q=C(5114),N=C(8969),F=C(8055),K=C(4269),z=C(5941),A=C(3107),Q=C(5744),J=C(9074),oe=C(2585),B=typeof window<"u"?window.document:null,ne=function(Y){function W(O){O===void 0&&(O={});var D=Y.call(this,O)||this;return D.browser=r,D._keyDownHandled=!1,D._keyDownSeen=!1,D._keyPressHandled=!1,D._unprocessedDeadKey=!1,D._onCursorMove=new w.EventEmitter,D._onKey=new w.EventEmitter,D._onRender=new w.EventEmitter,D._onSelectionChange=new w.EventEmitter,D._onTitleChange=new w.EventEmitter,D._onBell=new w.EventEmitter,D._onFocus=new w.EventEmitter,D._onBlur=new w.EventEmitter,D._onA11yCharEmitter=new w.EventEmitter,D._onA11yTabEmitter=new w.EventEmitter,D._setup(),D.linkifier=D._instantiationService.createInstance(e.Linkifier),D.linkifier2=D.register(D._instantiationService.createInstance(T.Linkifier2)),D._decorationService=D._instantiationService.createInstance(J.DecorationService),D._instantiationService.setService(oe.IDecorationService,D._decorationService),D.register(D._inputHandler.onRequestBell(function(){return D.bell()})),D.register(D._inputHandler.onRequestRefreshRows(function(j,Z){return D.refresh(j,Z)})),D.register(D._inputHandler.onRequestSendFocus(function(){return D._reportFocus()})),D.register(D._inputHandler.onRequestReset(function(){return D.reset()})),D.register(D._inputHandler.onRequestWindowsOptionsReport(function(j){return D._reportWindowsOptions(j)})),D.register(D._inputHandler.onColor(function(j){return D._handleColorEvent(j)})),D.register((0,w.forwardEvent)(D._inputHandler.onCursorMove,D._onCursorMove)),D.register((0,w.forwardEvent)(D._inputHandler.onTitleChange,D._onTitleChange)),D.register((0,w.forwardEvent)(D._inputHandler.onA11yChar,D._onA11yCharEmitter)),D.register((0,w.forwardEvent)(D._inputHandler.onA11yTab,D._onA11yTabEmitter)),D.register(D._bufferService.onResize(function(j){return D._afterResize(j.cols,j.rows)})),D}return u(W,Y),Object.defineProperty(W.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!1,configurable:!0}),Object.defineProperty(W.prototype,"onKey",{get:function(){return this._onKey.event},enumerable:!1,configurable:!0}),Object.defineProperty(W.prototype,"onRender",{get:function(){return this._onRender.event},enumerable:!1,configurable:!0}),Object.defineProperty(W.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(W.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(W.prototype,"onBell",{get:function(){return this._onBell.event},enumerable:!1,configurable:!0}),Object.defineProperty(W.prototype,"onFocus",{get:function(){return this._onFocus.event},enumerable:!1,configurable:!0}),Object.defineProperty(W.prototype,"onBlur",{get:function(){return this._onBlur.event},enumerable:!1,configurable:!0}),Object.defineProperty(W.prototype,"onA11yChar",{get:function(){return this._onA11yCharEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(W.prototype,"onA11yTab",{get:function(){return this._onA11yTabEmitter.event},enumerable:!1,configurable:!0}),W.prototype._handleColorEvent=function(O){var D,j,Z,X;if(this._colorManager){try{for(var ee=f(O),ae=ee.next();!ae.done;ae=ee.next()){var he=ae.value,ue=void 0,V="";switch(he.index){case 256:ue="foreground",V="10";break;case 257:ue="background",V="11";break;case 258:ue="cursor",V="12";break;default:ue="ansi",V="4;"+he.index}if(ue)switch(he.type){case 0:var fe=F.color.toColorRGB(ue==="ansi"?this._colorManager.colors.ansi[he.index]:this._colorManager.colors[ue]);this.coreService.triggerDataEvent(p.C0.ESC+"]"+V+";"+(0,z.toRgbString)(fe)+p.C1_ESCAPED.ST);break;case 1:ue==="ansi"?this._colorManager.colors.ansi[he.index]=F.rgba.toColor.apply(F.rgba,m([],d(he.color),!1)):this._colorManager.colors[ue]=F.rgba.toColor.apply(F.rgba,m([],d(he.color),!1));break;case 2:this._colorManager.restoreColor(he.index)}}}catch(ye){D={error:ye}}finally{try{ae&&!ae.done&&(j=ee.return)&&j.call(ee)}finally{if(D)throw D.error}}(Z=this._renderService)===null||Z===void 0||Z.setColors(this._colorManager.colors),(X=this.viewport)===null||X===void 0||X.onThemeChange(this._colorManager.colors)}},W.prototype.dispose=function(){var O,D,j;this._isDisposed||(Y.prototype.dispose.call(this),(O=this._renderService)===null||O===void 0||O.dispose(),this._customKeyEventHandler=void 0,this.write=function(){},(j=(D=this.element)===null||D===void 0?void 0:D.parentNode)===null||j===void 0||j.removeChild(this.element))},W.prototype._setup=function(){Y.prototype._setup.call(this),this._customKeyEventHandler=void 0},Object.defineProperty(W.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!1,configurable:!0}),W.prototype.focus=function(){this.textarea&&this.textarea.focus({preventScroll:!0})},W.prototype._updateOptions=function(O){var D,j,Z,X;switch(Y.prototype._updateOptions.call(this,O),O){case"fontFamily":case"fontSize":(D=this._renderService)===null||D===void 0||D.clear(),(j=this._charSizeService)===null||j===void 0||j.measure();break;case"cursorBlink":case"cursorStyle":this.refresh(this.buffer.y,this.buffer.y);break;case"customGlyphs":case"drawBoldTextInBrightColors":case"letterSpacing":case"lineHeight":case"fontWeight":case"fontWeightBold":case"minimumContrastRatio":this._renderService&&(this._renderService.clear(),this._renderService.onResize(this.cols,this.rows),this.refresh(0,this.rows-1));break;case"rendererType":this._renderService&&(this._renderService.setRenderer(this._createRenderer()),this._renderService.onResize(this.cols,this.rows));break;case"scrollback":(Z=this.viewport)===null||Z===void 0||Z.syncScrollArea();break;case"screenReaderMode":this.optionsService.rawOptions.screenReaderMode?!this._accessibilityManager&&this._renderService&&(this._accessibilityManager=new S.AccessibilityManager(this,this._renderService)):((X=this._accessibilityManager)===null||X===void 0||X.dispose(),this._accessibilityManager=void 0);break;case"tabStopWidth":this.buffers.setupTabStops();break;case"theme":this._setTheme(this.optionsService.rawOptions.theme)}},W.prototype._onTextAreaFocus=function(O){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(p.C0.ESC+"[I"),this.updateCursorStyle(O),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()},W.prototype.blur=function(){var O;return(O=this.textarea)===null||O===void 0?void 0:O.blur()},W.prototype._onTextAreaBlur=function(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(p.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()},W.prototype._syncTextArea=function(){if(this.textarea&&this.buffer.isCursorInViewport&&!this._compositionHelper.isComposing&&this._renderService){var O=this.buffer.ybase+this.buffer.y,D=this.buffer.lines.get(O);if(D){var j=Math.min(this.buffer.x,this.cols-1),Z=this._renderService.dimensions.actualCellHeight,X=D.getWidth(j),ee=this._renderService.dimensions.actualCellWidth*X,ae=this.buffer.y*this._renderService.dimensions.actualCellHeight,he=j*this._renderService.dimensions.actualCellWidth;this.textarea.style.left=he+"px",this.textarea.style.top=ae+"px",this.textarea.style.width=ee+"px",this.textarea.style.height=Z+"px",this.textarea.style.lineHeight=Z+"px",this.textarea.style.zIndex="-5"}}},W.prototype._initGlobal=function(){var O=this;this._bindKeys(),this.register((0,n.addDisposableDomListener)(this.element,"copy",function(j){O.hasSelection()&&(0,s.copyHandler)(j,O._selectionService)}));var D=function(j){return(0,s.handlePasteEvent)(j,O.textarea,O.coreService)};this.register((0,n.addDisposableDomListener)(this.textarea,"paste",D)),this.register((0,n.addDisposableDomListener)(this.element,"paste",D)),r.isFirefox?this.register((0,n.addDisposableDomListener)(this.element,"mousedown",function(j){j.button===2&&(0,s.rightClickHandler)(j,O.textarea,O.screenElement,O._selectionService,O.options.rightClickSelectsWord)})):this.register((0,n.addDisposableDomListener)(this.element,"contextmenu",function(j){(0,s.rightClickHandler)(j,O.textarea,O.screenElement,O._selectionService,O.options.rightClickSelectsWord)})),r.isLinux&&this.register((0,n.addDisposableDomListener)(this.element,"auxclick",function(j){j.button===1&&(0,s.moveTextAreaUnderMouseCursor)(j,O.textarea,O.screenElement)}))},W.prototype._bindKeys=function(){var O=this;this.register((0,n.addDisposableDomListener)(this.textarea,"keyup",function(D){return O._keyUp(D)},!0)),this.register((0,n.addDisposableDomListener)(this.textarea,"keydown",function(D){return O._keyDown(D)},!0)),this.register((0,n.addDisposableDomListener)(this.textarea,"keypress",function(D){return O._keyPress(D)},!0)),this.register((0,n.addDisposableDomListener)(this.textarea,"compositionstart",function(){return O._compositionHelper.compositionstart()})),this.register((0,n.addDisposableDomListener)(this.textarea,"compositionupdate",function(D){return O._compositionHelper.compositionupdate(D)})),this.register((0,n.addDisposableDomListener)(this.textarea,"compositionend",function(){return O._compositionHelper.compositionend()})),this.register((0,n.addDisposableDomListener)(this.textarea,"input",function(D){return O._inputEvent(D)},!0)),this.register(this.onRender(function(){return O._compositionHelper.updateCompositionElements()})),this.register(this.onRender(function(D){return O._queueLinkification(D.start,D.end)}))},W.prototype.open=function(O){var D=this;if(!O)throw new Error("Terminal requires a parent element.");O.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=O.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),this.element.setAttribute("tabindex","0"),O.appendChild(this.element);var j=B.createDocumentFragment();this._viewportElement=B.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),j.appendChild(this._viewportElement),this._viewportScrollArea=B.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=B.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=B.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),j.appendChild(this.screenElement),this.textarea=B.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",l.promptLabel),this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this.register((0,n.addDisposableDomListener)(this.textarea,"focus",function(ee){return D._onTextAreaFocus(ee)})),this.register((0,n.addDisposableDomListener)(this.textarea,"blur",function(){return D._onTextAreaBlur()})),this._helperContainer.appendChild(this.textarea);var Z=this._instantiationService.createInstance(q.CoreBrowserService,this.textarea);this._instantiationService.setService(E.ICoreBrowserService,Z),this._charSizeService=this._instantiationService.createInstance(x.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(E.ICharSizeService,this._charSizeService),this._theme=this.options.theme||this._theme,this._colorManager=new L.ColorManager(B,this.options.allowTransparency),this.register(this.optionsService.onOptionChange(function(ee){return D._colorManager.onOptionsChange(ee)})),this._colorManager.setTheme(this._theme),this._characterJoinerService=this._instantiationService.createInstance(K.CharacterJoinerService),this._instantiationService.setService(E.ICharacterJoinerService,this._characterJoinerService);var X=this._createRenderer();this._renderService=this.register(this._instantiationService.createInstance(k.RenderService,X,this.rows,this.screenElement)),this._instantiationService.setService(E.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(function(ee){return D._onRender.fire(ee)})),this.onResize(function(ee){return D._renderService.resize(ee.cols,ee.rows)}),this._compositionView=B.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(v.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(j),this._soundService=this._instantiationService.createInstance(a.SoundService),this._instantiationService.setService(E.ISoundService,this._soundService),this._mouseService=this._instantiationService.createInstance(R.MouseService),this._instantiationService.setService(E.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(o.Viewport,function(ee){return D.scrollLines(ee,!0,1)},this._viewportElement,this._viewportScrollArea,this.element),this.viewport.onThemeChange(this._colorManager.colors),this.register(this._inputHandler.onRequestSyncScrollBar(function(){return D.viewport.syncScrollArea()})),this.register(this.viewport),this.register(this.onCursorMove(function(){D._renderService.onCursorMove(),D._syncTextArea()})),this.register(this.onResize(function(){return D._renderService.onResize(D.cols,D.rows)})),this.register(this.onBlur(function(){return D._renderService.onBlur()})),this.register(this.onFocus(function(){return D._renderService.onFocus()})),this.register(this._renderService.onDimensionsChange(function(){return D.viewport.syncScrollArea()})),this._selectionService=this.register(this._instantiationService.createInstance(t.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(E.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(function(ee){return D.scrollLines(ee.amount,ee.suppressScrollEvent)})),this.register(this._selectionService.onSelectionChange(function(){return D._onSelectionChange.fire()})),this.register(this._selectionService.onRequestRedraw(function(ee){return D._renderService.onSelectionChanged(ee.start,ee.end,ee.columnSelectMode)})),this.register(this._selectionService.onLinuxMouseSelection(function(ee){D.textarea.value=ee,D.textarea.focus(),D.textarea.select()})),this.register(this._onScroll.event(function(ee){D.viewport.syncScrollArea(),D._selectionService.refresh()})),this.register((0,n.addDisposableDomListener)(this._viewportElement,"scroll",function(){return D._selectionService.refresh()})),this._mouseZoneManager=this._instantiationService.createInstance(g.MouseZoneManager,this.element,this.screenElement),this.register(this._mouseZoneManager),this.register(this.onScroll(function(){return D._mouseZoneManager.clearAll()})),this.linkifier.attachToDom(this.element,this._mouseZoneManager),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(A.BufferDecorationRenderer,this.screenElement)),this.register((0,n.addDisposableDomListener)(this.element,"mousedown",function(ee){return D._selectionService.onMouseDown(ee)})),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager=new S.AccessibilityManager(this,this._renderService)),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this._instantiationService.createInstance(Q.OverviewRulerRenderer,this._viewportElement,this.screenElement)),this.optionsService.onOptionChange(function(){!D._overviewRulerRenderer&&D.options.overviewRulerWidth&&D._viewportElement&&D.screenElement&&(D._overviewRulerRenderer=D._instantiationService.createInstance(Q.OverviewRulerRenderer,D._viewportElement,D.screenElement))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()},W.prototype._createRenderer=function(){switch(this.options.rendererType){case"canvas":return this._instantiationService.createInstance(i.Renderer,this._colorManager.colors,this.screenElement,this.linkifier,this.linkifier2);case"dom":return this._instantiationService.createInstance(y.DomRenderer,this._colorManager.colors,this.element,this.screenElement,this._viewportElement,this.linkifier,this.linkifier2);default:throw new Error('Unrecognized rendererType "'+this.options.rendererType+'"')}},W.prototype._setTheme=function(O){var D,j,Z;this._theme=O,(D=this._colorManager)===null||D===void 0||D.setTheme(O),(j=this._renderService)===null||j===void 0||j.setColors(this._colorManager.colors),(Z=this.viewport)===null||Z===void 0||Z.onThemeChange(this._colorManager.colors)},W.prototype.bindMouse=function(){var O=this,D=this,j=this.element;function Z(V){var fe,ye,xe=D._mouseService.getRawByteCoords(V,D.screenElement,D.cols,D.rows);if(!xe)return!1;switch(V.overrideType||V.type){case"mousemove":ye=32,V.buttons===void 0?(fe=3,V.button!==void 0&&(fe=V.button<3?V.button:3)):fe=1&V.buttons?0:4&V.buttons?1:2&V.buttons?2:3;break;case"mouseup":ye=0,fe=V.button<3?V.button:3;break;case"mousedown":ye=1,fe=V.button<3?V.button:3;break;case"wheel":if(D.viewport.getLinesScrolled(V)===0)return!1;ye=V.deltaY<0?0:1,fe=4;break;default:return!1}return!(ye===void 0||fe===void 0||fe>4)&&D.coreMouseService.triggerMouseEvent({col:xe.x-33,row:xe.y-33,button:fe,action:ye,ctrl:V.ctrlKey,alt:V.altKey,shift:V.shiftKey})}var X={mouseup:null,wheel:null,mousedrag:null,mousemove:null},ee=function(V){return Z(V),V.buttons||(O._document.removeEventListener("mouseup",X.mouseup),X.mousedrag&&O._document.removeEventListener("mousemove",X.mousedrag)),O.cancel(V)},ae=function(V){return Z(V),O.cancel(V,!0)},he=function(V){V.buttons&&Z(V)},ue=function(V){V.buttons||Z(V)};this.register(this.coreMouseService.onProtocolChange(function(V){V?(O.optionsService.rawOptions.logLevel==="debug"&&O._logService.debug("Binding to mouse events:",O.coreMouseService.explainEvents(V)),O.element.classList.add("enable-mouse-events"),O._selectionService.disable()):(O._logService.debug("Unbinding from mouse events."),O.element.classList.remove("enable-mouse-events"),O._selectionService.enable()),8&V?X.mousemove||(j.addEventListener("mousemove",ue),X.mousemove=ue):(j.removeEventListener("mousemove",X.mousemove),X.mousemove=null),16&V?X.wheel||(j.addEventListener("wheel",ae,{passive:!1}),X.wheel=ae):(j.removeEventListener("wheel",X.wheel),X.wheel=null),2&V?X.mouseup||(X.mouseup=ee):(O._document.removeEventListener("mouseup",X.mouseup),X.mouseup=null),4&V?X.mousedrag||(X.mousedrag=he):(O._document.removeEventListener("mousemove",X.mousedrag),X.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,n.addDisposableDomListener)(j,"mousedown",function(V){if(V.preventDefault(),O.focus(),O.coreMouseService.areMouseEventsActive&&!O._selectionService.shouldForceSelection(V))return Z(V),X.mouseup&&O._document.addEventListener("mouseup",X.mouseup),X.mousedrag&&O._document.addEventListener("mousemove",X.mousedrag),O.cancel(V)})),this.register((0,n.addDisposableDomListener)(j,"wheel",function(V){if(!X.wheel){if(!O.buffer.hasScrollback){var fe=O.viewport.getLinesScrolled(V);if(fe===0)return;for(var ye=p.C0.ESC+(O.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(V.deltaY<0?"A":"B"),xe="",je=0;je<Math.abs(fe);je++)xe+=ye;return O.coreService.triggerDataEvent(xe,!0),O.cancel(V,!0)}return O.viewport.onWheel(V)?O.cancel(V):void 0}},{passive:!1})),this.register((0,n.addDisposableDomListener)(j,"touchstart",function(V){if(!O.coreMouseService.areMouseEventsActive)return O.viewport.onTouchStart(V),O.cancel(V)},{passive:!0})),this.register((0,n.addDisposableDomListener)(j,"touchmove",function(V){if(!O.coreMouseService.areMouseEventsActive)return O.viewport.onTouchMove(V)?void 0:O.cancel(V)},{passive:!1}))},W.prototype.refresh=function(O,D){var j;(j=this._renderService)===null||j===void 0||j.refreshRows(O,D)},W.prototype._queueLinkification=function(O,D){var j;(j=this.linkifier)===null||j===void 0||j.linkifyRows(O,D)},W.prototype.updateCursorStyle=function(O){var D;!((D=this._selectionService)===null||D===void 0)&&D.shouldColumnSelect(O)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")},W.prototype._showCursor=function(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))},W.prototype.scrollLines=function(O,D,j){j===void 0&&(j=0),Y.prototype.scrollLines.call(this,O,D,j),this.refresh(0,this.rows-1)},W.prototype.paste=function(O){(0,s.paste)(O,this.textarea,this.coreService)},W.prototype.attachCustomKeyEventHandler=function(O){this._customKeyEventHandler=O},W.prototype.registerLinkMatcher=function(O,D,j){var Z=this.linkifier.registerLinkMatcher(O,D,j);return this.refresh(0,this.rows-1),Z},W.prototype.deregisterLinkMatcher=function(O){this.linkifier.deregisterLinkMatcher(O)&&this.refresh(0,this.rows-1)},W.prototype.registerLinkProvider=function(O){return this.linkifier2.registerLinkProvider(O)},W.prototype.registerCharacterJoiner=function(O){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");var D=this._characterJoinerService.register(O);return this.refresh(0,this.rows-1),D},W.prototype.deregisterCharacterJoiner=function(O){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(O)&&this.refresh(0,this.rows-1)},Object.defineProperty(W.prototype,"markers",{get:function(){return this.buffer.markers},enumerable:!1,configurable:!0}),W.prototype.addMarker=function(O){if(this.buffer===this.buffers.normal)return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+O)},W.prototype.registerDecoration=function(O){return this._decorationService.registerDecoration(O)},W.prototype.hasSelection=function(){return!!this._selectionService&&this._selectionService.hasSelection},W.prototype.select=function(O,D,j){this._selectionService.setSelection(O,D,j)},W.prototype.getSelection=function(){return this._selectionService?this._selectionService.selectionText:""},W.prototype.getSelectionPosition=function(){if(this._selectionService&&this._selectionService.hasSelection)return{startColumn:this._selectionService.selectionStart[0],startRow:this._selectionService.selectionStart[1],endColumn:this._selectionService.selectionEnd[0],endRow:this._selectionService.selectionEnd[1]}},W.prototype.clearSelection=function(){var O;(O=this._selectionService)===null||O===void 0||O.clearSelection()},W.prototype.selectAll=function(){var O;(O=this._selectionService)===null||O===void 0||O.selectAll()},W.prototype.selectLines=function(O,D){var j;(j=this._selectionService)===null||j===void 0||j.selectLines(O,D)},W.prototype._keyDown=function(O){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(O)===!1)return!1;var D=this.browser.isMac&&this.options.macOptionIsMeta&&O.altKey;if(!D&&!this._compositionHelper.keydown(O))return this.buffer.ybase!==this.buffer.ydisp&&this._bufferService.scrollToBottom(),!1;D||O.key!=="Dead"&&O.key!=="AltGraph"||(this._unprocessedDeadKey=!0);var j=(0,b.evaluateKeyboardEvent)(O,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(O),j.type===3||j.type===2){var Z=this.rows-1;return this.scrollLines(j.type===2?-Z:Z),this.cancel(O,!0)}return j.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,O)||(j.cancel&&this.cancel(O,!0),!j.key||!!(O.key&&!O.ctrlKey&&!O.altKey&&!O.metaKey&&O.key.length===1&&O.key.charCodeAt(0)>=65&&O.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(j.key!==p.C0.ETX&&j.key!==p.C0.CR||(this.textarea.value=""),this._onKey.fire({key:j.key,domEvent:O}),this._showCursor(),this.coreService.triggerDataEvent(j.key,!0),this.optionsService.rawOptions.screenReaderMode?void(this._keyDownHandled=!0):this.cancel(O,!0))))},W.prototype._isThirdLevelShift=function(O,D){var j=O.isMac&&!this.options.macOptionIsMeta&&D.altKey&&!D.ctrlKey&&!D.metaKey||O.isWindows&&D.altKey&&D.ctrlKey&&!D.metaKey||O.isWindows&&D.getModifierState("AltGraph");return D.type==="keypress"?j:j&&(!D.keyCode||D.keyCode>47)},W.prototype._keyUp=function(O){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(O)===!1||(function(D){return D.keyCode===16||D.keyCode===17||D.keyCode===18}(O)||this.focus(),this.updateCursorStyle(O),this._keyPressHandled=!1)},W.prototype._keyPress=function(O){var D;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(O)===!1)return!1;if(this.cancel(O),O.charCode)D=O.charCode;else if(O.which===null||O.which===void 0)D=O.keyCode;else{if(O.which===0||O.charCode===0)return!1;D=O.which}return!(!D||(O.altKey||O.ctrlKey||O.metaKey)&&!this._isThirdLevelShift(this.browser,O)||(D=String.fromCharCode(D),this._onKey.fire({key:D,domEvent:O}),this._showCursor(),this.coreService.triggerDataEvent(D,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))},W.prototype._inputEvent=function(O){if(O.data&&O.inputType==="insertText"&&(!O.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;var D=O.data;return this.coreService.triggerDataEvent(D,!0),this.cancel(O),!0}return!1},W.prototype.bell=function(){var O;this._soundBell()&&((O=this._soundService)===null||O===void 0||O.playBellSound()),this._onBell.fire()},W.prototype.resize=function(O,D){O!==this.cols||D!==this.rows?Y.prototype.resize.call(this,O,D):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()},W.prototype._afterResize=function(O,D){var j,Z;(j=this._charSizeService)===null||j===void 0||j.measure(),(Z=this.viewport)===null||Z===void 0||Z.syncScrollArea(!0)},W.prototype.clear=function(){if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(var O=1;O<this.rows;O++)this.buffer.lines.push(this.buffer.getBlankLine(M.DEFAULT_ATTR_DATA));this.refresh(0,this.rows-1),this._onScroll.fire({position:this.buffer.ydisp,source:0})}},W.prototype.reset=function(){var O,D;this.options.rows=this.rows,this.options.cols=this.cols;var j=this._customKeyEventHandler;this._setup(),Y.prototype.reset.call(this),(O=this._selectionService)===null||O===void 0||O.reset(),this._decorationService.reset(),this._customKeyEventHandler=j,this.refresh(0,this.rows-1),(D=this.viewport)===null||D===void 0||D.syncScrollArea()},W.prototype.clearTextureAtlas=function(){var O;(O=this._renderService)===null||O===void 0||O.clearTextureAtlas()},W.prototype._reportFocus=function(){var O;!((O=this.element)===null||O===void 0)&&O.classList.contains("focus")?this.coreService.triggerDataEvent(p.C0.ESC+"[I"):this.coreService.triggerDataEvent(p.C0.ESC+"[O")},W.prototype._reportWindowsOptions=function(O){if(this._renderService)switch(O){case h.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:var D=this._renderService.dimensions.scaledCanvasWidth.toFixed(0),j=this._renderService.dimensions.scaledCanvasHeight.toFixed(0);this.coreService.triggerDataEvent(p.C0.ESC+"[4;"+j+";"+D+"t");break;case h.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:var Z=this._renderService.dimensions.scaledCellWidth.toFixed(0),X=this._renderService.dimensions.scaledCellHeight.toFixed(0);this.coreService.triggerDataEvent(p.C0.ESC+"[6;"+X+";"+Z+"t")}},W.prototype.cancel=function(O,D){if(this.options.cancelEvents||D)return O.preventDefault(),O.stopPropagation(),!1},W.prototype._visualBell=function(){return!1},W.prototype._soundBell=function(){return this.options.bellStyle==="sound"},W}(N.CoreTerminal);c.Terminal=ne},9924:(H,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.TimeBasedDebouncer=void 0;var C=function(){function _(u,f){f===void 0&&(f=1e3),this._renderCallback=u,this._debounceThresholdMS=f,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}return _.prototype.dispose=function(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)},_.prototype.refresh=function(u,f,d){var m=this;this._rowCount=d,u=u!==void 0?u:0,f=f!==void 0?f:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,u):u,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,f):f;var v=Date.now();if(v-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=v,this._innerRefresh();else if(!this._additionalRefreshRequested){var o=v-this._lastRefreshMs,s=this._debounceThresholdMS-o;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(function(){m._lastRefreshMs=Date.now(),m._innerRefresh(),m._additionalRefreshRequested=!1,m._refreshTimeoutID=void 0},s)}},_.prototype._innerRefresh=function(){if(this._rowStart!==void 0&&this._rowEnd!==void 0&&this._rowCount!==void 0){var u=Math.max(this._rowStart,0),f=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(u,f)}},_}();c.TimeBasedDebouncer=C},1680:function(H,c,C){var _,u=this&&this.__extends||(_=function(h,i){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},_(h,i)},function(h,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function e(){this.constructor=h}_(h,i),h.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)}),f=this&&this.__decorate||function(h,i,e,t){var r,n=arguments.length,l=n<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(h,i,e,t);else for(var a=h.length-1;a>=0;a--)(r=h[a])&&(l=(n<3?r(l):n>3?r(i,e,l):r(i,e))||l);return n>3&&l&&Object.defineProperty(i,e,l),l},d=this&&this.__param||function(h,i){return function(e,t){i(e,t,h)}};Object.defineProperty(c,"__esModule",{value:!0}),c.Viewport=void 0;var m=C(844),v=C(3656),o=C(4725),s=C(2585),p=function(h){function i(e,t,r,n,l,a,g,S){var y=h.call(this)||this;return y._scrollLines=e,y._viewportElement=t,y._scrollArea=r,y._element=n,y._bufferService=l,y._optionsService=a,y._charSizeService=g,y._renderService=S,y.scrollBarWidth=0,y._currentRowHeight=0,y._currentScaledCellHeight=0,y._lastRecordedBufferLength=0,y._lastRecordedViewportHeight=0,y._lastRecordedBufferHeight=0,y._lastTouchY=0,y._lastScrollTop=0,y._wheelPartialScroll=0,y._refreshAnimationFrame=null,y._ignoreNextScrollEvent=!1,y.scrollBarWidth=y._viewportElement.offsetWidth-y._scrollArea.offsetWidth||15,y.register((0,v.addDisposableDomListener)(y._viewportElement,"scroll",y._onScroll.bind(y))),y._activeBuffer=y._bufferService.buffer,y.register(y._bufferService.buffers.onBufferActivate(function(b){return y._activeBuffer=b.activeBuffer})),y._renderDimensions=y._renderService.dimensions,y.register(y._renderService.onDimensionsChange(function(b){return y._renderDimensions=b})),setTimeout(function(){return y.syncScrollArea()},0),y}return u(i,h),i.prototype.onThemeChange=function(e){this._viewportElement.style.backgroundColor=e.background.css},i.prototype._refresh=function(e){var t=this;if(e)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=requestAnimationFrame(function(){return t._innerRefresh()}))},i.prototype._innerRefresh=function(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.scaledCellHeight/window.devicePixelRatio,this._currentScaledCellHeight=this._renderService.dimensions.scaledCellHeight,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;var e=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.canvasHeight);this._lastRecordedBufferHeight!==e&&(this._lastRecordedBufferHeight=e,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}var t=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==t&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=t),this._refreshAnimationFrame=null},i.prototype.syncScrollArea=function(e){if(e===void 0&&(e=!1),this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(e);this._lastRecordedViewportHeight===this._renderService.dimensions.canvasHeight&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.scaledCellHeight===this._currentScaledCellHeight||this._refresh(e)},i.prototype._onScroll=function(e){if(this._lastScrollTop=this._viewportElement.scrollTop,this._viewportElement.offsetParent){if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._scrollLines(0);var t=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._scrollLines(t)}},i.prototype._bubbleScroll=function(e,t){var r=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(t<0&&this._viewportElement.scrollTop!==0||t>0&&r<this._lastRecordedBufferHeight)||(e.cancelable&&e.preventDefault(),!1)},i.prototype.onWheel=function(e){var t=this._getPixelsScrolled(e);return t!==0&&(this._viewportElement.scrollTop+=t,this._bubbleScroll(e,t))},i.prototype._getPixelsScrolled=function(e){if(e.deltaY===0||e.shiftKey)return 0;var t=this._applyScrollModifier(e.deltaY,e);return e.deltaMode===WheelEvent.DOM_DELTA_LINE?t*=this._currentRowHeight:e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(t*=this._currentRowHeight*this._bufferService.rows),t},i.prototype.getLinesScrolled=function(e){if(e.deltaY===0||e.shiftKey)return 0;var t=this._applyScrollModifier(e.deltaY,e);return e.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(t/=this._currentRowHeight+0,this._wheelPartialScroll+=t,t=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(t*=this._bufferService.rows),t},i.prototype._applyScrollModifier=function(e,t){var r=this._optionsService.rawOptions.fastScrollModifier;return r==="alt"&&t.altKey||r==="ctrl"&&t.ctrlKey||r==="shift"&&t.shiftKey?e*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:e*this._optionsService.rawOptions.scrollSensitivity},i.prototype.onTouchStart=function(e){this._lastTouchY=e.touches[0].pageY},i.prototype.onTouchMove=function(e){var t=this._lastTouchY-e.touches[0].pageY;return this._lastTouchY=e.touches[0].pageY,t!==0&&(this._viewportElement.scrollTop+=t,this._bubbleScroll(e,t))},f([d(4,s.IBufferService),d(5,s.IOptionsService),d(6,o.ICharSizeService),d(7,o.IRenderService)],i)}(m.Disposable);c.Viewport=p},3107:function(H,c,C){var _,u=this&&this.__extends||(_=function(i,e){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])},_(i,e)},function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function t(){this.constructor=i}_(i,e),i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}),f=this&&this.__decorate||function(i,e,t,r){var n,l=arguments.length,a=l<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,r);else for(var g=i.length-1;g>=0;g--)(n=i[g])&&(a=(l<3?n(a):l>3?n(e,t,a):n(e,t))||a);return l>3&&a&&Object.defineProperty(e,t,a),a},d=this&&this.__param||function(i,e){return function(t,r){e(t,r,i)}},m=this&&this.__values||function(i){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&i[e],r=0;if(t)return t.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&r>=i.length&&(i=void 0),{value:i&&i[r++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(c,"__esModule",{value:!0}),c.BufferDecorationRenderer=void 0;var v=C(3656),o=C(4725),s=C(844),p=C(2585),h=function(i){function e(t,r,n,l){var a=i.call(this)||this;return a._screenElement=t,a._bufferService=r,a._decorationService=n,a._renderService=l,a._decorationElements=new Map,a._altBufferIsActive=!1,a._dimensionsChanged=!1,a._container=document.createElement("div"),a._container.classList.add("xterm-decoration-container"),a._screenElement.appendChild(a._container),a.register(a._renderService.onRenderedViewportChange(function(){return a._queueRefresh()})),a.register(a._renderService.onDimensionsChange(function(){a._dimensionsChanged=!0,a._queueRefresh()})),a.register((0,v.addDisposableDomListener)(window,"resize",function(){return a._queueRefresh()})),a.register(a._bufferService.buffers.onBufferActivate(function(){a._altBufferIsActive=a._bufferService.buffer===a._bufferService.buffers.alt})),a.register(a._decorationService.onDecorationRegistered(function(){return a._queueRefresh()})),a.register(a._decorationService.onDecorationRemoved(function(g){return a._removeDecoration(g)})),a}return u(e,i),e.prototype.dispose=function(){this._container.remove(),this._decorationElements.clear(),i.prototype.dispose.call(this)},e.prototype._queueRefresh=function(){var t=this;this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(function(){t.refreshDecorations(),t._animationFrame=void 0}))},e.prototype.refreshDecorations=function(){var t,r;try{for(var n=m(this._decorationService.decorations),l=n.next();!l.done;l=n.next()){var a=l.value;this._renderDecoration(a)}}catch(g){t={error:g}}finally{try{l&&!l.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}this._dimensionsChanged=!1},e.prototype._renderDecoration=function(t){this._refreshStyle(t),this._dimensionsChanged&&this._refreshXPosition(t)},e.prototype._createElement=function(t){var r,n=document.createElement("div");n.classList.add("xterm-decoration"),n.style.width=Math.round((t.options.width||1)*this._renderService.dimensions.actualCellWidth)+"px",n.style.height=(t.options.height||1)*this._renderService.dimensions.actualCellHeight+"px",n.style.top=(t.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.actualCellHeight+"px",n.style.lineHeight=this._renderService.dimensions.actualCellHeight+"px";var l=(r=t.options.x)!==null&&r!==void 0?r:0;return l&&l>this._bufferService.cols&&(n.style.display="none"),this._refreshXPosition(t,n),n},e.prototype._refreshStyle=function(t){var r=this,n=t.marker.line-this._bufferService.buffers.active.ydisp;if(n<0||n>=this._bufferService.rows)t.element&&(t.element.style.display="none",t.onRenderEmitter.fire(t.element));else{var l=this._decorationElements.get(t);l||(t.onDispose(function(){return r._removeDecoration(t)}),l=this._createElement(t),t.element=l,this._decorationElements.set(t,l),this._container.appendChild(l)),l.style.top=n*this._renderService.dimensions.actualCellHeight+"px",l.style.display=this._altBufferIsActive?"none":"block",t.onRenderEmitter.fire(l)}},e.prototype._refreshXPosition=function(t,r){var n;if(r===void 0&&(r=t.element),r){var l=(n=t.options.x)!==null&&n!==void 0?n:0;(t.options.anchor||"left")==="right"?r.style.right=l?l*this._renderService.dimensions.actualCellWidth+"px":"":r.style.left=l?l*this._renderService.dimensions.actualCellWidth+"px":""}},e.prototype._removeDecoration=function(t){var r;(r=this._decorationElements.get(t))===null||r===void 0||r.remove(),this._decorationElements.delete(t)},f([d(1,p.IBufferService),d(2,p.IDecorationService),d(3,o.IRenderService)],e)}(s.Disposable);c.BufferDecorationRenderer=h},5871:function(H,c){var C=this&&this.__values||function(u){var f=typeof Symbol=="function"&&Symbol.iterator,d=f&&u[f],m=0;if(d)return d.call(u);if(u&&typeof u.length=="number")return{next:function(){return u&&m>=u.length&&(u=void 0),{value:u&&u[m++],done:!u}}};throw new TypeError(f?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(c,"__esModule",{value:!0}),c.ColorZoneStore=void 0;var _=function(){function u(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}return Object.defineProperty(u.prototype,"zones",{get:function(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones},enumerable:!1,configurable:!0}),u.prototype.clear=function(){this._zones.length=0,this._zonePoolIndex=0},u.prototype.addDecoration=function(f){var d,m;if(f.options.overviewRulerOptions){try{for(var v=C(this._zones),o=v.next();!o.done;o=v.next()){var s=o.value;if(s.color===f.options.overviewRulerOptions.color&&s.position===f.options.overviewRulerOptions.position){if(this._lineIntersectsZone(s,f.marker.line))return;if(this._lineAdjacentToZone(s,f.marker.line,f.options.overviewRulerOptions.position))return void this._addLineToZone(s,f.marker.line)}}}catch(p){d={error:p}}finally{try{o&&!o.done&&(m=v.return)&&m.call(v)}finally{if(d)throw d.error}}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=f.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=f.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=f.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=f.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:f.options.overviewRulerOptions.color,position:f.options.overviewRulerOptions.position,startBufferLine:f.marker.line,endBufferLine:f.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}},u.prototype.setPadding=function(f){this._linePadding=f},u.prototype._lineIntersectsZone=function(f,d){return d>=f.startBufferLine&&d<=f.endBufferLine},u.prototype._lineAdjacentToZone=function(f,d,m){return d>=f.startBufferLine-this._linePadding[m||"full"]&&d<=f.endBufferLine+this._linePadding[m||"full"]},u.prototype._addLineToZone=function(f,d){f.startBufferLine=Math.min(f.startBufferLine,d),f.endBufferLine=Math.max(f.endBufferLine,d)},u}();c.ColorZoneStore=_},5744:function(H,c,C){var _,u=this&&this.__extends||(_=function(n,l){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,g){a.__proto__=g}||function(a,g){for(var S in g)Object.prototype.hasOwnProperty.call(g,S)&&(a[S]=g[S])},_(n,l)},function(n,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");function a(){this.constructor=n}_(n,l),n.prototype=l===null?Object.create(l):(a.prototype=l.prototype,new a)}),f=this&&this.__decorate||function(n,l,a,g){var S,y=arguments.length,b=y<3?l:g===null?g=Object.getOwnPropertyDescriptor(l,a):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(n,l,a,g);else for(var w=n.length-1;w>=0;w--)(S=n[w])&&(b=(y<3?S(b):y>3?S(l,a,b):S(l,a))||b);return y>3&&b&&Object.defineProperty(l,a,b),b},d=this&&this.__param||function(n,l){return function(a,g){l(a,g,n)}},m=this&&this.__values||function(n){var l=typeof Symbol=="function"&&Symbol.iterator,a=l&&n[l],g=0;if(a)return a.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&g>=n.length&&(n=void 0),{value:n&&n[g++],done:!n}}};throw new TypeError(l?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(c,"__esModule",{value:!0}),c.OverviewRulerRenderer=void 0;var v=C(5871),o=C(3656),s=C(4725),p=C(844),h=C(2585),i={full:0,left:0,center:0,right:0},e={full:0,left:0,center:0,right:0},t={full:0,left:0,center:0,right:0},r=function(n){function l(a,g,S,y,b,w){var M,L=n.call(this)||this;L._viewportElement=a,L._screenElement=g,L._bufferService=S,L._decorationService=y,L._renderService=b,L._optionsService=w,L._colorZoneStore=new v.ColorZoneStore,L._shouldUpdateDimensions=!0,L._shouldUpdateAnchor=!0,L._lastKnownBufferLength=0,L._canvas=document.createElement("canvas"),L._canvas.classList.add("xterm-decoration-overview-ruler"),L._refreshCanvasDimensions(),(M=L._viewportElement.parentElement)===null||M===void 0||M.insertBefore(L._canvas,L._viewportElement);var k=L._canvas.getContext("2d");if(!k)throw new Error("Ctx cannot be null");return L._ctx=k,L._registerDecorationListeners(),L._registerBufferChangeListeners(),L._registerDimensionChangeListeners(),L}return u(l,n),Object.defineProperty(l.prototype,"_width",{get:function(){return this._optionsService.options.overviewRulerWidth||0},enumerable:!1,configurable:!0}),l.prototype._registerDecorationListeners=function(){var a=this;this.register(this._decorationService.onDecorationRegistered(function(){return a._queueRefresh(void 0,!0)})),this.register(this._decorationService.onDecorationRemoved(function(){return a._queueRefresh(void 0,!0)}))},l.prototype._registerBufferChangeListeners=function(){var a=this;this.register(this._renderService.onRenderedViewportChange(function(){return a._queueRefresh()})),this.register(this._bufferService.buffers.onBufferActivate(function(){a._canvas.style.display=a._bufferService.buffer===a._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(function(){a._lastKnownBufferLength!==a._bufferService.buffers.normal.lines.length&&(a._refreshDrawHeightConstants(),a._refreshColorZonePadding())}))},l.prototype._registerDimensionChangeListeners=function(){var a=this;this.register(this._renderService.onRender(function(){a._containerHeight&&a._containerHeight===a._screenElement.clientHeight||(a._queueRefresh(!0),a._containerHeight=a._screenElement.clientHeight)})),this.register(this._optionsService.onOptionChange(function(g){g==="overviewRulerWidth"&&a._queueRefresh(!0)})),this.register((0,o.addDisposableDomListener)(window,"resize",function(){a._queueRefresh(!0)})),this._queueRefresh(!0)},l.prototype.dispose=function(){var a;(a=this._canvas)===null||a===void 0||a.remove(),n.prototype.dispose.call(this)},l.prototype._refreshDrawConstants=function(){var a=Math.floor(this._canvas.width/3),g=Math.ceil(this._canvas.width/3);e.full=this._canvas.width,e.left=a,e.center=g,e.right=a,this._refreshDrawHeightConstants(),t.full=0,t.left=0,t.center=e.left,t.right=e.left+e.center},l.prototype._refreshDrawHeightConstants=function(){i.full=Math.round(2*window.devicePixelRatio);var a=this._canvas.height/this._bufferService.buffer.lines.length,g=Math.round(Math.max(Math.min(a,12),6)*window.devicePixelRatio);i.left=g,i.center=g,i.right=g},l.prototype._refreshColorZonePadding=function(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*i.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*i.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*i.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*i.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length},l.prototype._refreshCanvasDimensions=function(){this._canvas.style.width=this._width+"px",this._canvas.width=Math.round(this._width*window.devicePixelRatio),this._canvas.style.height=this._screenElement.clientHeight+"px",this._canvas.height=Math.round(this._screenElement.clientHeight*window.devicePixelRatio),this._refreshDrawConstants(),this._refreshColorZonePadding()},l.prototype._refreshDecorations=function(){var a,g,S,y,b,w;this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();try{for(var M=m(this._decorationService.decorations),L=M.next();!L.done;L=M.next()){var k=L.value;this._colorZoneStore.addDecoration(k)}}catch(F){a={error:F}}finally{try{L&&!L.done&&(g=M.return)&&g.call(M)}finally{if(a)throw a.error}}this._ctx.lineWidth=1;var E=this._colorZoneStore.zones;try{for(var x=m(E),R=x.next();!R.done;R=x.next())(N=R.value).position!=="full"&&this._renderColorZone(N)}catch(F){S={error:F}}finally{try{R&&!R.done&&(y=x.return)&&y.call(x)}finally{if(S)throw S.error}}try{for(var T=m(E),q=T.next();!q.done;q=T.next()){var N;(N=q.value).position==="full"&&this._renderColorZone(N)}}catch(F){b={error:F}}finally{try{q&&!q.done&&(w=T.return)&&w.call(T)}finally{if(b)throw b.error}}this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1},l.prototype._renderColorZone=function(a){this._ctx.fillStyle=a.color,this._ctx.fillRect(t[a.position||"full"],Math.round((this._canvas.height-1)*(a.startBufferLine/this._bufferService.buffers.active.lines.length)-i[a.position||"full"]/2),e[a.position||"full"],Math.round((this._canvas.height-1)*((a.endBufferLine-a.startBufferLine)/this._bufferService.buffers.active.lines.length)+i[a.position||"full"]))},l.prototype._queueRefresh=function(a,g){var S=this;this._shouldUpdateDimensions=a||this._shouldUpdateDimensions,this._shouldUpdateAnchor=g||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=window.requestAnimationFrame(function(){S._refreshDecorations(),S._animationFrame=void 0}))},f([d(2,h.IBufferService),d(3,h.IDecorationService),d(4,s.IRenderService),d(5,h.IOptionsService)],l)}(p.Disposable);c.OverviewRulerRenderer=r},2950:function(H,c,C){var _=this&&this.__decorate||function(v,o,s,p){var h,i=arguments.length,e=i<3?o:p===null?p=Object.getOwnPropertyDescriptor(o,s):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")e=Reflect.decorate(v,o,s,p);else for(var t=v.length-1;t>=0;t--)(h=v[t])&&(e=(i<3?h(e):i>3?h(o,s,e):h(o,s))||e);return i>3&&e&&Object.defineProperty(o,s,e),e},u=this&&this.__param||function(v,o){return function(s,p){o(s,p,v)}};Object.defineProperty(c,"__esModule",{value:!0}),c.CompositionHelper=void 0;var f=C(4725),d=C(2585),m=function(){function v(o,s,p,h,i,e){this._textarea=o,this._compositionView=s,this._bufferService=p,this._optionsService=h,this._coreService=i,this._renderService=e,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}return Object.defineProperty(v.prototype,"isComposing",{get:function(){return this._isComposing},enumerable:!1,configurable:!0}),v.prototype.compositionstart=function(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")},v.prototype.compositionupdate=function(o){var s=this;this._compositionView.textContent=o.data,this.updateCompositionElements(),setTimeout(function(){s._compositionPosition.end=s._textarea.value.length},0)},v.prototype.compositionend=function(){this._finalizeComposition(!0)},v.prototype.keydown=function(o){if(this._isComposing||this._isSendingComposition){if(o.keyCode===229||o.keyCode===16||o.keyCode===17||o.keyCode===18)return!1;this._finalizeComposition(!1)}return o.keyCode!==229||(this._handleAnyTextareaChanges(),!1)},v.prototype._finalizeComposition=function(o){var s=this;if(this._compositionView.classList.remove("active"),this._isComposing=!1,o){var p={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(function(){if(s._isSendingComposition){s._isSendingComposition=!1;var i;p.start+=s._dataAlreadySent.length,(i=s._isComposing?s._textarea.value.substring(p.start,p.end):s._textarea.value.substring(p.start)).length>0&&s._coreService.triggerDataEvent(i,!0)}},0)}else{this._isSendingComposition=!1;var h=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(h,!0)}},v.prototype._handleAnyTextareaChanges=function(){var o=this,s=this._textarea.value;setTimeout(function(){if(!o._isComposing){var p=o._textarea.value.replace(s,"");p.length>0&&(o._dataAlreadySent=p,o._coreService.triggerDataEvent(p,!0))}},0)},v.prototype.updateCompositionElements=function(o){var s=this;if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){var p=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),h=this._renderService.dimensions.actualCellHeight,i=this._bufferService.buffer.y*this._renderService.dimensions.actualCellHeight,e=p*this._renderService.dimensions.actualCellWidth;this._compositionView.style.left=e+"px",this._compositionView.style.top=i+"px",this._compositionView.style.height=h+"px",this._compositionView.style.lineHeight=h+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";var t=this._compositionView.getBoundingClientRect();this._textarea.style.left=e+"px",this._textarea.style.top=i+"px",this._textarea.style.width=Math.max(t.width,1)+"px",this._textarea.style.height=Math.max(t.height,1)+"px",this._textarea.style.lineHeight=t.height+"px"}o||setTimeout(function(){return s.updateCompositionElements(!0)},0)}},_([u(2,d.IBufferService),u(3,d.IOptionsService),u(4,d.ICoreService),u(5,f.IRenderService)],v)}();c.CompositionHelper=m},9806:(H,c)=>{function C(_,u,f){var d=f.getBoundingClientRect(),m=_.getComputedStyle(f),v=parseInt(m.getPropertyValue("padding-left")),o=parseInt(m.getPropertyValue("padding-top"));return[u.clientX-d.left-v,u.clientY-d.top-o]}Object.defineProperty(c,"__esModule",{value:!0}),c.getRawByteCoords=c.getCoords=c.getCoordsRelativeToElement=void 0,c.getCoordsRelativeToElement=C,c.getCoords=function(_,u,f,d,m,v,o,s,p){if(v){var h=C(_,u,f);if(h)return h[0]=Math.ceil((h[0]+(p?o/2:0))/o),h[1]=Math.ceil(h[1]/s),h[0]=Math.min(Math.max(h[0],1),d+(p?1:0)),h[1]=Math.min(Math.max(h[1],1),m),h}},c.getRawByteCoords=function(_){if(_)return{x:_[0]+32,y:_[1]+32}}},9504:(H,c,C)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.moveToCellSequence=void 0;var _=C(2584);function u(s,p,h,i){var e=s-f(h,s),t=p-f(h,p),r=Math.abs(e-t)-function(n,l,a){for(var g=0,S=n-f(a,n),y=l-f(a,l),b=0;b<Math.abs(S-y);b++){var w=d(n,l)==="A"?-1:1,M=a.buffer.lines.get(S+w*b);M!=null&&M.isWrapped&&g++}return g}(s,p,h);return o(r,v(d(s,p),i))}function f(s,p){for(var h=0,i=s.buffer.lines.get(p),e=i==null?void 0:i.isWrapped;e&&p>=0&&p<s.rows;)h++,e=(i=s.buffer.lines.get(--p))==null?void 0:i.isWrapped;return h}function d(s,p){return s>p?"A":"B"}function m(s,p,h,i,e,t){for(var r=s,n=p,l="";r!==h||n!==i;)r+=e?1:-1,e&&r>t.cols-1?(l+=t.buffer.translateBufferLineToString(n,!1,s,r),r=0,s=0,n++):!e&&r<0&&(l+=t.buffer.translateBufferLineToString(n,!1,0,s+1),s=r=t.cols-1,n--);return l+t.buffer.translateBufferLineToString(n,!1,s,r)}function v(s,p){var h=p?"O":"[";return _.C0.ESC+h+s}function o(s,p){s=Math.floor(s);for(var h="",i=0;i<s;i++)h+=p;return h}c.moveToCellSequence=function(s,p,h,i){var e,t=h.buffer.x,r=h.buffer.y;if(!h.buffer.hasScrollback)return function(l,a,g,S,y,b){return u(a,S,y,b).length===0?"":o(m(l,a,l,a-f(y,a),!1,y).length,v("D",b))}(t,r,0,p,h,i)+u(r,p,h,i)+function(l,a,g,S,y,b){var w;w=u(a,S,y,b).length>0?S-f(y,S):a;var M=S,L=function(k,E,x,R,T,q){var N;return N=u(x,R,T,q).length>0?R-f(T,R):E,k<x&&N<=R||k>=x&&N<R?"C":"D"}(l,a,g,S,y,b);return o(m(l,w,g,M,L==="C",y).length,v(L,b))}(t,r,s,p,h,i);if(r===p)return e=t>s?"D":"C",o(Math.abs(t-s),v(e,i));e=r>p?"D":"C";var n=Math.abs(r-p);return o(function(l,a){return a.cols-l}(r>p?s:t,h)+(n-1)*h.cols+1+((r>p?t:s)-1),v(e,i))}},4389:function(H,c,C){var _=this&&this.__assign||function(){return _=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++)for(var n in e=arguments[t])Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n]);return i},_.apply(this,arguments)},u=this&&this.__values||function(i){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&i[e],r=0;if(t)return t.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&r>=i.length&&(i=void 0),{value:i&&i[r++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(c,"__esModule",{value:!0}),c.Terminal=void 0;var f=C(3236),d=C(9042),m=C(7975),v=C(7090),o=C(5741),s=C(8285),p=["cols","rows"],h=function(){function i(e){var t=this;this._core=new f.Terminal(e),this._addonManager=new o.AddonManager,this._publicOptions=_({},this._core.options);var r=function(g){return t._core.options[g]},n=function(g,S){t._checkReadonlyOptions(g),t._core.options[g]=S};for(var l in this._core.options){var a={get:r.bind(this,l),set:n.bind(this,l)};Object.defineProperty(this._publicOptions,l,a)}}return i.prototype._checkReadonlyOptions=function(e){if(p.includes(e))throw new Error('Option "'+e+'" can only be set in the constructor')},i.prototype._checkProposedApi=function(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")},Object.defineProperty(i.prototype,"onBell",{get:function(){return this._core.onBell},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onBinary",{get:function(){return this._core.onBinary},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onCursorMove",{get:function(){return this._core.onCursorMove},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onData",{get:function(){return this._core.onData},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onKey",{get:function(){return this._core.onKey},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onLineFeed",{get:function(){return this._core.onLineFeed},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onRender",{get:function(){return this._core.onRender},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onResize",{get:function(){return this._core.onResize},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onScroll",{get:function(){return this._core.onScroll},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onSelectionChange",{get:function(){return this._core.onSelectionChange},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onTitleChange",{get:function(){return this._core.onTitleChange},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onWriteParsed",{get:function(){return this._core.onWriteParsed},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"element",{get:function(){return this._core.element},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"parser",{get:function(){return this._checkProposedApi(),this._parser||(this._parser=new m.ParserApi(this._core)),this._parser},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"unicode",{get:function(){return this._checkProposedApi(),new v.UnicodeApi(this._core)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textarea",{get:function(){return this._core.textarea},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rows",{get:function(){return this._core.rows},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cols",{get:function(){return this._core.cols},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"buffer",{get:function(){return this._checkProposedApi(),this._buffer||(this._buffer=new s.BufferNamespaceApi(this._core)),this._buffer},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"markers",{get:function(){return this._checkProposedApi(),this._core.markers},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"modes",{get:function(){var e=this._core.coreService.decPrivateModes,t="none";switch(this._core.coreMouseService.activeProtocol){case"X10":t="x10";break;case"VT200":t="vt200";break;case"DRAG":t="drag";break;case"ANY":t="any"}return{applicationCursorKeysMode:e.applicationCursorKeys,applicationKeypadMode:e.applicationKeypad,bracketedPasteMode:e.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:t,originMode:e.origin,reverseWraparoundMode:e.reverseWraparound,sendFocusMode:e.sendFocus,wraparoundMode:e.wraparound}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"options",{get:function(){return this._publicOptions},set:function(e){for(var t in e)this._publicOptions[t]=e[t]},enumerable:!1,configurable:!0}),i.prototype.blur=function(){this._core.blur()},i.prototype.focus=function(){this._core.focus()},i.prototype.resize=function(e,t){this._verifyIntegers(e,t),this._core.resize(e,t)},i.prototype.open=function(e){this._core.open(e)},i.prototype.attachCustomKeyEventHandler=function(e){this._core.attachCustomKeyEventHandler(e)},i.prototype.registerLinkMatcher=function(e,t,r){return this._checkProposedApi(),this._core.registerLinkMatcher(e,t,r)},i.prototype.deregisterLinkMatcher=function(e){this._checkProposedApi(),this._core.deregisterLinkMatcher(e)},i.prototype.registerLinkProvider=function(e){return this._checkProposedApi(),this._core.registerLinkProvider(e)},i.prototype.registerCharacterJoiner=function(e){return this._checkProposedApi(),this._core.registerCharacterJoiner(e)},i.prototype.deregisterCharacterJoiner=function(e){this._checkProposedApi(),this._core.deregisterCharacterJoiner(e)},i.prototype.registerMarker=function(e){return e===void 0&&(e=0),this._checkProposedApi(),this._verifyIntegers(e),this._core.addMarker(e)},i.prototype.registerDecoration=function(e){var t,r,n;return this._checkProposedApi(),this._verifyPositiveIntegers((t=e.x)!==null&&t!==void 0?t:0,(r=e.width)!==null&&r!==void 0?r:0,(n=e.height)!==null&&n!==void 0?n:0),this._core.registerDecoration(e)},i.prototype.addMarker=function(e){return this.registerMarker(e)},i.prototype.hasSelection=function(){return this._core.hasSelection()},i.prototype.select=function(e,t,r){this._verifyIntegers(e,t,r),this._core.select(e,t,r)},i.prototype.getSelection=function(){return this._core.getSelection()},i.prototype.getSelectionPosition=function(){return this._core.getSelectionPosition()},i.prototype.clearSelection=function(){this._core.clearSelection()},i.prototype.selectAll=function(){this._core.selectAll()},i.prototype.selectLines=function(e,t){this._verifyIntegers(e,t),this._core.selectLines(e,t)},i.prototype.dispose=function(){this._addonManager.dispose(),this._core.dispose()},i.prototype.scrollLines=function(e){this._verifyIntegers(e),this._core.scrollLines(e)},i.prototype.scrollPages=function(e){this._verifyIntegers(e),this._core.scrollPages(e)},i.prototype.scrollToTop=function(){this._core.scrollToTop()},i.prototype.scrollToBottom=function(){this._core.scrollToBottom()},i.prototype.scrollToLine=function(e){this._verifyIntegers(e),this._core.scrollToLine(e)},i.prototype.clear=function(){this._core.clear()},i.prototype.write=function(e,t){this._core.write(e,t)},i.prototype.writeUtf8=function(e,t){this._core.write(e,t)},i.prototype.writeln=function(e,t){this._core.write(e),this._core.write(`\r
`,t)},i.prototype.paste=function(e){this._core.paste(e)},i.prototype.getOption=function(e){return this._core.optionsService.getOption(e)},i.prototype.setOption=function(e,t){this._checkReadonlyOptions(e),this._core.optionsService.setOption(e,t)},i.prototype.refresh=function(e,t){this._verifyIntegers(e,t),this._core.refresh(e,t)},i.prototype.reset=function(){this._core.reset()},i.prototype.clearTextureAtlas=function(){this._core.clearTextureAtlas()},i.prototype.loadAddon=function(e){return this._addonManager.loadAddon(this,e)},Object.defineProperty(i,"strings",{get:function(){return d},enumerable:!1,configurable:!0}),i.prototype._verifyIntegers=function(){for(var e,t,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];try{for(var l=u(r),a=l.next();!a.done;a=l.next()){var g=a.value;if(g===1/0||isNaN(g)||g%1!=0)throw new Error("This API only accepts integers")}}catch(S){e={error:S}}finally{try{a&&!a.done&&(t=l.return)&&t.call(l)}finally{if(e)throw e.error}}},i.prototype._verifyPositiveIntegers=function(){for(var e,t,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];try{for(var l=u(r),a=l.next();!a.done;a=l.next()){var g=a.value;if(g&&(g===1/0||isNaN(g)||g%1!=0||g<0))throw new Error("This API only accepts positive integers")}}catch(S){e={error:S}}finally{try{a&&!a.done&&(t=l.return)&&t.call(l)}finally{if(e)throw e.error}}},i}();c.Terminal=h},1546:function(H,c,C){var _=this&&this.__values||function(i){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&i[e],r=0;if(t)return t.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&r>=i.length&&(i=void 0),{value:i&&i[r++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(c,"__esModule",{value:!0}),c.BaseRenderLayer=void 0;var u=C(643),f=C(8803),d=C(1420),m=C(3734),v=C(1752),o=C(8055),s=C(9631),p=C(8978),h=function(){function i(e,t,r,n,l,a,g,S,y){this._container=e,this._alpha=n,this._colors=l,this._rendererId=a,this._bufferService=g,this._optionsService=S,this._decorationService=y,this._scaledCharWidth=0,this._scaledCharHeight=0,this._scaledCellWidth=0,this._scaledCellHeight=0,this._scaledCharLeft=0,this._scaledCharTop=0,this._columnSelectMode=!1,this._currentGlyphIdentifier={chars:"",code:0,bg:0,fg:0,bold:!1,dim:!1,italic:!1},this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-"+t+"-layer"),this._canvas.style.zIndex=r.toString(),this._initCanvas(),this._container.appendChild(this._canvas)}return i.prototype.dispose=function(){var e;(0,s.removeElementFromParent)(this._canvas),(e=this._charAtlas)===null||e===void 0||e.dispose()},i.prototype._initCanvas=function(){this._ctx=(0,v.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()},i.prototype.onOptionsChanged=function(){},i.prototype.onBlur=function(){},i.prototype.onFocus=function(){},i.prototype.onCursorMove=function(){},i.prototype.onGridChanged=function(e,t){},i.prototype.onSelectionChanged=function(e,t,r){r===void 0&&(r=!1),this._selectionStart=e,this._selectionEnd=t,this._columnSelectMode=r},i.prototype.setColors=function(e){this._refreshCharAtlas(e)},i.prototype._setTransparency=function(e){if(e!==this._alpha){var t=this._canvas;this._alpha=e,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,t),this._refreshCharAtlas(this._colors),this.onGridChanged(0,this._bufferService.rows-1)}},i.prototype._refreshCharAtlas=function(e){this._scaledCharWidth<=0&&this._scaledCharHeight<=0||(this._charAtlas=(0,d.acquireCharAtlas)(this._optionsService.rawOptions,this._rendererId,e,this._scaledCharWidth,this._scaledCharHeight),this._charAtlas.warmUp())},i.prototype.resize=function(e){this._scaledCellWidth=e.scaledCellWidth,this._scaledCellHeight=e.scaledCellHeight,this._scaledCharWidth=e.scaledCharWidth,this._scaledCharHeight=e.scaledCharHeight,this._scaledCharLeft=e.scaledCharLeft,this._scaledCharTop=e.scaledCharTop,this._canvas.width=e.scaledCanvasWidth,this._canvas.height=e.scaledCanvasHeight,this._canvas.style.width=e.canvasWidth+"px",this._canvas.style.height=e.canvasHeight+"px",this._alpha||this._clearAll(),this._refreshCharAtlas(this._colors)},i.prototype.clearTextureAtlas=function(){var e;(e=this._charAtlas)===null||e===void 0||e.clear()},i.prototype._fillCells=function(e,t,r,n){this._ctx.fillRect(e*this._scaledCellWidth,t*this._scaledCellHeight,r*this._scaledCellWidth,n*this._scaledCellHeight)},i.prototype._fillMiddleLineAtCells=function(e,t,r){r===void 0&&(r=1);var n=Math.ceil(.5*this._scaledCellHeight);this._ctx.fillRect(e*this._scaledCellWidth,(t+1)*this._scaledCellHeight-n-window.devicePixelRatio,r*this._scaledCellWidth,window.devicePixelRatio)},i.prototype._fillBottomLineAtCells=function(e,t,r){r===void 0&&(r=1),this._ctx.fillRect(e*this._scaledCellWidth,(t+1)*this._scaledCellHeight-window.devicePixelRatio-1,r*this._scaledCellWidth,window.devicePixelRatio)},i.prototype._fillLeftLineAtCell=function(e,t,r){this._ctx.fillRect(e*this._scaledCellWidth,t*this._scaledCellHeight,window.devicePixelRatio*r,this._scaledCellHeight)},i.prototype._strokeRectAtCell=function(e,t,r,n){this._ctx.lineWidth=window.devicePixelRatio,this._ctx.strokeRect(e*this._scaledCellWidth+window.devicePixelRatio/2,t*this._scaledCellHeight+window.devicePixelRatio/2,r*this._scaledCellWidth-window.devicePixelRatio,n*this._scaledCellHeight-window.devicePixelRatio)},i.prototype._clearAll=function(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))},i.prototype._clearCells=function(e,t,r,n){this._alpha?this._ctx.clearRect(e*this._scaledCellWidth,t*this._scaledCellHeight,r*this._scaledCellWidth,n*this._scaledCellHeight):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(e*this._scaledCellWidth,t*this._scaledCellHeight,r*this._scaledCellWidth,n*this._scaledCellHeight))},i.prototype._fillCharTrueColor=function(e,t,r){this._ctx.font=this._getFont(!1,!1),this._ctx.textBaseline=f.TEXT_BASELINE,this._clipRow(r);var n=!1;this._optionsService.rawOptions.customGlyphs!==!1&&(n=(0,p.tryDrawCustomChar)(this._ctx,e.getChars(),t*this._scaledCellWidth,r*this._scaledCellHeight,this._scaledCellWidth,this._scaledCellHeight)),n||this._ctx.fillText(e.getChars(),t*this._scaledCellWidth+this._scaledCharLeft,r*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight)},i.prototype._drawChars=function(e,t,r){var n,l,a,g=this._getContrastColor(e,t,r);if(g||e.isFgRGB()||e.isBgRGB())this._drawUncachedChars(e,t,r,g);else{var S,y;e.isInverse()?(S=e.isBgDefault()?f.INVERTED_DEFAULT_COLOR:e.getBgColor(),y=e.isFgDefault()?f.INVERTED_DEFAULT_COLOR:e.getFgColor()):(y=e.isBgDefault()?u.DEFAULT_COLOR:e.getBgColor(),S=e.isFgDefault()?u.DEFAULT_COLOR:e.getFgColor()),S+=this._optionsService.rawOptions.drawBoldTextInBrightColors&&e.isBold()&&S<8?8:0,this._currentGlyphIdentifier.chars=e.getChars()||u.WHITESPACE_CELL_CHAR,this._currentGlyphIdentifier.code=e.getCode()||u.WHITESPACE_CELL_CODE,this._currentGlyphIdentifier.bg=y,this._currentGlyphIdentifier.fg=S,this._currentGlyphIdentifier.bold=!!e.isBold(),this._currentGlyphIdentifier.dim=!!e.isDim(),this._currentGlyphIdentifier.italic=!!e.isItalic();var b=!1;try{for(var w=_(this._decorationService.getDecorationsAtCell(t,r)),M=w.next();!M.done;M=w.next()){var L=M.value;if(L.backgroundColorRGB||L.foregroundColorRGB){b=!0;break}}}catch(k){n={error:k}}finally{try{M&&!M.done&&(l=w.return)&&l.call(w)}finally{if(n)throw n.error}}!b&&(!((a=this._charAtlas)===null||a===void 0)&&a.draw(this._ctx,this._currentGlyphIdentifier,t*this._scaledCellWidth+this._scaledCharLeft,r*this._scaledCellHeight+this._scaledCharTop))||this._drawUncachedChars(e,t,r)}},i.prototype._drawUncachedChars=function(e,t,r,n){if(this._ctx.save(),this._ctx.font=this._getFont(!!e.isBold(),!!e.isItalic()),this._ctx.textBaseline=f.TEXT_BASELINE,e.isInverse())if(n)this._ctx.fillStyle=n.css;else if(e.isBgDefault())this._ctx.fillStyle=o.color.opaque(this._colors.background).css;else if(e.isBgRGB())this._ctx.fillStyle="rgb("+m.AttributeData.toColorRGB(e.getBgColor()).join(",")+")";else{var l=e.getBgColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&e.isBold()&&l<8&&(l+=8),this._ctx.fillStyle=this._colors.ansi[l].css}else if(n)this._ctx.fillStyle=n.css;else if(e.isFgDefault())this._ctx.fillStyle=this._colors.foreground.css;else if(e.isFgRGB())this._ctx.fillStyle="rgb("+m.AttributeData.toColorRGB(e.getFgColor()).join(",")+")";else{var a=e.getFgColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&e.isBold()&&a<8&&(a+=8),this._ctx.fillStyle=this._colors.ansi[a].css}this._clipRow(r),e.isDim()&&(this._ctx.globalAlpha=f.DIM_OPACITY);var g=!1;this._optionsService.rawOptions.customGlyphs!==!1&&(g=(0,p.tryDrawCustomChar)(this._ctx,e.getChars(),t*this._scaledCellWidth,r*this._scaledCellHeight,this._scaledCellWidth,this._scaledCellHeight)),g||this._ctx.fillText(e.getChars(),t*this._scaledCellWidth+this._scaledCharLeft,r*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight),this._ctx.restore()},i.prototype._clipRow=function(e){this._ctx.beginPath(),this._ctx.rect(0,e*this._scaledCellHeight,this._bufferService.cols*this._scaledCellWidth,this._scaledCellHeight),this._ctx.clip()},i.prototype._getFont=function(e,t){return(t?"italic":"")+" "+(e?this._optionsService.rawOptions.fontWeightBold:this._optionsService.rawOptions.fontWeight)+" "+this._optionsService.rawOptions.fontSize*window.devicePixelRatio+"px "+this._optionsService.rawOptions.fontFamily},i.prototype._getContrastColor=function(e,t,r){var n,l,a,g,S=!1;try{for(var y=_(this._decorationService.getDecorationsAtCell(t,r)),b=y.next();!b.done;b=y.next()){var w=b.value;w.options.layer!=="top"&&S||(w.backgroundColorRGB&&(a=w.backgroundColorRGB.rgba),w.foregroundColorRGB&&(g=w.foregroundColorRGB.rgba),S=w.options.layer==="top")}}catch(Q){n={error:Q}}finally{try{b&&!b.done&&(l=y.return)&&l.call(y)}finally{if(n)throw n.error}}if(S||this._colors.selectionForeground&&this._isCellInSelection(t,r)&&(g=this._colors.selectionForeground.rgba),a||g||this._optionsService.rawOptions.minimumContrastRatio!==1&&!(0,v.excludeFromContrastRatioDemands)(e.getCode())){if(!a&&!g){var M=this._colors.contrastCache.getColor(e.bg,e.fg);if(M!==void 0)return M||void 0}var L=e.getFgColor(),k=e.getFgColorMode(),E=e.getBgColor(),x=e.getBgColorMode(),R=!!e.isInverse(),T=!!e.isInverse();if(R){var q=L;L=E,E=q;var N=k;k=x,x=N}var F=this._resolveBackgroundRgba(a!==void 0?50331648:x,a??E,R),K=this._resolveForegroundRgba(k,L,R,T),z=o.rgba.ensureContrastRatio(a??F,g??K,this._optionsService.rawOptions.minimumContrastRatio);if(!z){if(!g)return void this._colors.contrastCache.setColor(e.bg,e.fg,null);z=g}var A={css:o.channels.toCss(z>>24&255,z>>16&255,z>>8&255),rgba:z};return a||g||this._colors.contrastCache.setColor(e.bg,e.fg,A),A}},i.prototype._resolveBackgroundRgba=function(e,t,r){switch(e){case 16777216:case 33554432:return this._colors.ansi[t].rgba;case 50331648:return t<<8;default:return r?this._colors.foreground.rgba:this._colors.background.rgba}},i.prototype._resolveForegroundRgba=function(e,t,r,n){switch(e){case 16777216:case 33554432:return this._optionsService.rawOptions.drawBoldTextInBrightColors&&n&&t<8&&(t+=8),this._colors.ansi[t].rgba;case 50331648:return t<<8;default:return r?this._colors.background.rgba:this._colors.foreground.rgba}},i.prototype._isCellInSelection=function(e,t){var r=this._selectionStart,n=this._selectionEnd;return!(!r||!n)&&(this._columnSelectMode?e>=r[0]&&t>=r[1]&&e<n[0]&&t<n[1]:t>r[1]&&t<n[1]||r[1]===n[1]&&t===r[1]&&e>=r[0]&&e<n[0]||r[1]<n[1]&&t===n[1]&&e<n[0]||r[1]<n[1]&&t===r[1]&&e>=r[0])},i}();c.BaseRenderLayer=h},2512:function(H,c,C){var _,u=this&&this.__extends||(_=function(e,t){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(r[l]=n[l])},_(e,t)},function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}_(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}),f=this&&this.__decorate||function(e,t,r,n){var l,a=arguments.length,g=a<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(e,t,r,n);else for(var S=e.length-1;S>=0;S--)(l=e[S])&&(g=(a<3?l(g):a>3?l(t,r,g):l(t,r))||g);return a>3&&g&&Object.defineProperty(t,r,g),g},d=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(c,"__esModule",{value:!0}),c.CursorRenderLayer=void 0;var m=C(1546),v=C(511),o=C(2585),s=C(4725),p=600,h=function(e){function t(r,n,l,a,g,S,y,b,w,M){var L=e.call(this,r,"cursor",n,!0,l,a,S,y,M)||this;return L._onRequestRedraw=g,L._coreService=b,L._coreBrowserService=w,L._cell=new v.CellData,L._state={x:0,y:0,isFocused:!1,style:"",width:0},L._cursorRenderers={bar:L._renderBarCursor.bind(L),block:L._renderBlockCursor.bind(L),underline:L._renderUnderlineCursor.bind(L)},L}return u(t,e),t.prototype.dispose=function(){this._cursorBlinkStateManager&&(this._cursorBlinkStateManager.dispose(),this._cursorBlinkStateManager=void 0),e.prototype.dispose.call(this)},t.prototype.resize=function(r){e.prototype.resize.call(this,r),this._state={x:0,y:0,isFocused:!1,style:"",width:0}},t.prototype.reset=function(){var r;this._clearCursor(),(r=this._cursorBlinkStateManager)===null||r===void 0||r.restartBlinkAnimation(),this.onOptionsChanged()},t.prototype.onBlur=function(){var r;(r=this._cursorBlinkStateManager)===null||r===void 0||r.pause(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},t.prototype.onFocus=function(){var r;(r=this._cursorBlinkStateManager)===null||r===void 0||r.resume(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},t.prototype.onOptionsChanged=function(){var r,n=this;this._optionsService.rawOptions.cursorBlink?this._cursorBlinkStateManager||(this._cursorBlinkStateManager=new i(this._coreBrowserService.isFocused,function(){n._render(!0)})):((r=this._cursorBlinkStateManager)===null||r===void 0||r.dispose(),this._cursorBlinkStateManager=void 0),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},t.prototype.onCursorMove=function(){var r;(r=this._cursorBlinkStateManager)===null||r===void 0||r.restartBlinkAnimation()},t.prototype.onGridChanged=function(r,n){!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isPaused?this._render(!1):this._cursorBlinkStateManager.restartBlinkAnimation()},t.prototype._render=function(r){if(this._coreService.isCursorInitialized&&!this._coreService.isCursorHidden){var n=this._bufferService.buffer.ybase+this._bufferService.buffer.y,l=n-this._bufferService.buffer.ydisp;if(l<0||l>=this._bufferService.rows)this._clearCursor();else{var a=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1);if(this._bufferService.buffer.lines.get(n).loadCell(a,this._cell),this._cell.content!==void 0){if(!this._coreBrowserService.isFocused){this._clearCursor(),this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css;var g=this._optionsService.rawOptions.cursorStyle;return g&&g!=="block"?this._cursorRenderers[g](a,l,this._cell):this._renderBlurCursor(a,l,this._cell),this._ctx.restore(),this._state.x=a,this._state.y=l,this._state.isFocused=!1,this._state.style=g,void(this._state.width=this._cell.getWidth())}if(!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isCursorVisible){if(this._state){if(this._state.x===a&&this._state.y===l&&this._state.isFocused===this._coreBrowserService.isFocused&&this._state.style===this._optionsService.rawOptions.cursorStyle&&this._state.width===this._cell.getWidth())return;this._clearCursor()}this._ctx.save(),this._cursorRenderers[this._optionsService.rawOptions.cursorStyle||"block"](a,l,this._cell),this._ctx.restore(),this._state.x=a,this._state.y=l,this._state.isFocused=!1,this._state.style=this._optionsService.rawOptions.cursorStyle,this._state.width=this._cell.getWidth()}else this._clearCursor()}}}else this._clearCursor()},t.prototype._clearCursor=function(){this._state&&(window.devicePixelRatio<1?this._clearAll():this._clearCells(this._state.x,this._state.y,this._state.width,1),this._state={x:0,y:0,isFocused:!1,style:"",width:0})},t.prototype._renderBarCursor=function(r,n,l){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillLeftLineAtCell(r,n,this._optionsService.rawOptions.cursorWidth),this._ctx.restore()},t.prototype._renderBlockCursor=function(r,n,l){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillCells(r,n,l.getWidth(),1),this._ctx.fillStyle=this._colors.cursorAccent.css,this._fillCharTrueColor(l,r,n),this._ctx.restore()},t.prototype._renderUnderlineCursor=function(r,n,l){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillBottomLineAtCells(r,n),this._ctx.restore()},t.prototype._renderBlurCursor=function(r,n,l){this._ctx.save(),this._ctx.strokeStyle=this._colors.cursor.css,this._strokeRectAtCell(r,n,l.getWidth(),1),this._ctx.restore()},f([d(5,o.IBufferService),d(6,o.IOptionsService),d(7,o.ICoreService),d(8,s.ICoreBrowserService),d(9,o.IDecorationService)],t)}(m.BaseRenderLayer);c.CursorRenderLayer=h;var i=function(){function e(t,r){this._renderCallback=r,this.isCursorVisible=!0,t&&this._restartInterval()}return Object.defineProperty(e.prototype,"isPaused",{get:function(){return!(this._blinkStartTimeout||this._blinkInterval)},enumerable:!1,configurable:!0}),e.prototype.dispose=function(){this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},e.prototype.restartBlinkAnimation=function(){var t=this;this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){t._renderCallback(),t._animationFrame=void 0})))},e.prototype._restartInterval=function(t){var r=this;t===void 0&&(t=p),this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=window.setTimeout(function(){if(r._animationTimeRestarted){var n=p-(Date.now()-r._animationTimeRestarted);if(r._animationTimeRestarted=void 0,n>0)return void r._restartInterval(n)}r.isCursorVisible=!1,r._animationFrame=window.requestAnimationFrame(function(){r._renderCallback(),r._animationFrame=void 0}),r._blinkInterval=window.setInterval(function(){if(r._animationTimeRestarted){var l=p-(Date.now()-r._animationTimeRestarted);return r._animationTimeRestarted=void 0,void r._restartInterval(l)}r.isCursorVisible=!r.isCursorVisible,r._animationFrame=window.requestAnimationFrame(function(){r._renderCallback(),r._animationFrame=void 0})},p)},t)},e.prototype.pause=function(){this.isCursorVisible=!0,this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},e.prototype.resume=function(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()},e}()},8978:function(H,c,C){var _,u,f,d,m,v,o,s,p,h,i,e,t,r,n,l,a,g,S,y,b,w,M,L,k,E,x,R,T,q,N,F,K,z,A,Q,J,oe,B,ne,Y,W,O,D,j,Z,X,ee,ae,he,ue,V,fe,ye,xe,je,Nt,zt,Kt,Vt,Gt,Zt,Ve,Ge,Ze,Xe,Ye,Je,Qe,$e,et,tt,rt,it,nt,ot,st,at,ct,lt,ht,ut,ft,dt,_t,pt,vt,gt,yt,mt,bt,St,Ct,wt,Lt,xt,Et,kt,Mt,At,Rt,Ot,Dt,Tt,Bt,Pt,It,Ht,jt,Ft,Wt,Ut,Xt,Yt,Jt,Qt,$t,er,tr,rr,ir,nr,or,sr,ar,cr,lr,hr,pr=this&&this.__read||function(P,I){var le=typeof Symbol=="function"&&P[Symbol.iterator];if(!le)return P;var me,Ee,Se=le.call(P),ce=[];try{for(;(I===void 0||I-- >0)&&!(me=Se.next()).done;)ce.push(me.value)}catch(Ce){Ee={error:Ce}}finally{try{me&&!me.done&&(le=Se.return)&&le.call(Se)}finally{if(Ee)throw Ee.error}}return ce},ur=this&&this.__values||function(P){var I=typeof Symbol=="function"&&Symbol.iterator,le=I&&P[I],me=0;if(le)return le.call(P);if(P&&typeof P.length=="number")return{next:function(){return P&&me>=P.length&&(P=void 0),{value:P&&P[me++],done:!P}}};throw new TypeError(I?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(c,"__esModule",{value:!0}),c.tryDrawCustomChar=c.powerlineDefinitions=c.boxDrawingDefinitions=c.blockElementDefinitions=void 0;var vr=C(1752);c.blockElementDefinitions={"â":[{x:0,y:0,w:8,h:4}],"â":[{x:0,y:7,w:8,h:1}],"â":[{x:0,y:6,w:8,h:2}],"â":[{x:0,y:5,w:8,h:3}],"â":[{x:0,y:4,w:8,h:4}],"â":[{x:0,y:3,w:8,h:5}],"â":[{x:0,y:2,w:8,h:6}],"â":[{x:0,y:1,w:8,h:7}],"â":[{x:0,y:0,w:8,h:8}],"â":[{x:0,y:0,w:7,h:8}],"â":[{x:0,y:0,w:6,h:8}],"â":[{x:0,y:0,w:5,h:8}],"â":[{x:0,y:0,w:4,h:8}],"â":[{x:0,y:0,w:3,h:8}],"â":[{x:0,y:0,w:2,h:8}],"â":[{x:0,y:0,w:1,h:8}],"â":[{x:4,y:0,w:4,h:8}],"â":[{x:0,y:0,w:9,h:1}],"â":[{x:7,y:0,w:1,h:8}],"â":[{x:0,y:4,w:4,h:4}],"â":[{x:4,y:4,w:4,h:4}],"â":[{x:0,y:0,w:4,h:4}],"â":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"â":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"â":[{x:0,y:0,w:4,h:8},{x:0,y:0,w:4,h:8}],"â":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"â":[{x:4,y:0,w:4,h:4}],"â":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"â":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"ð­°":[{x:1,y:0,w:1,h:8}],"ð­±":[{x:2,y:0,w:1,h:8}],"ð­²":[{x:3,y:0,w:1,h:8}],"ð­³":[{x:4,y:0,w:1,h:8}],"ð­´":[{x:5,y:0,w:1,h:8}],"ð­µ":[{x:6,y:0,w:1,h:8}],"ð­¶":[{x:0,y:1,w:8,h:1}],"ð­·":[{x:0,y:2,w:8,h:1}],"ð­¸":[{x:0,y:3,w:8,h:1}],"ð­¹":[{x:0,y:4,w:8,h:1}],"ð­º":[{x:0,y:5,w:8,h:1}],"ð­»":[{x:0,y:6,w:8,h:1}],"ð­¼":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"ð­½":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"ð­¾":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"ð­¿":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"ð®":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"ð®":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"ð®":[{x:0,y:0,w:8,h:2}],"ð®":[{x:0,y:0,w:8,h:3}],"ð®":[{x:0,y:0,w:8,h:5}],"ð®":[{x:0,y:0,w:8,h:6}],"ð®":[{x:0,y:0,w:8,h:7}],"ð®":[{x:6,y:0,w:2,h:8}],"ð®":[{x:5,y:0,w:3,h:8}],"ð®":[{x:3,y:0,w:5,h:8}],"ð®":[{x:2,y:0,w:6,h:8}],"ð®":[{x:1,y:0,w:7,h:8}],"ð®":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"ð®":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"ð®":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};var Ar={"â":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"â":[[1,0],[0,0],[0,1],[0,0]],"â":[[0,1],[1,1],[1,0],[1,1]]};c.boxDrawingDefinitions={"â":(_={},_[1]="M0,.5 L1,.5",_),"â":(u={},u[3]="M0,.5 L1,.5",u),"â":(f={},f[1]="M.5,0 L.5,1",f),"â":(d={},d[3]="M.5,0 L.5,1",d),"â":(m={},m[1]="M0.5,1 L.5,.5 L1,.5",m),"â":(v={},v[3]="M0.5,1 L.5,.5 L1,.5",v),"â":(o={},o[1]="M0,.5 L.5,.5 L.5,1",o),"â":(s={},s[3]="M0,.5 L.5,.5 L.5,1",s),"â":(p={},p[1]="M.5,0 L.5,.5 L1,.5",p),"â":(h={},h[3]="M.5,0 L.5,.5 L1,.5",h),"â":(i={},i[1]="M.5,0 L.5,.5 L0,.5",i),"â":(e={},e[3]="M.5,0 L.5,.5 L0,.5",e),"â":(t={},t[1]="M.5,0 L.5,1 M.5,.5 L1,.5",t),"â£":(r={},r[3]="M.5,0 L.5,1 M.5,.5 L1,.5",r),"â¤":(n={},n[1]="M.5,0 L.5,1 M.5,.5 L0,.5",n),"â«":(l={},l[3]="M.5,0 L.5,1 M.5,.5 L0,.5",l),"â¬":(a={},a[1]="M0,.5 L1,.5 M.5,.5 L.5,1",a),"â³":(g={},g[3]="M0,.5 L1,.5 M.5,.5 L.5,1",g),"â´":(S={},S[1]="M0,.5 L1,.5 M.5,.5 L.5,0",S),"â»":(y={},y[3]="M0,.5 L1,.5 M.5,.5 L.5,0",y),"â¼":(b={},b[1]="M0,.5 L1,.5 M.5,0 L.5,1",b),"â":(w={},w[3]="M0,.5 L1,.5 M.5,0 L.5,1",w),"â´":(M={},M[1]="M.5,.5 L0,.5",M),"â¸":(L={},L[3]="M.5,.5 L0,.5",L),"âµ":(k={},k[1]="M.5,.5 L.5,0",k),"â¹":(E={},E[3]="M.5,.5 L.5,0",E),"â¶":(x={},x[1]="M.5,.5 L1,.5",x),"âº":(R={},R[3]="M.5,.5 L1,.5",R),"â·":(T={},T[1]="M.5,.5 L.5,1",T),"â»":(q={},q[3]="M.5,.5 L.5,1",q),"â":(N={},N[1]=function(P,I){return"M0,"+(.5-I)+" L1,"+(.5-I)+" M0,"+(.5+I)+" L1,"+(.5+I)},N),"â":(F={},F[1]=function(P,I){return"M"+(.5-P)+",0 L"+(.5-P)+",1 M"+(.5+P)+",0 L"+(.5+P)+",1"},F),"â":(K={},K[1]=function(P,I){return"M.5,1 L.5,"+(.5-I)+" L1,"+(.5-I)+" M.5,"+(.5+I)+" L1,"+(.5+I)},K),"â":(z={},z[1]=function(P,I){return"M"+(.5-P)+",1 L"+(.5-P)+",.5 L1,.5 M"+(.5+P)+",.5 L"+(.5+P)+",1"},z),"â":(A={},A[1]=function(P,I){return"M1,"+(.5-I)+" L"+(.5-P)+","+(.5-I)+" L"+(.5-P)+",1 M1,"+(.5+I)+" L"+(.5+P)+","+(.5+I)+" L"+(.5+P)+",1"},A),"â":(Q={},Q[1]=function(P,I){return"M0,"+(.5-I)+" L.5,"+(.5-I)+" L.5,1 M0,"+(.5+I)+" L.5,"+(.5+I)},Q),"â":(J={},J[1]=function(P,I){return"M"+(.5+P)+",1 L"+(.5+P)+",.5 L0,.5 M"+(.5-P)+",.5 L"+(.5-P)+",1"},J),"â":(oe={},oe[1]=function(P,I){return"M0,"+(.5+I)+" L"+(.5-P)+","+(.5+I)+" L"+(.5-P)+",1 M0,"+(.5-I)+" L"+(.5+P)+","+(.5-I)+" L"+(.5+P)+",1"},oe),"â":(B={},B[1]=function(P,I){return"M.5,0 L.5,"+(.5+I)+" L1,"+(.5+I)+" M.5,"+(.5-I)+" L1,"+(.5-I)},B),"â":(ne={},ne[1]=function(P,I){return"M1,.5 L"+(.5-P)+",.5 L"+(.5-P)+",0 M"+(.5+P)+",.5 L"+(.5+P)+",0"},ne),"â":(Y={},Y[1]=function(P,I){return"M1,"+(.5-I)+" L"+(.5+P)+","+(.5-I)+" L"+(.5+P)+",0 M1,"+(.5+I)+" L"+(.5-P)+","+(.5+I)+" L"+(.5-P)+",0"},Y),"â":(W={},W[1]=function(P,I){return"M0,"+(.5+I)+" L.5,"+(.5+I)+" L.5,0 M0,"+(.5-I)+" L.5,"+(.5-I)},W),"â":(O={},O[1]=function(P,I){return"M0,.5 L"+(.5+P)+",.5 L"+(.5+P)+",0 M"+(.5-P)+",.5 L"+(.5-P)+",0"},O),"â":(D={},D[1]=function(P,I){return"M0,"+(.5-I)+" L"+(.5-P)+","+(.5-I)+" L"+(.5-P)+",0 M0,"+(.5+I)+" L"+(.5+P)+","+(.5+I)+" L"+(.5+P)+",0"},D),"â":(j={},j[1]=function(P,I){return"M.5,0 L.5,1 M.5,"+(.5-I)+" L1,"+(.5-I)+" M.5,"+(.5+I)+" L1,"+(.5+I)},j),"â":(Z={},Z[1]=function(P,I){return"M"+(.5-P)+",0 L"+(.5-P)+",1 M"+(.5+P)+",0 L"+(.5+P)+",1 M"+(.5+P)+",.5 L1,.5"},Z),"â ":(X={},X[1]=function(P,I){return"M"+(.5-P)+",0 L"+(.5-P)+",1 M1,"+(.5+I)+" L"+(.5+P)+","+(.5+I)+" L"+(.5+P)+",1 M1,"+(.5-I)+" L"+(.5+P)+","+(.5-I)+" L"+(.5+P)+",0"},X),"â¡":(ee={},ee[1]=function(P,I){return"M.5,0 L.5,1 M0,"+(.5-I)+" L.5,"+(.5-I)+" M0,"+(.5+I)+" L.5,"+(.5+I)},ee),"â¢":(ae={},ae[1]=function(P,I){return"M0,.5 L"+(.5-P)+",.5 M"+(.5-P)+",0 L"+(.5-P)+",1 M"+(.5+P)+",0 L"+(.5+P)+",1"},ae),"â£":(he={},he[1]=function(P,I){return"M"+(.5+P)+",0 L"+(.5+P)+",1 M0,"+(.5+I)+" L"+(.5-P)+","+(.5+I)+" L"+(.5-P)+",1 M0,"+(.5-I)+" L"+(.5-P)+","+(.5-I)+" L"+(.5-P)+",0"},he),"â¤":(ue={},ue[1]=function(P,I){return"M0,"+(.5-I)+" L1,"+(.5-I)+" M0,"+(.5+I)+" L1,"+(.5+I)+" M.5,"+(.5+I)+" L.5,1"},ue),"â¥":(V={},V[1]=function(P,I){return"M0,.5 L1,.5 M"+(.5-P)+",.5 L"+(.5-P)+",1 M"+(.5+P)+",.5 L"+(.5+P)+",1"},V),"â¦":(fe={},fe[1]=function(P,I){return"M0,"+(.5-I)+" L1,"+(.5-I)+" M0,"+(.5+I)+" L"+(.5-P)+","+(.5+I)+" L"+(.5-P)+",1 M1,"+(.5+I)+" L"+(.5+P)+","+(.5+I)+" L"+(.5+P)+",1"},fe),"â§":(ye={},ye[1]=function(P,I){return"M.5,0 L.5,"+(.5-I)+" M0,"+(.5-I)+" L1,"+(.5-I)+" M0,"+(.5+I)+" L1,"+(.5+I)},ye),"â¨":(xe={},xe[1]=function(P,I){return"M0,.5 L1,.5 M"+(.5-P)+",.5 L"+(.5-P)+",0 M"+(.5+P)+",.5 L"+(.5+P)+",0"},xe),"â©":(je={},je[1]=function(P,I){return"M0,"+(.5+I)+" L1,"+(.5+I)+" M0,"+(.5-I)+" L"+(.5-P)+","+(.5-I)+" L"+(.5-P)+",0 M1,"+(.5-I)+" L"+(.5+P)+","+(.5-I)+" L"+(.5+P)+",0"},je),"âª":(Nt={},Nt[1]=function(P,I){return"M.5,0 L.5,1 M0,"+(.5-I)+" L1,"+(.5-I)+" M0,"+(.5+I)+" L1,"+(.5+I)},Nt),"â«":(zt={},zt[1]=function(P,I){return"M0,.5 L1,.5 M"+(.5-P)+",0 L"+(.5-P)+",1 M"+(.5+P)+",0 L"+(.5+P)+",1"},zt),"â¬":(Kt={},Kt[1]=function(P,I){return"M0,"+(.5+I)+" L"+(.5-P)+","+(.5+I)+" L"+(.5-P)+",1 M1,"+(.5+I)+" L"+(.5+P)+","+(.5+I)+" L"+(.5+P)+",1 M0,"+(.5-I)+" L"+(.5-P)+","+(.5-I)+" L"+(.5-P)+",0 M1,"+(.5-I)+" L"+(.5+P)+","+(.5-I)+" L"+(.5+P)+",0"},Kt),"â±":(Vt={},Vt[1]="M1,0 L0,1",Vt),"â²":(Gt={},Gt[1]="M0,0 L1,1",Gt),"â³":(Zt={},Zt[1]="M1,0 L0,1 M0,0 L1,1",Zt),"â¼":(Ve={},Ve[1]="M.5,.5 L0,.5",Ve[3]="M.5,.5 L1,.5",Ve),"â½":(Ge={},Ge[1]="M.5,.5 L.5,0",Ge[3]="M.5,.5 L.5,1",Ge),"â¾":(Ze={},Ze[1]="M.5,.5 L1,.5",Ze[3]="M.5,.5 L0,.5",Ze),"â¿":(Xe={},Xe[1]="M.5,.5 L.5,1",Xe[3]="M.5,.5 L.5,0",Xe),"â":(Ye={},Ye[1]="M.5,.5 L.5,1",Ye[3]="M.5,.5 L1,.5",Ye),"â":(Je={},Je[1]="M.5,.5 L1,.5",Je[3]="M.5,.5 L.5,1",Je),"â":(Qe={},Qe[1]="M.5,.5 L.5,1",Qe[3]="M.5,.5 L0,.5",Qe),"â":($e={},$e[1]="M.5,.5 L0,.5",$e[3]="M.5,.5 L.5,1",$e),"â":(et={},et[1]="M.5,.5 L.5,0",et[3]="M.5,.5 L1,.5",et),"â":(tt={},tt[1]="M.5,.5 L1,.5",tt[3]="M.5,.5 L.5,0",tt),"â":(rt={},rt[1]="M.5,.5 L.5,0",rt[3]="M.5,.5 L0,.5",rt),"â":(it={},it[1]="M.5,.5 L0,.5",it[3]="M.5,.5 L.5,0",it),"â":(nt={},nt[1]="M.5,0 L.5,1",nt[3]="M.5,.5 L1,.5",nt),"â":(ot={},ot[1]="M0.5,1 L.5,.5 L1,.5",ot[3]="M.5,.5 L.5,0",ot),"â":(st={},st[1]="M.5,0 L.5,.5 L1,.5",st[3]="M.5,.5 L.5,1",st),"â ":(at={},at[1]="M.5,.5 L1,.5",at[3]="M.5,0 L.5,1",at),"â¡":(ct={},ct[1]="M.5,.5 L.5,1",ct[3]="M.5,0 L.5,.5 L1,.5",ct),"â¢":(lt={},lt[1]="M.5,.5 L.5,0",lt[3]="M0.5,1 L.5,.5 L1,.5",lt),"â¥":(ht={},ht[1]="M.5,0 L.5,1",ht[3]="M.5,.5 L0,.5",ht),"â¦":(ut={},ut[1]="M0,.5 L.5,.5 L.5,1",ut[3]="M.5,.5 L.5,0",ut),"â§":(ft={},ft[1]="M.5,0 L.5,.5 L0,.5",ft[3]="M.5,.5 L.5,1",ft),"â¨":(dt={},dt[1]="M.5,.5 L0,.5",dt[3]="M.5,0 L.5,1",dt),"â©":(_t={},_t[1]="M.5,.5 L.5,1",_t[3]="M.5,0 L.5,.5 L0,.5",_t),"âª":(pt={},pt[1]="M.5,.5 L.5,0",pt[3]="M0,.5 L.5,.5 L.5,1",pt),"â­":(vt={},vt[1]="M0.5,1 L.5,.5 L1,.5",vt[3]="M.5,.5 L0,.5",vt),"â®":(gt={},gt[1]="M0,.5 L.5,.5 L.5,1",gt[3]="M.5,.5 L1,.5",gt),"â¯":(yt={},yt[1]="M.5,.5 L.5,1",yt[3]="M0,.5 L1,.5",yt),"â°":(mt={},mt[1]="M0,.5 L1,.5",mt[3]="M.5,.5 L.5,1",mt),"â±":(bt={},bt[1]="M.5,.5 L1,.5",bt[3]="M0,.5 L.5,.5 L.5,1",bt),"â²":(St={},St[1]="M.5,.5 L0,.5",St[3]="M0.5,1 L.5,.5 L1,.5",St),"âµ":(Ct={},Ct[1]="M.5,0 L.5,.5 L1,.5",Ct[3]="M.5,.5 L0,.5",Ct),"â¶":(wt={},wt[1]="M.5,0 L.5,.5 L0,.5",wt[3]="M.5,.5 L1,.5",wt),"â·":(Lt={},Lt[1]="M.5,.5 L.5,0",Lt[3]="M0,.5 L1,.5",Lt),"â¸":(xt={},xt[1]="M0,.5 L1,.5",xt[3]="M.5,.5 L.5,0",xt),"â¹":(Et={},Et[1]="M.5,.5 L1,.5",Et[3]="M.5,0 L.5,.5 L0,.5",Et),"âº":(kt={},kt[1]="M.5,.5 L0,.5",kt[3]="M.5,0 L.5,.5 L1,.5",kt),"â½":(Mt={},Mt[1]="M.5,0 L.5,1 M.5,.5 L1,.5",Mt[3]="M.5,.5 L0,.5",Mt),"â¾":(At={},At[1]="M.5,0 L.5,1 M.5,.5 L0,.5",At[3]="M.5,.5 L1,.5",At),"â¿":(Rt={},Rt[1]="M.5,0 L.5,1",Rt[3]="M0,.5 L1,.5",Rt),"â":(Ot={},Ot[1]="M0,.5 L1,.5 M.5,.5 L.5,1",Ot[3]="M.5,.5 L.5,0",Ot),"â":(Dt={},Dt[1]="M.5,.5 L.5,0 M0,.5 L1,.5",Dt[3]="M.5,.5 L.5,1",Dt),"â":(Tt={},Tt[1]="M0,.5 L1,.5",Tt[3]="M.5,0 L.5,1",Tt),"â":(Bt={},Bt[1]="M0.5,1 L.5,.5 L1,.5",Bt[3]="M.5,0 L.5,.5 L0,.5",Bt),"â":(Pt={},Pt[1]="M0,.5 L.5,.5 L.5,1",Pt[3]="M.5,0 L.5,.5 L1,.5",Pt),"â":(It={},It[1]="M.5,0 L.5,.5 L1,.5",It[3]="M0,.5 L.5,.5 L.5,1",It),"â":(Ht={},Ht[1]="M.5,0 L.5,.5 L0,.5",Ht[3]="M0.5,1 L.5,.5 L1,.5",Ht),"â":(jt={},jt[1]="M.5,.5 L.5,1",jt[3]="M.5,.5 L.5,0 M0,.5 L1,.5",jt),"â":(Ft={},Ft[1]="M.5,.5 L.5,0",Ft[3]="M0,.5 L1,.5 M.5,.5 L.5,1",Ft),"â":(Wt={},Wt[1]="M.5,.5 L1,.5",Wt[3]="M.5,0 L.5,1 M.5,.5 L0,.5",Wt),"â":(Ut={},Ut[1]="M.5,.5 L0,.5",Ut[3]="M.5,0 L.5,1 M.5,.5 L1,.5",Ut),"â":(Xt={},Xt[1]="M.1,.5 L.4,.5 M.6,.5 L.9,.5",Xt),"â":(Yt={},Yt[3]="M.1,.5 L.4,.5 M.6,.5 L.9,.5",Yt),"â":(Jt={},Jt[1]="M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5",Jt),"â":(Qt={},Qt[3]="M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5",Qt),"â":($t={},$t[1]="M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5",$t),"â":(er={},er[3]="M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5",er),"â":(tr={},tr[1]="M.5,.1 L.5,.4 M.5,.6 L.5,.9",tr),"â":(rr={},rr[3]="M.5,.1 L.5,.4 M.5,.6 L.5,.9",rr),"â":(ir={},ir[1]="M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333",ir),"â":(nr={},nr[3]="M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333",nr),"â":(or={},or[1]="M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95",or),"â":(sr={},sr[3]="M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95",sr),"â­":(ar={},ar[1]="C.5,1,.5,.5,1,.5",ar),"â®":(cr={},cr[1]="C.5,1,.5,.5,0,.5",cr),"â¯":(lr={},lr[1]="C.5,0,.5,.5,0,.5",lr),"â°":(hr={},hr[1]="C.5,0,.5,.5,1,.5",hr)},c.powerlineDefinitions={"î°":{d:"M0,0 L1,.5 L0,1",type:0},"î±":{d:"M0,0 L1,.5 L0,1",type:1,horizontalPadding:.5},"î²":{d:"M1,0 L0,.5 L1,1",type:0},"î³":{d:"M1,0 L0,.5 L1,1",type:1,horizontalPadding:.5}},c.tryDrawCustomChar=function(P,I,le,me,Ee,Se){var ce=c.blockElementDefinitions[I];if(ce)return function(se,be,Pe,Ie,De,Te){for(var _e=0;_e<be.length;_e++){var pe=be[_e],ie=De/8,ve=Te/8;se.fillRect(Pe+pe.x*ie,Ie+pe.y*ve,pe.w*ie,pe.h*ve)}}(P,ce,le,me,Ee,Se),!0;var Ce=Ar[I];if(Ce)return function(se,be,Pe,Ie,De,Te){var _e,pe=gr.get(be);pe||(pe=new Map,gr.set(be,pe));var ie=se.fillStyle;if(typeof ie!="string")throw new Error('Unexpected fillStyle type "'+ie+'"');var ve=pe.get(ie);if(!ve){var ge=be[0].length,we=be.length,Me=document.createElement("canvas");Me.width=ge,Me.height=we;var He=(0,vr.throwIfFalsy)(Me.getContext("2d")),Le=new ImageData(ge,we),Fe=void 0,Be=void 0,Oe=void 0,We=void 0;if(ie.startsWith("#"))Fe=parseInt(ie.slice(1,3),16),Be=parseInt(ie.slice(3,5),16),Oe=parseInt(ie.slice(5,7),16),We=ie.length>7&&parseInt(ie.slice(7,9),16)||1;else{if(!ie.startsWith("rgba"))throw new Error('Unexpected fillStyle color format "'+ie+'" when drawing pattern glyph');Fe=(_e=pr(ie.substring(5,ie.length-1).split(",").map(function(ze){return parseFloat(ze)}),4))[0],Be=_e[1],Oe=_e[2],We=_e[3]}for(var Ae=0;Ae<we;Ae++)for(var Re=0;Re<ge;Re++)Le.data[4*(Ae*ge+Re)]=Fe,Le.data[4*(Ae*ge+Re)+1]=Be,Le.data[4*(Ae*ge+Re)+2]=Oe,Le.data[4*(Ae*ge+Re)+3]=be[Ae][Re]*(255*We);He.putImageData(Le,0,0),ve=(0,vr.throwIfFalsy)(se.createPattern(Me,null)),pe.set(ie,ve)}se.fillStyle=ve,se.fillRect(Pe,Ie,De,Te)}(P,Ce,le,me,Ee,Se),!0;var ke=c.boxDrawingDefinitions[I];if(ke)return function(se,be,Pe,Ie,De,Te){var _e,pe,ie,ve;se.strokeStyle=se.fillStyle;try{for(var ge=ur(Object.entries(be)),we=ge.next();!we.done;we=ge.next()){var Me=pr(we.value,2),He=Me[0],Le=Me[1];se.beginPath(),se.lineWidth=window.devicePixelRatio*Number.parseInt(He);var Fe=void 0;Fe=typeof Le=="function"?Le(.15,.15/Te*De):Le;try{for(var Be=(ie=void 0,ur(Fe.split(" "))),Oe=Be.next();!Oe.done;Oe=Be.next()){var We=Oe.value,Ae=We[0],Re=mr[Ae];if(Re){var ze=We.substring(1).split(",");ze[0]&&ze[1]&&Re(se,br(ze,De,Te,Pe,Ie))}else console.error('Could not find drawing instructions for "'+Ae+'"')}}catch(fr){ie={error:fr}}finally{try{Oe&&!Oe.done&&(ve=Be.return)&&ve.call(Be)}finally{if(ie)throw ie.error}}se.stroke(),se.closePath()}}catch(fr){_e={error:fr}}finally{try{we&&!we.done&&(pe=ge.return)&&pe.call(ge)}finally{if(_e)throw _e.error}}}(P,ke,le,me,Ee,Se),!0;var Ne=c.powerlineDefinitions[I];return!!Ne&&(function(se,be,Pe,Ie,De,Te){var _e,pe;se.beginPath(),se.lineWidth=window.devicePixelRatio;try{for(var ie=ur(be.d.split(" ")),ve=ie.next();!ve.done;ve=ie.next()){var ge=ve.value,we=ge[0],Me=mr[we];if(Me){var He=ge.substring(1).split(",");He[0]&&He[1]&&Me(se,br(He,De,Te,Pe,Ie,be.horizontalPadding))}else console.error('Could not find drawing instructions for "'+we+'"')}}catch(Le){_e={error:Le}}finally{try{ve&&!ve.done&&(pe=ie.return)&&pe.call(ie)}finally{if(_e)throw _e.error}}be.type===1?(se.strokeStyle=se.fillStyle,se.stroke()):se.fill(),se.closePath()}(P,Ne,le,me,Ee,Se),!0)};var gr=new Map;function yr(P,I,le){return le===void 0&&(le=0),Math.max(Math.min(P,I),le)}var mr={C:function(P,I){return P.bezierCurveTo(I[0],I[1],I[2],I[3],I[4],I[5])},L:function(P,I){return P.lineTo(I[0],I[1])},M:function(P,I){return P.moveTo(I[0],I[1])}};function br(P,I,le,me,Ee,Se){Se===void 0&&(Se=0);var ce=P.map(function(Ne){return parseFloat(Ne)||parseInt(Ne)});if(ce.length<2)throw new Error("Too few arguments for instruction");for(var Ce=0;Ce<ce.length;Ce+=2)ce[Ce]*=I-2*Se*window.devicePixelRatio,ce[Ce]!==0&&(ce[Ce]=yr(Math.round(ce[Ce]+.5)-.5,I,0)),ce[Ce]+=me+Se*window.devicePixelRatio;for(var ke=1;ke<ce.length;ke+=2)ce[ke]*=le,ce[ke]!==0&&(ce[ke]=yr(Math.round(ce[ke]+.5)-.5,le,0)),ce[ke]+=Ee;return ce}},3700:(H,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.GridCache=void 0;var C=function(){function _(){this.cache=[]}return _.prototype.resize=function(u,f){for(var d=0;d<u;d++){this.cache.length<=d&&this.cache.push([]);for(var m=this.cache[d].length;m<f;m++)this.cache[d].push(void 0);this.cache[d].length=f}this.cache.length=u},_.prototype.clear=function(){for(var u=0;u<this.cache.length;u++)for(var f=0;f<this.cache[u].length;f++)this.cache[u][f]=void 0},_}();c.GridCache=C},5098:function(H,c,C){var _,u=this&&this.__extends||(_=function(h,i){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},_(h,i)},function(h,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function e(){this.constructor=h}_(h,i),h.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)}),f=this&&this.__decorate||function(h,i,e,t){var r,n=arguments.length,l=n<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(h,i,e,t);else for(var a=h.length-1;a>=0;a--)(r=h[a])&&(l=(n<3?r(l):n>3?r(i,e,l):r(i,e))||l);return n>3&&l&&Object.defineProperty(i,e,l),l},d=this&&this.__param||function(h,i){return function(e,t){i(e,t,h)}};Object.defineProperty(c,"__esModule",{value:!0}),c.LinkRenderLayer=void 0;var m=C(1546),v=C(8803),o=C(2040),s=C(2585),p=function(h){function i(e,t,r,n,l,a,g,S,y){var b=h.call(this,e,"link",t,!0,r,n,g,S,y)||this;return l.onShowLinkUnderline(function(w){return b._onShowLinkUnderline(w)}),l.onHideLinkUnderline(function(w){return b._onHideLinkUnderline(w)}),a.onShowLinkUnderline(function(w){return b._onShowLinkUnderline(w)}),a.onHideLinkUnderline(function(w){return b._onHideLinkUnderline(w)}),b}return u(i,h),i.prototype.resize=function(e){h.prototype.resize.call(this,e),this._state=void 0},i.prototype.reset=function(){this._clearCurrentLink()},i.prototype._clearCurrentLink=function(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);var e=this._state.y2-this._state.y1-1;e>0&&this._clearCells(0,this._state.y1+1,this._state.cols,e),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}},i.prototype._onShowLinkUnderline=function(e){if(e.fg===v.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._colors.background.css:e.fg&&(0,o.is256Color)(e.fg)?this._ctx.fillStyle=this._colors.ansi[e.fg].css:this._ctx.fillStyle=this._colors.foreground.css,e.y1===e.y2)this._fillBottomLineAtCells(e.x1,e.y1,e.x2-e.x1);else{this._fillBottomLineAtCells(e.x1,e.y1,e.cols-e.x1);for(var t=e.y1+1;t<e.y2;t++)this._fillBottomLineAtCells(0,t,e.cols);this._fillBottomLineAtCells(0,e.y2,e.x2)}this._state=e},i.prototype._onHideLinkUnderline=function(e){this._clearCurrentLink()},f([d(6,s.IBufferService),d(7,s.IOptionsService),d(8,s.IDecorationService)],i)}(m.BaseRenderLayer);c.LinkRenderLayer=p},3525:function(H,c,C){var _,u=this&&this.__extends||(_=function(a,g){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,y){S.__proto__=y}||function(S,y){for(var b in y)Object.prototype.hasOwnProperty.call(y,b)&&(S[b]=y[b])},_(a,g)},function(a,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");function S(){this.constructor=a}_(a,g),a.prototype=g===null?Object.create(g):(S.prototype=g.prototype,new S)}),f=this&&this.__decorate||function(a,g,S,y){var b,w=arguments.length,M=w<3?g:y===null?y=Object.getOwnPropertyDescriptor(g,S):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(a,g,S,y);else for(var L=a.length-1;L>=0;L--)(b=a[L])&&(M=(w<3?b(M):w>3?b(g,S,M):b(g,S))||M);return w>3&&M&&Object.defineProperty(g,S,M),M},d=this&&this.__param||function(a,g){return function(S,y){g(S,y,a)}},m=this&&this.__values||function(a){var g=typeof Symbol=="function"&&Symbol.iterator,S=g&&a[g],y=0;if(S)return S.call(a);if(a&&typeof a.length=="number")return{next:function(){return a&&y>=a.length&&(a=void 0),{value:a&&a[y++],done:!a}}};throw new TypeError(g?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(c,"__esModule",{value:!0}),c.Renderer=void 0;var v=C(9596),o=C(4149),s=C(2512),p=C(5098),h=C(844),i=C(4725),e=C(2585),t=C(1420),r=C(8460),n=1,l=function(a){function g(S,y,b,w,M,L,k,E){var x=a.call(this)||this;x._colors=S,x._screenElement=y,x._bufferService=L,x._charSizeService=k,x._optionsService=E,x._id=n++,x._onRequestRedraw=new r.EventEmitter;var R=x._optionsService.rawOptions.allowTransparency;return x._renderLayers=[M.createInstance(v.TextRenderLayer,x._screenElement,0,x._colors,R,x._id),M.createInstance(o.SelectionRenderLayer,x._screenElement,1,x._colors,x._id),M.createInstance(p.LinkRenderLayer,x._screenElement,2,x._colors,x._id,b,w),M.createInstance(s.CursorRenderLayer,x._screenElement,3,x._colors,x._id,x._onRequestRedraw)],x.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},x._devicePixelRatio=window.devicePixelRatio,x._updateDimensions(),x.onOptionsChanged(),x}return u(g,a),Object.defineProperty(g.prototype,"onRequestRedraw",{get:function(){return this._onRequestRedraw.event},enumerable:!1,configurable:!0}),g.prototype.dispose=function(){var S,y;try{for(var b=m(this._renderLayers),w=b.next();!w.done;w=b.next())w.value.dispose()}catch(M){S={error:M}}finally{try{w&&!w.done&&(y=b.return)&&y.call(b)}finally{if(S)throw S.error}}a.prototype.dispose.call(this),(0,t.removeTerminalFromCache)(this._id)},g.prototype.onDevicePixelRatioChange=function(){this._devicePixelRatio!==window.devicePixelRatio&&(this._devicePixelRatio=window.devicePixelRatio,this.onResize(this._bufferService.cols,this._bufferService.rows))},g.prototype.setColors=function(S){var y,b;this._colors=S;try{for(var w=m(this._renderLayers),M=w.next();!M.done;M=w.next()){var L=M.value;L.setColors(this._colors),L.reset()}}catch(k){y={error:k}}finally{try{M&&!M.done&&(b=w.return)&&b.call(w)}finally{if(y)throw y.error}}},g.prototype.onResize=function(S,y){var b,w;this._updateDimensions();try{for(var M=m(this._renderLayers),L=M.next();!L.done;L=M.next())L.value.resize(this.dimensions)}catch(k){b={error:k}}finally{try{L&&!L.done&&(w=M.return)&&w.call(M)}finally{if(b)throw b.error}}this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},g.prototype.onCharSizeChanged=function(){this.onResize(this._bufferService.cols,this._bufferService.rows)},g.prototype.onBlur=function(){this._runOperation(function(S){return S.onBlur()})},g.prototype.onFocus=function(){this._runOperation(function(S){return S.onFocus()})},g.prototype.onSelectionChanged=function(S,y,b){b===void 0&&(b=!1),this._runOperation(function(w){return w.onSelectionChanged(S,y,b)}),this._colors.selectionForeground&&this._onRequestRedraw.fire({start:0,end:this._bufferService.rows-1})},g.prototype.onCursorMove=function(){this._runOperation(function(S){return S.onCursorMove()})},g.prototype.onOptionsChanged=function(){this._runOperation(function(S){return S.onOptionsChanged()})},g.prototype.clear=function(){this._runOperation(function(S){return S.reset()})},g.prototype._runOperation=function(S){var y,b;try{for(var w=m(this._renderLayers),M=w.next();!M.done;M=w.next())S(M.value)}catch(L){y={error:L}}finally{try{M&&!M.done&&(b=w.return)&&b.call(w)}finally{if(y)throw y.error}}},g.prototype.renderRows=function(S,y){var b,w;try{for(var M=m(this._renderLayers),L=M.next();!L.done;L=M.next())L.value.onGridChanged(S,y)}catch(k){b={error:k}}finally{try{L&&!L.done&&(w=M.return)&&w.call(M)}finally{if(b)throw b.error}}},g.prototype.clearTextureAtlas=function(){var S,y;try{for(var b=m(this._renderLayers),w=b.next();!w.done;w=b.next())w.value.clearTextureAtlas()}catch(M){S={error:M}}finally{try{w&&!w.done&&(y=b.return)&&y.call(b)}finally{if(S)throw S.error}}},g.prototype._updateDimensions=function(){this._charSizeService.hasValidSize&&(this.dimensions.scaledCharWidth=Math.floor(this._charSizeService.width*window.devicePixelRatio),this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.rawOptions.lineHeight),this.dimensions.scaledCharTop=this._optionsService.rawOptions.lineHeight===1?0:Math.round((this.dimensions.scaledCellHeight-this.dimensions.scaledCharHeight)/2),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.scaledCharLeft=Math.floor(this._optionsService.rawOptions.letterSpacing/2),this.dimensions.scaledCanvasHeight=this._bufferService.rows*this.dimensions.scaledCellHeight,this.dimensions.scaledCanvasWidth=this._bufferService.cols*this.dimensions.scaledCellWidth,this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows,this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols)},f([d(4,e.IInstantiationService),d(5,e.IBufferService),d(6,i.ICharSizeService),d(7,e.IOptionsService)],g)}(h.Disposable);c.Renderer=l},1752:(H,c)=>{function C(_){return 57508<=_&&_<=57558}Object.defineProperty(c,"__esModule",{value:!0}),c.excludeFromContrastRatioDemands=c.isPowerlineGlyph=c.throwIfFalsy=void 0,c.throwIfFalsy=function(_){if(!_)throw new Error("value must not be falsy");return _},c.isPowerlineGlyph=C,c.excludeFromContrastRatioDemands=function(_){return C(_)||function(u){return 9472<=u&&u<=9631}(_)}},4149:function(H,c,C){var _,u=this&&this.__extends||(_=function(s,p){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,i){h.__proto__=i}||function(h,i){for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(h[e]=i[e])},_(s,p)},function(s,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");function h(){this.constructor=s}_(s,p),s.prototype=p===null?Object.create(p):(h.prototype=p.prototype,new h)}),f=this&&this.__decorate||function(s,p,h,i){var e,t=arguments.length,r=t<3?p:i===null?i=Object.getOwnPropertyDescriptor(p,h):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,p,h,i);else for(var n=s.length-1;n>=0;n--)(e=s[n])&&(r=(t<3?e(r):t>3?e(p,h,r):e(p,h))||r);return t>3&&r&&Object.defineProperty(p,h,r),r},d=this&&this.__param||function(s,p){return function(h,i){p(h,i,s)}};Object.defineProperty(c,"__esModule",{value:!0}),c.SelectionRenderLayer=void 0;var m=C(1546),v=C(2585),o=function(s){function p(h,i,e,t,r,n,l){var a=s.call(this,h,"selection",i,!0,e,t,r,n,l)||this;return a._clearState(),a}return u(p,s),p.prototype._clearState=function(){this._state={start:void 0,end:void 0,columnSelectMode:void 0,ydisp:void 0}},p.prototype.resize=function(h){s.prototype.resize.call(this,h),this._clearState()},p.prototype.reset=function(){this._state.start&&this._state.end&&(this._clearState(),this._clearAll())},p.prototype.onSelectionChanged=function(h,i,e){if(s.prototype.onSelectionChanged.call(this,h,i,e),this._didStateChange(h,i,e,this._bufferService.buffer.ydisp))if(this._clearAll(),h&&i){var t=h[1]-this._bufferService.buffer.ydisp,r=i[1]-this._bufferService.buffer.ydisp,n=Math.max(t,0),l=Math.min(r,this._bufferService.rows-1);if(n>=this._bufferService.rows||l<0)this._state.ydisp=this._bufferService.buffer.ydisp;else{if(this._ctx.fillStyle=this._colors.selectionTransparent.css,e){var a=h[0],g=i[0]-a,S=l-n+1;this._fillCells(a,n,g,S)}else{a=t===n?h[0]:0;var y=n===r?i[0]:this._bufferService.cols;this._fillCells(a,n,y-a,1);var b=Math.max(l-n-1,0);if(this._fillCells(0,n+1,this._bufferService.cols,b),n!==l){var w=r===l?i[0]:this._bufferService.cols;this._fillCells(0,l,w,1)}}this._state.start=[h[0],h[1]],this._state.end=[i[0],i[1]],this._state.columnSelectMode=e,this._state.ydisp=this._bufferService.buffer.ydisp}}else this._clearState()},p.prototype._didStateChange=function(h,i,e,t){return!this._areCoordinatesEqual(h,this._state.start)||!this._areCoordinatesEqual(i,this._state.end)||e!==this._state.columnSelectMode||t!==this._state.ydisp},p.prototype._areCoordinatesEqual=function(h,i){return!(!h||!i)&&h[0]===i[0]&&h[1]===i[1]},f([d(4,v.IBufferService),d(5,v.IOptionsService),d(6,v.IDecorationService)],p)}(m.BaseRenderLayer);c.SelectionRenderLayer=o},9596:function(H,c,C){var _,u=this&&this.__extends||(_=function(n,l){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,g){a.__proto__=g}||function(a,g){for(var S in g)Object.prototype.hasOwnProperty.call(g,S)&&(a[S]=g[S])},_(n,l)},function(n,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");function a(){this.constructor=n}_(n,l),n.prototype=l===null?Object.create(l):(a.prototype=l.prototype,new a)}),f=this&&this.__decorate||function(n,l,a,g){var S,y=arguments.length,b=y<3?l:g===null?g=Object.getOwnPropertyDescriptor(l,a):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(n,l,a,g);else for(var w=n.length-1;w>=0;w--)(S=n[w])&&(b=(y<3?S(b):y>3?S(l,a,b):S(l,a))||b);return y>3&&b&&Object.defineProperty(l,a,b),b},d=this&&this.__param||function(n,l){return function(a,g){l(a,g,n)}},m=this&&this.__values||function(n){var l=typeof Symbol=="function"&&Symbol.iterator,a=l&&n[l],g=0;if(a)return a.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&g>=n.length&&(n=void 0),{value:n&&n[g++],done:!n}}};throw new TypeError(l?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(c,"__esModule",{value:!0}),c.TextRenderLayer=void 0;var v=C(3700),o=C(1546),s=C(3734),p=C(643),h=C(511),i=C(2585),e=C(4725),t=C(4269),r=function(n){function l(a,g,S,y,b,w,M,L,k){var E=n.call(this,a,"text",g,y,S,b,w,M,k)||this;return E._characterJoinerService=L,E._characterWidth=0,E._characterFont="",E._characterOverlapCache={},E._workCell=new h.CellData,E._state=new v.GridCache,E}return u(l,n),l.prototype.resize=function(a){n.prototype.resize.call(this,a);var g=this._getFont(!1,!1);this._characterWidth===a.scaledCharWidth&&this._characterFont===g||(this._characterWidth=a.scaledCharWidth,this._characterFont=g,this._characterOverlapCache={}),this._state.clear(),this._state.resize(this._bufferService.cols,this._bufferService.rows)},l.prototype.reset=function(){this._state.clear(),this._clearAll()},l.prototype._forEachCell=function(a,g,S){for(var y=a;y<=g;y++)for(var b=y+this._bufferService.buffer.ydisp,w=this._bufferService.buffer.lines.get(b),M=this._characterJoinerService.getJoinedCharacters(b),L=0;L<this._bufferService.cols;L++){w.loadCell(L,this._workCell);var k=this._workCell,E=!1,x=L;if(k.getWidth()!==0){if(M.length>0&&L===M[0][0]){E=!0;var R=M.shift();k=new t.JoinedCellData(this._workCell,w.translateToString(!0,R[0],R[1]),R[1]-R[0]),x=R[1]-1}!E&&this._isOverlapping(k)&&x<w.length-1&&w.getCodePoint(x+1)===p.NULL_CELL_CODE&&(k.content&=-12582913,k.content|=2<<22),S(k,L,y),L=x}}},l.prototype._drawBackground=function(a,g){var S=this,y=this._ctx,b=this._bufferService.cols,w=0,M=0,L=null;y.save(),this._forEachCell(a,g,function(k,E,x){var R,T,q=null;k.isInverse()?q=k.isFgDefault()?S._colors.foreground.css:k.isFgRGB()?"rgb("+s.AttributeData.toColorRGB(k.getFgColor()).join(",")+")":S._colors.ansi[k.getFgColor()].css:k.isBgRGB()?q="rgb("+s.AttributeData.toColorRGB(k.getBgColor()).join(",")+")":k.isBgPalette()&&(q=S._colors.ansi[k.getBgColor()].css);var N=!1;try{for(var F=m(S._decorationService.getDecorationsAtCell(E,S._bufferService.buffer.ydisp+x)),K=F.next();!K.done;K=F.next()){var z=K.value;z.options.layer!=="top"&&N||(z.backgroundColorRGB&&(q=z.backgroundColorRGB.css),N=z.options.layer==="top")}}catch(A){R={error:A}}finally{try{K&&!K.done&&(T=F.return)&&T.call(F)}finally{if(R)throw R.error}}L===null&&(w=E,M=x),x!==M?(y.fillStyle=L||"",S._fillCells(w,M,b-w,1),w=E,M=x):L!==q&&(y.fillStyle=L||"",S._fillCells(w,M,E-w,1),w=E,M=x),L=q}),L!==null&&(y.fillStyle=L,this._fillCells(w,M,b-w,1)),y.restore()},l.prototype._drawForeground=function(a,g){var S=this;this._forEachCell(a,g,function(y,b,w){if(!y.isInvisible()&&(S._drawChars(y,b,w),y.isUnderline()||y.isStrikethrough())){if(S._ctx.save(),y.isInverse())if(y.isBgDefault())S._ctx.fillStyle=S._colors.background.css;else if(y.isBgRGB())S._ctx.fillStyle="rgb("+s.AttributeData.toColorRGB(y.getBgColor()).join(",")+")";else{var M=y.getBgColor();S._optionsService.rawOptions.drawBoldTextInBrightColors&&y.isBold()&&M<8&&(M+=8),S._ctx.fillStyle=S._colors.ansi[M].css}else if(y.isFgDefault())S._ctx.fillStyle=S._colors.foreground.css;else if(y.isFgRGB())S._ctx.fillStyle="rgb("+s.AttributeData.toColorRGB(y.getFgColor()).join(",")+")";else{var L=y.getFgColor();S._optionsService.rawOptions.drawBoldTextInBrightColors&&y.isBold()&&L<8&&(L+=8),S._ctx.fillStyle=S._colors.ansi[L].css}y.isStrikethrough()&&S._fillMiddleLineAtCells(b,w,y.getWidth()),y.isUnderline()&&S._fillBottomLineAtCells(b,w,y.getWidth()),S._ctx.restore()}})},l.prototype.onGridChanged=function(a,g){this._state.cache.length!==0&&(this._charAtlas&&this._charAtlas.beginFrame(),this._clearCells(0,a,this._bufferService.cols,g-a+1),this._drawBackground(a,g),this._drawForeground(a,g))},l.prototype.onOptionsChanged=function(){this._setTransparency(this._optionsService.rawOptions.allowTransparency)},l.prototype._isOverlapping=function(a){if(a.getWidth()!==1||a.getCode()<256)return!1;var g=a.getChars();if(this._characterOverlapCache.hasOwnProperty(g))return this._characterOverlapCache[g];this._ctx.save(),this._ctx.font=this._characterFont;var S=Math.floor(this._ctx.measureText(g).width)>this._characterWidth;return this._ctx.restore(),this._characterOverlapCache[g]=S,S},f([d(5,i.IBufferService),d(6,i.IOptionsService),d(7,e.ICharacterJoinerService),d(8,i.IDecorationService)],l)}(o.BaseRenderLayer);c.TextRenderLayer=r},9616:(H,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.BaseCharAtlas=void 0;var C=function(){function _(){this._didWarmUp=!1}return _.prototype.dispose=function(){},_.prototype.warmUp=function(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)},_.prototype._doWarmUp=function(){},_.prototype.clear=function(){},_.prototype.beginFrame=function(){},_}();c.BaseCharAtlas=C},1420:(H,c,C)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.removeTerminalFromCache=c.acquireCharAtlas=void 0;var _=C(2040),u=C(1906),f=[];c.acquireCharAtlas=function(d,m,v,o,s){for(var p=(0,_.generateConfig)(o,s,d,v),h=0;h<f.length;h++){var i=(e=f[h]).ownedBy.indexOf(m);if(i>=0){if((0,_.configEquals)(e.config,p))return e.atlas;e.ownedBy.length===1?(e.atlas.dispose(),f.splice(h,1)):e.ownedBy.splice(i,1);break}}for(h=0;h<f.length;h++){var e=f[h];if((0,_.configEquals)(e.config,p))return e.ownedBy.push(m),e.atlas}var t={atlas:new u.DynamicCharAtlas(document,p),config:p,ownedBy:[m]};return f.push(t),t.atlas},c.removeTerminalFromCache=function(d){for(var m=0;m<f.length;m++){var v=f[m].ownedBy.indexOf(d);if(v!==-1){f[m].ownedBy.length===1?(f[m].atlas.dispose(),f.splice(m,1)):f[m].ownedBy.splice(v,1);break}}}},2040:(H,c,C)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.is256Color=c.configEquals=c.generateConfig=void 0;var _=C(643);c.generateConfig=function(u,f,d,m){var v={foreground:m.foreground,background:m.background,cursor:void 0,cursorAccent:void 0,selection:void 0,ansi:m.ansi.slice()};return{devicePixelRatio:window.devicePixelRatio,scaledCharWidth:u,scaledCharHeight:f,fontFamily:d.fontFamily,fontSize:d.fontSize,fontWeight:d.fontWeight,fontWeightBold:d.fontWeightBold,allowTransparency:d.allowTransparency,colors:v}},c.configEquals=function(u,f){for(var d=0;d<u.colors.ansi.length;d++)if(u.colors.ansi[d].rgba!==f.colors.ansi[d].rgba)return!1;return u.devicePixelRatio===f.devicePixelRatio&&u.fontFamily===f.fontFamily&&u.fontSize===f.fontSize&&u.fontWeight===f.fontWeight&&u.fontWeightBold===f.fontWeightBold&&u.allowTransparency===f.allowTransparency&&u.scaledCharWidth===f.scaledCharWidth&&u.scaledCharHeight===f.scaledCharHeight&&u.colors.foreground===f.colors.foreground&&u.colors.background===f.colors.background},c.is256Color=function(u){return u<_.DEFAULT_COLOR}},8803:(H,c,C)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.CHAR_ATLAS_CELL_SPACING=c.TEXT_BASELINE=c.DIM_OPACITY=c.INVERTED_DEFAULT_COLOR=void 0;var _=C(6114);c.INVERTED_DEFAULT_COLOR=257,c.DIM_OPACITY=.5,c.TEXT_BASELINE=_.isFirefox||_.isLegacyEdge?"bottom":"ideographic",c.CHAR_ATLAS_CELL_SPACING=1},1906:function(H,c,C){var _,u=this&&this.__extends||(_=function(a,g){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,y){S.__proto__=y}||function(S,y){for(var b in y)Object.prototype.hasOwnProperty.call(y,b)&&(S[b]=y[b])},_(a,g)},function(a,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");function S(){this.constructor=a}_(a,g),a.prototype=g===null?Object.create(g):(S.prototype=g.prototype,new S)});Object.defineProperty(c,"__esModule",{value:!0}),c.NoneCharAtlas=c.DynamicCharAtlas=c.getGlyphCacheKey=void 0;var f=C(8803),d=C(9616),m=C(5680),v=C(7001),o=C(6114),s=C(1752),p=C(8055),h=1024,i=1024,e={css:"rgba(0, 0, 0, 0)",rgba:0};function t(a){return a.code<<21|a.bg<<12|a.fg<<3|(a.bold?0:4)+(a.dim?0:2)+(a.italic?0:1)}c.getGlyphCacheKey=t;var r=function(a){function g(S,y){var b=a.call(this)||this;b._config=y,b._drawToCacheCount=0,b._glyphsWaitingOnBitmap=[],b._bitmapCommitTimeout=null,b._bitmap=null,b._cacheCanvas=S.createElement("canvas"),b._cacheCanvas.width=h,b._cacheCanvas.height=i,b._cacheCtx=(0,s.throwIfFalsy)(b._cacheCanvas.getContext("2d",{alpha:!0}));var w=S.createElement("canvas");w.width=b._config.scaledCharWidth,w.height=b._config.scaledCharHeight,b._tmpCtx=(0,s.throwIfFalsy)(w.getContext("2d",{alpha:b._config.allowTransparency})),b._width=Math.floor(h/b._config.scaledCharWidth),b._height=Math.floor(i/b._config.scaledCharHeight);var M=b._width*b._height;return b._cacheMap=new v.LRUMap(M),b._cacheMap.prealloc(M),b}return u(g,a),g.prototype.dispose=function(){this._bitmapCommitTimeout!==null&&(window.clearTimeout(this._bitmapCommitTimeout),this._bitmapCommitTimeout=null)},g.prototype.beginFrame=function(){this._drawToCacheCount=0},g.prototype.clear=function(){if(this._cacheMap.size>0){var S=this._width*this._height;this._cacheMap=new v.LRUMap(S),this._cacheMap.prealloc(S)}this._cacheCtx.clearRect(0,0,h,i),this._tmpCtx.clearRect(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight)},g.prototype.draw=function(S,y,b,w){if(y.code===32)return!0;if(!this._canCache(y))return!1;var M=t(y),L=this._cacheMap.get(M);if(L!=null)return this._drawFromCache(S,L,b,w),!0;if(this._drawToCacheCount<100){var k;k=this._cacheMap.size<this._cacheMap.capacity?this._cacheMap.size:this._cacheMap.peek().index;var E=this._drawToCache(y,k);return this._cacheMap.set(M,E),this._drawFromCache(S,E,b,w),!0}return!1},g.prototype._canCache=function(S){return S.code<256},g.prototype._toCoordinateX=function(S){return S%this._width*this._config.scaledCharWidth},g.prototype._toCoordinateY=function(S){return Math.floor(S/this._width)*this._config.scaledCharHeight},g.prototype._drawFromCache=function(S,y,b,w){if(!y.isEmpty){var M=this._toCoordinateX(y.index),L=this._toCoordinateY(y.index);S.drawImage(y.inBitmap?this._bitmap:this._cacheCanvas,M,L,this._config.scaledCharWidth,this._config.scaledCharHeight,b,w,this._config.scaledCharWidth,this._config.scaledCharHeight)}},g.prototype._getColorFromAnsiIndex=function(S){return S<this._config.colors.ansi.length?this._config.colors.ansi[S]:m.DEFAULT_ANSI_COLORS[S]},g.prototype._getBackgroundColor=function(S){return this._config.allowTransparency?e:S.bg===f.INVERTED_DEFAULT_COLOR?this._config.colors.foreground:S.bg<256?this._getColorFromAnsiIndex(S.bg):this._config.colors.background},g.prototype._getForegroundColor=function(S){return S.fg===f.INVERTED_DEFAULT_COLOR?p.color.opaque(this._config.colors.background):S.fg<256?this._getColorFromAnsiIndex(S.fg):this._config.colors.foreground},g.prototype._drawToCache=function(S,y){this._drawToCacheCount++,this._tmpCtx.save();var b=this._getBackgroundColor(S);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=b.css,this._tmpCtx.fillRect(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),this._tmpCtx.globalCompositeOperation="source-over";var w=S.bold?this._config.fontWeightBold:this._config.fontWeight,M=S.italic?"italic":"";this._tmpCtx.font=M+" "+w+" "+this._config.fontSize*this._config.devicePixelRatio+"px "+this._config.fontFamily,this._tmpCtx.textBaseline=f.TEXT_BASELINE,this._tmpCtx.fillStyle=this._getForegroundColor(S).css,S.dim&&(this._tmpCtx.globalAlpha=f.DIM_OPACITY),this._tmpCtx.fillText(S.chars,0,this._config.scaledCharHeight);var L=this._tmpCtx.getImageData(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),k=!1;if(this._config.allowTransparency||(k=l(L,b)),k&&S.chars==="_"&&!this._config.allowTransparency)for(var E=1;E<=5&&(this._tmpCtx.fillText(S.chars,0,this._config.scaledCharHeight-E),k=l(L=this._tmpCtx.getImageData(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),b));E++);this._tmpCtx.restore();var x=this._toCoordinateX(y),R=this._toCoordinateY(y);this._cacheCtx.putImageData(L,x,R);var T={index:y,isEmpty:k,inBitmap:!1};return this._addGlyphToBitmap(T),T},g.prototype._addGlyphToBitmap=function(S){var y=this;!("createImageBitmap"in window)||o.isFirefox||o.isSafari||(this._glyphsWaitingOnBitmap.push(S),this._bitmapCommitTimeout===null&&(this._bitmapCommitTimeout=window.setTimeout(function(){return y._generateBitmap()},100)))},g.prototype._generateBitmap=function(){var S=this,y=this._glyphsWaitingOnBitmap;this._glyphsWaitingOnBitmap=[],window.createImageBitmap(this._cacheCanvas).then(function(b){S._bitmap=b;for(var w=0;w<y.length;w++)y[w].inBitmap=!0}),this._bitmapCommitTimeout=null},g}(d.BaseCharAtlas);c.DynamicCharAtlas=r;var n=function(a){function g(S,y){return a.call(this)||this}return u(g,a),g.prototype.draw=function(S,y,b,w){return!1},g}(d.BaseCharAtlas);function l(a,g){for(var S=!0,y=g.rgba>>>24,b=g.rgba>>>16&255,w=g.rgba>>>8&255,M=0;M<a.data.length;M+=4)a.data[M]===y&&a.data[M+1]===b&&a.data[M+2]===w?a.data[M+3]=0:S=!1;return S}c.NoneCharAtlas=n},7001:(H,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.LRUMap=void 0;var C=function(){function _(u){this.capacity=u,this._map={},this._head=null,this._tail=null,this._nodePool=[],this.size=0}return _.prototype._unlinkNode=function(u){var f=u.prev,d=u.next;u===this._head&&(this._head=d),u===this._tail&&(this._tail=f),f!==null&&(f.next=d),d!==null&&(d.prev=f)},_.prototype._appendNode=function(u){var f=this._tail;f!==null&&(f.next=u),u.prev=f,u.next=null,this._tail=u,this._head===null&&(this._head=u)},_.prototype.prealloc=function(u){for(var f=this._nodePool,d=0;d<u;d++)f.push({prev:null,next:null,key:null,value:null})},_.prototype.get=function(u){var f=this._map[u];return f!==void 0?(this._unlinkNode(f),this._appendNode(f),f.value):null},_.prototype.peekValue=function(u){var f=this._map[u];return f!==void 0?f.value:null},_.prototype.peek=function(){var u=this._head;return u===null?null:u.value},_.prototype.set=function(u,f){var d=this._map[u];if(d!==void 0)d=this._map[u],this._unlinkNode(d),d.value=f;else if(this.size>=this.capacity)d=this._head,this._unlinkNode(d),delete this._map[d.key],d.key=u,d.value=f,this._map[u]=d;else{var m=this._nodePool;m.length>0?((d=m.pop()).key=u,d.value=f):d={prev:null,next:null,key:u,value:f},this._map[u]=d,this.size++}this._appendNode(d)},_}();c.LRUMap=C},1296:function(H,c,C){var _,u=this&&this.__extends||(_=function(y,b){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,M){w.__proto__=M}||function(w,M){for(var L in M)Object.prototype.hasOwnProperty.call(M,L)&&(w[L]=M[L])},_(y,b)},function(y,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function w(){this.constructor=y}_(y,b),y.prototype=b===null?Object.create(b):(w.prototype=b.prototype,new w)}),f=this&&this.__decorate||function(y,b,w,M){var L,k=arguments.length,E=k<3?b:M===null?M=Object.getOwnPropertyDescriptor(b,w):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(y,b,w,M);else for(var x=y.length-1;x>=0;x--)(L=y[x])&&(E=(k<3?L(E):k>3?L(b,w,E):L(b,w))||E);return k>3&&E&&Object.defineProperty(b,w,E),E},d=this&&this.__param||function(y,b){return function(w,M){b(w,M,y)}},m=this&&this.__values||function(y){var b=typeof Symbol=="function"&&Symbol.iterator,w=b&&y[b],M=0;if(w)return w.call(y);if(y&&typeof y.length=="number")return{next:function(){return y&&M>=y.length&&(y=void 0),{value:y&&y[M++],done:!y}}};throw new TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(c,"__esModule",{value:!0}),c.DomRenderer=void 0;var v=C(3787),o=C(8803),s=C(844),p=C(4725),h=C(2585),i=C(8460),e=C(8055),t=C(9631),r="xterm-dom-renderer-owner-",n="xterm-fg-",l="xterm-bg-",a="xterm-focus",g=1,S=function(y){function b(w,M,L,k,E,x,R,T,q,N){var F=y.call(this)||this;return F._colors=w,F._element=M,F._screenElement=L,F._viewportElement=k,F._linkifier=E,F._linkifier2=x,F._charSizeService=T,F._optionsService=q,F._bufferService=N,F._terminalClass=g++,F._rowElements=[],F._rowContainer=document.createElement("div"),F._rowContainer.classList.add("xterm-rows"),F._rowContainer.style.lineHeight="normal",F._rowContainer.setAttribute("aria-hidden","true"),F._refreshRowElements(F._bufferService.cols,F._bufferService.rows),F._selectionContainer=document.createElement("div"),F._selectionContainer.classList.add("xterm-selection"),F._selectionContainer.setAttribute("aria-hidden","true"),F.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},F._updateDimensions(),F._injectCss(),F._rowFactory=R.createInstance(v.DomRendererRowFactory,document,F._colors),F._element.classList.add(r+F._terminalClass),F._screenElement.appendChild(F._rowContainer),F._screenElement.appendChild(F._selectionContainer),F.register(F._linkifier.onShowLinkUnderline(function(K){return F._onLinkHover(K)})),F.register(F._linkifier.onHideLinkUnderline(function(K){return F._onLinkLeave(K)})),F.register(F._linkifier2.onShowLinkUnderline(function(K){return F._onLinkHover(K)})),F.register(F._linkifier2.onHideLinkUnderline(function(K){return F._onLinkLeave(K)})),F}return u(b,y),Object.defineProperty(b.prototype,"onRequestRedraw",{get:function(){return new i.EventEmitter().event},enumerable:!1,configurable:!0}),b.prototype.dispose=function(){this._element.classList.remove(r+this._terminalClass),(0,t.removeElementFromParent)(this._rowContainer,this._selectionContainer,this._themeStyleElement,this._dimensionsStyleElement),y.prototype.dispose.call(this)},b.prototype._updateDimensions=function(){var w,M;this.dimensions.scaledCharWidth=this._charSizeService.width*window.devicePixelRatio,this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.rawOptions.lineHeight),this.dimensions.scaledCharLeft=0,this.dimensions.scaledCharTop=0,this.dimensions.scaledCanvasWidth=this.dimensions.scaledCellWidth*this._bufferService.cols,this.dimensions.scaledCanvasHeight=this.dimensions.scaledCellHeight*this._bufferService.rows,this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols,this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows;try{for(var L=m(this._rowElements),k=L.next();!k.done;k=L.next()){var E=k.value;E.style.width=this.dimensions.canvasWidth+"px",E.style.height=this.dimensions.actualCellHeight+"px",E.style.lineHeight=this.dimensions.actualCellHeight+"px",E.style.overflow="hidden"}}catch(R){w={error:R}}finally{try{k&&!k.done&&(M=L.return)&&M.call(L)}finally{if(w)throw w.error}}this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));var x=this._terminalSelector+" .xterm-rows span { display: inline-block; height: 100%; vertical-align: top; width: "+this.dimensions.actualCellWidth+"px}";this._dimensionsStyleElement.textContent=x,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},b.prototype.setColors=function(w){this._colors=w,this._injectCss()},b.prototype._injectCss=function(){var w=this;this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));var M=this._terminalSelector+" .xterm-rows { color: "+this._colors.foreground.css+"; font-family: "+this._optionsService.rawOptions.fontFamily+"; font-size: "+this._optionsService.rawOptions.fontSize+"px;}";M+=this._terminalSelector+" span:not(."+v.BOLD_CLASS+") { font-weight: "+this._optionsService.rawOptions.fontWeight+";}"+this._terminalSelector+" span."+v.BOLD_CLASS+" { font-weight: "+this._optionsService.rawOptions.fontWeightBold+";}"+this._terminalSelector+" span."+v.ITALIC_CLASS+" { font-style: italic;}",M+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  box-shadow: none; }}",M+="@keyframes blink_block_"+this._terminalClass+" { 0% {  background-color: "+this._colors.cursor.css+";  color: "+this._colors.cursorAccent.css+"; } 50% {  background-color: "+this._colors.cursorAccent.css+";  color: "+this._colors.cursor.css+"; }}",M+=this._terminalSelector+" .xterm-rows:not(.xterm-focus) ."+v.CURSOR_CLASS+"."+v.CURSOR_STYLE_BLOCK_CLASS+" { outline: 1px solid "+this._colors.cursor.css+"; outline-offset: -1px;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+v.CURSOR_CLASS+"."+v.CURSOR_BLINK_CLASS+":not(."+v.CURSOR_STYLE_BLOCK_CLASS+") { animation: blink_box_shadow_"+this._terminalClass+" 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+v.CURSOR_CLASS+"."+v.CURSOR_BLINK_CLASS+"."+v.CURSOR_STYLE_BLOCK_CLASS+" { animation: blink_block_"+this._terminalClass+" 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+v.CURSOR_CLASS+"."+v.CURSOR_STYLE_BLOCK_CLASS+" { background-color: "+this._colors.cursor.css+"; color: "+this._colors.cursorAccent.css+";}"+this._terminalSelector+" .xterm-rows ."+v.CURSOR_CLASS+"."+v.CURSOR_STYLE_BAR_CLASS+" { box-shadow: "+this._optionsService.rawOptions.cursorWidth+"px 0 0 "+this._colors.cursor.css+" inset;}"+this._terminalSelector+" .xterm-rows ."+v.CURSOR_CLASS+"."+v.CURSOR_STYLE_UNDERLINE_CLASS+" { box-shadow: 0 -1px 0 "+this._colors.cursor.css+" inset;}",M+=this._terminalSelector+" .xterm-selection { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}"+this._terminalSelector+" .xterm-selection div { position: absolute; background-color: "+this._colors.selectionOpaque.css+";}",this._colors.ansi.forEach(function(L,k){M+=w._terminalSelector+" ."+n+k+" { color: "+L.css+"; }"+w._terminalSelector+" ."+l+k+" { background-color: "+L.css+"; }"}),M+=this._terminalSelector+" ."+n+o.INVERTED_DEFAULT_COLOR+" { color: "+e.color.opaque(this._colors.background).css+"; }"+this._terminalSelector+" ."+l+o.INVERTED_DEFAULT_COLOR+" { background-color: "+this._colors.foreground.css+"; }",this._themeStyleElement.textContent=M},b.prototype.onDevicePixelRatioChange=function(){this._updateDimensions()},b.prototype._refreshRowElements=function(w,M){for(var L=this._rowElements.length;L<=M;L++){var k=document.createElement("div");this._rowContainer.appendChild(k),this._rowElements.push(k)}for(;this._rowElements.length>M;)this._rowContainer.removeChild(this._rowElements.pop())},b.prototype.onResize=function(w,M){this._refreshRowElements(w,M),this._updateDimensions()},b.prototype.onCharSizeChanged=function(){this._updateDimensions()},b.prototype.onBlur=function(){this._rowContainer.classList.remove(a)},b.prototype.onFocus=function(){this._rowContainer.classList.add(a)},b.prototype.onSelectionChanged=function(w,M,L){for(;this._selectionContainer.children.length;)this._selectionContainer.removeChild(this._selectionContainer.children[0]);if(this._rowFactory.onSelectionChanged(w,M,L),this.renderRows(0,this._bufferService.rows-1),w&&M){var k=w[1]-this._bufferService.buffer.ydisp,E=M[1]-this._bufferService.buffer.ydisp,x=Math.max(k,0),R=Math.min(E,this._bufferService.rows-1);if(!(x>=this._bufferService.rows||R<0)){var T=document.createDocumentFragment();if(L){var q=w[0]>M[0];T.appendChild(this._createSelectionElement(x,q?M[0]:w[0],q?w[0]:M[0],R-x+1))}else{var N=k===x?w[0]:0,F=x===E?M[0]:this._bufferService.cols;T.appendChild(this._createSelectionElement(x,N,F));var K=R-x-1;if(T.appendChild(this._createSelectionElement(x+1,0,this._bufferService.cols,K)),x!==R){var z=E===R?M[0]:this._bufferService.cols;T.appendChild(this._createSelectionElement(R,0,z))}}this._selectionContainer.appendChild(T)}}},b.prototype._createSelectionElement=function(w,M,L,k){k===void 0&&(k=1);var E=document.createElement("div");return E.style.height=k*this.dimensions.actualCellHeight+"px",E.style.top=w*this.dimensions.actualCellHeight+"px",E.style.left=M*this.dimensions.actualCellWidth+"px",E.style.width=this.dimensions.actualCellWidth*(L-M)+"px",E},b.prototype.onCursorMove=function(){},b.prototype.onOptionsChanged=function(){this._updateDimensions(),this._injectCss()},b.prototype.clear=function(){var w,M;try{for(var L=m(this._rowElements),k=L.next();!k.done;k=L.next())k.value.innerText=""}catch(E){w={error:E}}finally{try{k&&!k.done&&(M=L.return)&&M.call(L)}finally{if(w)throw w.error}}},b.prototype.renderRows=function(w,M){for(var L=this._bufferService.buffer.ybase+this._bufferService.buffer.y,k=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),E=this._optionsService.rawOptions.cursorBlink,x=w;x<=M;x++){var R=this._rowElements[x];R.innerText="";var T=x+this._bufferService.buffer.ydisp,q=this._bufferService.buffer.lines.get(T),N=this._optionsService.rawOptions.cursorStyle;R.appendChild(this._rowFactory.createRow(q,T,T===L,N,k,E,this.dimensions.actualCellWidth,this._bufferService.cols))}},Object.defineProperty(b.prototype,"_terminalSelector",{get:function(){return"."+r+this._terminalClass},enumerable:!1,configurable:!0}),b.prototype._onLinkHover=function(w){this._setCellUnderline(w.x1,w.x2,w.y1,w.y2,w.cols,!0)},b.prototype._onLinkLeave=function(w){this._setCellUnderline(w.x1,w.x2,w.y1,w.y2,w.cols,!1)},b.prototype._setCellUnderline=function(w,M,L,k,E,x){for(;w!==M||L!==k;){var R=this._rowElements[L];if(!R)return;var T=R.children[w];T&&(T.style.textDecoration=x?"underline":"none"),++w>=E&&(w=0,L++)}},f([d(6,h.IInstantiationService),d(7,p.ICharSizeService),d(8,h.IOptionsService),d(9,h.IBufferService)],b)}(s.Disposable);c.DomRenderer=S},3787:function(H,c,C){var _=this&&this.__decorate||function(r,n,l,a){var g,S=arguments.length,y=S<3?n:a===null?a=Object.getOwnPropertyDescriptor(n,l):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(r,n,l,a);else for(var b=r.length-1;b>=0;b--)(g=r[b])&&(y=(S<3?g(y):S>3?g(n,l,y):g(n,l))||y);return S>3&&y&&Object.defineProperty(n,l,y),y},u=this&&this.__param||function(r,n){return function(l,a){n(l,a,r)}},f=this&&this.__values||function(r){var n=typeof Symbol=="function"&&Symbol.iterator,l=n&&r[n],a=0;if(l)return l.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&a>=r.length&&(r=void 0),{value:r&&r[a++],done:!r}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(c,"__esModule",{value:!0}),c.DomRendererRowFactory=c.CURSOR_STYLE_UNDERLINE_CLASS=c.CURSOR_STYLE_BAR_CLASS=c.CURSOR_STYLE_BLOCK_CLASS=c.CURSOR_BLINK_CLASS=c.CURSOR_CLASS=c.STRIKETHROUGH_CLASS=c.UNDERLINE_CLASS=c.ITALIC_CLASS=c.DIM_CLASS=c.BOLD_CLASS=void 0;var d=C(8803),m=C(643),v=C(511),o=C(2585),s=C(8055),p=C(4725),h=C(4269),i=C(1752);c.BOLD_CLASS="xterm-bold",c.DIM_CLASS="xterm-dim",c.ITALIC_CLASS="xterm-italic",c.UNDERLINE_CLASS="xterm-underline",c.STRIKETHROUGH_CLASS="xterm-strikethrough",c.CURSOR_CLASS="xterm-cursor",c.CURSOR_BLINK_CLASS="xterm-cursor-blink",c.CURSOR_STYLE_BLOCK_CLASS="xterm-cursor-block",c.CURSOR_STYLE_BAR_CLASS="xterm-cursor-bar",c.CURSOR_STYLE_UNDERLINE_CLASS="xterm-cursor-underline";var e=function(){function r(n,l,a,g,S,y){this._document=n,this._colors=l,this._characterJoinerService=a,this._optionsService=g,this._coreService=S,this._decorationService=y,this._workCell=new v.CellData,this._columnSelectMode=!1}return r.prototype.setColors=function(n){this._colors=n},r.prototype.onSelectionChanged=function(n,l,a){this._selectionStart=n,this._selectionEnd=l,this._columnSelectMode=a},r.prototype.createRow=function(n,l,a,g,S,y,b,w){for(var M,L,k=this._document.createDocumentFragment(),E=this._characterJoinerService.getJoinedCharacters(l),x=0,R=Math.min(n.length,w)-1;R>=0;R--)if(n.loadCell(R,this._workCell).getCode()!==m.NULL_CELL_CODE||a&&R===S){x=R+1;break}for(R=0;R<x;R++){n.loadCell(R,this._workCell);var T=this._workCell.getWidth();if(T!==0){var q=!1,N=R,F=this._workCell;if(E.length>0&&R===E[0][0]){q=!0;var K=E.shift();F=new h.JoinedCellData(this._workCell,n.translateToString(!0,K[0],K[1]),K[1]-K[0]),N=K[1]-1,T=F.getWidth()}var z=this._document.createElement("span");if(T>1&&(z.style.width=b*T+"px"),q&&(z.style.display="inline",S>=R&&S<=N&&(S=R)),!this._coreService.isCursorHidden&&a&&R===S)switch(z.classList.add(c.CURSOR_CLASS),y&&z.classList.add(c.CURSOR_BLINK_CLASS),g){case"bar":z.classList.add(c.CURSOR_STYLE_BAR_CLASS);break;case"underline":z.classList.add(c.CURSOR_STYLE_UNDERLINE_CLASS);break;default:z.classList.add(c.CURSOR_STYLE_BLOCK_CLASS)}F.isBold()&&z.classList.add(c.BOLD_CLASS),F.isItalic()&&z.classList.add(c.ITALIC_CLASS),F.isDim()&&z.classList.add(c.DIM_CLASS),F.isUnderline()&&z.classList.add(c.UNDERLINE_CLASS),F.isInvisible()?z.textContent=m.WHITESPACE_CELL_CHAR:z.textContent=F.getChars()||m.WHITESPACE_CELL_CHAR,F.isStrikethrough()&&z.classList.add(c.STRIKETHROUGH_CLASS);var A=F.getFgColor(),Q=F.getFgColorMode(),J=F.getBgColor(),oe=F.getBgColorMode(),B=!!F.isInverse();if(B){var ne=A;A=J,J=ne;var Y=Q;Q=oe,oe=Y}var W=void 0,O=void 0,D=!1;try{for(var j=(M=void 0,f(this._decorationService.getDecorationsAtCell(R,l))),Z=j.next();!Z.done;Z=j.next()){var X=Z.value;X.options.layer!=="top"&&D||(X.backgroundColorRGB&&(oe=50331648,J=X.backgroundColorRGB.rgba>>8&16777215,W=X.backgroundColorRGB),X.foregroundColorRGB&&(Q=50331648,A=X.foregroundColorRGB.rgba>>8&16777215,O=X.foregroundColorRGB),D=X.options.layer==="top")}}catch(ue){M={error:ue}}finally{try{Z&&!Z.done&&(L=j.return)&&L.call(j)}finally{if(M)throw M.error}}var ee=this._isCellInSelection(R,l);D||this._colors.selectionForeground&&ee&&(Q=50331648,A=this._colors.selectionForeground.rgba>>8&16777215,O=this._colors.selectionForeground),ee&&(W=this._colors.selectionOpaque,D=!0),D&&z.classList.add("xterm-decoration-top");var ae=void 0;switch(oe){case 16777216:case 33554432:ae=this._colors.ansi[J],z.classList.add("xterm-bg-"+J);break;case 50331648:ae=s.rgba.toColor(J>>16,J>>8&255,255&J),this._addStyle(z,"background-color:#"+t((J>>>0).toString(16),"0",6));break;default:B?(ae=this._colors.foreground,z.classList.add("xterm-bg-"+d.INVERTED_DEFAULT_COLOR)):ae=this._colors.background}switch(Q){case 16777216:case 33554432:F.isBold()&&A<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(A+=8),this._applyMinimumContrast(z,ae,this._colors.ansi[A],F,W,void 0)||z.classList.add("xterm-fg-"+A);break;case 50331648:var he=s.rgba.toColor(A>>16&255,A>>8&255,255&A);this._applyMinimumContrast(z,ae,he,F,W,O)||this._addStyle(z,"color:#"+t(A.toString(16),"0",6));break;default:this._applyMinimumContrast(z,ae,this._colors.foreground,F,W,void 0)||B&&z.classList.add("xterm-fg-"+d.INVERTED_DEFAULT_COLOR)}k.appendChild(z),R=N}}return k},r.prototype._applyMinimumContrast=function(n,l,a,g,S,y){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,i.excludeFromContrastRatioDemands)(g.getCode()))return!1;var b=void 0;return S||y||(b=this._colors.contrastCache.getColor(l.rgba,a.rgba)),b===void 0&&(b=s.color.ensureContrastRatio(S||l,y||a,this._optionsService.rawOptions.minimumContrastRatio),this._colors.contrastCache.setColor((S||l).rgba,(y||a).rgba,b??null)),!!b&&(this._addStyle(n,"color:"+b.css),!0)},r.prototype._addStyle=function(n,l){n.setAttribute("style",""+(n.getAttribute("style")||"")+l+";")},r.prototype._isCellInSelection=function(n,l){var a=this._selectionStart,g=this._selectionEnd;return!(!a||!g)&&(this._columnSelectMode?a[0]<=g[0]?n>=a[0]&&l>=a[1]&&n<g[0]&&l<=g[1]:n<a[0]&&l>=a[1]&&n>=g[0]&&l<=g[1]:l>a[1]&&l<g[1]||a[1]===g[1]&&l===a[1]&&n>=a[0]&&n<g[0]||a[1]<g[1]&&l===g[1]&&n<g[0]||a[1]<g[1]&&l===a[1]&&n>=a[0])},_([u(2,p.ICharacterJoinerService),u(3,o.IOptionsService),u(4,o.ICoreService),u(5,o.IDecorationService)],r)}();function t(r,n,l){for(;r.length<l;)r=n+r;return r}c.DomRendererRowFactory=e},456:(H,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.SelectionModel=void 0;var C=function(){function _(u){this._bufferService=u,this.isSelectAllActive=!1,this.selectionStartLength=0}return _.prototype.clearSelection=function(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0},Object.defineProperty(_.prototype,"finalSelectionStart",{get:function(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"finalSelectionEnd",{get:function(){return this.isSelectAllActive?[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1]:this.selectionStart?!this.selectionEnd||this.areSelectionValuesReversed()?(u=this.selectionStart[0]+this.selectionStartLength)>this._bufferService.cols?u%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(u/this._bufferService.cols)-1]:[u%this._bufferService.cols,this.selectionStart[1]+Math.floor(u/this._bufferService.cols)]:[u,this.selectionStart[1]]:this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]?(u=this.selectionStart[0]+this.selectionStartLength)>this._bufferService.cols?[u%this._bufferService.cols,this.selectionStart[1]+Math.floor(u/this._bufferService.cols)]:[Math.max(u,this.selectionEnd[0]),this.selectionEnd[1]]:this.selectionEnd:void 0;var u},enumerable:!1,configurable:!0}),_.prototype.areSelectionValuesReversed=function(){var u=this.selectionStart,f=this.selectionEnd;return!(!u||!f)&&(u[1]>f[1]||u[1]===f[1]&&u[0]>f[0])},_.prototype.onTrim=function(u){return this.selectionStart&&(this.selectionStart[1]-=u),this.selectionEnd&&(this.selectionEnd[1]-=u),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)},_}();c.SelectionModel=C},428:function(H,c,C){var _=this&&this.__decorate||function(o,s,p,h){var i,e=arguments.length,t=e<3?s:h===null?h=Object.getOwnPropertyDescriptor(s,p):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,s,p,h);else for(var r=o.length-1;r>=0;r--)(i=o[r])&&(t=(e<3?i(t):e>3?i(s,p,t):i(s,p))||t);return e>3&&t&&Object.defineProperty(s,p,t),t},u=this&&this.__param||function(o,s){return function(p,h){s(p,h,o)}};Object.defineProperty(c,"__esModule",{value:!0}),c.CharSizeService=void 0;var f=C(2585),d=C(8460),m=function(){function o(s,p,h){this._optionsService=h,this.width=0,this.height=0,this._onCharSizeChange=new d.EventEmitter,this._measureStrategy=new v(s,p,this._optionsService)}return Object.defineProperty(o.prototype,"hasValidSize",{get:function(){return this.width>0&&this.height>0},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"onCharSizeChange",{get:function(){return this._onCharSizeChange.event},enumerable:!1,configurable:!0}),o.prototype.measure=function(){var s=this._measureStrategy.measure();s.width===this.width&&s.height===this.height||(this.width=s.width,this.height=s.height,this._onCharSizeChange.fire())},_([u(2,f.IOptionsService)],o)}();c.CharSizeService=m;var v=function(){function o(s,p,h){this._document=s,this._parentElement=p,this._optionsService=h,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W",this._measureElement.setAttribute("aria-hidden","true"),this._parentElement.appendChild(this._measureElement)}return o.prototype.measure=function(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=this._optionsService.rawOptions.fontSize+"px";var s=this._measureElement.getBoundingClientRect();return s.width!==0&&s.height!==0&&(this._result.width=s.width,this._result.height=Math.ceil(s.height)),this._result},o}()},4269:function(H,c,C){var _,u=this&&this.__extends||(_=function(i,e){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])},_(i,e)},function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function t(){this.constructor=i}_(i,e),i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}),f=this&&this.__decorate||function(i,e,t,r){var n,l=arguments.length,a=l<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,r);else for(var g=i.length-1;g>=0;g--)(n=i[g])&&(a=(l<3?n(a):l>3?n(e,t,a):n(e,t))||a);return l>3&&a&&Object.defineProperty(e,t,a),a},d=this&&this.__param||function(i,e){return function(t,r){e(t,r,i)}};Object.defineProperty(c,"__esModule",{value:!0}),c.CharacterJoinerService=c.JoinedCellData=void 0;var m=C(3734),v=C(643),o=C(511),s=C(2585),p=function(i){function e(t,r,n){var l=i.call(this)||this;return l.content=0,l.combinedData="",l.fg=t.fg,l.bg=t.bg,l.combinedData=r,l._width=n,l}return u(e,i),e.prototype.isCombined=function(){return 2097152},e.prototype.getWidth=function(){return this._width},e.prototype.getChars=function(){return this.combinedData},e.prototype.getCode=function(){return 2097151},e.prototype.setFromCharData=function(t){throw new Error("not implemented")},e.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},e}(m.AttributeData);c.JoinedCellData=p;var h=function(){function i(e){this._bufferService=e,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new o.CellData}return i.prototype.register=function(e){var t={id:this._nextCharacterJoinerId++,handler:e};return this._characterJoiners.push(t),t.id},i.prototype.deregister=function(e){for(var t=0;t<this._characterJoiners.length;t++)if(this._characterJoiners[t].id===e)return this._characterJoiners.splice(t,1),!0;return!1},i.prototype.getJoinedCharacters=function(e){if(this._characterJoiners.length===0)return[];var t=this._bufferService.buffer.lines.get(e);if(!t||t.length===0)return[];for(var r=[],n=t.translateToString(!0),l=0,a=0,g=0,S=t.getFg(0),y=t.getBg(0),b=0;b<t.getTrimmedLength();b++)if(t.loadCell(b,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==S||this._workCell.bg!==y){if(b-l>1)for(var w=this._getJoinedRanges(n,g,a,t,l),M=0;M<w.length;M++)r.push(w[M]);l=b,g=a,S=this._workCell.fg,y=this._workCell.bg}a+=this._workCell.getChars().length||v.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-l>1)for(w=this._getJoinedRanges(n,g,a,t,l),M=0;M<w.length;M++)r.push(w[M]);return r},i.prototype._getJoinedRanges=function(e,t,r,n,l){var a=e.substring(t,r),g=[];try{g=this._characterJoiners[0].handler(a)}catch(w){console.error(w)}for(var S=1;S<this._characterJoiners.length;S++)try{for(var y=this._characterJoiners[S].handler(a),b=0;b<y.length;b++)i._mergeRanges(g,y[b])}catch(w){console.error(w)}return this._stringRangesToCellRanges(g,n,l),g},i.prototype._stringRangesToCellRanges=function(e,t,r){var n=0,l=!1,a=0,g=e[n];if(g){for(var S=r;S<this._bufferService.cols;S++){var y=t.getWidth(S),b=t.getString(S).length||v.WHITESPACE_CELL_CHAR.length;if(y!==0){if(!l&&g[0]<=a&&(g[0]=S,l=!0),g[1]<=a){if(g[1]=S,!(g=e[++n]))break;g[0]<=a?(g[0]=S,l=!0):l=!1}a+=b}}g&&(g[1]=this._bufferService.cols)}},i._mergeRanges=function(e,t){for(var r=!1,n=0;n<e.length;n++){var l=e[n];if(r){if(t[1]<=l[0])return e[n-1][1]=t[1],e;if(t[1]<=l[1])return e[n-1][1]=Math.max(t[1],l[1]),e.splice(n,1),e;e.splice(n,1),n--}else{if(t[1]<=l[0])return e.splice(n,0,t),e;if(t[1]<=l[1])return l[0]=Math.min(t[0],l[0]),e;t[0]<l[1]&&(l[0]=Math.min(t[0],l[0]),r=!0)}}return r?e[e.length-1][1]=t[1]:e.push(t),e},i=f([d(0,s.IBufferService)],i)}();c.CharacterJoinerService=h},5114:(H,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.CoreBrowserService=void 0;var C=function(){function _(u){this._textarea=u}return Object.defineProperty(_.prototype,"isFocused",{get:function(){return(this._textarea.getRootNode?this._textarea.getRootNode():document).activeElement===this._textarea&&document.hasFocus()},enumerable:!1,configurable:!0}),_}();c.CoreBrowserService=C},8934:function(H,c,C){var _=this&&this.__decorate||function(v,o,s,p){var h,i=arguments.length,e=i<3?o:p===null?p=Object.getOwnPropertyDescriptor(o,s):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")e=Reflect.decorate(v,o,s,p);else for(var t=v.length-1;t>=0;t--)(h=v[t])&&(e=(i<3?h(e):i>3?h(o,s,e):h(o,s))||e);return i>3&&e&&Object.defineProperty(o,s,e),e},u=this&&this.__param||function(v,o){return function(s,p){o(s,p,v)}};Object.defineProperty(c,"__esModule",{value:!0}),c.MouseService=void 0;var f=C(4725),d=C(9806),m=function(){function v(o,s){this._renderService=o,this._charSizeService=s}return v.prototype.getCoords=function(o,s,p,h,i){return(0,d.getCoords)(window,o,s,p,h,this._charSizeService.hasValidSize,this._renderService.dimensions.actualCellWidth,this._renderService.dimensions.actualCellHeight,i)},v.prototype.getRawByteCoords=function(o,s,p,h){var i=this.getCoords(o,s,p,h);return(0,d.getRawByteCoords)(i)},_([u(0,f.IRenderService),u(1,f.ICharSizeService)],v)}();c.MouseService=m},3230:function(H,c,C){var _,u=this&&this.__extends||(_=function(t,r){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,l){n.__proto__=l}||function(n,l){for(var a in l)Object.prototype.hasOwnProperty.call(l,a)&&(n[a]=l[a])},_(t,r)},function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}_(t,r),t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}),f=this&&this.__decorate||function(t,r,n,l){var a,g=arguments.length,S=g<3?r:l===null?l=Object.getOwnPropertyDescriptor(r,n):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(t,r,n,l);else for(var y=t.length-1;y>=0;y--)(a=t[y])&&(S=(g<3?a(S):g>3?a(r,n,S):a(r,n))||S);return g>3&&S&&Object.defineProperty(r,n,S),S},d=this&&this.__param||function(t,r){return function(n,l){r(n,l,t)}};Object.defineProperty(c,"__esModule",{value:!0}),c.RenderService=void 0;var m=C(6193),v=C(8460),o=C(844),s=C(5596),p=C(3656),h=C(2585),i=C(4725),e=function(t){function r(n,l,a,g,S,y,b){var w=t.call(this)||this;if(w._renderer=n,w._rowCount=l,w._charSizeService=S,w._isPaused=!1,w._needsFullRefresh=!1,w._isNextRenderRedrawOnly=!0,w._needsSelectionRefresh=!1,w._canvasWidth=0,w._canvasHeight=0,w._selectionState={start:void 0,end:void 0,columnSelectMode:!1},w._onDimensionsChange=new v.EventEmitter,w._onRenderedViewportChange=new v.EventEmitter,w._onRender=new v.EventEmitter,w._onRefreshRequest=new v.EventEmitter,w.register({dispose:function(){return w._renderer.dispose()}}),w._renderDebouncer=new m.RenderDebouncer(function(L,k){return w._renderRows(L,k)}),w.register(w._renderDebouncer),w._screenDprMonitor=new s.ScreenDprMonitor,w._screenDprMonitor.setListener(function(){return w.onDevicePixelRatioChange()}),w.register(w._screenDprMonitor),w.register(b.onResize(function(){return w._fullRefresh()})),w.register(b.buffers.onBufferActivate(function(){var L;return(L=w._renderer)===null||L===void 0?void 0:L.clear()})),w.register(g.onOptionChange(function(){return w._handleOptionsChanged()})),w.register(w._charSizeService.onCharSizeChange(function(){return w.onCharSizeChanged()})),w.register(y.onDecorationRegistered(function(){return w._fullRefresh()})),w.register(y.onDecorationRemoved(function(){return w._fullRefresh()})),w._renderer.onRequestRedraw(function(L){return w.refreshRows(L.start,L.end,!0)}),w.register((0,p.addDisposableDomListener)(window,"resize",function(){return w.onDevicePixelRatioChange()})),"IntersectionObserver"in window){var M=new IntersectionObserver(function(L){return w._onIntersectionChange(L[L.length-1])},{threshold:0});M.observe(a),w.register({dispose:function(){return M.disconnect()}})}return w}return u(r,t),Object.defineProperty(r.prototype,"onDimensionsChange",{get:function(){return this._onDimensionsChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"onRenderedViewportChange",{get:function(){return this._onRenderedViewportChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"onRender",{get:function(){return this._onRender.event},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"onRefreshRequest",{get:function(){return this._onRefreshRequest.event},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"dimensions",{get:function(){return this._renderer.dimensions},enumerable:!1,configurable:!0}),r.prototype._onIntersectionChange=function(n){this._isPaused=n.isIntersecting===void 0?n.intersectionRatio===0:!n.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)},r.prototype.refreshRows=function(n,l,a){a===void 0&&(a=!1),this._isPaused?this._needsFullRefresh=!0:(a||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(n,l,this._rowCount))},r.prototype._renderRows=function(n,l){this._renderer.renderRows(n,l),this._needsSelectionRefresh&&(this._renderer.onSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:n,end:l}),this._onRender.fire({start:n,end:l}),this._isNextRenderRedrawOnly=!0},r.prototype.resize=function(n,l){this._rowCount=l,this._fireOnCanvasResize()},r.prototype._handleOptionsChanged=function(){this._renderer.onOptionsChanged(),this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize()},r.prototype._fireOnCanvasResize=function(){this._renderer.dimensions.canvasWidth===this._canvasWidth&&this._renderer.dimensions.canvasHeight===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.dimensions)},r.prototype.dispose=function(){t.prototype.dispose.call(this)},r.prototype.setRenderer=function(n){var l=this;this._renderer.dispose(),this._renderer=n,this._renderer.onRequestRedraw(function(a){return l.refreshRows(a.start,a.end,!0)}),this._needsSelectionRefresh=!0,this._fullRefresh()},r.prototype.addRefreshCallback=function(n){return this._renderDebouncer.addRefreshCallback(n)},r.prototype._fullRefresh=function(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)},r.prototype.clearTextureAtlas=function(){var n,l;(l=(n=this._renderer)===null||n===void 0?void 0:n.clearTextureAtlas)===null||l===void 0||l.call(n),this._fullRefresh()},r.prototype.setColors=function(n){this._renderer.setColors(n),this._fullRefresh()},r.prototype.onDevicePixelRatioChange=function(){this._charSizeService.measure(),this._renderer.onDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1)},r.prototype.onResize=function(n,l){this._renderer.onResize(n,l),this._fullRefresh()},r.prototype.onCharSizeChanged=function(){this._renderer.onCharSizeChanged()},r.prototype.onBlur=function(){this._renderer.onBlur()},r.prototype.onFocus=function(){this._renderer.onFocus()},r.prototype.onSelectionChanged=function(n,l,a){this._selectionState.start=n,this._selectionState.end=l,this._selectionState.columnSelectMode=a,this._renderer.onSelectionChanged(n,l,a)},r.prototype.onCursorMove=function(){this._renderer.onCursorMove()},r.prototype.clear=function(){this._renderer.clear()},f([d(3,h.IOptionsService),d(4,i.ICharSizeService),d(5,h.IDecorationService),d(6,h.IBufferService)],r)}(o.Disposable);c.RenderService=e},9312:function(H,c,C){var _,u=this&&this.__extends||(_=function(g,S){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,b){y.__proto__=b}||function(y,b){for(var w in b)Object.prototype.hasOwnProperty.call(b,w)&&(y[w]=b[w])},_(g,S)},function(g,S){if(typeof S!="function"&&S!==null)throw new TypeError("Class extends value "+String(S)+" is not a constructor or null");function y(){this.constructor=g}_(g,S),g.prototype=S===null?Object.create(S):(y.prototype=S.prototype,new y)}),f=this&&this.__decorate||function(g,S,y,b){var w,M=arguments.length,L=M<3?S:b===null?b=Object.getOwnPropertyDescriptor(S,y):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(g,S,y,b);else for(var k=g.length-1;k>=0;k--)(w=g[k])&&(L=(M<3?w(L):M>3?w(S,y,L):w(S,y))||L);return M>3&&L&&Object.defineProperty(S,y,L),L},d=this&&this.__param||function(g,S){return function(y,b){S(y,b,g)}};Object.defineProperty(c,"__esModule",{value:!0}),c.SelectionService=void 0;var m=C(6114),v=C(456),o=C(511),s=C(8460),p=C(4725),h=C(2585),i=C(9806),e=C(9504),t=C(844),r=C(4841),n=String.fromCharCode(160),l=new RegExp(n,"g"),a=function(g){function S(y,b,w,M,L,k,E,x){var R=g.call(this)||this;return R._element=y,R._screenElement=b,R._linkifier=w,R._bufferService=M,R._coreService=L,R._mouseService=k,R._optionsService=E,R._renderService=x,R._dragScrollAmount=0,R._enabled=!0,R._workCell=new o.CellData,R._mouseDownTimeStamp=0,R._oldHasSelection=!1,R._oldSelectionStart=void 0,R._oldSelectionEnd=void 0,R._onLinuxMouseSelection=R.register(new s.EventEmitter),R._onRedrawRequest=R.register(new s.EventEmitter),R._onSelectionChange=R.register(new s.EventEmitter),R._onRequestScrollLines=R.register(new s.EventEmitter),R._mouseMoveListener=function(T){return R._onMouseMove(T)},R._mouseUpListener=function(T){return R._onMouseUp(T)},R._coreService.onUserInput(function(){R.hasSelection&&R.clearSelection()}),R._trimListener=R._bufferService.buffer.lines.onTrim(function(T){return R._onTrim(T)}),R.register(R._bufferService.buffers.onBufferActivate(function(T){return R._onBufferActivate(T)})),R.enable(),R._model=new v.SelectionModel(R._bufferService),R._activeSelectionMode=0,R}return u(S,g),Object.defineProperty(S.prototype,"onLinuxMouseSelection",{get:function(){return this._onLinuxMouseSelection.event},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"onRequestRedraw",{get:function(){return this._onRedrawRequest.event},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"onRequestScrollLines",{get:function(){return this._onRequestScrollLines.event},enumerable:!1,configurable:!0}),S.prototype.dispose=function(){this._removeMouseDownListeners()},S.prototype.reset=function(){this.clearSelection()},S.prototype.disable=function(){this.clearSelection(),this._enabled=!1},S.prototype.enable=function(){this._enabled=!0},Object.defineProperty(S.prototype,"selectionStart",{get:function(){return this._model.finalSelectionStart},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"selectionEnd",{get:function(){return this._model.finalSelectionEnd},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"hasSelection",{get:function(){var y=this._model.finalSelectionStart,b=this._model.finalSelectionEnd;return!(!y||!b||y[0]===b[0]&&y[1]===b[1])},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"selectionText",{get:function(){var y=this._model.finalSelectionStart,b=this._model.finalSelectionEnd;if(!y||!b)return"";var w=this._bufferService.buffer,M=[];if(this._activeSelectionMode===3){if(y[0]===b[0])return"";for(var L=y[0]<b[0]?y[0]:b[0],k=y[0]<b[0]?b[0]:y[0],E=y[1];E<=b[1];E++){var x=w.translateBufferLineToString(E,!0,L,k);M.push(x)}}else{var R=y[1]===b[1]?b[0]:void 0;for(M.push(w.translateBufferLineToString(y[1],!0,y[0],R)),E=y[1]+1;E<=b[1]-1;E++){var T=w.lines.get(E);x=w.translateBufferLineToString(E,!0),T!=null&&T.isWrapped?M[M.length-1]+=x:M.push(x)}y[1]!==b[1]&&(T=w.lines.get(b[1]),x=w.translateBufferLineToString(b[1],!0,0,b[0]),T&&T.isWrapped?M[M.length-1]+=x:M.push(x))}return M.map(function(q){return q.replace(l," ")}).join(m.isWindows?`\r
`:`
`)},enumerable:!1,configurable:!0}),S.prototype.clearSelection=function(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()},S.prototype.refresh=function(y){var b=this;this._refreshAnimationFrame||(this._refreshAnimationFrame=window.requestAnimationFrame(function(){return b._refresh()})),m.isLinux&&y&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)},S.prototype._refresh=function(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})},S.prototype._isClickInSelection=function(y){var b=this._getMouseBufferCoords(y),w=this._model.finalSelectionStart,M=this._model.finalSelectionEnd;return!!(w&&M&&b)&&this._areCoordsInSelection(b,w,M)},S.prototype.isCellInSelection=function(y,b){var w=this._model.finalSelectionStart,M=this._model.finalSelectionEnd;return!(!w||!M)&&this._areCoordsInSelection([y,b],w,M)},S.prototype._areCoordsInSelection=function(y,b,w){return y[1]>b[1]&&y[1]<w[1]||b[1]===w[1]&&y[1]===b[1]&&y[0]>=b[0]&&y[0]<w[0]||b[1]<w[1]&&y[1]===w[1]&&y[0]<w[0]||b[1]<w[1]&&y[1]===b[1]&&y[0]>=b[0]},S.prototype._selectWordAtCursor=function(y,b){var w,M,L=(M=(w=this._linkifier.currentLink)===null||w===void 0?void 0:w.link)===null||M===void 0?void 0:M.range;if(L)return this._model.selectionStart=[L.start.x-1,L.start.y-1],this._model.selectionStartLength=(0,r.getRangeLength)(L,this._bufferService.cols),this._model.selectionEnd=void 0,!0;var k=this._getMouseBufferCoords(y);return!!k&&(this._selectWordAt(k,b),this._model.selectionEnd=void 0,!0)},S.prototype.selectAll=function(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()},S.prototype.selectLines=function(y,b){this._model.clearSelection(),y=Math.max(y,0),b=Math.min(b,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,y],this._model.selectionEnd=[this._bufferService.cols,b],this.refresh(),this._onSelectionChange.fire()},S.prototype._onTrim=function(y){this._model.onTrim(y)&&this.refresh()},S.prototype._getMouseBufferCoords=function(y){var b=this._mouseService.getCoords(y,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(b)return b[0]--,b[1]--,b[1]+=this._bufferService.buffer.ydisp,b},S.prototype._getMouseEventScrollAmount=function(y){var b=(0,i.getCoordsRelativeToElement)(window,y,this._screenElement)[1],w=this._renderService.dimensions.canvasHeight;return b>=0&&b<=w?0:(b>w&&(b-=w),b=Math.min(Math.max(b,-50),50),(b/=50)/Math.abs(b)+Math.round(14*b))},S.prototype.shouldForceSelection=function(y){return m.isMac?y.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:y.shiftKey},S.prototype.onMouseDown=function(y){if(this._mouseDownTimeStamp=y.timeStamp,(y.button!==2||!this.hasSelection)&&y.button===0){if(!this._enabled){if(!this.shouldForceSelection(y))return;y.stopPropagation()}y.preventDefault(),this._dragScrollAmount=0,this._enabled&&y.shiftKey?this._onIncrementalClick(y):y.detail===1?this._onSingleClick(y):y.detail===2?this._onDoubleClick(y):y.detail===3&&this._onTripleClick(y),this._addMouseDownListeners(),this.refresh(!0)}},S.prototype._addMouseDownListeners=function(){var y=this;this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=window.setInterval(function(){return y._dragScroll()},50)},S.prototype._removeMouseDownListeners=function(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0},S.prototype._onIncrementalClick=function(y){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(y))},S.prototype._onSingleClick=function(y){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(y)?3:0,this._model.selectionStart=this._getMouseBufferCoords(y),this._model.selectionStart){this._model.selectionEnd=void 0;var b=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);b&&b.length!==this._model.selectionStart[0]&&b.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}},S.prototype._onDoubleClick=function(y){this._selectWordAtCursor(y,!0)&&(this._activeSelectionMode=1)},S.prototype._onTripleClick=function(y){var b=this._getMouseBufferCoords(y);b&&(this._activeSelectionMode=2,this._selectLineAt(b[1]))},S.prototype.shouldColumnSelect=function(y){return y.altKey&&!(m.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)},S.prototype._onMouseMove=function(y){if(y.stopImmediatePropagation(),this._model.selectionStart){var b=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(y),this._model.selectionEnd){this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(y),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));var w=this._bufferService.buffer;if(this._model.selectionEnd[1]<w.lines.length){var M=w.lines.get(this._model.selectionEnd[1]);M&&M.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}b&&b[0]===this._model.selectionEnd[0]&&b[1]===this._model.selectionEnd[1]||this.refresh(!0)}else this.refresh(!0)}},S.prototype._dragScroll=function(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});var y=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(y.ydisp+this._bufferService.rows,y.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=y.ydisp),this.refresh()}},S.prototype._onMouseUp=function(y){var b=y.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&b<500&&y.altKey&&this._optionsService.getOption("altClickMovesCursor")){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){var w=this._mouseService.getCoords(y,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(w&&w[0]!==void 0&&w[1]!==void 0){var M=(0,e.moveToCellSequence)(w[0]-1,w[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(M,!0)}}}else this._fireEventIfSelectionChanged()},S.prototype._fireEventIfSelectionChanged=function(){var y=this._model.finalSelectionStart,b=this._model.finalSelectionEnd,w=!(!y||!b||y[0]===b[0]&&y[1]===b[1]);w?y&&b&&(this._oldSelectionStart&&this._oldSelectionEnd&&y[0]===this._oldSelectionStart[0]&&y[1]===this._oldSelectionStart[1]&&b[0]===this._oldSelectionEnd[0]&&b[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(y,b,w)):this._oldHasSelection&&this._fireOnSelectionChange(y,b,w)},S.prototype._fireOnSelectionChange=function(y,b,w){this._oldSelectionStart=y,this._oldSelectionEnd=b,this._oldHasSelection=w,this._onSelectionChange.fire()},S.prototype._onBufferActivate=function(y){var b=this;this.clearSelection(),this._trimListener.dispose(),this._trimListener=y.activeBuffer.lines.onTrim(function(w){return b._onTrim(w)})},S.prototype._convertViewportColToCharacterIndex=function(y,b){for(var w=b[0],M=0;b[0]>=M;M++){var L=y.loadCell(M,this._workCell).getChars().length;this._workCell.getWidth()===0?w--:L>1&&b[0]!==M&&(w+=L-1)}return w},S.prototype.setSelection=function(y,b,w){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[y,b],this._model.selectionStartLength=w,this.refresh(),this._fireEventIfSelectionChanged()},S.prototype.rightClickSelect=function(y){this._isClickInSelection(y)||(this._selectWordAtCursor(y,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())},S.prototype._getWordAt=function(y,b,w,M){if(w===void 0&&(w=!0),M===void 0&&(M=!0),!(y[0]>=this._bufferService.cols)){var L=this._bufferService.buffer,k=L.lines.get(y[1]);if(k){var E=L.translateBufferLineToString(y[1],!1),x=this._convertViewportColToCharacterIndex(k,y),R=x,T=y[0]-x,q=0,N=0,F=0,K=0;if(E.charAt(x)===" "){for(;x>0&&E.charAt(x-1)===" ";)x--;for(;R<E.length&&E.charAt(R+1)===" ";)R++}else{var z=y[0],A=y[0];k.getWidth(z)===0&&(q++,z--),k.getWidth(A)===2&&(N++,A++);var Q=k.getString(A).length;for(Q>1&&(K+=Q-1,R+=Q-1);z>0&&x>0&&!this._isCharWordSeparator(k.loadCell(z-1,this._workCell));){k.loadCell(z-1,this._workCell);var J=this._workCell.getChars().length;this._workCell.getWidth()===0?(q++,z--):J>1&&(F+=J-1,x-=J-1),x--,z--}for(;A<k.length&&R+1<E.length&&!this._isCharWordSeparator(k.loadCell(A+1,this._workCell));){k.loadCell(A+1,this._workCell);var oe=this._workCell.getChars().length;this._workCell.getWidth()===2?(N++,A++):oe>1&&(K+=oe-1,R+=oe-1),R++,A++}}R++;var B=x+T-q+F,ne=Math.min(this._bufferService.cols,R-x+q+N-F-K);if(b||E.slice(x,R).trim()!==""){if(w&&B===0&&k.getCodePoint(0)!==32){var Y=L.lines.get(y[1]-1);if(Y&&k.isWrapped&&Y.getCodePoint(this._bufferService.cols-1)!==32){var W=this._getWordAt([this._bufferService.cols-1,y[1]-1],!1,!0,!1);if(W){var O=this._bufferService.cols-W.start;B-=O,ne+=O}}}if(M&&B+ne===this._bufferService.cols&&k.getCodePoint(this._bufferService.cols-1)!==32){var D=L.lines.get(y[1]+1);if(D!=null&&D.isWrapped&&D.getCodePoint(0)!==32){var j=this._getWordAt([0,y[1]+1],!1,!1,!0);j&&(ne+=j.length)}}return{start:B,length:ne}}}}},S.prototype._selectWordAt=function(y,b){var w=this._getWordAt(y,b);if(w){for(;w.start<0;)w.start+=this._bufferService.cols,y[1]--;this._model.selectionStart=[w.start,y[1]],this._model.selectionStartLength=w.length}},S.prototype._selectToWordAt=function(y){var b=this._getWordAt(y,!0);if(b){for(var w=y[1];b.start<0;)b.start+=this._bufferService.cols,w--;if(!this._model.areSelectionValuesReversed())for(;b.start+b.length>this._bufferService.cols;)b.length-=this._bufferService.cols,w++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?b.start:b.start+b.length,w]}},S.prototype._isCharWordSeparator=function(y){return y.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(y.getChars())>=0},S.prototype._selectLineAt=function(y){var b=this._bufferService.buffer.getWrappedRangeForLine(y),w={start:{x:0,y:b.first},end:{x:this._bufferService.cols-1,y:b.last}};this._model.selectionStart=[0,b.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,r.getRangeLength)(w,this._bufferService.cols)},f([d(3,h.IBufferService),d(4,h.ICoreService),d(5,p.IMouseService),d(6,h.IOptionsService),d(7,p.IRenderService)],S)}(t.Disposable);c.SelectionService=a},4725:(H,c,C)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.ICharacterJoinerService=c.ISoundService=c.ISelectionService=c.IRenderService=c.IMouseService=c.ICoreBrowserService=c.ICharSizeService=void 0;var _=C(8343);c.ICharSizeService=(0,_.createDecorator)("CharSizeService"),c.ICoreBrowserService=(0,_.createDecorator)("CoreBrowserService"),c.IMouseService=(0,_.createDecorator)("MouseService"),c.IRenderService=(0,_.createDecorator)("RenderService"),c.ISelectionService=(0,_.createDecorator)("SelectionService"),c.ISoundService=(0,_.createDecorator)("SoundService"),c.ICharacterJoinerService=(0,_.createDecorator)("CharacterJoinerService")},357:function(H,c,C){var _=this&&this.__decorate||function(m,v,o,s){var p,h=arguments.length,i=h<3?v:s===null?s=Object.getOwnPropertyDescriptor(v,o):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(m,v,o,s);else for(var e=m.length-1;e>=0;e--)(p=m[e])&&(i=(h<3?p(i):h>3?p(v,o,i):p(v,o))||i);return h>3&&i&&Object.defineProperty(v,o,i),i},u=this&&this.__param||function(m,v){return function(o,s){v(o,s,m)}};Object.defineProperty(c,"__esModule",{value:!0}),c.SoundService=void 0;var f=C(2585),d=function(){function m(v){this._optionsService=v}return Object.defineProperty(m,"audioContext",{get:function(){if(!m._audioContext){var v=window.AudioContext||window.webkitAudioContext;if(!v)return console.warn("Web Audio API is not supported by this browser. Consider upgrading to the latest version"),null;m._audioContext=new v}return m._audioContext},enumerable:!1,configurable:!0}),m.prototype.playBellSound=function(){var v=m.audioContext;if(v){var o=v.createBufferSource();v.decodeAudioData(this._base64ToArrayBuffer(this._removeMimeType(this._optionsService.rawOptions.bellSound)),function(s){o.buffer=s,o.connect(v.destination),o.start(0)})}},m.prototype._base64ToArrayBuffer=function(v){for(var o=window.atob(v),s=o.length,p=new Uint8Array(s),h=0;h<s;h++)p[h]=o.charCodeAt(h);return p.buffer},m.prototype._removeMimeType=function(v){return v.split(",")[1]},m=_([u(0,f.IOptionsService)],m)}();c.SoundService=d},6349:(H,c,C)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.CircularList=void 0;var _=C(8460),u=function(){function f(d){this._maxLength=d,this.onDeleteEmitter=new _.EventEmitter,this.onInsertEmitter=new _.EventEmitter,this.onTrimEmitter=new _.EventEmitter,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}return Object.defineProperty(f.prototype,"onDelete",{get:function(){return this.onDeleteEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"onInsert",{get:function(){return this.onInsertEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"onTrim",{get:function(){return this.onTrimEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"maxLength",{get:function(){return this._maxLength},set:function(d){if(this._maxLength!==d){for(var m=new Array(d),v=0;v<Math.min(d,this.length);v++)m[v]=this._array[this._getCyclicIndex(v)];this._array=m,this._maxLength=d,this._startIndex=0}},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"length",{get:function(){return this._length},set:function(d){if(d>this._length)for(var m=this._length;m<d;m++)this._array[m]=void 0;this._length=d},enumerable:!1,configurable:!0}),f.prototype.get=function(d){return this._array[this._getCyclicIndex(d)]},f.prototype.set=function(d,m){this._array[this._getCyclicIndex(d)]=m},f.prototype.push=function(d){this._array[this._getCyclicIndex(this._length)]=d,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++},f.prototype.recycle=function(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]},Object.defineProperty(f.prototype,"isFull",{get:function(){return this._length===this._maxLength},enumerable:!1,configurable:!0}),f.prototype.pop=function(){return this._array[this._getCyclicIndex(this._length---1)]},f.prototype.splice=function(d,m){for(var v=[],o=2;o<arguments.length;o++)v[o-2]=arguments[o];if(m){for(var s=d;s<this._length-m;s++)this._array[this._getCyclicIndex(s)]=this._array[this._getCyclicIndex(s+m)];this._length-=m,this.onDeleteEmitter.fire({index:d,amount:m})}for(s=this._length-1;s>=d;s--)this._array[this._getCyclicIndex(s+v.length)]=this._array[this._getCyclicIndex(s)];for(s=0;s<v.length;s++)this._array[this._getCyclicIndex(d+s)]=v[s];if(v.length&&this.onInsertEmitter.fire({index:d,amount:v.length}),this._length+v.length>this._maxLength){var p=this._length+v.length-this._maxLength;this._startIndex+=p,this._length=this._maxLength,this.onTrimEmitter.fire(p)}else this._length+=v.length},f.prototype.trimStart=function(d){d>this._length&&(d=this._length),this._startIndex+=d,this._length-=d,this.onTrimEmitter.fire(d)},f.prototype.shiftElements=function(d,m,v){if(!(m<=0)){if(d<0||d>=this._length)throw new Error("start argument out of range");if(d+v<0)throw new Error("Cannot shift elements in list beyond index 0");if(v>0){for(var o=m-1;o>=0;o--)this.set(d+o+v,this.get(d+o));var s=d+m+v-this._length;if(s>0)for(this._length+=s;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(o=0;o<m;o++)this.set(d+o+v,this.get(d+o))}},f.prototype._getCyclicIndex=function(d){return(this._startIndex+d)%this._maxLength},f}();c.CircularList=u},1439:(H,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.clone=void 0,c.clone=function C(_,u){if(u===void 0&&(u=5),typeof _!="object")return _;var f=Array.isArray(_)?[]:{};for(var d in _)f[d]=u<=1?_[d]:_[d]&&C(_[d],u-1);return f}},8055:function(H,c){var C,_,u,f,d=this&&this.__read||function(o,s){var p=typeof Symbol=="function"&&o[Symbol.iterator];if(!p)return o;var h,i,e=p.call(o),t=[];try{for(;(s===void 0||s-- >0)&&!(h=e.next()).done;)t.push(h.value)}catch(r){i={error:r}}finally{try{h&&!h.done&&(p=e.return)&&p.call(e)}finally{if(i)throw i.error}}return t};function m(o){var s=o.toString(16);return s.length<2?"0"+s:s}function v(o,s){return o<s?(s+.05)/(o+.05):(o+.05)/(s+.05)}Object.defineProperty(c,"__esModule",{value:!0}),c.contrastRatio=c.toPaddedHex=c.rgba=c.rgb=c.css=c.color=c.channels=void 0,function(o){o.toCss=function(s,p,h,i){return i!==void 0?"#"+m(s)+m(p)+m(h)+m(i):"#"+m(s)+m(p)+m(h)},o.toRgba=function(s,p,h,i){return i===void 0&&(i=255),(s<<24|p<<16|h<<8|i)>>>0}}(C=c.channels||(c.channels={})),(_=c.color||(c.color={})).blend=function(o,s){var p=(255&s.rgba)/255;if(p===1)return{css:s.css,rgba:s.rgba};var h=s.rgba>>24&255,i=s.rgba>>16&255,e=s.rgba>>8&255,t=o.rgba>>24&255,r=o.rgba>>16&255,n=o.rgba>>8&255,l=t+Math.round((h-t)*p),a=r+Math.round((i-r)*p),g=n+Math.round((e-n)*p);return{css:C.toCss(l,a,g),rgba:C.toRgba(l,a,g)}},_.isOpaque=function(o){return(255&o.rgba)==255},_.ensureContrastRatio=function(o,s,p){var h=f.ensureContrastRatio(o.rgba,s.rgba,p);if(h)return f.toColor(h>>24&255,h>>16&255,h>>8&255)},_.opaque=function(o){var s=(255|o.rgba)>>>0,p=d(f.toChannels(s),3),h=p[0],i=p[1],e=p[2];return{css:C.toCss(h,i,e),rgba:s}},_.opacity=function(o,s){var p=Math.round(255*s),h=d(f.toChannels(o.rgba),3),i=h[0],e=h[1],t=h[2];return{css:C.toCss(i,e,t,p),rgba:C.toRgba(i,e,t,p)}},_.toColorRGB=function(o){return[o.rgba>>24&255,o.rgba>>16&255,o.rgba>>8&255]},(c.css||(c.css={})).toColor=function(o){if(o.match(/#[0-9a-f]{3,8}/i))switch(o.length){case 4:var s=parseInt(o.slice(1,2).repeat(2),16),p=parseInt(o.slice(2,3).repeat(2),16),h=parseInt(o.slice(3,4).repeat(2),16);return f.toColor(s,p,h);case 5:s=parseInt(o.slice(1,2).repeat(2),16),p=parseInt(o.slice(2,3).repeat(2),16),h=parseInt(o.slice(3,4).repeat(2),16);var i=parseInt(o.slice(4,5).repeat(2),16);return f.toColor(s,p,h,i);case 7:return{css:o,rgba:(parseInt(o.slice(1),16)<<8|255)>>>0};case 9:return{css:o,rgba:parseInt(o.slice(1),16)>>>0}}var e=o.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(e)return s=parseInt(e[1]),p=parseInt(e[2]),h=parseInt(e[3]),i=Math.round(255*(e[5]===void 0?1:parseFloat(e[5]))),f.toColor(s,p,h,i);throw new Error("css.toColor: Unsupported css format")},function(o){function s(p,h,i){var e=p/255,t=h/255,r=i/255;return .2126*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.7152*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.0722*(r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4))}o.relativeLuminance=function(p){return s(p>>16&255,p>>8&255,255&p)},o.relativeLuminance2=s}(u=c.rgb||(c.rgb={})),function(o){function s(h,i,e){for(var t=h>>24&255,r=h>>16&255,n=h>>8&255,l=i>>24&255,a=i>>16&255,g=i>>8&255,S=v(u.relativeLuminance2(l,a,g),u.relativeLuminance2(t,r,n));S<e&&(l>0||a>0||g>0);)l-=Math.max(0,Math.ceil(.1*l)),a-=Math.max(0,Math.ceil(.1*a)),g-=Math.max(0,Math.ceil(.1*g)),S=v(u.relativeLuminance2(l,a,g),u.relativeLuminance2(t,r,n));return(l<<24|a<<16|g<<8|255)>>>0}function p(h,i,e){for(var t=h>>24&255,r=h>>16&255,n=h>>8&255,l=i>>24&255,a=i>>16&255,g=i>>8&255,S=v(u.relativeLuminance2(l,a,g),u.relativeLuminance2(t,r,n));S<e&&(l<255||a<255||g<255);)l=Math.min(255,l+Math.ceil(.1*(255-l))),a=Math.min(255,a+Math.ceil(.1*(255-a))),g=Math.min(255,g+Math.ceil(.1*(255-g))),S=v(u.relativeLuminance2(l,a,g),u.relativeLuminance2(t,r,n));return(l<<24|a<<16|g<<8|255)>>>0}o.ensureContrastRatio=function(h,i,e){var t=u.relativeLuminance(h>>8),r=u.relativeLuminance(i>>8);if(v(t,r)<e){if(r<t){var n=s(h,i,e),l=v(t,u.relativeLuminance(n>>8));if(l<e){var a=p(h,h,e);return l>v(t,u.relativeLuminance(a>>8))?n:a}return n}var g=p(h,i,e),S=v(t,u.relativeLuminance(g>>8));return S<e?(a=s(h,h,e),S>v(t,u.relativeLuminance(a>>8))?g:a):g}},o.reduceLuminance=s,o.increaseLuminance=p,o.toChannels=function(h){return[h>>24&255,h>>16&255,h>>8&255,255&h]},o.toColor=function(h,i,e,t){return{css:C.toCss(h,i,e,t),rgba:C.toRgba(h,i,e,t)}}}(f=c.rgba||(c.rgba={})),c.toPaddedHex=m,c.contrastRatio=v},8969:function(H,c,C){var _,u=this&&this.__extends||(_=function(b,w){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,L){M.__proto__=L}||function(M,L){for(var k in L)Object.prototype.hasOwnProperty.call(L,k)&&(M[k]=L[k])},_(b,w)},function(b,w){if(typeof w!="function"&&w!==null)throw new TypeError("Class extends value "+String(w)+" is not a constructor or null");function M(){this.constructor=b}_(b,w),b.prototype=w===null?Object.create(w):(M.prototype=w.prototype,new M)}),f=this&&this.__values||function(b){var w=typeof Symbol=="function"&&Symbol.iterator,M=w&&b[w],L=0;if(M)return M.call(b);if(b&&typeof b.length=="number")return{next:function(){return b&&L>=b.length&&(b=void 0),{value:b&&b[L++],done:!b}}};throw new TypeError(w?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(c,"__esModule",{value:!0}),c.CoreTerminal=void 0;var d=C(844),m=C(2585),v=C(4348),o=C(7866),s=C(744),p=C(7302),h=C(6975),i=C(8460),e=C(1753),t=C(3730),r=C(1480),n=C(7994),l=C(9282),a=C(5435),g=C(5981),S=!1,y=function(b){function w(M){var L=b.call(this)||this;return L._onBinary=new i.EventEmitter,L._onData=new i.EventEmitter,L._onLineFeed=new i.EventEmitter,L._onResize=new i.EventEmitter,L._onScroll=new i.EventEmitter,L._onWriteParsed=new i.EventEmitter,L._instantiationService=new v.InstantiationService,L.optionsService=new p.OptionsService(M),L._instantiationService.setService(m.IOptionsService,L.optionsService),L._bufferService=L.register(L._instantiationService.createInstance(s.BufferService)),L._instantiationService.setService(m.IBufferService,L._bufferService),L._logService=L._instantiationService.createInstance(o.LogService),L._instantiationService.setService(m.ILogService,L._logService),L.coreService=L.register(L._instantiationService.createInstance(h.CoreService,function(){return L.scrollToBottom()})),L._instantiationService.setService(m.ICoreService,L.coreService),L.coreMouseService=L._instantiationService.createInstance(e.CoreMouseService),L._instantiationService.setService(m.ICoreMouseService,L.coreMouseService),L._dirtyRowService=L._instantiationService.createInstance(t.DirtyRowService),L._instantiationService.setService(m.IDirtyRowService,L._dirtyRowService),L.unicodeService=L._instantiationService.createInstance(r.UnicodeService),L._instantiationService.setService(m.IUnicodeService,L.unicodeService),L._charsetService=L._instantiationService.createInstance(n.CharsetService),L._instantiationService.setService(m.ICharsetService,L._charsetService),L._inputHandler=new a.InputHandler(L._bufferService,L._charsetService,L.coreService,L._dirtyRowService,L._logService,L.optionsService,L.coreMouseService,L.unicodeService),L.register((0,i.forwardEvent)(L._inputHandler.onLineFeed,L._onLineFeed)),L.register(L._inputHandler),L.register((0,i.forwardEvent)(L._bufferService.onResize,L._onResize)),L.register((0,i.forwardEvent)(L.coreService.onData,L._onData)),L.register((0,i.forwardEvent)(L.coreService.onBinary,L._onBinary)),L.register(L.optionsService.onOptionChange(function(k){return L._updateOptions(k)})),L.register(L._bufferService.onScroll(function(k){L._onScroll.fire({position:L._bufferService.buffer.ydisp,source:0}),L._dirtyRowService.markRangeDirty(L._bufferService.buffer.scrollTop,L._bufferService.buffer.scrollBottom)})),L.register(L._inputHandler.onScroll(function(k){L._onScroll.fire({position:L._bufferService.buffer.ydisp,source:0}),L._dirtyRowService.markRangeDirty(L._bufferService.buffer.scrollTop,L._bufferService.buffer.scrollBottom)})),L._writeBuffer=new g.WriteBuffer(function(k,E){return L._inputHandler.parse(k,E)}),L.register((0,i.forwardEvent)(L._writeBuffer.onWriteParsed,L._onWriteParsed)),L}return u(w,b),Object.defineProperty(w.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"onData",{get:function(){return this._onData.event},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"onWriteParsed",{get:function(){return this._onWriteParsed.event},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"onScroll",{get:function(){var M=this;return this._onScrollApi||(this._onScrollApi=new i.EventEmitter,this.register(this._onScroll.event(function(L){var k;(k=M._onScrollApi)===null||k===void 0||k.fire(L.position)}))),this._onScrollApi.event},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"cols",{get:function(){return this._bufferService.cols},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"rows",{get:function(){return this._bufferService.rows},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"buffers",{get:function(){return this._bufferService.buffers},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"options",{get:function(){return this.optionsService.options},set:function(M){for(var L in M)this.optionsService.options[L]=M[L]},enumerable:!1,configurable:!0}),w.prototype.dispose=function(){var M;this._isDisposed||(b.prototype.dispose.call(this),(M=this._windowsMode)===null||M===void 0||M.dispose(),this._windowsMode=void 0)},w.prototype.write=function(M,L){this._writeBuffer.write(M,L)},w.prototype.writeSync=function(M,L){this._logService.logLevel<=m.LogLevelEnum.WARN&&!S&&(this._logService.warn("writeSync is unreliable and will be removed soon."),S=!0),this._writeBuffer.writeSync(M,L)},w.prototype.resize=function(M,L){isNaN(M)||isNaN(L)||(M=Math.max(M,s.MINIMUM_COLS),L=Math.max(L,s.MINIMUM_ROWS),this._bufferService.resize(M,L))},w.prototype.scroll=function(M,L){L===void 0&&(L=!1),this._bufferService.scroll(M,L)},w.prototype.scrollLines=function(M,L,k){this._bufferService.scrollLines(M,L,k)},w.prototype.scrollPages=function(M){this._bufferService.scrollPages(M)},w.prototype.scrollToTop=function(){this._bufferService.scrollToTop()},w.prototype.scrollToBottom=function(){this._bufferService.scrollToBottom()},w.prototype.scrollToLine=function(M){this._bufferService.scrollToLine(M)},w.prototype.registerEscHandler=function(M,L){return this._inputHandler.registerEscHandler(M,L)},w.prototype.registerDcsHandler=function(M,L){return this._inputHandler.registerDcsHandler(M,L)},w.prototype.registerCsiHandler=function(M,L){return this._inputHandler.registerCsiHandler(M,L)},w.prototype.registerOscHandler=function(M,L){return this._inputHandler.registerOscHandler(M,L)},w.prototype._setup=function(){this.optionsService.rawOptions.windowsMode&&this._enableWindowsMode()},w.prototype.reset=function(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()},w.prototype._updateOptions=function(M){var L;switch(M){case"scrollback":this.buffers.resize(this.cols,this.rows);break;case"windowsMode":this.optionsService.rawOptions.windowsMode?this._enableWindowsMode():((L=this._windowsMode)===null||L===void 0||L.dispose(),this._windowsMode=void 0)}},w.prototype._enableWindowsMode=function(){var M=this;if(!this._windowsMode){var L=[];L.push(this.onLineFeed(l.updateWindowsModeWrappedState.bind(null,this._bufferService))),L.push(this.registerCsiHandler({final:"H"},function(){return(0,l.updateWindowsModeWrappedState)(M._bufferService),!1})),this._windowsMode={dispose:function(){var k,E;try{for(var x=f(L),R=x.next();!R.done;R=x.next())R.value.dispose()}catch(T){k={error:T}}finally{try{R&&!R.done&&(E=x.return)&&E.call(x)}finally{if(k)throw k.error}}}}}},w}(d.Disposable);c.CoreTerminal=y},8460:(H,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.forwardEvent=c.EventEmitter=void 0;var C=function(){function _(){this._listeners=[],this._disposed=!1}return Object.defineProperty(_.prototype,"event",{get:function(){var u=this;return this._event||(this._event=function(f){return u._listeners.push(f),{dispose:function(){if(!u._disposed){for(var d=0;d<u._listeners.length;d++)if(u._listeners[d]===f)return void u._listeners.splice(d,1)}}}}),this._event},enumerable:!1,configurable:!0}),_.prototype.fire=function(u,f){for(var d=[],m=0;m<this._listeners.length;m++)d.push(this._listeners[m]);for(m=0;m<d.length;m++)d[m].call(void 0,u,f)},_.prototype.dispose=function(){this._listeners&&(this._listeners.length=0),this._disposed=!0},_}();c.EventEmitter=C,c.forwardEvent=function(_,u){return _(function(f){return u.fire(f)})}},5435:function(H,c,C){var _,u=this&&this.__extends||(_=function(L,k){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,x){E.__proto__=x}||function(E,x){for(var R in x)Object.prototype.hasOwnProperty.call(x,R)&&(E[R]=x[R])},_(L,k)},function(L,k){if(typeof k!="function"&&k!==null)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");function E(){this.constructor=L}_(L,k),L.prototype=k===null?Object.create(k):(E.prototype=k.prototype,new E)});Object.defineProperty(c,"__esModule",{value:!0}),c.InputHandler=c.WindowsOptionsReportType=void 0;var f,d=C(2584),m=C(7116),v=C(2015),o=C(844),s=C(8273),p=C(482),h=C(8437),i=C(8460),e=C(643),t=C(511),r=C(3734),n=C(2585),l=C(6242),a=C(6351),g=C(5941),S={"(":0,")":1,"*":2,"+":3,"-":1,".":2},y=131072;function b(L,k){if(L>24)return k.setWinLines||!1;switch(L){case 1:return!!k.restoreWin;case 2:return!!k.minimizeWin;case 3:return!!k.setWinPosition;case 4:return!!k.setWinSizePixels;case 5:return!!k.raiseWin;case 6:return!!k.lowerWin;case 7:return!!k.refreshWin;case 8:return!!k.setWinSizeChars;case 9:return!!k.maximizeWin;case 10:return!!k.fullscreenWin;case 11:return!!k.getWinState;case 13:return!!k.getWinPosition;case 14:return!!k.getWinSizePixels;case 15:return!!k.getScreenSizePixels;case 16:return!!k.getCellSizePixels;case 18:return!!k.getWinSizeChars;case 19:return!!k.getScreenSizeChars;case 20:return!!k.getIconTitle;case 21:return!!k.getWinTitle;case 22:return!!k.pushTitle;case 23:return!!k.popTitle;case 24:return!!k.setWinLines}return!1}(function(L){L[L.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",L[L.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(f=c.WindowsOptionsReportType||(c.WindowsOptionsReportType={}));var w=function(){function L(k,E,x,R){this._bufferService=k,this._coreService=E,this._logService=x,this._optionsService=R,this._data=new Uint32Array(0)}return L.prototype.hook=function(k){this._data=new Uint32Array(0)},L.prototype.put=function(k,E,x){this._data=(0,s.concat)(this._data,k.subarray(E,x))},L.prototype.unhook=function(k){if(!k)return this._data=new Uint32Array(0),!0;var E=(0,p.utf32ToString)(this._data);switch(this._data=new Uint32Array(0),E){case'"q':this._coreService.triggerDataEvent(d.C0.ESC+'P1$r0"q'+d.C0.ESC+"\\");break;case'"p':this._coreService.triggerDataEvent(d.C0.ESC+'P1$r61;1"p'+d.C0.ESC+"\\");break;case"r":var x=this._bufferService.buffer.scrollTop+1+";"+(this._bufferService.buffer.scrollBottom+1)+"r";this._coreService.triggerDataEvent(d.C0.ESC+"P1$r"+x+d.C0.ESC+"\\");break;case"m":this._coreService.triggerDataEvent(d.C0.ESC+"P1$r0m"+d.C0.ESC+"\\");break;case" q":var R={block:2,underline:4,bar:6}[this._optionsService.rawOptions.cursorStyle];R-=this._optionsService.rawOptions.cursorBlink?1:0,this._coreService.triggerDataEvent(d.C0.ESC+"P1$r"+R+" q"+d.C0.ESC+"\\");break;default:this._logService.debug("Unknown DCS $q %s",E),this._coreService.triggerDataEvent(d.C0.ESC+"P0$r"+d.C0.ESC+"\\")}return!0},L}(),M=function(L){function k(E,x,R,T,q,N,F,K,z){z===void 0&&(z=new v.EscapeSequenceParser);var A=L.call(this)||this;A._bufferService=E,A._charsetService=x,A._coreService=R,A._dirtyRowService=T,A._logService=q,A._optionsService=N,A._coreMouseService=F,A._unicodeService=K,A._parser=z,A._parseBuffer=new Uint32Array(4096),A._stringDecoder=new p.StringToUtf32,A._utf8Decoder=new p.Utf8ToUtf32,A._workCell=new t.CellData,A._windowTitle="",A._iconName="",A._windowTitleStack=[],A._iconNameStack=[],A._curAttrData=h.DEFAULT_ATTR_DATA.clone(),A._eraseAttrDataInternal=h.DEFAULT_ATTR_DATA.clone(),A._onRequestBell=new i.EventEmitter,A._onRequestRefreshRows=new i.EventEmitter,A._onRequestReset=new i.EventEmitter,A._onRequestSendFocus=new i.EventEmitter,A._onRequestSyncScrollBar=new i.EventEmitter,A._onRequestWindowsOptionsReport=new i.EventEmitter,A._onA11yChar=new i.EventEmitter,A._onA11yTab=new i.EventEmitter,A._onCursorMove=new i.EventEmitter,A._onLineFeed=new i.EventEmitter,A._onScroll=new i.EventEmitter,A._onTitleChange=new i.EventEmitter,A._onColor=new i.EventEmitter,A._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},A._specialColors=[256,257,258],A.register(A._parser),A._activeBuffer=A._bufferService.buffer,A.register(A._bufferService.buffers.onBufferActivate(function(B){return A._activeBuffer=B.activeBuffer})),A._parser.setCsiHandlerFallback(function(B,ne){A._logService.debug("Unknown CSI code: ",{identifier:A._parser.identToString(B),params:ne.toArray()})}),A._parser.setEscHandlerFallback(function(B){A._logService.debug("Unknown ESC code: ",{identifier:A._parser.identToString(B)})}),A._parser.setExecuteHandlerFallback(function(B){A._logService.debug("Unknown EXECUTE code: ",{code:B})}),A._parser.setOscHandlerFallback(function(B,ne,Y){A._logService.debug("Unknown OSC code: ",{identifier:B,action:ne,data:Y})}),A._parser.setDcsHandlerFallback(function(B,ne,Y){ne==="HOOK"&&(Y=Y.toArray()),A._logService.debug("Unknown DCS code: ",{identifier:A._parser.identToString(B),action:ne,payload:Y})}),A._parser.setPrintHandler(function(B,ne,Y){return A.print(B,ne,Y)}),A._parser.registerCsiHandler({final:"@"},function(B){return A.insertChars(B)}),A._parser.registerCsiHandler({intermediates:" ",final:"@"},function(B){return A.scrollLeft(B)}),A._parser.registerCsiHandler({final:"A"},function(B){return A.cursorUp(B)}),A._parser.registerCsiHandler({intermediates:" ",final:"A"},function(B){return A.scrollRight(B)}),A._parser.registerCsiHandler({final:"B"},function(B){return A.cursorDown(B)}),A._parser.registerCsiHandler({final:"C"},function(B){return A.cursorForward(B)}),A._parser.registerCsiHandler({final:"D"},function(B){return A.cursorBackward(B)}),A._parser.registerCsiHandler({final:"E"},function(B){return A.cursorNextLine(B)}),A._parser.registerCsiHandler({final:"F"},function(B){return A.cursorPrecedingLine(B)}),A._parser.registerCsiHandler({final:"G"},function(B){return A.cursorCharAbsolute(B)}),A._parser.registerCsiHandler({final:"H"},function(B){return A.cursorPosition(B)}),A._parser.registerCsiHandler({final:"I"},function(B){return A.cursorForwardTab(B)}),A._parser.registerCsiHandler({final:"J"},function(B){return A.eraseInDisplay(B)}),A._parser.registerCsiHandler({prefix:"?",final:"J"},function(B){return A.eraseInDisplay(B)}),A._parser.registerCsiHandler({final:"K"},function(B){return A.eraseInLine(B)}),A._parser.registerCsiHandler({prefix:"?",final:"K"},function(B){return A.eraseInLine(B)}),A._parser.registerCsiHandler({final:"L"},function(B){return A.insertLines(B)}),A._parser.registerCsiHandler({final:"M"},function(B){return A.deleteLines(B)}),A._parser.registerCsiHandler({final:"P"},function(B){return A.deleteChars(B)}),A._parser.registerCsiHandler({final:"S"},function(B){return A.scrollUp(B)}),A._parser.registerCsiHandler({final:"T"},function(B){return A.scrollDown(B)}),A._parser.registerCsiHandler({final:"X"},function(B){return A.eraseChars(B)}),A._parser.registerCsiHandler({final:"Z"},function(B){return A.cursorBackwardTab(B)}),A._parser.registerCsiHandler({final:"`"},function(B){return A.charPosAbsolute(B)}),A._parser.registerCsiHandler({final:"a"},function(B){return A.hPositionRelative(B)}),A._parser.registerCsiHandler({final:"b"},function(B){return A.repeatPrecedingCharacter(B)}),A._parser.registerCsiHandler({final:"c"},function(B){return A.sendDeviceAttributesPrimary(B)}),A._parser.registerCsiHandler({prefix:">",final:"c"},function(B){return A.sendDeviceAttributesSecondary(B)}),A._parser.registerCsiHandler({final:"d"},function(B){return A.linePosAbsolute(B)}),A._parser.registerCsiHandler({final:"e"},function(B){return A.vPositionRelative(B)}),A._parser.registerCsiHandler({final:"f"},function(B){return A.hVPosition(B)}),A._parser.registerCsiHandler({final:"g"},function(B){return A.tabClear(B)}),A._parser.registerCsiHandler({final:"h"},function(B){return A.setMode(B)}),A._parser.registerCsiHandler({prefix:"?",final:"h"},function(B){return A.setModePrivate(B)}),A._parser.registerCsiHandler({final:"l"},function(B){return A.resetMode(B)}),A._parser.registerCsiHandler({prefix:"?",final:"l"},function(B){return A.resetModePrivate(B)}),A._parser.registerCsiHandler({final:"m"},function(B){return A.charAttributes(B)}),A._parser.registerCsiHandler({final:"n"},function(B){return A.deviceStatus(B)}),A._parser.registerCsiHandler({prefix:"?",final:"n"},function(B){return A.deviceStatusPrivate(B)}),A._parser.registerCsiHandler({intermediates:"!",final:"p"},function(B){return A.softReset(B)}),A._parser.registerCsiHandler({intermediates:" ",final:"q"},function(B){return A.setCursorStyle(B)}),A._parser.registerCsiHandler({final:"r"},function(B){return A.setScrollRegion(B)}),A._parser.registerCsiHandler({final:"s"},function(B){return A.saveCursor(B)}),A._parser.registerCsiHandler({final:"t"},function(B){return A.windowOptions(B)}),A._parser.registerCsiHandler({final:"u"},function(B){return A.restoreCursor(B)}),A._parser.registerCsiHandler({intermediates:"'",final:"}"},function(B){return A.insertColumns(B)}),A._parser.registerCsiHandler({intermediates:"'",final:"~"},function(B){return A.deleteColumns(B)}),A._parser.setExecuteHandler(d.C0.BEL,function(){return A.bell()}),A._parser.setExecuteHandler(d.C0.LF,function(){return A.lineFeed()}),A._parser.setExecuteHandler(d.C0.VT,function(){return A.lineFeed()}),A._parser.setExecuteHandler(d.C0.FF,function(){return A.lineFeed()}),A._parser.setExecuteHandler(d.C0.CR,function(){return A.carriageReturn()}),A._parser.setExecuteHandler(d.C0.BS,function(){return A.backspace()}),A._parser.setExecuteHandler(d.C0.HT,function(){return A.tab()}),A._parser.setExecuteHandler(d.C0.SO,function(){return A.shiftOut()}),A._parser.setExecuteHandler(d.C0.SI,function(){return A.shiftIn()}),A._parser.setExecuteHandler(d.C1.IND,function(){return A.index()}),A._parser.setExecuteHandler(d.C1.NEL,function(){return A.nextLine()}),A._parser.setExecuteHandler(d.C1.HTS,function(){return A.tabSet()}),A._parser.registerOscHandler(0,new l.OscHandler(function(B){return A.setTitle(B),A.setIconName(B),!0})),A._parser.registerOscHandler(1,new l.OscHandler(function(B){return A.setIconName(B)})),A._parser.registerOscHandler(2,new l.OscHandler(function(B){return A.setTitle(B)})),A._parser.registerOscHandler(4,new l.OscHandler(function(B){return A.setOrReportIndexedColor(B)})),A._parser.registerOscHandler(10,new l.OscHandler(function(B){return A.setOrReportFgColor(B)})),A._parser.registerOscHandler(11,new l.OscHandler(function(B){return A.setOrReportBgColor(B)})),A._parser.registerOscHandler(12,new l.OscHandler(function(B){return A.setOrReportCursorColor(B)})),A._parser.registerOscHandler(104,new l.OscHandler(function(B){return A.restoreIndexedColor(B)})),A._parser.registerOscHandler(110,new l.OscHandler(function(B){return A.restoreFgColor(B)})),A._parser.registerOscHandler(111,new l.OscHandler(function(B){return A.restoreBgColor(B)})),A._parser.registerOscHandler(112,new l.OscHandler(function(B){return A.restoreCursorColor(B)})),A._parser.registerEscHandler({final:"7"},function(){return A.saveCursor()}),A._parser.registerEscHandler({final:"8"},function(){return A.restoreCursor()}),A._parser.registerEscHandler({final:"D"},function(){return A.index()}),A._parser.registerEscHandler({final:"E"},function(){return A.nextLine()}),A._parser.registerEscHandler({final:"H"},function(){return A.tabSet()}),A._parser.registerEscHandler({final:"M"},function(){return A.reverseIndex()}),A._parser.registerEscHandler({final:"="},function(){return A.keypadApplicationMode()}),A._parser.registerEscHandler({final:">"},function(){return A.keypadNumericMode()}),A._parser.registerEscHandler({final:"c"},function(){return A.fullReset()}),A._parser.registerEscHandler({final:"n"},function(){return A.setgLevel(2)}),A._parser.registerEscHandler({final:"o"},function(){return A.setgLevel(3)}),A._parser.registerEscHandler({final:"|"},function(){return A.setgLevel(3)}),A._parser.registerEscHandler({final:"}"},function(){return A.setgLevel(2)}),A._parser.registerEscHandler({final:"~"},function(){return A.setgLevel(1)}),A._parser.registerEscHandler({intermediates:"%",final:"@"},function(){return A.selectDefaultCharset()}),A._parser.registerEscHandler({intermediates:"%",final:"G"},function(){return A.selectDefaultCharset()});var Q=function(B){J._parser.registerEscHandler({intermediates:"(",final:B},function(){return A.selectCharset("("+B)}),J._parser.registerEscHandler({intermediates:")",final:B},function(){return A.selectCharset(")"+B)}),J._parser.registerEscHandler({intermediates:"*",final:B},function(){return A.selectCharset("*"+B)}),J._parser.registerEscHandler({intermediates:"+",final:B},function(){return A.selectCharset("+"+B)}),J._parser.registerEscHandler({intermediates:"-",final:B},function(){return A.selectCharset("-"+B)}),J._parser.registerEscHandler({intermediates:".",final:B},function(){return A.selectCharset("."+B)}),J._parser.registerEscHandler({intermediates:"/",final:B},function(){return A.selectCharset("/"+B)})},J=this;for(var oe in m.CHARSETS)Q(oe);return A._parser.registerEscHandler({intermediates:"#",final:"8"},function(){return A.screenAlignmentPattern()}),A._parser.setErrorHandler(function(B){return A._logService.error("Parsing error: ",B),B}),A._parser.registerDcsHandler({intermediates:"$",final:"q"},new w(A._bufferService,A._coreService,A._logService,A._optionsService)),A}return u(k,L),Object.defineProperty(k.prototype,"onRequestBell",{get:function(){return this._onRequestBell.event},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"onRequestRefreshRows",{get:function(){return this._onRequestRefreshRows.event},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"onRequestReset",{get:function(){return this._onRequestReset.event},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"onRequestSendFocus",{get:function(){return this._onRequestSendFocus.event},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"onRequestSyncScrollBar",{get:function(){return this._onRequestSyncScrollBar.event},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"onRequestWindowsOptionsReport",{get:function(){return this._onRequestWindowsOptionsReport.event},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"onA11yChar",{get:function(){return this._onA11yChar.event},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"onA11yTab",{get:function(){return this._onA11yTab.event},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"onColor",{get:function(){return this._onColor.event},enumerable:!1,configurable:!0}),k.prototype.dispose=function(){L.prototype.dispose.call(this)},k.prototype._preserveStack=function(E,x,R,T){this._parseStack.paused=!0,this._parseStack.cursorStartX=E,this._parseStack.cursorStartY=x,this._parseStack.decodedLength=R,this._parseStack.position=T},k.prototype._logSlowResolvingAsync=function(E){this._logService.logLevel<=n.LogLevelEnum.WARN&&Promise.race([E,new Promise(function(x,R){return setTimeout(function(){return R("#SLOW_TIMEOUT")},5e3)})]).catch(function(x){if(x!=="#SLOW_TIMEOUT")throw x;console.warn("async parser handler taking longer than 5000 ms")})},k.prototype.parse=function(E,x){var R,T=this._activeBuffer.x,q=this._activeBuffer.y,N=0,F=this._parseStack.paused;if(F){if(R=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,x))return this._logSlowResolvingAsync(R),R;T=this._parseStack.cursorStartX,q=this._parseStack.cursorStartY,this._parseStack.paused=!1,E.length>y&&(N=this._parseStack.position+y)}if(this._logService.logLevel<=n.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof E=="string"?' "'+E+'"':' "'+Array.prototype.map.call(E,function(Q){return String.fromCharCode(Q)}).join("")+'"'),typeof E=="string"?E.split("").map(function(Q){return Q.charCodeAt(0)}):E),this._parseBuffer.length<E.length&&this._parseBuffer.length<y&&(this._parseBuffer=new Uint32Array(Math.min(E.length,y))),F||this._dirtyRowService.clearRange(),E.length>y)for(var K=N;K<E.length;K+=y){var z=K+y<E.length?K+y:E.length,A=typeof E=="string"?this._stringDecoder.decode(E.substring(K,z),this._parseBuffer):this._utf8Decoder.decode(E.subarray(K,z),this._parseBuffer);if(R=this._parser.parse(this._parseBuffer,A))return this._preserveStack(T,q,A,K),this._logSlowResolvingAsync(R),R}else if(!F&&(A=typeof E=="string"?this._stringDecoder.decode(E,this._parseBuffer):this._utf8Decoder.decode(E,this._parseBuffer),R=this._parser.parse(this._parseBuffer,A)))return this._preserveStack(T,q,A,0),this._logSlowResolvingAsync(R),R;this._activeBuffer.x===T&&this._activeBuffer.y===q||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowService.start,this._dirtyRowService.end)},k.prototype.print=function(E,x,R){var T,q,N=this._charsetService.charset,F=this._optionsService.rawOptions.screenReaderMode,K=this._bufferService.cols,z=this._coreService.decPrivateModes.wraparound,A=this._coreService.modes.insertMode,Q=this._curAttrData,J=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowService.markDirty(this._activeBuffer.y),this._activeBuffer.x&&R-x>0&&J.getWidth(this._activeBuffer.x-1)===2&&J.setCellFromCodePoint(this._activeBuffer.x-1,0,1,Q.fg,Q.bg,Q.extended);for(var oe=x;oe<R;++oe){if(T=E[oe],q=this._unicodeService.wcwidth(T),T<127&&N){var B=N[String.fromCharCode(T)];B&&(T=B.charCodeAt(0))}if(F&&this._onA11yChar.fire((0,p.stringFromCodePoint)(T)),q||!this._activeBuffer.x){if(this._activeBuffer.x+q-1>=K){if(z){for(;this._activeBuffer.x<K;)J.setCellFromCodePoint(this._activeBuffer.x++,0,1,Q.fg,Q.bg,Q.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),J=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=K-1,q===2)continue}if(A&&(J.insertCells(this._activeBuffer.x,q,this._activeBuffer.getNullCell(Q),Q),J.getWidth(K-1)===2&&J.setCellFromCodePoint(K-1,e.NULL_CELL_CODE,e.NULL_CELL_WIDTH,Q.fg,Q.bg,Q.extended)),J.setCellFromCodePoint(this._activeBuffer.x++,T,q,Q.fg,Q.bg,Q.extended),q>0)for(;--q;)J.setCellFromCodePoint(this._activeBuffer.x++,0,0,Q.fg,Q.bg,Q.extended)}else J.getWidth(this._activeBuffer.x-1)?J.addCodepointToCell(this._activeBuffer.x-1,T):J.addCodepointToCell(this._activeBuffer.x-2,T)}R-x>0&&(J.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<K&&R-x>0&&J.getWidth(this._activeBuffer.x)===0&&!J.hasContent(this._activeBuffer.x)&&J.setCellFromCodePoint(this._activeBuffer.x,0,1,Q.fg,Q.bg,Q.extended),this._dirtyRowService.markDirty(this._activeBuffer.y)},k.prototype.registerCsiHandler=function(E,x){var R=this;return E.final!=="t"||E.prefix||E.intermediates?this._parser.registerCsiHandler(E,x):this._parser.registerCsiHandler(E,function(T){return!b(T.params[0],R._optionsService.rawOptions.windowOptions)||x(T)})},k.prototype.registerDcsHandler=function(E,x){return this._parser.registerDcsHandler(E,new a.DcsHandler(x))},k.prototype.registerEscHandler=function(E,x){return this._parser.registerEscHandler(E,x)},k.prototype.registerOscHandler=function(E,x){return this._parser.registerOscHandler(E,new l.OscHandler(x))},k.prototype.bell=function(){return this._onRequestBell.fire(),!0},k.prototype.lineFeed=function(){return this._dirtyRowService.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowService.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0},k.prototype.carriageReturn=function(){return this._activeBuffer.x=0,!0},k.prototype.backspace=function(){var E;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(!((E=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||E===void 0)&&E.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;var x=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);x.hasWidth(this._activeBuffer.x)&&!x.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0},k.prototype.tab=function(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;var E=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-E),!0},k.prototype.shiftOut=function(){return this._charsetService.setgLevel(1),!0},k.prototype.shiftIn=function(){return this._charsetService.setgLevel(0),!0},k.prototype._restrictCursor=function(E){E===void 0&&(E=this._bufferService.cols-1),this._activeBuffer.x=Math.min(E,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowService.markDirty(this._activeBuffer.y)},k.prototype._setCursor=function(E,x){this._dirtyRowService.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=E,this._activeBuffer.y=this._activeBuffer.scrollTop+x):(this._activeBuffer.x=E,this._activeBuffer.y=x),this._restrictCursor(),this._dirtyRowService.markDirty(this._activeBuffer.y)},k.prototype._moveCursor=function(E,x){this._restrictCursor(),this._setCursor(this._activeBuffer.x+E,this._activeBuffer.y+x)},k.prototype.cursorUp=function(E){var x=this._activeBuffer.y-this._activeBuffer.scrollTop;return x>=0?this._moveCursor(0,-Math.min(x,E.params[0]||1)):this._moveCursor(0,-(E.params[0]||1)),!0},k.prototype.cursorDown=function(E){var x=this._activeBuffer.scrollBottom-this._activeBuffer.y;return x>=0?this._moveCursor(0,Math.min(x,E.params[0]||1)):this._moveCursor(0,E.params[0]||1),!0},k.prototype.cursorForward=function(E){return this._moveCursor(E.params[0]||1,0),!0},k.prototype.cursorBackward=function(E){return this._moveCursor(-(E.params[0]||1),0),!0},k.prototype.cursorNextLine=function(E){return this.cursorDown(E),this._activeBuffer.x=0,!0},k.prototype.cursorPrecedingLine=function(E){return this.cursorUp(E),this._activeBuffer.x=0,!0},k.prototype.cursorCharAbsolute=function(E){return this._setCursor((E.params[0]||1)-1,this._activeBuffer.y),!0},k.prototype.cursorPosition=function(E){return this._setCursor(E.length>=2?(E.params[1]||1)-1:0,(E.params[0]||1)-1),!0},k.prototype.charPosAbsolute=function(E){return this._setCursor((E.params[0]||1)-1,this._activeBuffer.y),!0},k.prototype.hPositionRelative=function(E){return this._moveCursor(E.params[0]||1,0),!0},k.prototype.linePosAbsolute=function(E){return this._setCursor(this._activeBuffer.x,(E.params[0]||1)-1),!0},k.prototype.vPositionRelative=function(E){return this._moveCursor(0,E.params[0]||1),!0},k.prototype.hVPosition=function(E){return this.cursorPosition(E),!0},k.prototype.tabClear=function(E){var x=E.params[0];return x===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:x===3&&(this._activeBuffer.tabs={}),!0},k.prototype.cursorForwardTab=function(E){if(this._activeBuffer.x>=this._bufferService.cols)return!0;for(var x=E.params[0]||1;x--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0},k.prototype.cursorBackwardTab=function(E){if(this._activeBuffer.x>=this._bufferService.cols)return!0;for(var x=E.params[0]||1;x--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0},k.prototype._eraseInBufferLine=function(E,x,R,T){T===void 0&&(T=!1);var q=this._activeBuffer.lines.get(this._activeBuffer.ybase+E);q.replaceCells(x,R,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),T&&(q.isWrapped=!1)},k.prototype._resetBufferLine=function(E){var x=this._activeBuffer.lines.get(this._activeBuffer.ybase+E);x.fill(this._activeBuffer.getNullCell(this._eraseAttrData())),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+E),x.isWrapped=!1},k.prototype.eraseInDisplay=function(E){var x;switch(this._restrictCursor(this._bufferService.cols),E.params[0]){case 0:for(x=this._activeBuffer.y,this._dirtyRowService.markDirty(x),this._eraseInBufferLine(x++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0);x<this._bufferService.rows;x++)this._resetBufferLine(x);this._dirtyRowService.markDirty(x);break;case 1:for(x=this._activeBuffer.y,this._dirtyRowService.markDirty(x),this._eraseInBufferLine(x,0,this._activeBuffer.x+1,!0),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(x+1).isWrapped=!1);x--;)this._resetBufferLine(x);this._dirtyRowService.markDirty(0);break;case 2:for(x=this._bufferService.rows,this._dirtyRowService.markDirty(x-1);x--;)this._resetBufferLine(x);this._dirtyRowService.markDirty(0);break;case 3:var R=this._activeBuffer.lines.length-this._bufferService.rows;R>0&&(this._activeBuffer.lines.trimStart(R),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-R,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-R,0),this._onScroll.fire(0))}return!0},k.prototype.eraseInLine=function(E){switch(this._restrictCursor(this._bufferService.cols),E.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0)}return this._dirtyRowService.markDirty(this._activeBuffer.y),!0},k.prototype.insertLines=function(E){this._restrictCursor();var x=E.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var R=this._activeBuffer.ybase+this._activeBuffer.y,T=this._bufferService.rows-1-this._activeBuffer.scrollBottom,q=this._bufferService.rows-1+this._activeBuffer.ybase-T+1;x--;)this._activeBuffer.lines.splice(q-1,1),this._activeBuffer.lines.splice(R,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0},k.prototype.deleteLines=function(E){this._restrictCursor();var x=E.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;var R,T=this._activeBuffer.ybase+this._activeBuffer.y;for(R=this._bufferService.rows-1-this._activeBuffer.scrollBottom,R=this._bufferService.rows-1+this._activeBuffer.ybase-R;x--;)this._activeBuffer.lines.splice(T,1),this._activeBuffer.lines.splice(R,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0},k.prototype.insertChars=function(E){this._restrictCursor();var x=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return x&&(x.insertCells(this._activeBuffer.x,E.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},k.prototype.deleteChars=function(E){this._restrictCursor();var x=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return x&&(x.deleteCells(this._activeBuffer.x,E.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},k.prototype.scrollUp=function(E){for(var x=E.params[0]||1;x--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},k.prototype.scrollDown=function(E){for(var x=E.params[0]||1;x--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(h.DEFAULT_ATTR_DATA));return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},k.prototype.scrollLeft=function(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var x=E.params[0]||1,R=this._activeBuffer.scrollTop;R<=this._activeBuffer.scrollBottom;++R){var T=this._activeBuffer.lines.get(this._activeBuffer.ybase+R);T.deleteCells(0,x,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),T.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},k.prototype.scrollRight=function(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var x=E.params[0]||1,R=this._activeBuffer.scrollTop;R<=this._activeBuffer.scrollBottom;++R){var T=this._activeBuffer.lines.get(this._activeBuffer.ybase+R);T.insertCells(0,x,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),T.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},k.prototype.insertColumns=function(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var x=E.params[0]||1,R=this._activeBuffer.scrollTop;R<=this._activeBuffer.scrollBottom;++R){var T=this._activeBuffer.lines.get(this._activeBuffer.ybase+R);T.insertCells(this._activeBuffer.x,x,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),T.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},k.prototype.deleteColumns=function(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var x=E.params[0]||1,R=this._activeBuffer.scrollTop;R<=this._activeBuffer.scrollBottom;++R){var T=this._activeBuffer.lines.get(this._activeBuffer.ybase+R);T.deleteCells(this._activeBuffer.x,x,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),T.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},k.prototype.eraseChars=function(E){this._restrictCursor();var x=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return x&&(x.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(E.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},k.prototype.repeatPrecedingCharacter=function(E){if(!this._parser.precedingCodepoint)return!0;for(var x=E.params[0]||1,R=new Uint32Array(x),T=0;T<x;++T)R[T]=this._parser.precedingCodepoint;return this.print(R,0,R.length),!0},k.prototype.sendDeviceAttributesPrimary=function(E){return E.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(d.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(d.C0.ESC+"[?6c")),!0},k.prototype.sendDeviceAttributesSecondary=function(E){return E.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(d.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(d.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(E.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(d.C0.ESC+"[>83;40003;0c")),!0},k.prototype._is=function(E){return(this._optionsService.rawOptions.termName+"").indexOf(E)===0},k.prototype.setMode=function(E){for(var x=0;x<E.length;x++)E.params[x]===4&&(this._coreService.modes.insertMode=!0);return!0},k.prototype.setModePrivate=function(E){for(var x=0;x<E.length;x++)switch(E.params[x]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,m.DEFAULT_CHARSET),this._charsetService.setgCharset(1,m.DEFAULT_CHARSET),this._charsetService.setgCharset(2,m.DEFAULT_CHARSET),this._charsetService.setgCharset(3,m.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0},k.prototype.resetMode=function(E){for(var x=0;x<E.length;x++)E.params[x]===4&&(this._coreService.modes.insertMode=!1);return!0},k.prototype.resetModePrivate=function(E){for(var x=0;x<E.length;x++)switch(E.params[x]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),E.params[x]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0},k.prototype._updateAttrColor=function(E,x,R,T,q){return x===2?(E|=50331648,E&=-16777216,E|=r.AttributeData.fromColorRGB([R,T,q])):x===5&&(E&=-50331904,E|=33554432|255&R),E},k.prototype._extractColor=function(E,x,R){var T=[0,0,-1,0,0,0],q=0,N=0;do{if(T[N+q]=E.params[x+N],E.hasSubParams(x+N)){var F=E.getSubParams(x+N),K=0;do T[1]===5&&(q=1),T[N+K+1+q]=F[K];while(++K<F.length&&K+N+1+q<T.length);break}if(T[1]===5&&N+q>=2||T[1]===2&&N+q>=5)break;T[1]&&(q=1)}while(++N+x<E.length&&N+q<T.length);for(K=2;K<T.length;++K)T[K]===-1&&(T[K]=0);switch(T[0]){case 38:R.fg=this._updateAttrColor(R.fg,T[1],T[3],T[4],T[5]);break;case 48:R.bg=this._updateAttrColor(R.bg,T[1],T[3],T[4],T[5]);break;case 58:R.extended=R.extended.clone(),R.extended.underlineColor=this._updateAttrColor(R.extended.underlineColor,T[1],T[3],T[4],T[5])}return N},k.prototype._processUnderline=function(E,x){x.extended=x.extended.clone(),(!~E||E>5)&&(E=1),x.extended.underlineStyle=E,x.fg|=268435456,E===0&&(x.fg&=-268435457),x.updateExtended()},k.prototype.charAttributes=function(E){if(E.length===1&&E.params[0]===0)return this._curAttrData.fg=h.DEFAULT_ATTR_DATA.fg,this._curAttrData.bg=h.DEFAULT_ATTR_DATA.bg,!0;for(var x,R=E.length,T=this._curAttrData,q=0;q<R;q++)(x=E.params[q])>=30&&x<=37?(T.fg&=-50331904,T.fg|=16777216|x-30):x>=40&&x<=47?(T.bg&=-50331904,T.bg|=16777216|x-40):x>=90&&x<=97?(T.fg&=-50331904,T.fg|=16777224|x-90):x>=100&&x<=107?(T.bg&=-50331904,T.bg|=16777224|x-100):x===0?(T.fg=h.DEFAULT_ATTR_DATA.fg,T.bg=h.DEFAULT_ATTR_DATA.bg):x===1?T.fg|=134217728:x===3?T.bg|=67108864:x===4?(T.fg|=268435456,this._processUnderline(E.hasSubParams(q)?E.getSubParams(q)[0]:1,T)):x===5?T.fg|=536870912:x===7?T.fg|=67108864:x===8?T.fg|=1073741824:x===9?T.fg|=2147483648:x===2?T.bg|=134217728:x===21?this._processUnderline(2,T):x===22?(T.fg&=-134217729,T.bg&=-134217729):x===23?T.bg&=-67108865:x===24?T.fg&=-268435457:x===25?T.fg&=-536870913:x===27?T.fg&=-67108865:x===28?T.fg&=-1073741825:x===29?T.fg&=2147483647:x===39?(T.fg&=-67108864,T.fg|=16777215&h.DEFAULT_ATTR_DATA.fg):x===49?(T.bg&=-67108864,T.bg|=16777215&h.DEFAULT_ATTR_DATA.bg):x===38||x===48||x===58?q+=this._extractColor(E,q,T):x===59?(T.extended=T.extended.clone(),T.extended.underlineColor=-1,T.updateExtended()):x===100?(T.fg&=-67108864,T.fg|=16777215&h.DEFAULT_ATTR_DATA.fg,T.bg&=-67108864,T.bg|=16777215&h.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",x);return!0},k.prototype.deviceStatus=function(E){switch(E.params[0]){case 5:this._coreService.triggerDataEvent(d.C0.ESC+"[0n");break;case 6:var x=this._activeBuffer.y+1,R=this._activeBuffer.x+1;this._coreService.triggerDataEvent(d.C0.ESC+"["+x+";"+R+"R")}return!0},k.prototype.deviceStatusPrivate=function(E){if(E.params[0]===6){var x=this._activeBuffer.y+1,R=this._activeBuffer.x+1;this._coreService.triggerDataEvent(d.C0.ESC+"[?"+x+";"+R+"R")}return!0},k.prototype.softReset=function(E){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=h.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0},k.prototype.setCursorStyle=function(E){var x=E.params[0]||1;switch(x){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}var R=x%2==1;return this._optionsService.options.cursorBlink=R,!0},k.prototype.setScrollRegion=function(E){var x,R=E.params[0]||1;return(E.length<2||(x=E.params[1])>this._bufferService.rows||x===0)&&(x=this._bufferService.rows),x>R&&(this._activeBuffer.scrollTop=R-1,this._activeBuffer.scrollBottom=x-1,this._setCursor(0,0)),!0},k.prototype.windowOptions=function(E){if(!b(E.params[0],this._optionsService.rawOptions.windowOptions))return!0;var x=E.length>1?E.params[1]:0;switch(E.params[0]){case 14:x!==2&&this._onRequestWindowsOptionsReport.fire(f.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(f.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(d.C0.ESC+"[8;"+this._bufferService.rows+";"+this._bufferService.cols+"t");break;case 22:x!==0&&x!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),x!==0&&x!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:x!==0&&x!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),x!==0&&x!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0},k.prototype.saveCursor=function(E){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0},k.prototype.restoreCursor=function(E){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0},k.prototype.setTitle=function(E){return this._windowTitle=E,this._onTitleChange.fire(E),!0},k.prototype.setIconName=function(E){return this._iconName=E,!0},k.prototype.setOrReportIndexedColor=function(E){for(var x=[],R=E.split(";");R.length>1;){var T=R.shift(),q=R.shift();if(/^\d+$/.exec(T)){var N=parseInt(T);if(0<=N&&N<256)if(q==="?")x.push({type:0,index:N});else{var F=(0,g.parseColor)(q);F&&x.push({type:1,index:N,color:F})}}}return x.length&&this._onColor.fire(x),!0},k.prototype._setOrReportSpecialColor=function(E,x){for(var R=E.split(";"),T=0;T<R.length&&!(x>=this._specialColors.length);++T,++x)if(R[T]==="?")this._onColor.fire([{type:0,index:this._specialColors[x]}]);else{var q=(0,g.parseColor)(R[T]);q&&this._onColor.fire([{type:1,index:this._specialColors[x],color:q}])}return!0},k.prototype.setOrReportFgColor=function(E){return this._setOrReportSpecialColor(E,0)},k.prototype.setOrReportBgColor=function(E){return this._setOrReportSpecialColor(E,1)},k.prototype.setOrReportCursorColor=function(E){return this._setOrReportSpecialColor(E,2)},k.prototype.restoreIndexedColor=function(E){if(!E)return this._onColor.fire([{type:2}]),!0;for(var x=[],R=E.split(";"),T=0;T<R.length;++T)if(/^\d+$/.exec(R[T])){var q=parseInt(R[T]);0<=q&&q<256&&x.push({type:2,index:q})}return x.length&&this._onColor.fire(x),!0},k.prototype.restoreFgColor=function(E){return this._onColor.fire([{type:2,index:256}]),!0},k.prototype.restoreBgColor=function(E){return this._onColor.fire([{type:2,index:257}]),!0},k.prototype.restoreCursorColor=function(E){return this._onColor.fire([{type:2,index:258}]),!0},k.prototype.nextLine=function(){return this._activeBuffer.x=0,this.index(),!0},k.prototype.keypadApplicationMode=function(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0},k.prototype.keypadNumericMode=function(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0},k.prototype.selectDefaultCharset=function(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,m.DEFAULT_CHARSET),!0},k.prototype.selectCharset=function(E){return E.length!==2?(this.selectDefaultCharset(),!0):(E[0]==="/"||this._charsetService.setgCharset(S[E[0]],m.CHARSETS[E[1]]||m.DEFAULT_CHARSET),!0)},k.prototype.index=function(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0},k.prototype.tabSet=function(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0},k.prototype.reverseIndex=function(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){var E=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,E,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0},k.prototype.fullReset=function(){return this._parser.reset(),this._onRequestReset.fire(),!0},k.prototype.reset=function(){this._curAttrData=h.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=h.DEFAULT_ATTR_DATA.clone()},k.prototype._eraseAttrData=function(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal},k.prototype.setgLevel=function(E){return this._charsetService.setgLevel(E),!0},k.prototype.screenAlignmentPattern=function(){var E=new t.CellData;E.content=1<<22|"E".charCodeAt(0),E.fg=this._curAttrData.fg,E.bg=this._curAttrData.bg,this._setCursor(0,0);for(var x=0;x<this._bufferService.rows;++x){var R=this._activeBuffer.ybase+this._activeBuffer.y+x,T=this._activeBuffer.lines.get(R);T&&(T.fill(E),T.isWrapped=!1)}return this._dirtyRowService.markAllDirty(),this._setCursor(0,0),!0},k}(o.Disposable);c.InputHandler=M},844:function(H,c){var C=this&&this.__values||function(f){var d=typeof Symbol=="function"&&Symbol.iterator,m=d&&f[d],v=0;if(m)return m.call(f);if(f&&typeof f.length=="number")return{next:function(){return f&&v>=f.length&&(f=void 0),{value:f&&f[v++],done:!f}}};throw new TypeError(d?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(c,"__esModule",{value:!0}),c.getDisposeArrayDisposable=c.disposeArray=c.Disposable=void 0;var _=function(){function f(){this._disposables=[],this._isDisposed=!1}return f.prototype.dispose=function(){var d,m;this._isDisposed=!0;try{for(var v=C(this._disposables),o=v.next();!o.done;o=v.next())o.value.dispose()}catch(s){d={error:s}}finally{try{o&&!o.done&&(m=v.return)&&m.call(v)}finally{if(d)throw d.error}}this._disposables.length=0},f.prototype.register=function(d){return this._disposables.push(d),d},f.prototype.unregister=function(d){var m=this._disposables.indexOf(d);m!==-1&&this._disposables.splice(m,1)},f}();function u(f){var d,m;try{for(var v=C(f),o=v.next();!o.done;o=v.next())o.value.dispose()}catch(s){d={error:s}}finally{try{o&&!o.done&&(m=v.return)&&m.call(v)}finally{if(d)throw d.error}}f.length=0}c.Disposable=_,c.disposeArray=u,c.getDisposeArrayDisposable=function(f){return{dispose:function(){return u(f)}}}},6114:(H,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.isLinux=c.isWindows=c.isIphone=c.isIpad=c.isMac=c.isSafari=c.isLegacyEdge=c.isFirefox=void 0;var C=typeof navigator>"u",_=C?"node":navigator.userAgent,u=C?"node":navigator.platform;c.isFirefox=_.includes("Firefox"),c.isLegacyEdge=_.includes("Edge"),c.isSafari=/^((?!chrome|android).)*safari/i.test(_),c.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(u),c.isIpad=u==="iPad",c.isIphone=u==="iPhone",c.isWindows=["Windows","Win16","Win32","WinCE"].includes(u),c.isLinux=u.indexOf("Linux")>=0},6106:function(H,c){var C=this&&this.__generator||function(u,f){var d,m,v,o,s={label:0,sent:function(){if(1&v[0])throw v[1];return v[1]},trys:[],ops:[]};return o={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function p(h){return function(i){return function(e){if(d)throw new TypeError("Generator is already executing.");for(;s;)try{if(d=1,m&&(v=2&e[0]?m.return:e[0]?m.throw||((v=m.return)&&v.call(m),0):m.next)&&!(v=v.call(m,e[1])).done)return v;switch(m=0,v&&(e=[2&e[0],v.value]),e[0]){case 0:case 1:v=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,m=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!((v=(v=s.trys).length>0&&v[v.length-1])||e[0]!==6&&e[0]!==2)){s=0;continue}if(e[0]===3&&(!v||e[1]>v[0]&&e[1]<v[3])){s.label=e[1];break}if(e[0]===6&&s.label<v[1]){s.label=v[1],v=e;break}if(v&&s.label<v[2]){s.label=v[2],s.ops.push(e);break}v[2]&&s.ops.pop(),s.trys.pop();continue}e=f.call(u,s)}catch(t){e=[6,t],m=0}finally{d=v=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([h,i])}}};Object.defineProperty(c,"__esModule",{value:!0}),c.SortedList=void 0;var _=function(){function u(f){this._getKey=f,this._array=[]}return u.prototype.clear=function(){this._array.length=0},u.prototype.insert=function(f){if(this._array.length!==0){var d=this._search(this._getKey(f),0,this._array.length-1);this._array.splice(d,0,f)}else this._array.push(f)},u.prototype.delete=function(f){if(this._array.length===0)return!1;var d=this._getKey(f),m=this._search(d,0,this._array.length-1);if(this._getKey(this._array[m])!==d)return!1;do if(this._array[m]===f)return this._array.splice(m,1),!0;while(++m<this._array.length&&this._getKey(this._array[m])===d);return!1},u.prototype.getKeyIterator=function(f){var d;return C(this,function(m){switch(m.label){case 0:if(this._array.length===0)return[2];if((d=this._search(f,0,this._array.length-1))<0||d>=this._array.length)return[2];if(this._getKey(this._array[d])!==f)return[2];m.label=1;case 1:return[4,this._array[d]];case 2:m.sent(),m.label=3;case 3:if(++d<this._array.length&&this._getKey(this._array[d])===f)return[3,1];m.label=4;case 4:return[2]}})},u.prototype.values=function(){return this._array.values()},u.prototype._search=function(f,d,m){if(m<d)return d;var v=Math.floor((d+m)/2);if(this._getKey(this._array[v])>f)return this._search(f,d,v-1);if(this._getKey(this._array[v])<f)return this._search(f,v+1,m);for(;v>0&&this._getKey(this._array[v-1])===f;)v--;return v},u}();c.SortedList=_},8273:(H,c)=>{function C(_,u,f,d){if(f===void 0&&(f=0),d===void 0&&(d=_.length),f>=_.length)return _;f=(_.length+f)%_.length,d=d>=_.length?_.length:(_.length+d)%_.length;for(var m=f;m<d;++m)_[m]=u;return _}Object.defineProperty(c,"__esModule",{value:!0}),c.concat=c.fillFallback=c.fill=void 0,c.fill=function(_,u,f,d){return _.fill?_.fill(u,f,d):C(_,u,f,d)},c.fillFallback=C,c.concat=function(_,u){var f=new _.constructor(_.length+u.length);return f.set(_),f.set(u,_.length),f}},9282:(H,c,C)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.updateWindowsModeWrappedState=void 0;var _=C(643);c.updateWindowsModeWrappedState=function(u){var f=u.buffer.lines.get(u.buffer.ybase+u.buffer.y-1),d=f==null?void 0:f.get(u.cols-1),m=u.buffer.lines.get(u.buffer.ybase+u.buffer.y);m&&d&&(m.isWrapped=d[_.CHAR_DATA_CODE_INDEX]!==_.NULL_CELL_CODE&&d[_.CHAR_DATA_CODE_INDEX]!==_.WHITESPACE_CELL_CODE)}},3734:(H,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.ExtendedAttrs=c.AttributeData=void 0;var C=function(){function u(){this.fg=0,this.bg=0,this.extended=new _}return u.toColorRGB=function(f){return[f>>>16&255,f>>>8&255,255&f]},u.fromColorRGB=function(f){return(255&f[0])<<16|(255&f[1])<<8|255&f[2]},u.prototype.clone=function(){var f=new u;return f.fg=this.fg,f.bg=this.bg,f.extended=this.extended.clone(),f},u.prototype.isInverse=function(){return 67108864&this.fg},u.prototype.isBold=function(){return 134217728&this.fg},u.prototype.isUnderline=function(){return 268435456&this.fg},u.prototype.isBlink=function(){return 536870912&this.fg},u.prototype.isInvisible=function(){return 1073741824&this.fg},u.prototype.isItalic=function(){return 67108864&this.bg},u.prototype.isDim=function(){return 134217728&this.bg},u.prototype.isStrikethrough=function(){return 2147483648&this.fg},u.prototype.getFgColorMode=function(){return 50331648&this.fg},u.prototype.getBgColorMode=function(){return 50331648&this.bg},u.prototype.isFgRGB=function(){return(50331648&this.fg)==50331648},u.prototype.isBgRGB=function(){return(50331648&this.bg)==50331648},u.prototype.isFgPalette=function(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432},u.prototype.isBgPalette=function(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432},u.prototype.isFgDefault=function(){return(50331648&this.fg)==0},u.prototype.isBgDefault=function(){return(50331648&this.bg)==0},u.prototype.isAttributeDefault=function(){return this.fg===0&&this.bg===0},u.prototype.getFgColor=function(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}},u.prototype.getBgColor=function(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}},u.prototype.hasExtendedAttrs=function(){return 268435456&this.bg},u.prototype.updateExtended=function(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456},u.prototype.getUnderlineColor=function(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()},u.prototype.getUnderlineColorMode=function(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()},u.prototype.isUnderlineColorRGB=function(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()},u.prototype.isUnderlineColorPalette=function(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()},u.prototype.isUnderlineColorDefault=function(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()},u.prototype.getUnderlineStyle=function(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0},u}();c.AttributeData=C;var _=function(){function u(f,d){f===void 0&&(f=0),d===void 0&&(d=-1),this.underlineStyle=f,this.underlineColor=d}return u.prototype.clone=function(){return new u(this.underlineStyle,this.underlineColor)},u.prototype.isEmpty=function(){return this.underlineStyle===0},u}();c.ExtendedAttrs=_},9092:function(H,c,C){var _=this&&this.__read||function(t,r){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var l,a,g=n.call(t),S=[];try{for(;(r===void 0||r-- >0)&&!(l=g.next()).done;)S.push(l.value)}catch(y){a={error:y}}finally{try{l&&!l.done&&(n=g.return)&&n.call(g)}finally{if(a)throw a.error}}return S},u=this&&this.__spreadArray||function(t,r,n){if(n||arguments.length===2)for(var l,a=0,g=r.length;a<g;a++)!l&&a in r||(l||(l=Array.prototype.slice.call(r,0,a)),l[a]=r[a]);return t.concat(l||Array.prototype.slice.call(r))};Object.defineProperty(c,"__esModule",{value:!0}),c.BufferStringIterator=c.Buffer=c.MAX_BUFFER_SIZE=void 0;var f=C(6349),d=C(8437),m=C(511),v=C(643),o=C(4634),s=C(4863),p=C(7116),h=C(3734);c.MAX_BUFFER_SIZE=4294967295;var i=function(){function t(r,n,l){this._hasScrollback=r,this._optionsService=n,this._bufferService=l,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.savedY=0,this.savedX=0,this.savedCurAttrData=d.DEFAULT_ATTR_DATA.clone(),this.savedCharset=p.DEFAULT_CHARSET,this.markers=[],this._nullCell=m.CellData.fromCharData([0,v.NULL_CELL_CHAR,v.NULL_CELL_WIDTH,v.NULL_CELL_CODE]),this._whitespaceCell=m.CellData.fromCharData([0,v.WHITESPACE_CELL_CHAR,v.WHITESPACE_CELL_WIDTH,v.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new f.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}return t.prototype.getNullCell=function(r){return r?(this._nullCell.fg=r.fg,this._nullCell.bg=r.bg,this._nullCell.extended=r.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new h.ExtendedAttrs),this._nullCell},t.prototype.getWhitespaceCell=function(r){return r?(this._whitespaceCell.fg=r.fg,this._whitespaceCell.bg=r.bg,this._whitespaceCell.extended=r.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new h.ExtendedAttrs),this._whitespaceCell},t.prototype.getBlankLine=function(r,n){return new d.BufferLine(this._bufferService.cols,this.getNullCell(r),n)},Object.defineProperty(t.prototype,"hasScrollback",{get:function(){return this._hasScrollback&&this.lines.maxLength>this._rows},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isCursorInViewport",{get:function(){var r=this.ybase+this.y-this.ydisp;return r>=0&&r<this._rows},enumerable:!1,configurable:!0}),t.prototype._getCorrectBufferLength=function(r){if(!this._hasScrollback)return r;var n=r+this._optionsService.rawOptions.scrollback;return n>c.MAX_BUFFER_SIZE?c.MAX_BUFFER_SIZE:n},t.prototype.fillViewportRows=function(r){if(this.lines.length===0){r===void 0&&(r=d.DEFAULT_ATTR_DATA);for(var n=this._rows;n--;)this.lines.push(this.getBlankLine(r))}},t.prototype.clear=function(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new f.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()},t.prototype.resize=function(r,n){var l=this.getNullCell(d.DEFAULT_ATTR_DATA),a=this._getCorrectBufferLength(n);if(a>this.lines.maxLength&&(this.lines.maxLength=a),this.lines.length>0){if(this._cols<r)for(var g=0;g<this.lines.length;g++)this.lines.get(g).resize(r,l);var S=0;if(this._rows<n)for(var y=this._rows;y<n;y++)this.lines.length<n+this.ybase&&(this._optionsService.rawOptions.windowsMode?this.lines.push(new d.BufferLine(r,l)):this.ybase>0&&this.lines.length<=this.ybase+this.y+S+1?(this.ybase--,S++,this.ydisp>0&&this.ydisp--):this.lines.push(new d.BufferLine(r,l)));else for(y=this._rows;y>n;y--)this.lines.length>n+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(a<this.lines.maxLength){var b=this.lines.length-a;b>0&&(this.lines.trimStart(b),this.ybase=Math.max(this.ybase-b,0),this.ydisp=Math.max(this.ydisp-b,0),this.savedY=Math.max(this.savedY-b,0)),this.lines.maxLength=a}this.x=Math.min(this.x,r-1),this.y=Math.min(this.y,n-1),S&&(this.y+=S),this.savedX=Math.min(this.savedX,r-1),this.scrollTop=0}if(this.scrollBottom=n-1,this._isReflowEnabled&&(this._reflow(r,n),this._cols>r))for(g=0;g<this.lines.length;g++)this.lines.get(g).resize(r,l);this._cols=r,this._rows=n},Object.defineProperty(t.prototype,"_isReflowEnabled",{get:function(){return this._hasScrollback&&!this._optionsService.rawOptions.windowsMode},enumerable:!1,configurable:!0}),t.prototype._reflow=function(r,n){this._cols!==r&&(r>this._cols?this._reflowLarger(r,n):this._reflowSmaller(r,n))},t.prototype._reflowLarger=function(r,n){var l=(0,o.reflowLargerGetLinesToRemove)(this.lines,this._cols,r,this.ybase+this.y,this.getNullCell(d.DEFAULT_ATTR_DATA));if(l.length>0){var a=(0,o.reflowLargerCreateNewLayout)(this.lines,l);(0,o.reflowLargerApplyNewLayout)(this.lines,a.layout),this._reflowLargerAdjustViewport(r,n,a.countRemoved)}},t.prototype._reflowLargerAdjustViewport=function(r,n,l){for(var a=this.getNullCell(d.DEFAULT_ATTR_DATA),g=l;g-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<n&&this.lines.push(new d.BufferLine(r,a))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-l,0)},t.prototype._reflowSmaller=function(r,n){for(var l=this.getNullCell(d.DEFAULT_ATTR_DATA),a=[],g=0,S=this.lines.length-1;S>=0;S--){var y=this.lines.get(S);if(!(!y||!y.isWrapped&&y.getTrimmedLength()<=r)){for(var b=[y];y.isWrapped&&S>0;)y=this.lines.get(--S),b.unshift(y);var w=this.ybase+this.y;if(!(w>=S&&w<S+b.length)){var M,L=b[b.length-1].getTrimmedLength(),k=(0,o.reflowSmallerGetNewLineLengths)(b,this._cols,r),E=k.length-b.length;M=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+E):Math.max(0,this.lines.length-this.lines.maxLength+E);for(var x=[],R=0;R<E;R++){var T=this.getBlankLine(d.DEFAULT_ATTR_DATA,!0);x.push(T)}x.length>0&&(a.push({start:S+b.length+g,newLines:x}),g+=x.length),b.push.apply(b,u([],_(x),!1));var q=k.length-1,N=k[q];N===0&&(N=k[--q]);for(var F=b.length-E-1,K=L;F>=0;){var z=Math.min(K,N);if(b[q]===void 0)break;if(b[q].copyCellsFrom(b[F],K-z,N-z,z,!0),(N-=z)==0&&(N=k[--q]),(K-=z)==0){F--;var A=Math.max(F,0);K=(0,o.getWrappedLineTrimmedLength)(b,A,this._cols)}}for(R=0;R<b.length;R++)k[R]<r&&b[R].setCell(k[R],l);for(var Q=E-M;Q-- >0;)this.ybase===0?this.y<n-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+g)-n&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+E,this.ybase+n-1)}}}if(a.length>0){var J=[],oe=[];for(R=0;R<this.lines.length;R++)oe.push(this.lines.get(R));var B=this.lines.length,ne=B-1,Y=0,W=a[Y];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+g);var O=0;for(R=Math.min(this.lines.maxLength-1,B+g-1);R>=0;R--)if(W&&W.start>ne+O){for(var D=W.newLines.length-1;D>=0;D--)this.lines.set(R--,W.newLines[D]);R++,J.push({index:ne+1,amount:W.newLines.length}),O+=W.newLines.length,W=a[++Y]}else this.lines.set(R,oe[ne--]);var j=0;for(R=J.length-1;R>=0;R--)J[R].index+=j,this.lines.onInsertEmitter.fire(J[R]),j+=J[R].amount;var Z=Math.max(0,B+g-this.lines.maxLength);Z>0&&this.lines.onTrimEmitter.fire(Z)}},t.prototype.stringIndexToBufferIndex=function(r,n,l){for(l===void 0&&(l=!1);n;){var a=this.lines.get(r);if(!a)return[-1,-1];for(var g=l?a.getTrimmedLength():a.length,S=0;S<g;++S)if(a.get(S)[v.CHAR_DATA_WIDTH_INDEX]&&(n-=a.get(S)[v.CHAR_DATA_CHAR_INDEX].length||1),n<0)return[r,S];r++}return[r,0]},t.prototype.translateBufferLineToString=function(r,n,l,a){l===void 0&&(l=0);var g=this.lines.get(r);return g?g.translateToString(n,l,a):""},t.prototype.getWrappedRangeForLine=function(r){for(var n=r,l=r;n>0&&this.lines.get(n).isWrapped;)n--;for(;l+1<this.lines.length&&this.lines.get(l+1).isWrapped;)l++;return{first:n,last:l}},t.prototype.setupTabStops=function(r){for(r!=null?this.tabs[r]||(r=this.prevStop(r)):(this.tabs={},r=0);r<this._cols;r+=this._optionsService.rawOptions.tabStopWidth)this.tabs[r]=!0},t.prototype.prevStop=function(r){for(r==null&&(r=this.x);!this.tabs[--r]&&r>0;);return r>=this._cols?this._cols-1:r<0?0:r},t.prototype.nextStop=function(r){for(r==null&&(r=this.x);!this.tabs[++r]&&r<this._cols;);return r>=this._cols?this._cols-1:r<0?0:r},t.prototype.clearMarkers=function(r){this._isClearing=!0;for(var n=0;n<this.markers.length;n++)this.markers[n].line===r&&(this.markers[n].dispose(),this.markers.splice(n--,1));this._isClearing=!1},t.prototype.clearAllMarkers=function(){this._isClearing=!0;for(var r=0;r<this.markers.length;r++)this.markers[r].dispose(),this.markers.splice(r--,1);this._isClearing=!1},t.prototype.addMarker=function(r){var n=this,l=new s.Marker(r);return this.markers.push(l),l.register(this.lines.onTrim(function(a){l.line-=a,l.line<0&&l.dispose()})),l.register(this.lines.onInsert(function(a){l.line>=a.index&&(l.line+=a.amount)})),l.register(this.lines.onDelete(function(a){l.line>=a.index&&l.line<a.index+a.amount&&l.dispose(),l.line>a.index&&(l.line-=a.amount)})),l.register(l.onDispose(function(){return n._removeMarker(l)})),l},t.prototype._removeMarker=function(r){this._isClearing||this.markers.splice(this.markers.indexOf(r),1)},t.prototype.iterator=function(r,n,l,a,g){return new e(this,r,n,l,a,g)},t}();c.Buffer=i;var e=function(){function t(r,n,l,a,g,S){l===void 0&&(l=0),a===void 0&&(a=r.lines.length),g===void 0&&(g=0),S===void 0&&(S=0),this._buffer=r,this._trimRight=n,this._startIndex=l,this._endIndex=a,this._startOverscan=g,this._endOverscan=S,this._startIndex<0&&(this._startIndex=0),this._endIndex>this._buffer.lines.length&&(this._endIndex=this._buffer.lines.length),this._current=this._startIndex}return t.prototype.hasNext=function(){return this._current<this._endIndex},t.prototype.next=function(){var r=this._buffer.getWrappedRangeForLine(this._current);r.first<this._startIndex-this._startOverscan&&(r.first=this._startIndex-this._startOverscan),r.last>this._endIndex+this._endOverscan&&(r.last=this._endIndex+this._endOverscan),r.first=Math.max(r.first,0),r.last=Math.min(r.last,this._buffer.lines.length);for(var n="",l=r.first;l<=r.last;++l)n+=this._buffer.translateBufferLineToString(l,this._trimRight);return this._current=r.last+1,{range:r,content:n}},t}();c.BufferStringIterator=e},8437:(H,c,C)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.BufferLine=c.DEFAULT_ATTR_DATA=void 0;var _=C(482),u=C(643),f=C(511),d=C(3734);c.DEFAULT_ATTR_DATA=Object.freeze(new d.AttributeData);var m=function(){function v(o,s,p){p===void 0&&(p=!1),this.isWrapped=p,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*o);for(var h=s||f.CellData.fromCharData([0,u.NULL_CELL_CHAR,u.NULL_CELL_WIDTH,u.NULL_CELL_CODE]),i=0;i<o;++i)this.setCell(i,h);this.length=o}return v.prototype.get=function(o){var s=this._data[3*o+0],p=2097151&s;return[this._data[3*o+1],2097152&s?this._combined[o]:p?(0,_.stringFromCodePoint)(p):"",s>>22,2097152&s?this._combined[o].charCodeAt(this._combined[o].length-1):p]},v.prototype.set=function(o,s){this._data[3*o+1]=s[u.CHAR_DATA_ATTR_INDEX],s[u.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[o]=s[1],this._data[3*o+0]=2097152|o|s[u.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*o+0]=s[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|s[u.CHAR_DATA_WIDTH_INDEX]<<22},v.prototype.getWidth=function(o){return this._data[3*o+0]>>22},v.prototype.hasWidth=function(o){return 12582912&this._data[3*o+0]},v.prototype.getFg=function(o){return this._data[3*o+1]},v.prototype.getBg=function(o){return this._data[3*o+2]},v.prototype.hasContent=function(o){return 4194303&this._data[3*o+0]},v.prototype.getCodePoint=function(o){var s=this._data[3*o+0];return 2097152&s?this._combined[o].charCodeAt(this._combined[o].length-1):2097151&s},v.prototype.isCombined=function(o){return 2097152&this._data[3*o+0]},v.prototype.getString=function(o){var s=this._data[3*o+0];return 2097152&s?this._combined[o]:2097151&s?(0,_.stringFromCodePoint)(2097151&s):""},v.prototype.loadCell=function(o,s){var p=3*o;return s.content=this._data[p+0],s.fg=this._data[p+1],s.bg=this._data[p+2],2097152&s.content&&(s.combinedData=this._combined[o]),268435456&s.bg&&(s.extended=this._extendedAttrs[o]),s},v.prototype.setCell=function(o,s){2097152&s.content&&(this._combined[o]=s.combinedData),268435456&s.bg&&(this._extendedAttrs[o]=s.extended),this._data[3*o+0]=s.content,this._data[3*o+1]=s.fg,this._data[3*o+2]=s.bg},v.prototype.setCellFromCodePoint=function(o,s,p,h,i,e){268435456&i&&(this._extendedAttrs[o]=e),this._data[3*o+0]=s|p<<22,this._data[3*o+1]=h,this._data[3*o+2]=i},v.prototype.addCodepointToCell=function(o,s){var p=this._data[3*o+0];2097152&p?this._combined[o]+=(0,_.stringFromCodePoint)(s):(2097151&p?(this._combined[o]=(0,_.stringFromCodePoint)(2097151&p)+(0,_.stringFromCodePoint)(s),p&=-2097152,p|=2097152):p=s|1<<22,this._data[3*o+0]=p)},v.prototype.insertCells=function(o,s,p,h){if((o%=this.length)&&this.getWidth(o-1)===2&&this.setCellFromCodePoint(o-1,0,1,(h==null?void 0:h.fg)||0,(h==null?void 0:h.bg)||0,(h==null?void 0:h.extended)||new d.ExtendedAttrs),s<this.length-o){for(var i=new f.CellData,e=this.length-o-s-1;e>=0;--e)this.setCell(o+s+e,this.loadCell(o+e,i));for(e=0;e<s;++e)this.setCell(o+e,p)}else for(e=o;e<this.length;++e)this.setCell(e,p);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,(h==null?void 0:h.fg)||0,(h==null?void 0:h.bg)||0,(h==null?void 0:h.extended)||new d.ExtendedAttrs)},v.prototype.deleteCells=function(o,s,p,h){if(o%=this.length,s<this.length-o){for(var i=new f.CellData,e=0;e<this.length-o-s;++e)this.setCell(o+e,this.loadCell(o+s+e,i));for(e=this.length-s;e<this.length;++e)this.setCell(e,p)}else for(e=o;e<this.length;++e)this.setCell(e,p);o&&this.getWidth(o-1)===2&&this.setCellFromCodePoint(o-1,0,1,(h==null?void 0:h.fg)||0,(h==null?void 0:h.bg)||0,(h==null?void 0:h.extended)||new d.ExtendedAttrs),this.getWidth(o)!==0||this.hasContent(o)||this.setCellFromCodePoint(o,0,1,(h==null?void 0:h.fg)||0,(h==null?void 0:h.bg)||0,(h==null?void 0:h.extended)||new d.ExtendedAttrs)},v.prototype.replaceCells=function(o,s,p,h){for(o&&this.getWidth(o-1)===2&&this.setCellFromCodePoint(o-1,0,1,(h==null?void 0:h.fg)||0,(h==null?void 0:h.bg)||0,(h==null?void 0:h.extended)||new d.ExtendedAttrs),s<this.length&&this.getWidth(s-1)===2&&this.setCellFromCodePoint(s,0,1,(h==null?void 0:h.fg)||0,(h==null?void 0:h.bg)||0,(h==null?void 0:h.extended)||new d.ExtendedAttrs);o<s&&o<this.length;)this.setCell(o++,p)},v.prototype.resize=function(o,s){if(o!==this.length){if(o>this.length){var p=new Uint32Array(3*o);this.length&&(3*o<this._data.length?p.set(this._data.subarray(0,3*o)):p.set(this._data)),this._data=p;for(var h=this.length;h<o;++h)this.setCell(h,s)}else if(o){(p=new Uint32Array(3*o)).set(this._data.subarray(0,3*o)),this._data=p;var i=Object.keys(this._combined);for(h=0;h<i.length;h++){var e=parseInt(i[h],10);e>=o&&delete this._combined[e]}}else this._data=new Uint32Array(0),this._combined={};this.length=o}},v.prototype.fill=function(o){this._combined={},this._extendedAttrs={};for(var s=0;s<this.length;++s)this.setCell(s,o)},v.prototype.copyFrom=function(o){for(var s in this.length!==o.length?this._data=new Uint32Array(o._data):this._data.set(o._data),this.length=o.length,this._combined={},o._combined)this._combined[s]=o._combined[s];for(var s in this._extendedAttrs={},o._extendedAttrs)this._extendedAttrs[s]=o._extendedAttrs[s];this.isWrapped=o.isWrapped},v.prototype.clone=function(){var o=new v(0);for(var s in o._data=new Uint32Array(this._data),o.length=this.length,this._combined)o._combined[s]=this._combined[s];for(var s in this._extendedAttrs)o._extendedAttrs[s]=this._extendedAttrs[s];return o.isWrapped=this.isWrapped,o},v.prototype.getTrimmedLength=function(){for(var o=this.length-1;o>=0;--o)if(4194303&this._data[3*o+0])return o+(this._data[3*o+0]>>22);return 0},v.prototype.copyCellsFrom=function(o,s,p,h,i){var e=o._data;if(i)for(var t=h-1;t>=0;t--)for(var r=0;r<3;r++)this._data[3*(p+t)+r]=e[3*(s+t)+r];else for(t=0;t<h;t++)for(r=0;r<3;r++)this._data[3*(p+t)+r]=e[3*(s+t)+r];var n=Object.keys(o._combined);for(r=0;r<n.length;r++){var l=parseInt(n[r],10);l>=s&&(this._combined[l-s+p]=o._combined[l])}},v.prototype.translateToString=function(o,s,p){o===void 0&&(o=!1),s===void 0&&(s=0),p===void 0&&(p=this.length),o&&(p=Math.min(p,this.getTrimmedLength()));for(var h="";s<p;){var i=this._data[3*s+0],e=2097151&i;h+=2097152&i?this._combined[s]:e?(0,_.stringFromCodePoint)(e):u.WHITESPACE_CELL_CHAR,s+=i>>22||1}return h},v}();c.BufferLine=m},4841:(H,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.getRangeLength=void 0,c.getRangeLength=function(C,_){if(C.start.y>C.end.y)throw new Error("Buffer range end ("+C.end.x+", "+C.end.y+") cannot be before start ("+C.start.x+", "+C.start.y+")");return _*(C.end.y-C.start.y)+(C.end.x-C.start.x+1)}},4634:(H,c)=>{function C(_,u,f){if(u===_.length-1)return _[u].getTrimmedLength();var d=!_[u].hasContent(f-1)&&_[u].getWidth(f-1)===1,m=_[u+1].getWidth(0)===2;return d&&m?f-1:f}Object.defineProperty(c,"__esModule",{value:!0}),c.getWrappedLineTrimmedLength=c.reflowSmallerGetNewLineLengths=c.reflowLargerApplyNewLayout=c.reflowLargerCreateNewLayout=c.reflowLargerGetLinesToRemove=void 0,c.reflowLargerGetLinesToRemove=function(_,u,f,d,m){for(var v=[],o=0;o<_.length-1;o++){var s=o,p=_.get(++s);if(p.isWrapped){for(var h=[_.get(o)];s<_.length&&p.isWrapped;)h.push(p),p=_.get(++s);if(d>=o&&d<s)o+=h.length-1;else{for(var i=0,e=C(h,i,u),t=1,r=0;t<h.length;){var n=C(h,t,u),l=n-r,a=f-e,g=Math.min(l,a);h[i].copyCellsFrom(h[t],r,e,g,!1),(e+=g)===f&&(i++,e=0),(r+=g)===n&&(t++,r=0),e===0&&i!==0&&h[i-1].getWidth(f-1)===2&&(h[i].copyCellsFrom(h[i-1],f-1,e++,1,!1),h[i-1].setCell(f-1,m))}h[i].replaceCells(e,f,m);for(var S=0,y=h.length-1;y>0&&(y>i||h[y].getTrimmedLength()===0);y--)S++;S>0&&(v.push(o+h.length-S),v.push(S)),o+=h.length-1}}}return v},c.reflowLargerCreateNewLayout=function(_,u){for(var f=[],d=0,m=u[d],v=0,o=0;o<_.length;o++)if(m===o){var s=u[++d];_.onDeleteEmitter.fire({index:o-v,amount:s}),o+=s-1,v+=s,m=u[++d]}else f.push(o);return{layout:f,countRemoved:v}},c.reflowLargerApplyNewLayout=function(_,u){for(var f=[],d=0;d<u.length;d++)f.push(_.get(u[d]));for(d=0;d<f.length;d++)_.set(d,f[d]);_.length=u.length},c.reflowSmallerGetNewLineLengths=function(_,u,f){for(var d=[],m=_.map(function(e,t){return C(_,t,u)}).reduce(function(e,t){return e+t}),v=0,o=0,s=0;s<m;){if(m-s<f){d.push(m-s);break}v+=f;var p=C(_,o,u);v>p&&(v-=p,o++);var h=_[o].getWidth(v-1)===2;h&&v--;var i=h?f-1:f;d.push(i),s+=i}return d},c.getWrappedLineTrimmedLength=C},5295:function(H,c,C){var _,u=this&&this.__extends||(_=function(v,o){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,p){s.__proto__=p}||function(s,p){for(var h in p)Object.prototype.hasOwnProperty.call(p,h)&&(s[h]=p[h])},_(v,o)},function(v,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function s(){this.constructor=v}_(v,o),v.prototype=o===null?Object.create(o):(s.prototype=o.prototype,new s)});Object.defineProperty(c,"__esModule",{value:!0}),c.BufferSet=void 0;var f=C(9092),d=C(8460),m=function(v){function o(s,p){var h=v.call(this)||this;return h._optionsService=s,h._bufferService=p,h._onBufferActivate=h.register(new d.EventEmitter),h.reset(),h}return u(o,v),Object.defineProperty(o.prototype,"onBufferActivate",{get:function(){return this._onBufferActivate.event},enumerable:!1,configurable:!0}),o.prototype.reset=function(){this._normal=new f.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new f.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()},Object.defineProperty(o.prototype,"alt",{get:function(){return this._alt},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"active",{get:function(){return this._activeBuffer},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"normal",{get:function(){return this._normal},enumerable:!1,configurable:!0}),o.prototype.activateNormalBuffer=function(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))},o.prototype.activateAltBuffer=function(s){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(s),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))},o.prototype.resize=function(s,p){this._normal.resize(s,p),this._alt.resize(s,p)},o.prototype.setupTabStops=function(s){this._normal.setupTabStops(s),this._alt.setupTabStops(s)},o}(C(844).Disposable);c.BufferSet=m},511:function(H,c,C){var _,u=this&&this.__extends||(_=function(o,s){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var i in h)Object.prototype.hasOwnProperty.call(h,i)&&(p[i]=h[i])},_(o,s)},function(o,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function p(){this.constructor=o}_(o,s),o.prototype=s===null?Object.create(s):(p.prototype=s.prototype,new p)});Object.defineProperty(c,"__esModule",{value:!0}),c.CellData=void 0;var f=C(482),d=C(643),m=C(3734),v=function(o){function s(){var p=o!==null&&o.apply(this,arguments)||this;return p.content=0,p.fg=0,p.bg=0,p.extended=new m.ExtendedAttrs,p.combinedData="",p}return u(s,o),s.fromCharData=function(p){var h=new s;return h.setFromCharData(p),h},s.prototype.isCombined=function(){return 2097152&this.content},s.prototype.getWidth=function(){return this.content>>22},s.prototype.getChars=function(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,f.stringFromCodePoint)(2097151&this.content):""},s.prototype.getCode=function(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content},s.prototype.setFromCharData=function(p){this.fg=p[d.CHAR_DATA_ATTR_INDEX],this.bg=0;var h=!1;if(p[d.CHAR_DATA_CHAR_INDEX].length>2)h=!0;else if(p[d.CHAR_DATA_CHAR_INDEX].length===2){var i=p[d.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=i&&i<=56319){var e=p[d.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=e&&e<=57343?this.content=1024*(i-55296)+e-56320+65536|p[d.CHAR_DATA_WIDTH_INDEX]<<22:h=!0}else h=!0}else this.content=p[d.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|p[d.CHAR_DATA_WIDTH_INDEX]<<22;h&&(this.combinedData=p[d.CHAR_DATA_CHAR_INDEX],this.content=2097152|p[d.CHAR_DATA_WIDTH_INDEX]<<22)},s.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},s}(m.AttributeData);c.CellData=v},643:(H,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.WHITESPACE_CELL_CODE=c.WHITESPACE_CELL_WIDTH=c.WHITESPACE_CELL_CHAR=c.NULL_CELL_CODE=c.NULL_CELL_WIDTH=c.NULL_CELL_CHAR=c.CHAR_DATA_CODE_INDEX=c.CHAR_DATA_WIDTH_INDEX=c.CHAR_DATA_CHAR_INDEX=c.CHAR_DATA_ATTR_INDEX=c.DEFAULT_ATTR=c.DEFAULT_COLOR=void 0,c.DEFAULT_COLOR=256,c.DEFAULT_ATTR=256|c.DEFAULT_COLOR<<9,c.CHAR_DATA_ATTR_INDEX=0,c.CHAR_DATA_CHAR_INDEX=1,c.CHAR_DATA_WIDTH_INDEX=2,c.CHAR_DATA_CODE_INDEX=3,c.NULL_CELL_CHAR="",c.NULL_CELL_WIDTH=1,c.NULL_CELL_CODE=0,c.WHITESPACE_CELL_CHAR=" ",c.WHITESPACE_CELL_WIDTH=1,c.WHITESPACE_CELL_CODE=32},4863:function(H,c,C){var _,u=this&&this.__extends||(_=function(m,v){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,s){o.__proto__=s}||function(o,s){for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&(o[p]=s[p])},_(m,v)},function(m,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");function o(){this.constructor=m}_(m,v),m.prototype=v===null?Object.create(v):(o.prototype=v.prototype,new o)});Object.defineProperty(c,"__esModule",{value:!0}),c.Marker=void 0;var f=C(8460),d=function(m){function v(o){var s=m.call(this)||this;return s.line=o,s._id=v._nextId++,s.isDisposed=!1,s._onDispose=new f.EventEmitter,s}return u(v,m),Object.defineProperty(v.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"onDispose",{get:function(){return this._onDispose.event},enumerable:!1,configurable:!0}),v.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),m.prototype.dispose.call(this))},v._nextId=1,v}(C(844).Disposable);c.Marker=d},7116:(H,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.DEFAULT_CHARSET=c.CHARSETS=void 0,c.CHARSETS={},c.DEFAULT_CHARSET=c.CHARSETS.B,c.CHARSETS[0]={"`":"â",a:"â",b:"â",c:"â",d:"â",e:"â",f:"Â°",g:"Â±",h:"â¤",i:"â",j:"â",k:"â",l:"â",m:"â",n:"â¼",o:"âº",p:"â»",q:"â",r:"â¼",s:"â½",t:"â",u:"â¤",v:"â´",w:"â¬",x:"â",y:"â¤",z:"â¥","{":"Ï","|":"â ","}":"Â£","~":"Â·"},c.CHARSETS.A={"#":"Â£"},c.CHARSETS.B=void 0,c.CHARSETS[4]={"#":"Â£","@":"Â¾","[":"ij","\\":"Â½","]":"|","{":"Â¨","|":"f","}":"Â¼","~":"Â´"},c.CHARSETS.C=c.CHARSETS[5]={"[":"Ã","\\":"Ã","]":"Ã","^":"Ã","`":"Ã©","{":"Ã¤","|":"Ã¶","}":"Ã¥","~":"Ã¼"},c.CHARSETS.R={"#":"Â£","@":"Ã ","[":"Â°","\\":"Ã§","]":"Â§","{":"Ã©","|":"Ã¹","}":"Ã¨","~":"Â¨"},c.CHARSETS.Q={"@":"Ã ","[":"Ã¢","\\":"Ã§","]":"Ãª","^":"Ã®","`":"Ã´","{":"Ã©","|":"Ã¹","}":"Ã¨","~":"Ã»"},c.CHARSETS.K={"@":"Â§","[":"Ã","\\":"Ã","]":"Ã","{":"Ã¤","|":"Ã¶","}":"Ã¼","~":"Ã"},c.CHARSETS.Y={"#":"Â£","@":"Â§","[":"Â°","\\":"Ã§","]":"Ã©","`":"Ã¹","{":"Ã ","|":"Ã²","}":"Ã¨","~":"Ã¬"},c.CHARSETS.E=c.CHARSETS[6]={"@":"Ã","[":"Ã","\\":"Ã","]":"Ã","^":"Ã","`":"Ã¤","{":"Ã¦","|":"Ã¸","}":"Ã¥","~":"Ã¼"},c.CHARSETS.Z={"#":"Â£","@":"Â§","[":"Â¡","\\":"Ã","]":"Â¿","{":"Â°","|":"Ã±","}":"Ã§"},c.CHARSETS.H=c.CHARSETS[7]={"@":"Ã","[":"Ã","\\":"Ã","]":"Ã","^":"Ã","`":"Ã©","{":"Ã¤","|":"Ã¶","}":"Ã¥","~":"Ã¼"},c.CHARSETS["="]={"#":"Ã¹","@":"Ã ","[":"Ã©","\\":"Ã§","]":"Ãª","^":"Ã®",_:"Ã¨","`":"Ã´","{":"Ã¤","|":"Ã¶","}":"Ã¼","~":"Ã»"}},2584:(H,c)=>{var C,_;Object.defineProperty(c,"__esModule",{value:!0}),c.C1_ESCAPED=c.C1=c.C0=void 0,function(u){u.NUL="\0",u.SOH="",u.STX="",u.ETX="",u.EOT="",u.ENQ="",u.ACK="",u.BEL="\x07",u.BS="\b",u.HT="	",u.LF=`
`,u.VT="\v",u.FF="\f",u.CR="\r",u.SO="",u.SI="",u.DLE="",u.DC1="",u.DC2="",u.DC3="",u.DC4="",u.NAK="",u.SYN="",u.ETB="",u.CAN="",u.EM="",u.SUB="",u.ESC="\x1B",u.FS="",u.GS="",u.RS="",u.US="",u.SP=" ",u.DEL=""}(C=c.C0||(c.C0={})),(_=c.C1||(c.C1={})).PAD="Â",_.HOP="Â",_.BPH="Â",_.NBH="Â",_.IND="Â",_.NEL="Â",_.SSA="Â",_.ESA="Â",_.HTS="Â",_.HTJ="Â",_.VTS="Â",_.PLD="Â",_.PLU="Â",_.RI="Â",_.SS2="Â",_.SS3="Â",_.DCS="Â",_.PU1="Â",_.PU2="Â",_.STS="Â",_.CCH="Â",_.MW="Â",_.SPA="Â",_.EPA="Â",_.SOS="Â",_.SGCI="Â",_.SCI="Â",_.CSI="Â",_.ST="Â",_.OSC="Â",_.PM="Â",_.APC="Â",(c.C1_ESCAPED||(c.C1_ESCAPED={})).ST=C.ESC+"\\"},7399:(H,c,C)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.evaluateKeyboardEvent=void 0;var _=C(2584),u={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};c.evaluateKeyboardEvent=function(f,d,m,v){var o={type:0,cancel:!1,key:void 0},s=(f.shiftKey?1:0)|(f.altKey?2:0)|(f.ctrlKey?4:0)|(f.metaKey?8:0);switch(f.keyCode){case 0:f.key==="UIKeyInputUpArrow"?o.key=d?_.C0.ESC+"OA":_.C0.ESC+"[A":f.key==="UIKeyInputLeftArrow"?o.key=d?_.C0.ESC+"OD":_.C0.ESC+"[D":f.key==="UIKeyInputRightArrow"?o.key=d?_.C0.ESC+"OC":_.C0.ESC+"[C":f.key==="UIKeyInputDownArrow"&&(o.key=d?_.C0.ESC+"OB":_.C0.ESC+"[B");break;case 8:if(f.shiftKey){o.key=_.C0.BS;break}if(f.altKey){o.key=_.C0.ESC+_.C0.DEL;break}o.key=_.C0.DEL;break;case 9:if(f.shiftKey){o.key=_.C0.ESC+"[Z";break}o.key=_.C0.HT,o.cancel=!0;break;case 13:o.key=f.altKey?_.C0.ESC+_.C0.CR:_.C0.CR,o.cancel=!0;break;case 27:o.key=_.C0.ESC,f.altKey&&(o.key=_.C0.ESC+_.C0.ESC),o.cancel=!0;break;case 37:if(f.metaKey)break;s?(o.key=_.C0.ESC+"[1;"+(s+1)+"D",o.key===_.C0.ESC+"[1;3D"&&(o.key=_.C0.ESC+(m?"b":"[1;5D"))):o.key=d?_.C0.ESC+"OD":_.C0.ESC+"[D";break;case 39:if(f.metaKey)break;s?(o.key=_.C0.ESC+"[1;"+(s+1)+"C",o.key===_.C0.ESC+"[1;3C"&&(o.key=_.C0.ESC+(m?"f":"[1;5C"))):o.key=d?_.C0.ESC+"OC":_.C0.ESC+"[C";break;case 38:if(f.metaKey)break;s?(o.key=_.C0.ESC+"[1;"+(s+1)+"A",m||o.key!==_.C0.ESC+"[1;3A"||(o.key=_.C0.ESC+"[1;5A")):o.key=d?_.C0.ESC+"OA":_.C0.ESC+"[A";break;case 40:if(f.metaKey)break;s?(o.key=_.C0.ESC+"[1;"+(s+1)+"B",m||o.key!==_.C0.ESC+"[1;3B"||(o.key=_.C0.ESC+"[1;5B")):o.key=d?_.C0.ESC+"OB":_.C0.ESC+"[B";break;case 45:f.shiftKey||f.ctrlKey||(o.key=_.C0.ESC+"[2~");break;case 46:o.key=s?_.C0.ESC+"[3;"+(s+1)+"~":_.C0.ESC+"[3~";break;case 36:o.key=s?_.C0.ESC+"[1;"+(s+1)+"H":d?_.C0.ESC+"OH":_.C0.ESC+"[H";break;case 35:o.key=s?_.C0.ESC+"[1;"+(s+1)+"F":d?_.C0.ESC+"OF":_.C0.ESC+"[F";break;case 33:f.shiftKey?o.type=2:f.ctrlKey?o.key=_.C0.ESC+"[5;"+(s+1)+"~":o.key=_.C0.ESC+"[5~";break;case 34:f.shiftKey?o.type=3:f.ctrlKey?o.key=_.C0.ESC+"[6;"+(s+1)+"~":o.key=_.C0.ESC+"[6~";break;case 112:o.key=s?_.C0.ESC+"[1;"+(s+1)+"P":_.C0.ESC+"OP";break;case 113:o.key=s?_.C0.ESC+"[1;"+(s+1)+"Q":_.C0.ESC+"OQ";break;case 114:o.key=s?_.C0.ESC+"[1;"+(s+1)+"R":_.C0.ESC+"OR";break;case 115:o.key=s?_.C0.ESC+"[1;"+(s+1)+"S":_.C0.ESC+"OS";break;case 116:o.key=s?_.C0.ESC+"[15;"+(s+1)+"~":_.C0.ESC+"[15~";break;case 117:o.key=s?_.C0.ESC+"[17;"+(s+1)+"~":_.C0.ESC+"[17~";break;case 118:o.key=s?_.C0.ESC+"[18;"+(s+1)+"~":_.C0.ESC+"[18~";break;case 119:o.key=s?_.C0.ESC+"[19;"+(s+1)+"~":_.C0.ESC+"[19~";break;case 120:o.key=s?_.C0.ESC+"[20;"+(s+1)+"~":_.C0.ESC+"[20~";break;case 121:o.key=s?_.C0.ESC+"[21;"+(s+1)+"~":_.C0.ESC+"[21~";break;case 122:o.key=s?_.C0.ESC+"[23;"+(s+1)+"~":_.C0.ESC+"[23~";break;case 123:o.key=s?_.C0.ESC+"[24;"+(s+1)+"~":_.C0.ESC+"[24~";break;default:if(!f.ctrlKey||f.shiftKey||f.altKey||f.metaKey)if(m&&!v||!f.altKey||f.metaKey)!m||f.altKey||f.ctrlKey||f.shiftKey||!f.metaKey?f.key&&!f.ctrlKey&&!f.altKey&&!f.metaKey&&f.keyCode>=48&&f.key.length===1?o.key=f.key:f.key&&f.ctrlKey&&(f.key==="_"&&(o.key=_.C0.US),f.key==="@"&&(o.key=_.C0.NUL)):f.keyCode===65&&(o.type=1);else{var p=u[f.keyCode],h=p==null?void 0:p[f.shiftKey?1:0];if(h)o.key=_.C0.ESC+h;else if(f.keyCode>=65&&f.keyCode<=90){var i=f.ctrlKey?f.keyCode-64:f.keyCode+32,e=String.fromCharCode(i);f.shiftKey&&(e=e.toUpperCase()),o.key=_.C0.ESC+e}else f.key==="Dead"&&f.code.startsWith("Key")&&(e=f.code.slice(3,4),f.shiftKey||(e=e.toLowerCase()),o.key=_.C0.ESC+e,o.cancel=!0)}else f.keyCode>=65&&f.keyCode<=90?o.key=String.fromCharCode(f.keyCode-64):f.keyCode===32?o.key=_.C0.NUL:f.keyCode>=51&&f.keyCode<=55?o.key=String.fromCharCode(f.keyCode-51+27):f.keyCode===56?o.key=_.C0.DEL:f.keyCode===219?o.key=_.C0.ESC:f.keyCode===220?o.key=_.C0.FS:f.keyCode===221&&(o.key=_.C0.GS)}return o}},482:(H,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.Utf8ToUtf32=c.StringToUtf32=c.utf32ToString=c.stringFromCodePoint=void 0,c.stringFromCodePoint=function(u){return u>65535?(u-=65536,String.fromCharCode(55296+(u>>10))+String.fromCharCode(u%1024+56320)):String.fromCharCode(u)},c.utf32ToString=function(u,f,d){f===void 0&&(f=0),d===void 0&&(d=u.length);for(var m="",v=f;v<d;++v){var o=u[v];o>65535?(o-=65536,m+=String.fromCharCode(55296+(o>>10))+String.fromCharCode(o%1024+56320)):m+=String.fromCharCode(o)}return m};var C=function(){function u(){this._interim=0}return u.prototype.clear=function(){this._interim=0},u.prototype.decode=function(f,d){var m=f.length;if(!m)return 0;var v=0,o=0;this._interim&&(56320<=(h=f.charCodeAt(o++))&&h<=57343?d[v++]=1024*(this._interim-55296)+h-56320+65536:(d[v++]=this._interim,d[v++]=h),this._interim=0);for(var s=o;s<m;++s){var p=f.charCodeAt(s);if(55296<=p&&p<=56319){if(++s>=m)return this._interim=p,v;var h;56320<=(h=f.charCodeAt(s))&&h<=57343?d[v++]=1024*(p-55296)+h-56320+65536:(d[v++]=p,d[v++]=h)}else p!==65279&&(d[v++]=p)}return v},u}();c.StringToUtf32=C;var _=function(){function u(){this.interim=new Uint8Array(3)}return u.prototype.clear=function(){this.interim.fill(0)},u.prototype.decode=function(f,d){var m=f.length;if(!m)return 0;var v,o,s,p,h=0,i=0,e=0;if(this.interim[0]){var t=!1,r=this.interim[0];r&=(224&r)==192?31:(240&r)==224?15:7;for(var n=0,l=void 0;(l=63&this.interim[++n])&&n<4;)r<<=6,r|=l;for(var a=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,g=a-n;e<g;){if(e>=m)return 0;if((192&(l=f[e++]))!=128){e--,t=!0;break}this.interim[n++]=l,r<<=6,r|=63&l}t||(a===2?r<128?e--:d[h++]=r:a===3?r<2048||r>=55296&&r<=57343||r===65279||(d[h++]=r):r<65536||r>1114111||(d[h++]=r)),this.interim.fill(0)}for(var S=m-4,y=e;y<m;){for(;!(!(y<S)||128&(v=f[y])||128&(o=f[y+1])||128&(s=f[y+2])||128&(p=f[y+3]));)d[h++]=v,d[h++]=o,d[h++]=s,d[h++]=p,y+=4;if((v=f[y++])<128)d[h++]=v;else if((224&v)==192){if(y>=m)return this.interim[0]=v,h;if((192&(o=f[y++]))!=128){y--;continue}if((i=(31&v)<<6|63&o)<128){y--;continue}d[h++]=i}else if((240&v)==224){if(y>=m)return this.interim[0]=v,h;if((192&(o=f[y++]))!=128){y--;continue}if(y>=m)return this.interim[0]=v,this.interim[1]=o,h;if((192&(s=f[y++]))!=128){y--;continue}if((i=(15&v)<<12|(63&o)<<6|63&s)<2048||i>=55296&&i<=57343||i===65279)continue;d[h++]=i}else if((248&v)==240){if(y>=m)return this.interim[0]=v,h;if((192&(o=f[y++]))!=128){y--;continue}if(y>=m)return this.interim[0]=v,this.interim[1]=o,h;if((192&(s=f[y++]))!=128){y--;continue}if(y>=m)return this.interim[0]=v,this.interim[1]=o,this.interim[2]=s,h;if((192&(p=f[y++]))!=128){y--;continue}if((i=(7&v)<<18|(63&o)<<12|(63&s)<<6|63&p)<65536||i>1114111)continue;d[h++]=i}}return h},u}();c.Utf8ToUtf32=_},225:(H,c,C)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.UnicodeV6=void 0;var _,u=C(8273),f=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],d=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],m=function(){function v(){if(this.version="6",!_){_=new Uint8Array(65536),(0,u.fill)(_,1),_[0]=0,(0,u.fill)(_,0,1,32),(0,u.fill)(_,0,127,160),(0,u.fill)(_,2,4352,4448),_[9001]=2,_[9002]=2,(0,u.fill)(_,2,11904,42192),_[12351]=1,(0,u.fill)(_,2,44032,55204),(0,u.fill)(_,2,63744,64256),(0,u.fill)(_,2,65040,65050),(0,u.fill)(_,2,65072,65136),(0,u.fill)(_,2,65280,65377),(0,u.fill)(_,2,65504,65511);for(var o=0;o<f.length;++o)(0,u.fill)(_,0,f[o][0],f[o][1]+1)}}return v.prototype.wcwidth=function(o){return o<32?0:o<127?1:o<65536?_[o]:function(s,p){var h,i=0,e=p.length-1;if(s<p[0][0]||s>p[e][1])return!1;for(;e>=i;)if(s>p[h=i+e>>1][1])i=h+1;else{if(!(s<p[h][0]))return!0;e=h-1}return!1}(o,d)?0:o>=131072&&o<=196605||o>=196608&&o<=262141?2:1},v}();c.UnicodeV6=m},5981:(H,c,C)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.WriteBuffer=void 0;var _=C(8460),u=typeof queueMicrotask>"u"?function(d){Promise.resolve().then(d)}:queueMicrotask,f=function(){function d(m){this._action=m,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._onWriteParsed=new _.EventEmitter}return Object.defineProperty(d.prototype,"onWriteParsed",{get:function(){return this._onWriteParsed.event},enumerable:!1,configurable:!0}),d.prototype.writeSync=function(m,v){if(v!==void 0&&this._syncCalls>v)this._syncCalls=0;else if(this._pendingData+=m.length,this._writeBuffer.push(m),this._callbacks.push(void 0),this._syncCalls++,!this._isSyncWriting){var o;for(this._isSyncWriting=!0;o=this._writeBuffer.shift();){this._action(o);var s=this._callbacks.shift();s&&s()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}},d.prototype.write=function(m,v){var o=this;if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");this._writeBuffer.length||(this._bufferOffset=0,setTimeout(function(){return o._innerWrite()})),this._pendingData+=m.length,this._writeBuffer.push(m),this._callbacks.push(v)},d.prototype._innerWrite=function(m,v){var o=this;m===void 0&&(m=0),v===void 0&&(v=!0);for(var s=m||Date.now();this._writeBuffer.length>this._bufferOffset;){var p=this._writeBuffer[this._bufferOffset],h=this._action(p,v);if(h)return void h.catch(function(e){return u(function(){throw e}),Promise.resolve(!1)}).then(function(e){return Date.now()-s>=12?setTimeout(function(){return o._innerWrite(0,e)}):o._innerWrite(s,e)});var i=this._callbacks[this._bufferOffset];if(i&&i(),this._bufferOffset++,this._pendingData-=p.length,Date.now()-s>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(function(){return o._innerWrite()})):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()},d}();c.WriteBuffer=f},5941:function(H,c){var C=this&&this.__read||function(d,m){var v=typeof Symbol=="function"&&d[Symbol.iterator];if(!v)return d;var o,s,p=v.call(d),h=[];try{for(;(m===void 0||m-- >0)&&!(o=p.next()).done;)h.push(o.value)}catch(i){s={error:i}}finally{try{o&&!o.done&&(v=p.return)&&v.call(p)}finally{if(s)throw s.error}}return h};Object.defineProperty(c,"__esModule",{value:!0}),c.toRgbString=c.parseColor=void 0;var _=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,u=/^[\da-f]+$/;function f(d,m){var v=d.toString(16),o=v.length<2?"0"+v:v;switch(m){case 4:return v[0];case 8:return o;case 12:return(o+o).slice(0,3);default:return o+o}}c.parseColor=function(d){if(d){var m=d.toLowerCase();if(m.indexOf("rgb:")===0){m=m.slice(4);var v=_.exec(m);if(v){var o=v[1]?15:v[4]?255:v[7]?4095:65535;return[Math.round(parseInt(v[1]||v[4]||v[7]||v[10],16)/o*255),Math.round(parseInt(v[2]||v[5]||v[8]||v[11],16)/o*255),Math.round(parseInt(v[3]||v[6]||v[9]||v[12],16)/o*255)]}}else if(m.indexOf("#")===0&&(m=m.slice(1),u.exec(m)&&[3,6,9,12].includes(m.length))){for(var s=m.length/3,p=[0,0,0],h=0;h<3;++h){var i=parseInt(m.slice(s*h,s*h+s),16);p[h]=s===1?i<<4:s===2?i:s===3?i>>4:i>>8}return p}}},c.toRgbString=function(d,m){m===void 0&&(m=16);var v=C(d,3),o=v[0],s=v[1],p=v[2];return"rgb:"+f(o,m)+"/"+f(s,m)+"/"+f(p,m)}},5770:(H,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.PAYLOAD_LIMIT=void 0,c.PAYLOAD_LIMIT=1e7},6351:(H,c,C)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.DcsHandler=c.DcsParser=void 0;var _=C(482),u=C(8742),f=C(5770),d=[],m=function(){function s(){this._handlers=Object.create(null),this._active=d,this._ident=0,this._handlerFb=function(){},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}return s.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){},this._active=d},s.prototype.registerHandler=function(p,h){this._handlers[p]===void 0&&(this._handlers[p]=[]);var i=this._handlers[p];return i.push(h),{dispose:function(){var e=i.indexOf(h);e!==-1&&i.splice(e,1)}}},s.prototype.clearHandler=function(p){this._handlers[p]&&delete this._handlers[p]},s.prototype.setHandlerFallback=function(p){this._handlerFb=p},s.prototype.reset=function(){if(this._active.length)for(var p=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;p>=0;--p)this._active[p].unhook(!1);this._stack.paused=!1,this._active=d,this._ident=0},s.prototype.hook=function(p,h){if(this.reset(),this._ident=p,this._active=this._handlers[p]||d,this._active.length)for(var i=this._active.length-1;i>=0;i--)this._active[i].hook(h);else this._handlerFb(this._ident,"HOOK",h)},s.prototype.put=function(p,h,i){if(this._active.length)for(var e=this._active.length-1;e>=0;e--)this._active[e].put(p,h,i);else this._handlerFb(this._ident,"PUT",(0,_.utf32ToString)(p,h,i))},s.prototype.unhook=function(p,h){if(h===void 0&&(h=!0),this._active.length){var i=!1,e=this._active.length-1,t=!1;if(this._stack.paused&&(e=this._stack.loopPosition-1,i=h,t=this._stack.fallThrough,this._stack.paused=!1),!t&&i===!1){for(;e>=0&&(i=this._active[e].unhook(p))!==!0;e--)if(i instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=e,this._stack.fallThrough=!1,i;e--}for(;e>=0;e--)if((i=this._active[e].unhook(!1))instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=e,this._stack.fallThrough=!0,i}else this._handlerFb(this._ident,"UNHOOK",p);this._active=d,this._ident=0},s}();c.DcsParser=m;var v=new u.Params;v.addParam(0);var o=function(){function s(p){this._handler=p,this._data="",this._params=v,this._hitLimit=!1}return s.prototype.hook=function(p){this._params=p.length>1||p.params[0]?p.clone():v,this._data="",this._hitLimit=!1},s.prototype.put=function(p,h,i){this._hitLimit||(this._data+=(0,_.utf32ToString)(p,h,i),this._data.length>f.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},s.prototype.unhook=function(p){var h=this,i=!1;if(this._hitLimit)i=!1;else if(p&&(i=this._handler(this._data,this._params))instanceof Promise)return i.then(function(e){return h._params=v,h._data="",h._hitLimit=!1,e});return this._params=v,this._data="",this._hitLimit=!1,i},s}();c.DcsHandler=o},2015:function(H,c,C){var _,u=this&&this.__extends||(_=function(i,e){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])},_(i,e)},function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function t(){this.constructor=i}_(i,e),i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)});Object.defineProperty(c,"__esModule",{value:!0}),c.EscapeSequenceParser=c.VT500_TRANSITION_TABLE=c.TransitionTable=void 0;var f=C(844),d=C(8273),m=C(8742),v=C(6242),o=C(6351),s=function(){function i(e){this.table=new Uint8Array(e)}return i.prototype.setDefault=function(e,t){(0,d.fill)(this.table,e<<4|t)},i.prototype.add=function(e,t,r,n){this.table[t<<8|e]=r<<4|n},i.prototype.addMany=function(e,t,r,n){for(var l=0;l<e.length;l++)this.table[t<<8|e[l]]=r<<4|n},i}();c.TransitionTable=s;var p=160;c.VT500_TRANSITION_TABLE=function(){var i=new s(4095),e=Array.apply(null,Array(256)).map(function(g,S){return S}),t=function(g,S){return e.slice(g,S)},r=t(32,127),n=t(0,24);n.push(25),n.push.apply(n,t(28,32));var l,a=t(0,14);for(l in i.setDefault(1,0),i.addMany(r,0,2,0),a)i.addMany([24,26,153,154],l,3,0),i.addMany(t(128,144),l,3,0),i.addMany(t(144,152),l,3,0),i.add(156,l,0,0),i.add(27,l,11,1),i.add(157,l,4,8),i.addMany([152,158,159],l,0,7),i.add(155,l,11,3),i.add(144,l,11,9);return i.addMany(n,0,3,0),i.addMany(n,1,3,1),i.add(127,1,0,1),i.addMany(n,8,0,8),i.addMany(n,3,3,3),i.add(127,3,0,3),i.addMany(n,4,3,4),i.add(127,4,0,4),i.addMany(n,6,3,6),i.addMany(n,5,3,5),i.add(127,5,0,5),i.addMany(n,2,3,2),i.add(127,2,0,2),i.add(93,1,4,8),i.addMany(r,8,5,8),i.add(127,8,5,8),i.addMany([156,27,24,26,7],8,6,0),i.addMany(t(28,32),8,0,8),i.addMany([88,94,95],1,0,7),i.addMany(r,7,0,7),i.addMany(n,7,0,7),i.add(156,7,0,0),i.add(127,7,0,7),i.add(91,1,11,3),i.addMany(t(64,127),3,7,0),i.addMany(t(48,60),3,8,4),i.addMany([60,61,62,63],3,9,4),i.addMany(t(48,60),4,8,4),i.addMany(t(64,127),4,7,0),i.addMany([60,61,62,63],4,0,6),i.addMany(t(32,64),6,0,6),i.add(127,6,0,6),i.addMany(t(64,127),6,0,0),i.addMany(t(32,48),3,9,5),i.addMany(t(32,48),5,9,5),i.addMany(t(48,64),5,0,6),i.addMany(t(64,127),5,7,0),i.addMany(t(32,48),4,9,5),i.addMany(t(32,48),1,9,2),i.addMany(t(32,48),2,9,2),i.addMany(t(48,127),2,10,0),i.addMany(t(48,80),1,10,0),i.addMany(t(81,88),1,10,0),i.addMany([89,90,92],1,10,0),i.addMany(t(96,127),1,10,0),i.add(80,1,11,9),i.addMany(n,9,0,9),i.add(127,9,0,9),i.addMany(t(28,32),9,0,9),i.addMany(t(32,48),9,9,12),i.addMany(t(48,60),9,8,10),i.addMany([60,61,62,63],9,9,10),i.addMany(n,11,0,11),i.addMany(t(32,128),11,0,11),i.addMany(t(28,32),11,0,11),i.addMany(n,10,0,10),i.add(127,10,0,10),i.addMany(t(28,32),10,0,10),i.addMany(t(48,60),10,8,10),i.addMany([60,61,62,63],10,0,11),i.addMany(t(32,48),10,9,12),i.addMany(n,12,0,12),i.add(127,12,0,12),i.addMany(t(28,32),12,0,12),i.addMany(t(32,48),12,9,12),i.addMany(t(48,64),12,0,11),i.addMany(t(64,127),12,12,13),i.addMany(t(64,127),10,12,13),i.addMany(t(64,127),9,12,13),i.addMany(n,13,13,13),i.addMany(r,13,13,13),i.add(127,13,0,13),i.addMany([27,156,24,26],13,14,0),i.add(p,0,2,0),i.add(p,8,5,8),i.add(p,6,0,6),i.add(p,11,0,11),i.add(p,13,13,13),i}();var h=function(i){function e(t){t===void 0&&(t=c.VT500_TRANSITION_TABLE);var r=i.call(this)||this;return r._transitions=t,r._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},r.initialState=0,r.currentState=r.initialState,r._params=new m.Params,r._params.addParam(0),r._collect=0,r.precedingCodepoint=0,r._printHandlerFb=function(n,l,a){},r._executeHandlerFb=function(n){},r._csiHandlerFb=function(n,l){},r._escHandlerFb=function(n){},r._errorHandlerFb=function(n){return n},r._printHandler=r._printHandlerFb,r._executeHandlers=Object.create(null),r._csiHandlers=Object.create(null),r._escHandlers=Object.create(null),r._oscParser=new v.OscParser,r._dcsParser=new o.DcsParser,r._errorHandler=r._errorHandlerFb,r.registerEscHandler({final:"\\"},function(){return!0}),r}return u(e,i),e.prototype._identifier=function(t,r){r===void 0&&(r=[64,126]);var n=0;if(t.prefix){if(t.prefix.length>1)throw new Error("only one byte as prefix supported");if((n=t.prefix.charCodeAt(0))&&60>n||n>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(t.intermediates){if(t.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(var l=0;l<t.intermediates.length;++l){var a=t.intermediates.charCodeAt(l);if(32>a||a>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");n<<=8,n|=a}}if(t.final.length!==1)throw new Error("final must be a single byte");var g=t.final.charCodeAt(0);if(r[0]>g||g>r[1])throw new Error("final must be in range "+r[0]+" .. "+r[1]);return(n<<=8)|g},e.prototype.identToString=function(t){for(var r=[];t;)r.push(String.fromCharCode(255&t)),t>>=8;return r.reverse().join("")},e.prototype.dispose=function(){this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null),this._oscParser.dispose(),this._dcsParser.dispose()},e.prototype.setPrintHandler=function(t){this._printHandler=t},e.prototype.clearPrintHandler=function(){this._printHandler=this._printHandlerFb},e.prototype.registerEscHandler=function(t,r){var n=this._identifier(t,[48,126]);this._escHandlers[n]===void 0&&(this._escHandlers[n]=[]);var l=this._escHandlers[n];return l.push(r),{dispose:function(){var a=l.indexOf(r);a!==-1&&l.splice(a,1)}}},e.prototype.clearEscHandler=function(t){this._escHandlers[this._identifier(t,[48,126])]&&delete this._escHandlers[this._identifier(t,[48,126])]},e.prototype.setEscHandlerFallback=function(t){this._escHandlerFb=t},e.prototype.setExecuteHandler=function(t,r){this._executeHandlers[t.charCodeAt(0)]=r},e.prototype.clearExecuteHandler=function(t){this._executeHandlers[t.charCodeAt(0)]&&delete this._executeHandlers[t.charCodeAt(0)]},e.prototype.setExecuteHandlerFallback=function(t){this._executeHandlerFb=t},e.prototype.registerCsiHandler=function(t,r){var n=this._identifier(t);this._csiHandlers[n]===void 0&&(this._csiHandlers[n]=[]);var l=this._csiHandlers[n];return l.push(r),{dispose:function(){var a=l.indexOf(r);a!==-1&&l.splice(a,1)}}},e.prototype.clearCsiHandler=function(t){this._csiHandlers[this._identifier(t)]&&delete this._csiHandlers[this._identifier(t)]},e.prototype.setCsiHandlerFallback=function(t){this._csiHandlerFb=t},e.prototype.registerDcsHandler=function(t,r){return this._dcsParser.registerHandler(this._identifier(t),r)},e.prototype.clearDcsHandler=function(t){this._dcsParser.clearHandler(this._identifier(t))},e.prototype.setDcsHandlerFallback=function(t){this._dcsParser.setHandlerFallback(t)},e.prototype.registerOscHandler=function(t,r){return this._oscParser.registerHandler(t,r)},e.prototype.clearOscHandler=function(t){this._oscParser.clearHandler(t)},e.prototype.setOscHandlerFallback=function(t){this._oscParser.setHandlerFallback(t)},e.prototype.setErrorHandler=function(t){this._errorHandler=t},e.prototype.clearErrorHandler=function(){this._errorHandler=this._errorHandlerFb},e.prototype.reset=function(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])},e.prototype._preserveStack=function(t,r,n,l,a){this._parseStack.state=t,this._parseStack.handlers=r,this._parseStack.handlerPos=n,this._parseStack.transition=l,this._parseStack.chunkPos=a},e.prototype.parse=function(t,r,n){var l,a=0,g=0,S=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,S=this._parseStack.chunkPos+1;else{if(n===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");var y=this._parseStack.handlers,b=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(n===!1&&b>-1){for(;b>=0&&(l=y[b](this._params))!==!0;b--)if(l instanceof Promise)return this._parseStack.handlerPos=b,l}this._parseStack.handlers=[];break;case 4:if(n===!1&&b>-1){for(;b>=0&&(l=y[b]())!==!0;b--)if(l instanceof Promise)return this._parseStack.handlerPos=b,l}this._parseStack.handlers=[];break;case 6:if(a=t[this._parseStack.chunkPos],l=this._dcsParser.unhook(a!==24&&a!==26,n))return l;a===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(a=t[this._parseStack.chunkPos],l=this._oscParser.end(a!==24&&a!==26,n))return l;a===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,S=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(var w=S;w<r;++w){switch(a=t[w],(g=this._transitions.table[this.currentState<<8|(a<160?a:p)])>>4){case 2:for(var M=w+1;;++M){if(M>=r||(a=t[M])<32||a>126&&a<p){this._printHandler(t,w,M),w=M-1;break}if(++M>=r||(a=t[M])<32||a>126&&a<p){this._printHandler(t,w,M),w=M-1;break}if(++M>=r||(a=t[M])<32||a>126&&a<p){this._printHandler(t,w,M),w=M-1;break}if(++M>=r||(a=t[M])<32||a>126&&a<p){this._printHandler(t,w,M),w=M-1;break}}break;case 3:this._executeHandlers[a]?this._executeHandlers[a]():this._executeHandlerFb(a),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:w,code:a,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:for(var L=(y=this._csiHandlers[this._collect<<8|a])?y.length-1:-1;L>=0&&(l=y[L](this._params))!==!0;L--)if(l instanceof Promise)return this._preserveStack(3,y,L,g,w),l;L<0&&this._csiHandlerFb(this._collect<<8|a,this._params),this.precedingCodepoint=0;break;case 8:do switch(a){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(a-48)}while(++w<r&&(a=t[w])>47&&a<60);w--;break;case 9:this._collect<<=8,this._collect|=a;break;case 10:for(var k=this._escHandlers[this._collect<<8|a],E=k?k.length-1:-1;E>=0&&(l=k[E]())!==!0;E--)if(l instanceof Promise)return this._preserveStack(4,k,E,g,w),l;E<0&&this._escHandlerFb(this._collect<<8|a),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|a,this._params);break;case 13:for(var x=w+1;;++x)if(x>=r||(a=t[x])===24||a===26||a===27||a>127&&a<p){this._dcsParser.put(t,w,x),w=x-1;break}break;case 14:if(l=this._dcsParser.unhook(a!==24&&a!==26))return this._preserveStack(6,[],0,g,w),l;a===27&&(g|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(var R=w+1;;R++)if(R>=r||(a=t[R])<32||a>127&&a<p){this._oscParser.put(t,w,R),w=R-1;break}break;case 6:if(l=this._oscParser.end(a!==24&&a!==26))return this._preserveStack(5,[],0,g,w),l;a===27&&(g|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&g}},e}(f.Disposable);c.EscapeSequenceParser=h},6242:(H,c,C)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.OscHandler=c.OscParser=void 0;var _=C(5770),u=C(482),f=[],d=function(){function v(){this._state=0,this._active=f,this._id=-1,this._handlers=Object.create(null),this._handlerFb=function(){},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}return v.prototype.registerHandler=function(o,s){this._handlers[o]===void 0&&(this._handlers[o]=[]);var p=this._handlers[o];return p.push(s),{dispose:function(){var h=p.indexOf(s);h!==-1&&p.splice(h,1)}}},v.prototype.clearHandler=function(o){this._handlers[o]&&delete this._handlers[o]},v.prototype.setHandlerFallback=function(o){this._handlerFb=o},v.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){},this._active=f},v.prototype.reset=function(){if(this._state===2)for(var o=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;o>=0;--o)this._active[o].end(!1);this._stack.paused=!1,this._active=f,this._id=-1,this._state=0},v.prototype._start=function(){if(this._active=this._handlers[this._id]||f,this._active.length)for(var o=this._active.length-1;o>=0;o--)this._active[o].start();else this._handlerFb(this._id,"START")},v.prototype._put=function(o,s,p){if(this._active.length)for(var h=this._active.length-1;h>=0;h--)this._active[h].put(o,s,p);else this._handlerFb(this._id,"PUT",(0,u.utf32ToString)(o,s,p))},v.prototype.start=function(){this.reset(),this._state=1},v.prototype.put=function(o,s,p){if(this._state!==3){if(this._state===1)for(;s<p;){var h=o[s++];if(h===59){this._state=2,this._start();break}if(h<48||57<h)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+h-48}this._state===2&&p-s>0&&this._put(o,s,p)}},v.prototype.end=function(o,s){if(s===void 0&&(s=!0),this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){var p=!1,h=this._active.length-1,i=!1;if(this._stack.paused&&(h=this._stack.loopPosition-1,p=s,i=this._stack.fallThrough,this._stack.paused=!1),!i&&p===!1){for(;h>=0&&(p=this._active[h].end(o))!==!0;h--)if(p instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=h,this._stack.fallThrough=!1,p;h--}for(;h>=0;h--)if((p=this._active[h].end(!1))instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=h,this._stack.fallThrough=!0,p}else this._handlerFb(this._id,"END",o);this._active=f,this._id=-1,this._state=0}},v}();c.OscParser=d;var m=function(){function v(o){this._handler=o,this._data="",this._hitLimit=!1}return v.prototype.start=function(){this._data="",this._hitLimit=!1},v.prototype.put=function(o,s,p){this._hitLimit||(this._data+=(0,u.utf32ToString)(o,s,p),this._data.length>_.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},v.prototype.end=function(o){var s=this,p=!1;if(this._hitLimit)p=!1;else if(o&&(p=this._handler(this._data))instanceof Promise)return p.then(function(h){return s._data="",s._hitLimit=!1,h});return this._data="",this._hitLimit=!1,p},v}();c.OscHandler=m},8742:(H,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.Params=void 0;var C=2147483647,_=function(){function u(f,d){if(f===void 0&&(f=32),d===void 0&&(d=32),this.maxLength=f,this.maxSubParamsLength=d,d>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(f),this.length=0,this._subParams=new Int32Array(d),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(f),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}return u.fromArray=function(f){var d=new u;if(!f.length)return d;for(var m=Array.isArray(f[0])?1:0;m<f.length;++m){var v=f[m];if(Array.isArray(v))for(var o=0;o<v.length;++o)d.addSubParam(v[o]);else d.addParam(v)}return d},u.prototype.clone=function(){var f=new u(this.maxLength,this.maxSubParamsLength);return f.params.set(this.params),f.length=this.length,f._subParams.set(this._subParams),f._subParamsLength=this._subParamsLength,f._subParamsIdx.set(this._subParamsIdx),f._rejectDigits=this._rejectDigits,f._rejectSubDigits=this._rejectSubDigits,f._digitIsSub=this._digitIsSub,f},u.prototype.toArray=function(){for(var f=[],d=0;d<this.length;++d){f.push(this.params[d]);var m=this._subParamsIdx[d]>>8,v=255&this._subParamsIdx[d];v-m>0&&f.push(Array.prototype.slice.call(this._subParams,m,v))}return f},u.prototype.reset=function(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1},u.prototype.addParam=function(f){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(f<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=f>C?C:f}},u.prototype.addSubParam=function(f){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(f<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=f>C?C:f,this._subParamsIdx[this.length-1]++}},u.prototype.hasSubParams=function(f){return(255&this._subParamsIdx[f])-(this._subParamsIdx[f]>>8)>0},u.prototype.getSubParams=function(f){var d=this._subParamsIdx[f]>>8,m=255&this._subParamsIdx[f];return m-d>0?this._subParams.subarray(d,m):null},u.prototype.getSubParamsAll=function(){for(var f={},d=0;d<this.length;++d){var m=this._subParamsIdx[d]>>8,v=255&this._subParamsIdx[d];v-m>0&&(f[d]=this._subParams.slice(m,v))}return f},u.prototype.addDigit=function(f){var d;if(!(this._rejectDigits||!(d=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)){var m=this._digitIsSub?this._subParams:this.params,v=m[d-1];m[d-1]=~v?Math.min(10*v+f,C):f}},u}();c.Params=_},5741:(H,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.AddonManager=void 0;var C=function(){function _(){this._addons=[]}return _.prototype.dispose=function(){for(var u=this._addons.length-1;u>=0;u--)this._addons[u].instance.dispose()},_.prototype.loadAddon=function(u,f){var d=this,m={instance:f,dispose:f.dispose,isDisposed:!1};this._addons.push(m),f.dispose=function(){return d._wrappedAddonDispose(m)},f.activate(u)},_.prototype._wrappedAddonDispose=function(u){if(!u.isDisposed){for(var f=-1,d=0;d<this._addons.length;d++)if(this._addons[d]===u){f=d;break}if(f===-1)throw new Error("Could not dispose an addon that has not been loaded");u.isDisposed=!0,u.dispose.apply(u.instance),this._addons.splice(f,1)}},_}();c.AddonManager=C},8771:(H,c,C)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.BufferApiView=void 0;var _=C(3785),u=C(511),f=function(){function d(m,v){this._buffer=m,this.type=v}return d.prototype.init=function(m){return this._buffer=m,this},Object.defineProperty(d.prototype,"cursorY",{get:function(){return this._buffer.y},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"cursorX",{get:function(){return this._buffer.x},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"viewportY",{get:function(){return this._buffer.ydisp},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"baseY",{get:function(){return this._buffer.ybase},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"length",{get:function(){return this._buffer.lines.length},enumerable:!1,configurable:!0}),d.prototype.getLine=function(m){var v=this._buffer.lines.get(m);if(v)return new _.BufferLineApiView(v)},d.prototype.getNullCell=function(){return new u.CellData},d}();c.BufferApiView=f},3785:(H,c,C)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.BufferLineApiView=void 0;var _=C(511),u=function(){function f(d){this._line=d}return Object.defineProperty(f.prototype,"isWrapped",{get:function(){return this._line.isWrapped},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"length",{get:function(){return this._line.length},enumerable:!1,configurable:!0}),f.prototype.getCell=function(d,m){if(!(d<0||d>=this._line.length))return m?(this._line.loadCell(d,m),m):this._line.loadCell(d,new _.CellData)},f.prototype.translateToString=function(d,m,v){return this._line.translateToString(d,m,v)},f}();c.BufferLineApiView=u},8285:(H,c,C)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.BufferNamespaceApi=void 0;var _=C(8771),u=C(8460),f=function(){function d(m){var v=this;this._core=m,this._onBufferChange=new u.EventEmitter,this._normal=new _.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new _.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(function(){return v._onBufferChange.fire(v.active)})}return Object.defineProperty(d.prototype,"onBufferChange",{get:function(){return this._onBufferChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"active",{get:function(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"normal",{get:function(){return this._normal.init(this._core.buffers.normal)},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"alternate",{get:function(){return this._alternate.init(this._core.buffers.alt)},enumerable:!1,configurable:!0}),d}();c.BufferNamespaceApi=f},7975:(H,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.ParserApi=void 0;var C=function(){function _(u){this._core=u}return _.prototype.registerCsiHandler=function(u,f){return this._core.registerCsiHandler(u,function(d){return f(d.toArray())})},_.prototype.addCsiHandler=function(u,f){return this.registerCsiHandler(u,f)},_.prototype.registerDcsHandler=function(u,f){return this._core.registerDcsHandler(u,function(d,m){return f(d,m.toArray())})},_.prototype.addDcsHandler=function(u,f){return this.registerDcsHandler(u,f)},_.prototype.registerEscHandler=function(u,f){return this._core.registerEscHandler(u,f)},_.prototype.addEscHandler=function(u,f){return this.registerEscHandler(u,f)},_.prototype.registerOscHandler=function(u,f){return this._core.registerOscHandler(u,f)},_.prototype.addOscHandler=function(u,f){return this.registerOscHandler(u,f)},_}();c.ParserApi=C},7090:(H,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.UnicodeApi=void 0;var C=function(){function _(u){this._core=u}return _.prototype.register=function(u){this._core.unicodeService.register(u)},Object.defineProperty(_.prototype,"versions",{get:function(){return this._core.unicodeService.versions},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"activeVersion",{get:function(){return this._core.unicodeService.activeVersion},set:function(u){this._core.unicodeService.activeVersion=u},enumerable:!1,configurable:!0}),_}();c.UnicodeApi=C},744:function(H,c,C){var _,u=this&&this.__extends||(_=function(h,i){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},_(h,i)},function(h,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function e(){this.constructor=h}_(h,i),h.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)}),f=this&&this.__decorate||function(h,i,e,t){var r,n=arguments.length,l=n<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(h,i,e,t);else for(var a=h.length-1;a>=0;a--)(r=h[a])&&(l=(n<3?r(l):n>3?r(i,e,l):r(i,e))||l);return n>3&&l&&Object.defineProperty(i,e,l),l},d=this&&this.__param||function(h,i){return function(e,t){i(e,t,h)}};Object.defineProperty(c,"__esModule",{value:!0}),c.BufferService=c.MINIMUM_ROWS=c.MINIMUM_COLS=void 0;var m=C(2585),v=C(5295),o=C(8460),s=C(844);c.MINIMUM_COLS=2,c.MINIMUM_ROWS=1;var p=function(h){function i(e){var t=h.call(this)||this;return t._optionsService=e,t.isUserScrolling=!1,t._onResize=new o.EventEmitter,t._onScroll=new o.EventEmitter,t.cols=Math.max(e.rawOptions.cols||0,c.MINIMUM_COLS),t.rows=Math.max(e.rawOptions.rows||0,c.MINIMUM_ROWS),t.buffers=new v.BufferSet(e,t),t}return u(i,h),Object.defineProperty(i.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!1,configurable:!0}),i.prototype.dispose=function(){h.prototype.dispose.call(this),this.buffers.dispose()},i.prototype.resize=function(e,t){this.cols=e,this.rows=t,this.buffers.resize(e,t),this.buffers.setupTabStops(this.cols),this._onResize.fire({cols:e,rows:t})},i.prototype.reset=function(){this.buffers.reset(),this.isUserScrolling=!1},i.prototype.scroll=function(e,t){t===void 0&&(t=!1);var r,n=this.buffer;(r=this._cachedBlankLine)&&r.length===this.cols&&r.getFg(0)===e.fg&&r.getBg(0)===e.bg||(r=n.getBlankLine(e,t),this._cachedBlankLine=r),r.isWrapped=t;var l=n.ybase+n.scrollTop,a=n.ybase+n.scrollBottom;if(n.scrollTop===0){var g=n.lines.isFull;a===n.lines.length-1?g?n.lines.recycle().copyFrom(r):n.lines.push(r.clone()):n.lines.splice(a+1,0,r.clone()),g?this.isUserScrolling&&(n.ydisp=Math.max(n.ydisp-1,0)):(n.ybase++,this.isUserScrolling||n.ydisp++)}else{var S=a-l+1;n.lines.shiftElements(l+1,S-1,-1),n.lines.set(a,r.clone())}this.isUserScrolling||(n.ydisp=n.ybase),this._onScroll.fire(n.ydisp)},i.prototype.scrollLines=function(e,t,r){var n=this.buffer;if(e<0){if(n.ydisp===0)return;this.isUserScrolling=!0}else e+n.ydisp>=n.ybase&&(this.isUserScrolling=!1);var l=n.ydisp;n.ydisp=Math.max(Math.min(n.ydisp+e,n.ybase),0),l!==n.ydisp&&(t||this._onScroll.fire(n.ydisp))},i.prototype.scrollPages=function(e){this.scrollLines(e*(this.rows-1))},i.prototype.scrollToTop=function(){this.scrollLines(-this.buffer.ydisp)},i.prototype.scrollToBottom=function(){this.scrollLines(this.buffer.ybase-this.buffer.ydisp)},i.prototype.scrollToLine=function(e){var t=e-this.buffer.ydisp;t!==0&&this.scrollLines(t)},f([d(0,m.IOptionsService)],i)}(s.Disposable);c.BufferService=p},7994:(H,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.CharsetService=void 0;var C=function(){function _(){this.glevel=0,this._charsets=[]}return _.prototype.reset=function(){this.charset=void 0,this._charsets=[],this.glevel=0},_.prototype.setgLevel=function(u){this.glevel=u,this.charset=this._charsets[u]},_.prototype.setgCharset=function(u,f){this._charsets[u]=f,this.glevel===u&&(this.charset=f)},_}();c.CharsetService=C},1753:function(H,c,C){var _=this&&this.__decorate||function(i,e,t,r){var n,l=arguments.length,a=l<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,r);else for(var g=i.length-1;g>=0;g--)(n=i[g])&&(a=(l<3?n(a):l>3?n(e,t,a):n(e,t))||a);return l>3&&a&&Object.defineProperty(e,t,a),a},u=this&&this.__param||function(i,e){return function(t,r){e(t,r,i)}},f=this&&this.__values||function(i){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&i[e],r=0;if(t)return t.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&r>=i.length&&(i=void 0),{value:i&&i[r++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(c,"__esModule",{value:!0}),c.CoreMouseService=void 0;var d=C(2585),m=C(8460),v={NONE:{events:0,restrict:function(){return!1}},X10:{events:1,restrict:function(i){return i.button!==4&&i.action===1&&(i.ctrl=!1,i.alt=!1,i.shift=!1,!0)}},VT200:{events:19,restrict:function(i){return i.action!==32}},DRAG:{events:23,restrict:function(i){return i.action!==32||i.button!==3}},ANY:{events:31,restrict:function(i){return!0}}};function o(i,e){var t=(i.ctrl?16:0)|(i.shift?4:0)|(i.alt?8:0);return i.button===4?(t|=64,t|=i.action):(t|=3&i.button,4&i.button&&(t|=64),8&i.button&&(t|=128),i.action===32?t|=32:i.action!==0||e||(t|=3)),t}var s=String.fromCharCode,p={DEFAULT:function(i){var e=[o(i,!1)+32,i.col+32,i.row+32];return e[0]>255||e[1]>255||e[2]>255?"":"\x1B[M"+s(e[0])+s(e[1])+s(e[2])},SGR:function(i){var e=i.action===0&&i.button!==4?"m":"M";return"\x1B[<"+o(i,!0)+";"+i.col+";"+i.row+e}},h=function(){function i(e,t){var r,n,l,a;this._bufferService=e,this._coreService=t,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._onProtocolChange=new m.EventEmitter,this._lastEvent=null;try{for(var g=f(Object.keys(v)),S=g.next();!S.done;S=g.next()){var y=S.value;this.addProtocol(y,v[y])}}catch(L){r={error:L}}finally{try{S&&!S.done&&(n=g.return)&&n.call(g)}finally{if(r)throw r.error}}try{for(var b=f(Object.keys(p)),w=b.next();!w.done;w=b.next()){var M=w.value;this.addEncoding(M,p[M])}}catch(L){l={error:L}}finally{try{w&&!w.done&&(a=b.return)&&a.call(b)}finally{if(l)throw l.error}}this.reset()}return i.prototype.addProtocol=function(e,t){this._protocols[e]=t},i.prototype.addEncoding=function(e,t){this._encodings[e]=t},Object.defineProperty(i.prototype,"activeProtocol",{get:function(){return this._activeProtocol},set:function(e){if(!this._protocols[e])throw new Error('unknown protocol "'+e+'"');this._activeProtocol=e,this._onProtocolChange.fire(this._protocols[e].events)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"areMouseEventsActive",{get:function(){return this._protocols[this._activeProtocol].events!==0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"activeEncoding",{get:function(){return this._activeEncoding},set:function(e){if(!this._encodings[e])throw new Error('unknown encoding "'+e+'"');this._activeEncoding=e},enumerable:!1,configurable:!0}),i.prototype.reset=function(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null},Object.defineProperty(i.prototype,"onProtocolChange",{get:function(){return this._onProtocolChange.event},enumerable:!1,configurable:!0}),i.prototype.triggerMouseEvent=function(e){if(e.col<0||e.col>=this._bufferService.cols||e.row<0||e.row>=this._bufferService.rows||e.button===4&&e.action===32||e.button===3&&e.action!==32||e.button!==4&&(e.action===2||e.action===3)||(e.col++,e.row++,e.action===32&&this._lastEvent&&this._compareEvents(this._lastEvent,e))||!this._protocols[this._activeProtocol].restrict(e))return!1;var t=this._encodings[this._activeEncoding](e);return t&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(t):this._coreService.triggerDataEvent(t,!0)),this._lastEvent=e,!0},i.prototype.explainEvents=function(e){return{down:!!(1&e),up:!!(2&e),drag:!!(4&e),move:!!(8&e),wheel:!!(16&e)}},i.prototype._compareEvents=function(e,t){return e.col===t.col&&e.row===t.row&&e.button===t.button&&e.action===t.action&&e.ctrl===t.ctrl&&e.alt===t.alt&&e.shift===t.shift},_([u(0,d.IBufferService),u(1,d.ICoreService)],i)}();c.CoreMouseService=h},6975:function(H,c,C){var _,u=this&&this.__extends||(_=function(e,t){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(r[l]=n[l])},_(e,t)},function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}_(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}),f=this&&this.__decorate||function(e,t,r,n){var l,a=arguments.length,g=a<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(e,t,r,n);else for(var S=e.length-1;S>=0;S--)(l=e[S])&&(g=(a<3?l(g):a>3?l(t,r,g):l(t,r))||g);return a>3&&g&&Object.defineProperty(t,r,g),g},d=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(c,"__esModule",{value:!0}),c.CoreService=void 0;var m=C(2585),v=C(8460),o=C(1439),s=C(844),p=Object.freeze({insertMode:!1}),h=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0}),i=function(e){function t(r,n,l,a){var g=e.call(this)||this;return g._bufferService=n,g._logService=l,g._optionsService=a,g.isCursorInitialized=!1,g.isCursorHidden=!1,g._onData=g.register(new v.EventEmitter),g._onUserInput=g.register(new v.EventEmitter),g._onBinary=g.register(new v.EventEmitter),g._scrollToBottom=r,g.register({dispose:function(){return g._scrollToBottom=void 0}}),g.modes=(0,o.clone)(p),g.decPrivateModes=(0,o.clone)(h),g}return u(t,e),Object.defineProperty(t.prototype,"onData",{get:function(){return this._onData.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onUserInput",{get:function(){return this._onUserInput.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!1,configurable:!0}),t.prototype.reset=function(){this.modes=(0,o.clone)(p),this.decPrivateModes=(0,o.clone)(h)},t.prototype.triggerDataEvent=function(r,n){if(n===void 0&&(n=!1),!this._optionsService.rawOptions.disableStdin){var l=this._bufferService.buffer;l.ybase!==l.ydisp&&this._scrollToBottom(),n&&this._onUserInput.fire(),this._logService.debug('sending data "'+r+'"',function(){return r.split("").map(function(a){return a.charCodeAt(0)})}),this._onData.fire(r)}},t.prototype.triggerBinaryEvent=function(r){this._optionsService.rawOptions.disableStdin||(this._logService.debug('sending binary "'+r+'"',function(){return r.split("").map(function(n){return n.charCodeAt(0)})}),this._onBinary.fire(r))},f([d(1,m.IBufferService),d(2,m.ILogService),d(3,m.IOptionsService)],t)}(s.Disposable);c.CoreService=i},9074:function(H,c,C){var _,u=this&&this.__extends||(_=function(i,e){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])},_(i,e)},function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function t(){this.constructor=i}_(i,e),i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}),f=this&&this.__generator||function(i,e){var t,r,n,l,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return l={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function g(S){return function(y){return function(b){if(t)throw new TypeError("Generator is already executing.");for(;a;)try{if(t=1,r&&(n=2&b[0]?r.return:b[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,b[1])).done)return n;switch(r=0,n&&(b=[2&b[0],n.value]),b[0]){case 0:case 1:n=b;break;case 4:return a.label++,{value:b[1],done:!1};case 5:a.label++,r=b[1],b=[0];continue;case 7:b=a.ops.pop(),a.trys.pop();continue;default:if(!((n=(n=a.trys).length>0&&n[n.length-1])||b[0]!==6&&b[0]!==2)){a=0;continue}if(b[0]===3&&(!n||b[1]>n[0]&&b[1]<n[3])){a.label=b[1];break}if(b[0]===6&&a.label<n[1]){a.label=n[1],n=b;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(b);break}n[2]&&a.ops.pop(),a.trys.pop();continue}b=e.call(i,a)}catch(w){b=[6,w],r=0}finally{t=n=0}if(5&b[0])throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}([S,y])}}},d=this&&this.__values||function(i){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&i[e],r=0;if(t)return t.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&r>=i.length&&(i=void 0),{value:i&&i[r++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(c,"__esModule",{value:!0}),c.DecorationService=void 0;var m=C(8055),v=C(8460),o=C(844),s=C(6106),p=function(i){function e(){var t=i.call(this)||this;return t._decorations=new s.SortedList(function(r){return r.marker.line}),t._onDecorationRegistered=t.register(new v.EventEmitter),t._onDecorationRemoved=t.register(new v.EventEmitter),t}return u(e,i),Object.defineProperty(e.prototype,"onDecorationRegistered",{get:function(){return this._onDecorationRegistered.event},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onDecorationRemoved",{get:function(){return this._onDecorationRemoved.event},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"decorations",{get:function(){return this._decorations.values()},enumerable:!1,configurable:!0}),e.prototype.registerDecoration=function(t){var r=this;if(!t.marker.isDisposed){var n=new h(t);if(n){var l=n.marker.onDispose(function(){return n.dispose()});n.onDispose(function(){n&&(r._decorations.delete(n)&&r._onDecorationRemoved.fire(n),l.dispose())}),this._decorations.insert(n),this._onDecorationRegistered.fire(n)}return n}},e.prototype.reset=function(){var t,r;try{for(var n=d(this._decorations.values()),l=n.next();!l.done;l=n.next())l.value.dispose()}catch(a){t={error:a}}finally{try{l&&!l.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}this._decorations.clear()},e.prototype.getDecorationsAtLine=function(t){return f(this,function(r){return[2,this._decorations.getKeyIterator(t)]})},e.prototype.getDecorationsAtCell=function(t,r,n){var l,a,g,S,y,b,w,M,L,k,E;return f(this,function(x){switch(x.label){case 0:l=0,a=0,x.label=1;case 1:x.trys.push([1,6,7,8]),g=d(this._decorations.getKeyIterator(r)),S=g.next(),x.label=2;case 2:return S.done?[3,5]:(y=S.value,l=(L=y.options.x)!==null&&L!==void 0?L:0,a=l+((k=y.options.width)!==null&&k!==void 0?k:1),!(t>=l&&t<a)||n&&((E=y.options.layer)!==null&&E!==void 0?E:"bottom")!==n?[3,4]:[4,y]);case 3:x.sent(),x.label=4;case 4:return S=g.next(),[3,2];case 5:return[3,8];case 6:return b=x.sent(),w={error:b},[3,8];case 7:try{S&&!S.done&&(M=g.return)&&M.call(g)}finally{if(w)throw w.error}return[7];case 8:return[2]}})},e.prototype.dispose=function(){var t,r;try{for(var n=d(this._decorations.values()),l=n.next();!l.done;l=n.next()){var a=l.value;this._onDecorationRemoved.fire(a)}}catch(g){t={error:g}}finally{try{l&&!l.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}this.reset()},e}(o.Disposable);c.DecorationService=p;var h=function(i){function e(t){var r=i.call(this)||this;return r.options=t,r.isDisposed=!1,r.onRenderEmitter=r.register(new v.EventEmitter),r.onRender=r.onRenderEmitter.event,r._onDispose=r.register(new v.EventEmitter),r.onDispose=r._onDispose.event,r._cachedBg=null,r._cachedFg=null,r.marker=t.marker,r.options.overviewRulerOptions&&!r.options.overviewRulerOptions.position&&(r.options.overviewRulerOptions.position="full"),r}return u(e,i),Object.defineProperty(e.prototype,"backgroundColorRGB",{get:function(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=m.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"foregroundColorRGB",{get:function(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=m.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg},enumerable:!1,configurable:!0}),e.prototype.dispose=function(){this._isDisposed||(this._isDisposed=!0,this._onDispose.fire(),i.prototype.dispose.call(this))},e}(o.Disposable)},3730:function(H,c,C){var _=this&&this.__decorate||function(m,v,o,s){var p,h=arguments.length,i=h<3?v:s===null?s=Object.getOwnPropertyDescriptor(v,o):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(m,v,o,s);else for(var e=m.length-1;e>=0;e--)(p=m[e])&&(i=(h<3?p(i):h>3?p(v,o,i):p(v,o))||i);return h>3&&i&&Object.defineProperty(v,o,i),i},u=this&&this.__param||function(m,v){return function(o,s){v(o,s,m)}};Object.defineProperty(c,"__esModule",{value:!0}),c.DirtyRowService=void 0;var f=C(2585),d=function(){function m(v){this._bufferService=v,this.clearRange()}return Object.defineProperty(m.prototype,"start",{get:function(){return this._start},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"end",{get:function(){return this._end},enumerable:!1,configurable:!0}),m.prototype.clearRange=function(){this._start=this._bufferService.buffer.y,this._end=this._bufferService.buffer.y},m.prototype.markDirty=function(v){v<this._start?this._start=v:v>this._end&&(this._end=v)},m.prototype.markRangeDirty=function(v,o){if(v>o){var s=v;v=o,o=s}v<this._start&&(this._start=v),o>this._end&&(this._end=o)},m.prototype.markAllDirty=function(){this.markRangeDirty(0,this._bufferService.rows-1)},_([u(0,f.IBufferService)],m)}();c.DirtyRowService=d},4348:function(H,c,C){var _=this&&this.__values||function(s){var p=typeof Symbol=="function"&&Symbol.iterator,h=p&&s[p],i=0;if(h)return h.call(s);if(s&&typeof s.length=="number")return{next:function(){return s&&i>=s.length&&(s=void 0),{value:s&&s[i++],done:!s}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")},u=this&&this.__read||function(s,p){var h=typeof Symbol=="function"&&s[Symbol.iterator];if(!h)return s;var i,e,t=h.call(s),r=[];try{for(;(p===void 0||p-- >0)&&!(i=t.next()).done;)r.push(i.value)}catch(n){e={error:n}}finally{try{i&&!i.done&&(h=t.return)&&h.call(t)}finally{if(e)throw e.error}}return r},f=this&&this.__spreadArray||function(s,p,h){if(h||arguments.length===2)for(var i,e=0,t=p.length;e<t;e++)!i&&e in p||(i||(i=Array.prototype.slice.call(p,0,e)),i[e]=p[e]);return s.concat(i||Array.prototype.slice.call(p))};Object.defineProperty(c,"__esModule",{value:!0}),c.InstantiationService=c.ServiceCollection=void 0;var d=C(2585),m=C(8343),v=function(){function s(){for(var p,h,i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];this._entries=new Map;try{for(var t=_(i),r=t.next();!r.done;r=t.next()){var n=u(r.value,2),l=n[0],a=n[1];this.set(l,a)}}catch(g){p={error:g}}finally{try{r&&!r.done&&(h=t.return)&&h.call(t)}finally{if(p)throw p.error}}}return s.prototype.set=function(p,h){var i=this._entries.get(p);return this._entries.set(p,h),i},s.prototype.forEach=function(p){this._entries.forEach(function(h,i){return p(i,h)})},s.prototype.has=function(p){return this._entries.has(p)},s.prototype.get=function(p){return this._entries.get(p)},s}();c.ServiceCollection=v;var o=function(){function s(){this._services=new v,this._services.set(d.IInstantiationService,this)}return s.prototype.setService=function(p,h){this._services.set(p,h)},s.prototype.getService=function(p){return this._services.get(p)},s.prototype.createInstance=function(p){for(var h,i,e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];var r=(0,m.getServiceDependencies)(p).sort(function(b,w){return b.index-w.index}),n=[];try{for(var l=_(r),a=l.next();!a.done;a=l.next()){var g=a.value,S=this._services.get(g.id);if(!S)throw new Error("[createInstance] "+p.name+" depends on UNKNOWN service "+g.id+".");n.push(S)}}catch(b){h={error:b}}finally{try{a&&!a.done&&(i=l.return)&&i.call(l)}finally{if(h)throw h.error}}var y=r.length>0?r[0].index:e.length;if(e.length!==y)throw new Error("[createInstance] First service dependency of "+p.name+" at position "+(y+1)+" conflicts with "+e.length+" static arguments");return new(p.bind.apply(p,f([void 0],u(f(f([],u(e),!1),u(n),!1)),!1)))},s}();c.InstantiationService=o},7866:function(H,c,C){var _=this&&this.__decorate||function(s,p,h,i){var e,t=arguments.length,r=t<3?p:i===null?i=Object.getOwnPropertyDescriptor(p,h):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,p,h,i);else for(var n=s.length-1;n>=0;n--)(e=s[n])&&(r=(t<3?e(r):t>3?e(p,h,r):e(p,h))||r);return t>3&&r&&Object.defineProperty(p,h,r),r},u=this&&this.__param||function(s,p){return function(h,i){p(h,i,s)}},f=this&&this.__read||function(s,p){var h=typeof Symbol=="function"&&s[Symbol.iterator];if(!h)return s;var i,e,t=h.call(s),r=[];try{for(;(p===void 0||p-- >0)&&!(i=t.next()).done;)r.push(i.value)}catch(n){e={error:n}}finally{try{i&&!i.done&&(h=t.return)&&h.call(t)}finally{if(e)throw e.error}}return r},d=this&&this.__spreadArray||function(s,p,h){if(h||arguments.length===2)for(var i,e=0,t=p.length;e<t;e++)!i&&e in p||(i||(i=Array.prototype.slice.call(p,0,e)),i[e]=p[e]);return s.concat(i||Array.prototype.slice.call(p))};Object.defineProperty(c,"__esModule",{value:!0}),c.LogService=void 0;var m=C(2585),v={debug:m.LogLevelEnum.DEBUG,info:m.LogLevelEnum.INFO,warn:m.LogLevelEnum.WARN,error:m.LogLevelEnum.ERROR,off:m.LogLevelEnum.OFF},o=function(){function s(p){var h=this;this._optionsService=p,this.logLevel=m.LogLevelEnum.OFF,this._updateLogLevel(),this._optionsService.onOptionChange(function(i){i==="logLevel"&&h._updateLogLevel()})}return s.prototype._updateLogLevel=function(){this.logLevel=v[this._optionsService.rawOptions.logLevel]},s.prototype._evalLazyOptionalParams=function(p){for(var h=0;h<p.length;h++)typeof p[h]=="function"&&(p[h]=p[h]())},s.prototype._log=function(p,h,i){this._evalLazyOptionalParams(i),p.call.apply(p,d([console,"xterm.js: "+h],f(i),!1))},s.prototype.debug=function(p){for(var h=[],i=1;i<arguments.length;i++)h[i-1]=arguments[i];this.logLevel<=m.LogLevelEnum.DEBUG&&this._log(console.log,p,h)},s.prototype.info=function(p){for(var h=[],i=1;i<arguments.length;i++)h[i-1]=arguments[i];this.logLevel<=m.LogLevelEnum.INFO&&this._log(console.info,p,h)},s.prototype.warn=function(p){for(var h=[],i=1;i<arguments.length;i++)h[i-1]=arguments[i];this.logLevel<=m.LogLevelEnum.WARN&&this._log(console.warn,p,h)},s.prototype.error=function(p){for(var h=[],i=1;i<arguments.length;i++)h[i-1]=arguments[i];this.logLevel<=m.LogLevelEnum.ERROR&&this._log(console.error,p,h)},_([u(0,m.IOptionsService)],s)}();c.LogService=o},7302:function(H,c,C){var _=this&&this.__assign||function(){return _=Object.assign||function(v){for(var o,s=1,p=arguments.length;s<p;s++)for(var h in o=arguments[s])Object.prototype.hasOwnProperty.call(o,h)&&(v[h]=o[h]);return v},_.apply(this,arguments)};Object.defineProperty(c,"__esModule",{value:!0}),c.OptionsService=c.DEFAULT_OPTIONS=c.DEFAULT_BELL_SOUND=void 0;var u=C(8460),f=C(6114);c.DEFAULT_BELL_SOUND="data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjMyLjEwNAAAAAAAAAAAAAAA//tQxAADB8AhSmxhIIEVCSiJrDCQBTcu3UrAIwUdkRgQbFAZC1CQEwTJ9mjRvBA4UOLD8nKVOWfh+UlK3z/177OXrfOdKl7pyn3Xf//WreyTRUoAWgBgkOAGbZHBgG1OF6zM82DWbZaUmMBptgQhGjsyYqc9ae9XFz280948NMBWInljyzsNRFLPWdnZGWrddDsjK1unuSrVN9jJsK8KuQtQCtMBjCEtImISdNKJOopIpBFpNSMbIHCSRpRR5iakjTiyzLhchUUBwCgyKiweBv/7UsQbg8isVNoMPMjAAAA0gAAABEVFGmgqK////9bP/6XCykxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",c.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,customGlyphs:!0,bellSound:c.DEFAULT_BELL_SOUND,bellStyle:"none",drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",lineHeight:1,linkTooltipHoverDuration:500,letterSpacing:0,logLevel:"info",scrollback:1e3,scrollSensitivity:1,screenReaderMode:!1,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!0,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:f.isMac,rendererType:"canvas",windowOptions:{},windowsMode:!1,wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:void 0};var d=["normal","bold","100","200","300","400","500","600","700","800","900"],m=function(){function v(o){this._onOptionChange=new u.EventEmitter;var s=_({},c.DEFAULT_OPTIONS);for(var p in o)if(p in s)try{var h=o[p];s[p]=this._sanitizeAndValidateOption(p,h)}catch(i){console.error(i)}this.rawOptions=s,this.options=_({},s),this._setupOptions()}return Object.defineProperty(v.prototype,"onOptionChange",{get:function(){return this._onOptionChange.event},enumerable:!1,configurable:!0}),v.prototype._setupOptions=function(){var o=this,s=function(e){if(!(e in c.DEFAULT_OPTIONS))throw new Error('No option with key "'+e+'"');return o.rawOptions[e]},p=function(e,t){if(!(e in c.DEFAULT_OPTIONS))throw new Error('No option with key "'+e+'"');t=o._sanitizeAndValidateOption(e,t),o.rawOptions[e]!==t&&(o.rawOptions[e]=t,o._onOptionChange.fire(e))};for(var h in this.rawOptions){var i={get:s.bind(this,h),set:p.bind(this,h)};Object.defineProperty(this.options,h,i)}},v.prototype.setOption=function(o,s){this.options[o]=s},v.prototype._sanitizeAndValidateOption=function(o,s){switch(o){case"bellStyle":case"cursorStyle":case"rendererType":case"wordSeparator":s||(s=c.DEFAULT_OPTIONS[o]);break;case"fontWeight":case"fontWeightBold":if(typeof s=="number"&&1<=s&&s<=1e3)break;s=d.includes(s)?s:c.DEFAULT_OPTIONS[o];break;case"cursorWidth":s=Math.floor(s);case"lineHeight":case"tabStopWidth":if(s<1)throw new Error(o+" cannot be less than 1, value: "+s);break;case"minimumContrastRatio":s=Math.max(1,Math.min(21,Math.round(10*s)/10));break;case"scrollback":if((s=Math.min(s,4294967295))<0)throw new Error(o+" cannot be less than 0, value: "+s);break;case"fastScrollSensitivity":case"scrollSensitivity":if(s<=0)throw new Error(o+" cannot be less than or equal to 0, value: "+s);case"rows":case"cols":if(!s&&s!==0)throw new Error(o+" must be numeric, value: "+s)}return s},v.prototype.getOption=function(o){return this.options[o]},v}();c.OptionsService=m},8343:(H,c)=>{function C(_,u,f){u.di$target===u?u.di$dependencies.push({id:_,index:f}):(u.di$dependencies=[{id:_,index:f}],u.di$target=u)}Object.defineProperty(c,"__esModule",{value:!0}),c.createDecorator=c.getServiceDependencies=c.serviceRegistry=void 0,c.serviceRegistry=new Map,c.getServiceDependencies=function(_){return _.di$dependencies||[]},c.createDecorator=function(_){if(c.serviceRegistry.has(_))return c.serviceRegistry.get(_);var u=function(f,d,m){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");C(u,f,m)};return u.toString=function(){return _},c.serviceRegistry.set(_,u),u}},2585:(H,c,C)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.IDecorationService=c.IUnicodeService=c.IOptionsService=c.ILogService=c.LogLevelEnum=c.IInstantiationService=c.IDirtyRowService=c.ICharsetService=c.ICoreService=c.ICoreMouseService=c.IBufferService=void 0;var _,u=C(8343);c.IBufferService=(0,u.createDecorator)("BufferService"),c.ICoreMouseService=(0,u.createDecorator)("CoreMouseService"),c.ICoreService=(0,u.createDecorator)("CoreService"),c.ICharsetService=(0,u.createDecorator)("CharsetService"),c.IDirtyRowService=(0,u.createDecorator)("DirtyRowService"),c.IInstantiationService=(0,u.createDecorator)("InstantiationService"),(_=c.LogLevelEnum||(c.LogLevelEnum={}))[_.DEBUG=0]="DEBUG",_[_.INFO=1]="INFO",_[_.WARN=2]="WARN",_[_.ERROR=3]="ERROR",_[_.OFF=4]="OFF",c.ILogService=(0,u.createDecorator)("LogService"),c.IOptionsService=(0,u.createDecorator)("OptionsService"),c.IUnicodeService=(0,u.createDecorator)("UnicodeService"),c.IDecorationService=(0,u.createDecorator)("DecorationService")},1480:(H,c,C)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.UnicodeService=void 0;var _=C(8460),u=C(225),f=function(){function d(){this._providers=Object.create(null),this._active="",this._onChange=new _.EventEmitter;var m=new u.UnicodeV6;this.register(m),this._active=m.version,this._activeProvider=m}return Object.defineProperty(d.prototype,"onChange",{get:function(){return this._onChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"versions",{get:function(){return Object.keys(this._providers)},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"activeVersion",{get:function(){return this._active},set:function(m){if(!this._providers[m])throw new Error('unknown Unicode version "'+m+'"');this._active=m,this._activeProvider=this._providers[m],this._onChange.fire(m)},enumerable:!1,configurable:!0}),d.prototype.register=function(m){this._providers[m.version]=m},d.prototype.wcwidth=function(m){return this._activeProvider.wcwidth(m)},d.prototype.getStringCellWidth=function(m){for(var v=0,o=m.length,s=0;s<o;++s){var p=m.charCodeAt(s);if(55296<=p&&p<=56319){if(++s>=o)return v+this.wcwidth(p);var h=m.charCodeAt(s);56320<=h&&h<=57343?p=1024*(p-55296)+h-56320+65536:v+=this.wcwidth(h)}v+=this.wcwidth(p)}return v},d}();c.UnicodeService=f}},re={};return function H(c){var C=re[c];if(C!==void 0)return C.exports;var _=re[c]={exports:{}};return G[c].call(_.exports,_,_.exports,H),_.exports}(4389)})()})})(Er);var Ur=Er.exports,kr={exports:{}};(function($,de){(function(G,re){$.exports=re()})(self,function(){return(()=>{var G={775:(H,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.FitAddon=void 0;var C=function(){function _(){}return _.prototype.activate=function(u){this._terminal=u},_.prototype.dispose=function(){},_.prototype.fit=function(){var u=this.proposeDimensions();if(u&&this._terminal){var f=this._terminal._core;this._terminal.rows===u.rows&&this._terminal.cols===u.cols||(f._renderService.clear(),this._terminal.resize(u.cols,u.rows))}},_.prototype.proposeDimensions=function(){if(this._terminal&&this._terminal.element&&this._terminal.element.parentElement){var u=this._terminal._core;if(u._renderService.dimensions.actualCellWidth!==0&&u._renderService.dimensions.actualCellHeight!==0){var f=window.getComputedStyle(this._terminal.element.parentElement),d=parseInt(f.getPropertyValue("height")),m=Math.max(0,parseInt(f.getPropertyValue("width"))),v=window.getComputedStyle(this._terminal.element),o=d-(parseInt(v.getPropertyValue("padding-top"))+parseInt(v.getPropertyValue("padding-bottom"))),s=m-(parseInt(v.getPropertyValue("padding-right"))+parseInt(v.getPropertyValue("padding-left")))-u.viewport.scrollBarWidth;return{cols:Math.max(2,Math.floor(s/u._renderService.dimensions.actualCellWidth)),rows:Math.max(1,Math.floor(o/u._renderService.dimensions.actualCellHeight))}}}},_}();c.FitAddon=C}},re={};return function H(c){if(re[c])return re[c].exports;var C=re[c]={exports:{}};return G[c](C,C.exports,H),C.exports}(775)})()})})(kr);var qr=kr.exports,Mr={exports:{}};(function($,de){(function(G,re){$.exports=re()})(self,function(){return(()=>{var G={6:(C,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.LinkComputer=_.WebLinkProvider=void 0;var u=function(){function d(m,v,o,s){s===void 0&&(s={}),this._terminal=m,this._regex=v,this._handler=o,this._options=s}return d.prototype.provideLinks=function(m,v){var o=f.computeLink(m,this._regex,this._terminal,this._handler);v(this._addCallbacks(o))},d.prototype._addCallbacks=function(m){var v=this;return m.map(function(o){return o.leave=v._options.leave,o.hover=function(s,p){if(v._options.hover){var h=o.range;v._options.hover(s,p,h)}},o})},d}();_.WebLinkProvider=u;var f=function(){function d(){}return d.computeLink=function(m,v,o,s){for(var p,h=new RegExp(v.source,(v.flags||"")+"g"),i=d._translateBufferLineToStringWithWrap(m-1,!1,o),e=i[0],t=i[1],r=-1,n=[];(p=h.exec(e))!==null;){var l=p[1];if(!l){console.log("match found without corresponding matchIndex");break}if(r=e.indexOf(l,r+1),h.lastIndex=r+l.length,r<0)break;for(var a=r+l.length,g=t+1;a>o.cols;)a-=o.cols,g++;for(var S=r+1,y=t+1;S>o.cols;)S-=o.cols,y++;var b={start:{x:S,y},end:{x:a,y:g}};n.push({range:b,text:l,activate:s})}return n},d._translateBufferLineToStringWithWrap=function(m,v,o){var s,p,h="";do{if(!(e=o.buffer.active.getLine(m)))break;e.isWrapped&&m--,p=e.isWrapped}while(p);var i=m;do{var e,t=o.buffer.active.getLine(m+1);if(s=!!t&&t.isWrapped,!(e=o.buffer.active.getLine(m)))break;h+=e.translateToString(!s&&v).substring(0,o.cols),m++}while(s);return[h,i]},d}();_.LinkComputer=f}},re={};function H(C){var _=re[C];if(_!==void 0)return _.exports;var u=re[C]={exports:{}};return G[C](u,u.exports,H),u.exports}var c={};return(()=>{var C=c;Object.defineProperty(C,"__esModule",{value:!0}),C.WebLinksAddon=void 0;var _=H(6),u=new RegExp(`(?:^|[^\\da-z\\.-]+)((https?:\\/\\/)((([\\da-z\\.-]+)\\.([a-z\\.]{2,18}))|((\\d{1,3}\\.){3}\\d{1,3})|(localhost))(:\\d{1,5})?((\\/[\\/\\w\\.\\-%~:+@]*)*([^:"'\\s]))?(\\?[0-9\\w\\[\\]\\(\\)\\/\\?\\!#@$%&'*+,:;~\\=\\.\\-]*)?(#[0-9\\w\\[\\]\\(\\)\\/\\?\\!#@$%&'*+,:;~\\=\\.\\-]*)?)($|[^\\/\\w\\.\\-%]+)`);function f(m,v){var o=window.open();if(o){try{o.opener=null}catch{}o.location.href=v}else console.warn("Opening link blocked as opener could not be cleared")}var d=function(){function m(v,o,s){v===void 0&&(v=f),o===void 0&&(o={}),s===void 0&&(s=!1),this._handler=v,this._options=o,this._useLinkProvider=s}return m.prototype.activate=function(v){if(this._terminal=v,this._useLinkProvider&&"registerLinkProvider"in this._terminal){var o=(s=this._options).urlRegex||u;this._linkProvider=this._terminal.registerLinkProvider(new _.WebLinkProvider(this._terminal,o,this._handler,s))}else{var s;(s=this._options).matchIndex=1,this._linkMatcherId=this._terminal.registerLinkMatcher(u,this._handler,s)}},m.prototype.dispose=function(){var v;this._linkMatcherId!==void 0&&this._terminal!==void 0&&this._terminal.deregisterLinkMatcher(this._linkMatcherId),(v=this._linkProvider)===null||v===void 0||v.dispose()},m}();C.WebLinksAddon=d})(),c})()})})(Mr);var Nr=Mr.exports;const zr={name:"OverviewCard",components:{Icon:Rr},props:{title:String,value:String,desc:String,color:String,icon:String}},Kr={class:"bg-white p-4 rounded flex space-x-4 justify-between dark:bg-cool-gray-800 shadow"},Vr={id:"left"},Gr={class:"text-2xl font-bold text-gray-800 dark:text-gray-200"},Zr={key:0,class:"text-xs text-gray-400"},Xr={id:"right",class:"flex justify-center items-center"};function Yr($,de,G,re,H,c){const C=Ke("icon");return qe(),qt("div",Kr,[U("div",Vr,[U("h3",{class:Sr(["text-gray-400 text-sm font-bold",G.color])},te(G.title),3),U("p",Gr,te(G.value),1),G.desc?(qe(),qt("p",Zr,te(G.desc),1)):_r("",!0)]),U("div",Xr,[G.icon?(qe(),xr(C,{key:0,class:Sr(["w-16",G.color]),name:G.icon},null,8,["class","name"])):_r("",!0)])])}const Jr=Lr(zr,[["render",Yr]]);const Qr={components:{AdminLayout:Fr,ServerSubMenu:Hr,OverviewCard:Jr},props:{server:Object,serverAggrData:Object},setup(){const{can:$}=Wr(),{formatTimeAgoToNow:de,formatToDayDateString:G}=Or();return{can:$,formatTimeAgoToNow:de,formatToDayDateString:G}},data(){return{millify:jr,refitTerminal:null,onlinePlayers:this.__("Loading")+"...",maxPlayersAllowed:0,serverPingInterval:null,sendingCommand:!1,commandText:"",commandError:null,termx:null,loadingConsoleLogs:!0,consoleLogsQueryInterval:null,consolelogs:[]}},mounted(){const de={disableStdin:!0,cursorStyle:"underline",allowTransparency:!0,fontSize:12,fontFamily:"Menlo, Monaco, Consolas, monospace",rows:30,theme:{background:"#111827",cursor:"transparent",black:"rgb(19, 26, 32)",red:"#E54B4B",green:"#9ECE58",yellow:"#ddcf31",blue:"#396FE2",magenta:"#BB80B3",cyan:"#2DDAFD",white:"#d0d0d0",brightBlack:"rgba(255, 255, 255, 0.2)",brightRed:"#FF5370",brightGreen:"#31ab14",brightYellow:"#FFCB6B",brightBlue:"#82AAFF",brightMagenta:"#C792EA",brightCyan:"#89DDFF",brightWhite:"#ffffff",selection:"#FAF089"}},G=new Ur.Terminal(de),re=new qr.FitAddon;G.loadAddon(re),G.loadAddon(new Nr.WebLinksAddon),G.open(document.getElementById("terminal")),re.fit(),this.refitTerminal=Dr.debounce(()=>{re.fit()},100),addEventListener("resize",this.refitTerminal),axios.get(route("admin.server.consolelogs.index",this.server.id)).then(H=>{var c;this.consolelogs=(c=H.data)==null?void 0:c.reverse();for(let C of this.consolelogs)G.writeln(C.data)}).finally(()=>{this.loadingConsoleLogs=!1}),dr?Echo.private("consolelogs."+this.server.id).listen("ServerConsolelogCreated",H=>{this.consolelogs.unshift(H.data),G.writeln(H.data.data)}):this.consoleLogsQueryInterval=setInterval(()=>this.pollServerForConsoleLogs(G),5e3),this.pingServer(),this.serverPingInterval=setInterval(()=>this.pingServer(),1e4),this.termx=G},unmounted(){this.termx.dispose(),dr?Echo.leave(`consolelogs.${this.server.id}`):clearInterval(this.consoleLogsQueryInterval),removeEventListener("resize",this.refitTerminal),clearInterval(this.serverPingInterval)},methods:{pingServer(){axios.get(route("server.ping.get",this.server.id)).then($=>{this.$nextTick(()=>{$.data.players&&(this.onlinePlayers=$.data.players.online.toString(),this.maxPlayersAllowed=$.data.players.max.toString())})}).catch(()=>{this.$nextTick(()=>{this.onlinePlayers="offline"})})},sendCommandToServer(){this.sendingCommand=!0;let $={type:"custom",params:this.commandText,context:"server"};axios.post(route("admin.server.command",this.server.id),$).then(()=>{this.commandText=""}).catch(de=>{this.commandError=de.message}).finally(()=>{this.sendingCommand=!1})},pollServerForConsoleLogs($){var G;if(dr)return;const de=this.consolelogs.length?(G=this.consolelogs[this.consolelogs.length-1])==null?void 0:G.id:0;axios.get(route("admin.server.consolelogs.index",{server:this.server.id,after:de})).then(re=>{if(re.data&&re.data.length){const H=re.data.reverse();for(let c of H)$.writeln(c.data);this.consolelogs=this.consolelogs.concat(H)}})}}},$r={class:"max-w-6xl px-10 py-12 mx-auto space-y-4"},ei={class:"text-2xl text-gray-600 dark:text-gray-200"},ti={class:"font-bold"},ri={class:"font-bold"},ii={class:"flex justify-between space-x-2"},ni={id:"server-general-data",class:"w-full p-2 space-y-4 text-sm text-gray-700 bg-white rounded shadow dark:text-gray-300 dark:bg-cool-gray-800 md:p-5"},oi={class:"flex justify-between pb-4 space-x-8 border-b border-gray-200 dark:border-gray-700"},si={class:"flex-1 space-y-4"},ai={class:"flex justify-between"},ci={class:"flex"},li=U("svg",{class:"w-5 h-5 text-light-blue-500",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 16 16"},[U("path",{d:"M7 0a1.5 1.5 0 0 0-1.5 1.5v11a1.5 1.5 0 0 0 1.404 1.497c-.35.305-.872.678-1.628 1.056A.5.5 0 0 0 5.5 16h5a.5.5 0 0 0 .224-.947c-.756-.378-1.278-.75-1.628-1.056A1.5 1.5 0 0 0 10.5 12.5v-11A1.5 1.5 0 0 0 9 0H7Zm1 3a.5.5 0 1 1 0-1 .5.5 0 0 1 0 1Zm0 2a.5.5 0 1 1 0-1 .5.5 0 0 1 0 1Zm.5 1.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0ZM8 9a.5.5 0 1 1 0-1 .5.5 0 0 1 0 1Z"})],-1),hi={class:"ml-1"},ui={class:"flex justify-between"},fi=U("div",{class:"flex"},[U("svg",{class:"w-5 h-5 text-green-500",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 16 16"},[U("path",{d:"M5.525 3.025a3.5 3.5 0 0 1 4.95 0 .5.5 0 1 0 .707-.707 4.5 4.5 0 0 0-6.364 0 .5.5 0 0 0 .707.707Z"}),U("path",{d:"M6.94 4.44a1.5 1.5 0 0 1 2.12 0 .5.5 0 0 0 .708-.708 2.5 2.5 0 0 0-3.536 0 .5.5 0 0 0 .707.707Z"}),U("path",{d:"M2.974 2.342a.5.5 0 1 0-.948.316L3.806 8H1.5A1.5 1.5 0 0 0 0 9.5v2A1.5 1.5 0 0 0 1.5 13H2a.5.5 0 0 0 .5.5h2A.5.5 0 0 0 5 13h6a.5.5 0 0 0 .5.5h2a.5.5 0 0 0 .5-.5h.5a1.5 1.5 0 0 0 1.5-1.5v-2A1.5 1.5 0 0 0 14.5 8h-2.306l1.78-5.342a.5.5 0 1 0-.948-.316L11.14 8H4.86L2.974 2.342ZM2.5 11a.5.5 0 1 1 0-1 .5.5 0 0 1 0 1Zm4.5-.5a.5.5 0 1 1 1 0 .5.5 0 0 1-1 0Zm2.5.5a.5.5 0 1 1 0-1 .5.5 0 0 1 0 1Zm1.5-.5a.5.5 0 1 1 1 0 .5.5 0 0 1-1 0Zm2 0a.5.5 0 1 1 1 0 .5.5 0 0 1-1 0Z"}),U("path",{d:"M8.5 5.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0Z"})]),U("p",{class:"ml-1"},te("IP Address"))],-1),di={class:"flex justify-between"},_i={class:"flex"},pi=U("svg",{class:"w-5 h-5 text-orange-500",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 16 16"},[U("path",{d:"M15.384 6.115a.485.485 0 0 0-.047-.736A12.444 12.444 0 0 0 8 3C5.259 3 2.723 3.882.663 5.379a.485.485 0 0 0-.048.736.518.518 0 0 0 .668.05A11.448 11.448 0 0 1 8 4c2.507 0 4.827.802 6.716 2.164.205.148.49.13.668-.049z"}),U("path",{d:"M13.229 8.271a.482.482 0 0 0-.063-.745A9.455 9.455 0 0 0 8 6c-1.905 0-3.68.56-5.166 1.526a.48.48 0 0 0-.063.745.525.525 0 0 0 .652.065A8.46 8.46 0 0 1 8 7a8.46 8.46 0 0 1 4.576 1.336c.206.132.48.108.653-.065zm-2.183 2.183c.226-.226.185-.605-.1-.75A6.473 6.473 0 0 0 8 9c-1.06 0-2.062.254-2.946.704-.285.145-.326.524-.1.75l.015.015c.16.16.407.19.611.09A5.478 5.478 0 0 1 8 10c.868 0 1.69.201 2.42.56.203.1.45.07.61-.091l.016-.015zM9.06 12.44c.196-.196.198-.52-.04-.66A1.99 1.99 0 0 0 8 11.5a1.99 1.99 0 0 0-1.02.28c-.238.14-.236.464-.04.66l.706.706a.5.5 0 0 0 .707 0l.707-.707z"})],-1),vi={class:"ml-1"},gi={class:"flex justify-between"},yi={class:"flex"},mi=U("svg",{class:"w-5 h-5 text-green-500",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[U("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM4.332 8.027a6.012 6.012 0 011.912-2.706C6.512 5.73 6.974 6 7.5 6A1.5 1.5 0 019 7.5V8a2 2 0 004 0 2 2 0 011.523-1.943A5.977 5.977 0 0116 10c0 .34-.028.675-.083 1H15a2 2 0 00-2 2v2.197A5.973 5.973 0 0110 16v-2a2 2 0 00-2-2 2 2 0 01-2-2 2 2 0 00-1.668-1.973z","clip-rule":"evenodd"})],-1),bi={class:"ml-1"},Si={class:"flex-1 space-y-4"},Ci={class:"flex justify-between"},wi={class:"flex"},Li=U("svg",{class:"w-5 h-5 text-orange-500",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 16 16"},[U("path",{d:"M15.698 7.287 8.712.302a1.03 1.03 0 0 0-1.457 0l-1.45 1.45 1.84 1.84a1.223 1.223 0 0 1 1.55 1.56l1.773 1.774a1.224 1.224 0 0 1 1.267 2.025 1.226 1.226 0 0 1-2.002-1.334L8.58 5.963v4.353a1.226 1.226 0 1 1-1.008-.036V5.887a1.226 1.226 0 0 1-.666-1.608L5.093 2.465l-4.79 4.79a1.03 1.03 0 0 0 0 1.457l6.986 6.986a1.03 1.03 0 0 0 1.457 0l6.953-6.953a1.031 1.031 0 0 0 0-1.457"})],-1),xi={class:"ml-1"},Ei={class:"flex justify-between"},ki={class:"flex"},Mi=U("svg",{class:"w-5 h-5 text-light-blue-500",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 16 16"},[U("path",{d:"M.036 3.314a.5.5 0 0 1 .65-.278l1.757.703a1.5 1.5 0 0 0 1.114 0l1.014-.406a2.5 2.5 0 0 1 1.857 0l1.015.406a1.5 1.5 0 0 0 1.114 0l1.014-.406a2.5 2.5 0 0 1 1.857 0l1.015.406a1.5 1.5 0 0 0 1.114 0l1.757-.703a.5.5 0 1 1 .372.928l-1.758.703a2.5 2.5 0 0 1-1.857 0l-1.014-.406a1.5 1.5 0 0 0-1.114 0l-1.015.406a2.5 2.5 0 0 1-1.857 0l-1.014-.406a1.5 1.5 0 0 0-1.114 0l-1.015.406a2.5 2.5 0 0 1-1.857 0L.314 3.964a.5.5 0 0 1-.278-.65zm0 3a.5.5 0 0 1 .65-.278l1.757.703a1.5 1.5 0 0 0 1.114 0l1.014-.406a2.5 2.5 0 0 1 1.857 0l1.015.406a1.5 1.5 0 0 0 1.114 0l1.014-.406a2.5 2.5 0 0 1 1.857 0l1.015.406a1.5 1.5 0 0 0 1.114 0l1.757-.703a.5.5 0 1 1 .372.928l-1.758.703a2.5 2.5 0 0 1-1.857 0l-1.014-.406a1.5 1.5 0 0 0-1.114 0l-1.015.406a2.5 2.5 0 0 1-1.857 0l-1.014-.406a1.5 1.5 0 0 0-1.114 0l-1.015.406a2.5 2.5 0 0 1-1.857 0L.314 6.964a.5.5 0 0 1-.278-.65zm0 3a.5.5 0 0 1 .65-.278l1.757.703a1.5 1.5 0 0 0 1.114 0l1.014-.406a2.5 2.5 0 0 1 1.857 0l1.015.406a1.5 1.5 0 0 0 1.114 0l1.014-.406a2.5 2.5 0 0 1 1.857 0l1.015.406a1.5 1.5 0 0 0 1.114 0l1.757-.703a.5.5 0 1 1 .372.928l-1.758.703a2.5 2.5 0 0 1-1.857 0l-1.014-.406a1.5 1.5 0 0 0-1.114 0l-1.015.406a2.5 2.5 0 0 1-1.857 0l-1.014-.406a1.5 1.5 0 0 0-1.114 0l-1.015.406a2.5 2.5 0 0 1-1.857 0L.314 9.964a.5.5 0 0 1-.278-.65zm0 3a.5.5 0 0 1 .65-.278l1.757.703a1.5 1.5 0 0 0 1.114 0l1.014-.406a2.5 2.5 0 0 1 1.857 0l1.015.406a1.5 1.5 0 0 0 1.114 0l1.014-.406a2.5 2.5 0 0 1 1.857 0l1.015.406a1.5 1.5 0 0 0 1.114 0l1.757-.703a.5.5 0 1 1 .372.928l-1.758.703a2.5 2.5 0 0 1-1.857 0l-1.014-.406a1.5 1.5 0 0 0-1.114 0l-1.015.406a2.5 2.5 0 0 1-1.857 0l-1.014-.406a1.5 1.5 0 0 0-1.114 0l-1.015.406a2.5 2.5 0 0 1-1.857 0l-1.757-.703a.5.5 0 0 1-.278-.65z"})],-1),Ai={class:"ml-1"},Ri={class:"flex justify-between"},Oi={class:"flex"},Di=U("svg",{class:"w-5 h-5 text-green-500",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 16 16"},[U("path",{d:"M15.384 6.115a.485.485 0 0 0-.047-.736A12.444 12.444 0 0 0 8 3C5.259 3 2.723 3.882.663 5.379a.485.485 0 0 0-.048.736.518.518 0 0 0 .668.05A11.448 11.448 0 0 1 8 4c2.507 0 4.827.802 6.716 2.164.205.148.49.13.668-.049z"}),U("path",{d:"M13.229 8.271a.482.482 0 0 0-.063-.745A9.455 9.455 0 0 0 8 6c-1.905 0-3.68.56-5.166 1.526a.48.48 0 0 0-.063.745.525.525 0 0 0 .652.065A8.46 8.46 0 0 1 8 7a8.46 8.46 0 0 1 4.576 1.336c.206.132.48.108.653-.065zm-2.183 2.183c.226-.226.185-.605-.1-.75A6.473 6.473 0 0 0 8 9c-1.06 0-2.062.254-2.946.704-.285.145-.326.524-.1.75l.015.015c.16.16.407.19.611.09A5.478 5.478 0 0 1 8 10c.868 0 1.69.201 2.42.56.203.1.45.07.61-.091l.016-.015zM9.06 12.44c.196-.196.198-.52-.04-.66A1.99 1.99 0 0 0 8 11.5a1.99 1.99 0 0 0-1.02.28c-.238.14-.236.464-.04.66l.706.706a.5.5 0 0 0 .707 0l.707-.707z"})],-1),Ti={class:"ml-1"},Bi={class:"focus:outline-none"},Pi={class:"flex justify-between"},Ii={class:"flex"},Hi=U("svg",{class:"w-5 h-5 text-indigo-500",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 16 16"},[U("path",{d:"M9 7a1 1 0 0 1 1-1h5v2h-5a1 1 0 0 1-1-1zM1 9h4a1 1 0 0 1 0 2H1V9z"}),U("path",{d:"M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5zM1 4v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4H1z"})],-1),ji={class:"ml-1"},Fi={class:"flex justify-between space-x-8 dark:border-gray-700"},Wi={class:"flex-1 space-y-4"},Ui={class:"flex justify-between"},qi={class:"flex"},Ni=U("svg",{class:"w-5 h-5 text-light-blue-500",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 16 16"},[U("path",{d:"M16 8c0 3.866-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.584.296-1.925.864-4.181 1.234-.2.032-.352-.176-.273-.362.354-.836.674-1.95.77-2.966C.744 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7zM5 8a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm4 0a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"})],-1),zi={class:"ml-1"},Ki={class:"flex justify-between"},Vi={class:"flex"},Gi=U("svg",{class:"w-5 h-5 text-green-500",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 16 16"},[U("path",{d:"M5.933.87a2.89 2.89 0 0 1 4.134 0l.622.638.89-.011a2.89 2.89 0 0 1 2.924 2.924l-.01.89.636.622a2.89 2.89 0 0 1 0 4.134l-.637.622.011.89a2.89 2.89 0 0 1-2.924 2.924l-.89-.01-.622.636a2.89 2.89 0 0 1-4.134 0l-.622-.637-.89.011a2.89 2.89 0 0 1-2.924-2.924l.01-.89-.636-.622a2.89 2.89 0 0 1 0-4.134l.637-.622-.011-.89a2.89 2.89 0 0 1 2.924-2.924l.89.01.622-.636zM7.002 11a1 1 0 1 0 2 0 1 1 0 0 0-2 0zm1.602-2.027c.04-.534.198-.815.846-1.26.674-.475 1.05-1.09 1.05-1.986 0-1.325-.92-2.227-2.262-2.227-1.02 0-1.792.492-2.1 1.29A1.71 1.71 0 0 0 6 5.48c0 .393.203.64.545.64.272 0 .455-.147.564-.51.158-.592.525-.915 1.074-.915.61 0 1.03.446 1.03 1.084 0 .563-.208.885-.822 1.325-.619.433-.926.914-.926 1.64v.111c0 .428.208.745.585.745.336 0 .504-.24.554-.627z"})],-1),Zi={class:"ml-1"},Xi={class:"flex-1 space-y-4"},Yi={class:"flex justify-between"},Ji={class:"flex"},Qi=U("svg",{class:"w-5 h-5 text-orange-500",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 16 16"},[U("path",{d:"M1.5 1a.5.5 0 0 0-.5.5v3a.5.5 0 0 1-1 0v-3A1.5 1.5 0 0 1 1.5 0h3a.5.5 0 0 1 0 1h-3zM11 .5a.5.5 0 0 1 .5-.5h3A1.5 1.5 0 0 1 16 1.5v3a.5.5 0 0 1-1 0v-3a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 1-.5-.5zM.5 11a.5.5 0 0 1 .5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 1 0 1h-3A1.5 1.5 0 0 1 0 14.5v-3a.5.5 0 0 1 .5-.5zm15 0a.5.5 0 0 1 .5.5v3a1.5 1.5 0 0 1-1.5 1.5h-3a.5.5 0 0 1 0-1h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 1 .5-.5z"}),U("path",{d:"M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H3zm8-9a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"})],-1),$i={class:"ml-1"},en={class:"flex justify-between"},tn={class:"flex"},rn=U("svg",{class:"w-5 h-5 text-light-blue-500",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 16 16"},[U("path",{d:"M9 7a1 1 0 0 1 1-1h5v2h-5a1 1 0 0 1-1-1zM1 9h4a1 1 0 0 1 0 2H1V9z"}),U("path",{d:"M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5zM1 4v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4H1z"})],-1),nn={class:"ml-1"},on=["title"],sn={id:"terminal-container",class:"p-3 bg-white rounded shadow dark:bg-cool-gray-800"},an={class:"flex justify-between"},cn={class:"mb-1 font-extrabold text-gray-800 dark:text-gray-200"},ln=U("div",{id:"terminal",class:"break-normal"},null,-1),hn=["disabled","placeholder"],un={key:0,class:"text-xs text-red-400"};function fn($,de,G,re,H,c){const C=Ke("app-head"),_=Ke("server-sub-menu"),u=Ke("overview-card"),f=Ke("AdminLayout"),d=Tr("tippy");return qe(),xr(f,null,{default:Br(()=>[Ue(C,{title:$.__("Server #:id",{id:G.server.id})},null,8,["title"]),U("div",$r,[U("h2",ei,[U("span",ti,"#"+te(G.server.id),1),Cr(" - "),U("span",ri,te(G.server.name),1)]),Ue(_,{id:G.server.id},null,8,["id"]),U("div",ii,[Ue(u,{title:$.__("Online Players"),value:H.onlinePlayers,desc:$.__("Maximum limit: :max",{max:H.maxPlayersAllowed}),color:"text-green-300",icon:"users",class:"flex-1"},null,8,["title","value","desc"]),Ue(u,{title:$.__("Total PvP Kills"),value:H.millify(G.serverAggrData.pvp_kills,{precision:2}),desc:$.__("Mob Kills: :mob_kills",{mob_kills:H.millify(G.serverAggrData.mob_kills,{precision:2})}),color:"text-yellow-300",icon:"swords-cross",class:"flex-1"},null,8,["title","value","desc"]),Ue(u,{title:$.__("Total Deaths"),value:H.millify(G.serverAggrData.player_deaths,{precision:2}),desc:$.__("Total Damage: :player_damage_taken",{player_damage_taken:H.millify(G.serverAggrData.player_damage_taken,{precision:2})}),color:"text-red-500",icon:"skull-bones-outline",class:"flex-1"},null,8,["title","value","desc"]),Ue(u,{title:$.__("Total Players"),value:G.serverAggrData.total_players,desc:$.__(":active_players active players",{active_players:G.serverAggrData.active_players}),color:"text-light-blue-300",icon:"users",class:"flex-1"},null,8,["title","value","desc"])]),U("div",ni,[U("div",oi,[U("div",si,[U("div",ai,[U("div",ci,[li,U("p",hi,te($.__("Hostname")),1)]),U("p",null,[U("span",null,te(G.server.hostname),1)])]),U("div",ui,[fi,U("p",null,te(G.server.ip_address),1)]),U("div",di,[U("div",_i,[pi,U("p",vi,te($.__("Join / Query Port")),1)]),U("p",null,te(G.server.join_port)+" / "+te(G.server.query_port),1)]),U("div",gi,[U("div",yi,[mi,U("p",bi,te($.__("Country")),1)]),U("p",null,te(G.server.country.name),1)])]),U("div",Si,[U("div",Ci,[U("div",wi,[Li,U("p",xi,te($.__("Minecraft Version")),1)]),U("p",null,[U("span",null,te(G.server.minecraft_version),1)])]),U("div",Ei,[U("div",ki,[Mi,U("p",Ai,te($.__("Server Type")),1)]),U("p",null,te(G.server.type.key),1)]),U("div",Ri,[U("div",Oi,[Di,U("p",Ti,te($.__("WebQuery Port")),1)]),U("p",Bi,te(G.server.webquery_port),1)]),U("div",Pi,[U("div",Ii,[Hi,U("p",ji,te($.__("Added At")),1)]),U("p",null,te(re.formatToDayDateString(G.server.created_at)),1)])])]),U("div",Fi,[U("div",Wi,[U("div",Ui,[U("div",qi,[Ni,U("p",zi,te($.__("Ingame-Chat Enabled")),1)]),U("p",null,[U("span",null,te(G.server.is_ingame_chat_enabled?$.__("Yes"):$.__("No")),1)])]),U("div",Ki,[U("div",Vi,[Gi,U("p",Zi,te($.__("Server Intel Enabled")),1)]),U("p",null,te(G.server.is_server_intel_enabled?$.__("Yes"):$.__("No")),1)])]),U("div",Xi,[U("div",Yi,[U("div",Ji,[Qi,U("p",$i,te($.__("Is Player Intel Enabled")),1)]),U("p",null,[U("span",null,te(G.server.is_player_intel_enabled?$.__("Yes"):$.__("No")),1)])]),U("div",en,[U("div",tn,[rn,U("p",nn,te($.__("Updated At")),1)]),wr((qe(),qt("p",{title:re.formatTimeAgoToNow(G.server.updated_at)},[Cr(te(re.formatToDayDateString(G.server.updated_at)),1)],8,on)),[[d]])])])])]),U("div",sn,[U("div",an,[U("h3",cn,te($.__("Server Logs")),1)]),ln,U("form",{onSubmit:de[1]||(de[1]=Pr((...m)=>c.sendCommandToServer&&c.sendCommandToServer(...m),["prevent"]))},[wr(U("input",{ref:"inputbox","onUpdate:modelValue":de[0]||(de[0]=m=>H.commandText=m),disabled:H.sendingCommand,"aria-label":"Commander",class:"block w-full mt-1 bg-gray-100 border-none rounded focus:ring-gray-300 dark:focus:ring-gray-700 sm:text-sm disabled:opacity-50 dark:bg-cool-gray-900 dark:text-gray-200 focus:bg-white",type:"text",placeholder:$.__("Type a command and press Enter to run...")},null,8,hn),[[Ir,H.commandText]]),H.commandError?(qe(),qt("span",un,te(H.commandError),1)):_r("",!0)],32)])])]),_:1})}const Sn=Lr(Qr,[["render",fn]]);export{Sn as default};
