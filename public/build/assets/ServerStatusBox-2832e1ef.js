import{_ as k}from"./CopyToClipboard-da0e6391.js";import{E as x}from"./AppLayout-9f94cfff.js";import{_ as S,l as v,q as w,o as r,d as a,a as o,t,e as l,c as C,w as _,f as c,b as Q,j as B}from"./app-9b50b83a.js";const I={components:{ErrorMessage:x,CopyToClipboard:k},props:{server:Object},data(){return{serverInfo:Object,loading:!0,error:null,interval:null}},computed:{enabled(){return this.$page.props.generalSettings.enable_mcserver_statuspingbox?!!(this.server||this.$page.props.defaultQueryServer.server):!1}},created(){this.enabled&&(this.getServerQuery(),this.interval=setInterval(()=>this.getServerQuery(),1e4))},unmounted(){clearInterval(this.interval)},methods:{getServerQuery(){let e=this.server;e||(e=this.$page.props.defaultQueryServer.server),axios.get(route("server.ping.get",e.id)).then(n=>{this.serverInfo=n.data,this.error=null}).catch(n=>{this.error=n.response.data.message||n.message,this.serverInfo=null}).finally(()=>{this.loading=!1})}}},V={key:0},j={class:"p-3 sm:px-5 bg-white dark:bg-cool-gray-800 rounded shadow break-words"},N={class:"font-extrabold text-gray-800 dark:text-gray-200"},D={key:0,class:"flex p-4 justify-center"},E=o("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-light-blue-600 dark:text-light-blue-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),O=[E],T={key:2,class:"flex flex-col"},z={class:"mt-3 text-gray-700 dark:text-gray-300 text-center font-semibold"},M={class:"font-bold text-light-blue-500 dark:text-light-blue-400"},q=["title","onClick"],A={key:0},H={key:1};function J(e,n,i,P,s,y){const f=v("error-message"),b=v("copy-to-clipboard"),m=w("tippy");return y.enabled?(r(),a("div",V,[o("div",j,[o("h3",N,t(e.__("Server Status")),1),s.loading?(r(),a("div",D,O)):l("",!0),s.error?(r(),C(f,{key:1},{default:_(()=>[c(t(s.error),1)]),_:1})):l("",!0),!s.loading&&!s.error?(r(),a("div",T,[o("div",z,[c(t(e.__("Join"))+" ",1),o("span",M,t(s.serverInfo.players.online),1),c(" "+t(e.__("Online Players"))+"! ",1)]),Q(b,null,{default:_(d=>{var u,h;return[B((r(),a("button",{title:e.__("Click to Copy"),type:"button",class:"text-center font-extrabold mt-3 border border-gray-200 dark:border-gray-700 text-gray-600 dark:text-gray-300 rounded p-2 hover:text-light-blue-500 dark:hover:text-light-blue-400 hover:bg-light-blue-50 dark:hover:bg-cool-gray-900 hover:border-light-blue-500 dark:hover:border-cool-gray-800 focus:ring focus:ring-light-blue-200 focus:ring-opacity-50 transition duration-150 ease-in-out focus:outline-none",onClick:F=>{var g,p;return d.copy(i.server?i.server.hostname:(p=(g=e.$page.props.defaultQueryServer)==null?void 0:g.server)==null?void 0:p.hostname)}},[d.status!=="copied"?(r(),a("span",A,t(i.server?i.server.hostname:(h=(u=e.$page.props.defaultQueryServer)==null?void 0:u.server)==null?void 0:h.hostname),1)):(r(),a("span",H,t(e.__("Copied!")),1))],8,q)),[[m]])]}),_:1})])):l("",!0)])])):l("",!0)}const R=S(I,[["render",J]]);export{R as S};
