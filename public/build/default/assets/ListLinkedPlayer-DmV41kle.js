import{A as j,u as V}from"./AppLayout-D09sHPWy.js";import{I as D}from"./Icon-DyYhHgsS.js";import{S as M,W as U}from"./viewer-DElAxp3u.js";import{_ as Z}from"./CopyToClipboard-o78WAkIw.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{d as r,a as t,o as n,s as l,z as P,c as f,w as u,b as _,n as k,t as s,p as c,f as x,e as y,g as z,F as H}from"./app-B6MSbjiR.js";import"./useAuthorizable-Cf1MTXSt.js";function Y(e,a){return n(),r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{d:"M3.53 2.47a.75.75 0 0 0-1.06 1.06l18 18a.75.75 0 1 0 1.06-1.06l-18-18ZM20.25 5.507v11.561L5.853 2.671c.15-.043.306-.075.467-.094a49.255 49.255 0 0 1 11.36 0c1.497.174 2.57 1.46 2.57 2.93ZM3.75 21V6.932l14.063 14.063L12 18.088l-7.165 3.583A.75.75 0 0 1 3.75 21Z"})])}function W(e,a){return n(),r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"fill-rule":"evenodd",d:"M12 1.5a5.25 5.25 0 0 0-5.25 5.25v3a3 3 0 0 0-3 3v6.75a3 3 0 0 0 3 3h10.5a3 3 0 0 0 3-3v-6.75a3 3 0 0 0-3-3v-3c0-2.9-2.35-5.25-5.25-5.25Zm3.75 8.25v-3a3.75 3.75 0 1 0-7.5 0v3h7.5Z","clip-rule":"evenodd"})])}function F(e,a){return n(),r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"fill-rule":"evenodd",d:"M20.599 1.5c-.376 0-.743.111-1.055.32l-5.08 3.385a18.747 18.747 0 0 0-3.471 2.987 10.04 10.04 0 0 1 4.815 4.815 18.748 18.748 0 0 0 2.987-3.472l3.386-5.079A1.902 1.902 0 0 0 20.599 1.5Zm-8.3 14.025a18.76 18.76 0 0 0 1.896-1.207 8.026 8.026 0 0 0-4.513-4.513A18.75 18.75 0 0 0 8.475 11.7l-.278.5a5.26 5.26 0 0 1 3.601 3.602l.502-.278ZM6.75 13.5A3.75 3.75 0 0 0 3 17.25a1.5 1.5 0 0 1-1.601 1.497.75.75 0 0 0-.7 1.123 5.25 5.25 0 0 0 9.8-2.62 3.75 3.75 0 0 0-3.75-3.75Z","clip-rule":"evenodd"})])}const q={components:{Icon:D,AppLayout:j,PaintBrushIcon:F,CopyToClipboard:Z,BookmarkSlashIcon:Y,LockClosedIcon:W},props:{linkedPlayers:Array,maxPlayerPerUser:Number,currentLinkOtp:Object,isUnlinkingDisabled:Boolean},setup(){const{formatTimeAgoToNow:e,formatToDayDateString:a}=V();return{formatTimeAgoToNow:e,formatToDayDateString:a}},data(){var e;return{skinViewers:[],otpExpiryCountdownInterval:null,otpExpiryCountdownSeconds:(e=this.currentLinkOtp)!=null&&e.expires_at?Math.floor((new Date(this.currentLinkOtp.expires_at).getTime()-new Date().getTime())/1e3):null}},computed:{linkSlotsLeft(){return this.maxPlayerPerUser-this.linkedPlayers.length}},unmounted(){for(const e of this.skinViewers)e.dispose();clearInterval(this.otpExpiryCountdownInterval)},mounted(){for(const e of this.linkedPlayers){let a=new M({canvas:document.getElementById(`skin_container_${e.uuid}`),width:200,height:300,skin:route("player.skin.get",{uuid:e.uuid,username:e.username,textureid:e.skin_texture_id})});a.autoRotate=!0,a.animation=new U,a.animation.speed=.1,a.autoRotateSpeed=.5,this.skinViewers.push(a)}this.startOtpExpiryCountdown()},methods:{startOtpExpiryCountdown(){this.otpExpiryCountdownSeconds>0&&(this.otpExpiryCountdownInterval=setInterval(()=>{this.otpExpiryCountdownSeconds--,this.otpExpiryCountdownSeconds<=0&&clearInterval(this.otpExpiryCountdownInterval)},1e3))}}},G={class:"max-w-6xl px-2 py-3 mx-auto space-y-4 md:py-12 md:px-10"},J={class:"flex"},K={class:"py-1"},Q={class:"w-full"},X={class:"font-bold"},$={key:0},ee={key:1},te={class:"flex flex-col items-center mt-2 text-sm"},oe={class:"text-secondary-500 dark:text-secondary-400"},se=["title","onClick"],ne={key:0},re={key:1},ae={key:0,class:"italic dark:text-secondary-400 mt-4"},ie={key:1},de={class:"dark:text-secondary-400 mt-4"},le={class:"text-xs font-bold mt-2 text-error-500 dark:text-error-400"},ce={key:0,class:"flex justify-center pt-5 pb-5 pr-10"},ue={class:"italic text-error-500"},_e={class:"flex justify-center pr-10"},pe=["id"],he={class:"flex flex-col space-y-2"},me={class:"username"},fe={class:"text-xs text-secondary-500 dark:text-secondary-400"},ye={class:"flex items-center justify-between"},ke={class:"font-bold dark:text-secondary-400"},xe={class:"flex items-center space-x-2 text-sm font-extrabold text-center text-primary-400"},ge={key:0,class:"px-2 text-lg border-2 rounded border-primary-300 bg-primary-50 dark:bg-surface-800"},we={key:1,class:"text-sm italic text-secondary-500 dark:text-secondary-400"},ve={class:"flex items-center justify-between"},be={class:"font-bold dark:text-secondary-400"},Ce={key:1,class:"text-sm italic text-secondary-500 dark:text-secondary-400"},Se={class:"flex items-center justify-between"},Pe={class:"font-bold dark:text-secondary-400"},Le={class:"flex items-center space-x-2"},Ie={key:0,class:"dark:text-secondary-200"},Te={key:1,class:"text-sm italic text-secondary-500 dark:text-secondary-400"},Ee=["src","alt","title"],Oe={class:"flex items-center justify-between"},Ae={class:"font-bold dark:text-secondary-400"},Be={class:"flex items-center space-x-2"},Ne={class:"dark:text-secondary-200"},je=["title","src","alt"],Ve={class:"flex items-center justify-between"},De={class:"font-bold dark:text-secondary-400"},Me={class:"flex items-center space-x-2"},Ue=["title"],Ze={class:"flex justify-end space-x-4"},Re={class:"hidden md:block mt-0.5 ml-1"},ze={class:"hidden md:block mt-0.5 ml-1"},He={class:"hidden md:block mt-0.5 ml-1"};function Ye(e,a,i,v,g,p){const L=l("app-head"),I=l("copy-to-clipboard"),h=l("inertia-link"),T=l("icon"),E=l("LockClosedIcon"),O=l("PaintBrushIcon"),A=l("BookmarkSlashIcon"),B=l("app-layout"),d=P("tippy"),N=P("confirm");return n(),f(B,null,{default:u(()=>{var b,C;return[_(L,{title:e.__("Your Linked Players")},null,8,["title"]),t("div",G,[t("div",{class:k(["px-4 py-3 mb-4 bg-white border-t-4 rounded-b shadow dark:bg-surface-800",{"border-primary-500 text-primary-900 dark:text-primary-400":p.linkSlotsLeft>0,"border-orange-500 opacity-35 text-orange-900 dark:text-orange-400":p.linkSlotsLeft<=0}]),role:"alert"},[t("div",J,[t("div",K,[(n(),r("svg",{class:k(["w-6 h-6 mr-4 fill-current text-primary-500",{"text-orange-500":p.linkSlotsLeft<=0}]),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},a[0]||(a[0]=[t("path",{d:"M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z"},null,-1)]),2))]),t("div",Q,[t("p",X,[p.linkSlotsLeft>0?(n(),r("span",$,s(e.__("You can link upto :count :player to your account! ( :left available )",{count:i.maxPlayerPerUser,player:i.maxPlayerPerUser===1?e.__("player"):e.__("players"),left:p.linkSlotsLeft})),1)):(n(),r("span",ee,s(e.__("You have already linked maximum number of players to your account!")),1))]),t("div",te,[t("p",oe,s(e.__("To link a player to your account, join server and type '/link :otp' in your chat.",{otp:(b=i.currentLinkOtp)==null?void 0:b.otp})),1),t("h1",{class:k([{"line-through":g.otpExpiryCountdownSeconds<=0},"font-mono text-6xl font-extrabold tracking-widest text-center text-black dark:text-white"])},s((C=i.currentLinkOtp)==null?void 0:C.otp),3),_(I,null,{default:u(o=>{var m;return[c((n(),r("button",{title:e.__("Click to Copy"),type:"button",class:"p-2 mt-3 font-semibold text-center font-mono tracking-wider text-secondary-600 transition duration-150 ease-in-out border border-secondary-200 rounded w-full md:w-1/2 dark:border-secondary-700 dark:text-secondary-300 hover:text-primary-500 dark:hover:text-primary-400 hover:bg-primary-50 dark:hover:bg-surface-900 hover:border-primary-500 dark:hover:border-secondary-800 focus:ring focus:ring-primary-200 focus:ring-opacity-50 focus:outline-none",onClick:w=>{var S;return o.copy("/link "+((S=i.currentLinkOtp)==null?void 0:S.otp))}},[o.status!=="copied"?(n(),r("span",ne,s("/link "+((m=i.currentLinkOtp)==null?void 0:m.otp)),1)):(n(),r("span",re,s(e.__("Copied!")),1))],8,se)),[[d]])]}),_:1}),g.otpExpiryCountdownSeconds>0?(n(),r("p",ae,s(e.__("This OTP will expire in :seconds seconds.",{seconds:g.otpExpiryCountdownSeconds})),1)):(n(),r("div",ie,[t("p",de,[x(s(e.__("This OTP has expired. Refresh the page to get a new OTP."))+" ",1),_(h,{as:"button",href:e.route("linked-player.list"),class:"dark:text-primary-400 dark:hover:text-primary-500 text-primary-500 hover:text-primary-700 hover:underline"},{default:u(()=>[x(s(e.__("Click here to refresh.")),1)]),_:1},8,["href"])])])),t("div",le,s(e.__("CAUTION: DO NOT SHARE THIS OTP WITH ANYONE!")),1)])])])],2),t("div",{class:k(["gap-4 space-y-2 md:grid md:space-y-0",i.linkedPlayers.length>1?"grid-cols-2":"grid-cols-1 place-items-center"])},[i.linkedPlayers.length<=0?(n(),r("div",ce,[t("p",ue,s(e.__("No players linked to your account right now.")),1)])):y("",!0),(n(!0),r(H,null,z(i.linkedPlayers,o=>{var m,w;return n(),r("div",{key:o.uuid,class:"flex flex-col p-4 items-center bg-white rounded shadow dark:bg-surface-800"},[t("div",_e,[t("canvas",{id:`skin_container_${o.uuid}`},null,8,pe),t("div",he,[t("div",me,[_(h,{as:"a",href:e.route("player.show",o.uuid),class:"text-lg font-bold text-primary-400 hover:text-primary-500"},{default:u(()=>[x(s(o.username),1)]),_:2},1032,["href"]),t("p",fe,s(o.uuid),1)]),t("div",ye,[t("p",ke,s(e.__("Position"))+": ",1),t("div",xe,[o.position?(n(),r("span",ge,s(o.position),1)):(n(),r("span",we,s(e.__("None")),1))])]),t("div",ve,[t("p",be,s(e.__("Rating"))+": ",1),o.rating!=null?c((n(),f(T,{key:0,class:"w-8 h-8 focus:outline-none",name:`rating-${o.rating}`,content:o.rating},null,8,["name","content"])),[[d]]):(n(),r("p",Ce,s(e.__("None")),1))]),t("div",Se,[t("p",Pe,s(e.__("Rank"))+": ",1),t("div",Le,[o.rank?(n(),r("p",Ie,s(o.rank.name),1)):(n(),r("p",Te,s(e.__("None")),1)),o.rank&&o.rank.photo_url?c((n(),r("img",{key:2,src:o.rank.photo_url,alt:o.rank.name,title:o.rank.name,class:"max-h-12 max-w-12 focus:outline-none"},null,8,Ee)),[[d]]):y("",!0)])]),t("div",Oe,[t("p",Ae,s(e.__("Country"))+": ",1),t("div",Be,[t("p",Ne,s(o.country.name),1),c(t("img",{title:o.country.name,src:o.country.photo_path,alt:o.country.name,class:"h-8 w-8 -mt-0.5 focus:outline-none"},null,8,je),[[d]])])]),t("div",Ve,[t("p",De,s(e.__("Last Seen"))+": ",1),t("div",Me,[c((n(),r("p",{class:"focus:outline-none dark:text-secondary-200",title:v.formatToDayDateString(o.last_seen_at)},[x(s(v.formatTimeAgoToNow(o.last_seen_at)),1)],8,Ue)),[[d]])])])])]),t("div",Ze,[(w=(m=e.$page.props)==null?void 0:m.pluginSettings)!=null&&w.playerPasswordResetEnabled?c((n(),f(h,{key:0,as:"a",href:e.route("reset-player-password.show",{player_uuid:o.uuid}),class:"inline-flex justify-center px-4 py-2 text-sm font-medium text-white border border-transparent rounded-md shadow-sm bg-surface-600 hover:bg-surface-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-secondary-600 disabled:opacity-50",title:e.__("Change Password of this player.")},{default:u(()=>[_(E,{class:"w-5 h-5"}),t("span",Re,s(e.__("Change Password")),1)]),_:2},1032,["href","title"])),[[d]]):y("",!0),e.$page.props.playerSkinChangerEnabled?c((n(),f(h,{key:1,as:"a",href:e.route("change-player-skin.show",{player_uuid:o.uuid}),class:"inline-flex justify-center px-4 py-2 text-sm font-medium text-white border border-transparent rounded-md shadow-sm bg-primary-400 hover:bg-primary-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-400 disabled:opacity-50",title:e.__("Change Skin of this player.")},{default:u(()=>[_(O,{class:"w-5 h-5"}),t("span",ze,s(e.__("Change Skin")),1)]),_:2},1032,["href","title"])),[[d]]):y("",!0),i.isUnlinkingDisabled?y("",!0):c((n(),f(h,{key:2,as:"button","preserve-scroll":!0,"preserve-state":!1,method:"delete",href:e.route("account-link.delete",o.uuid),class:"inline-flex justify-center px-4 py-2 text-sm font-medium text-white bg-error-600 border border-transparent rounded-md shadow-sm hover:bg-error-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-error-500 disabled:opacity-50",title:e.__("Unlink this player from your account.")},{default:u(()=>[_(A,{class:"w-5 h-5"}),t("span",He,s(e.__("Unlink Player")),1)]),_:2},1032,["href","title"])),[[d],[N,{message:e.__("Are you sure you want to unlink this player from your account?")}]])])])}),128))],2)])]}),_:1})}const Xe=R(q,[["render",Ye]]);export{Xe as default};
