import{_ as g}from"./InputError-vHKksLGQ.js";import{L as k}from"./LoadingButton-CCqBkqqR.js";import{X as V}from"./XInput-osMTEq4a.js";import{E as U}from"./easymde-B5GKkrm2.js";import{X as D}from"./XCheckbox-Ynps9OhP.js";import{k as E,s as a,c as L,w as p,o as d,b as n,a as o,t,m as q,p as M,v as j,d as m,e as _,f as A}from"./app-jpCRGzWE.js";import{_ as C}from"./AdminLayout-C3c7ijIe.js";import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./keyboard-BsWWh6cB.js";import"./open-closed-7-ABnrJt.js";import"./useAuthorizable-e--Skqmp.js";import"./CloudArrowDownIcon-Dg55l3VV.js";import"./index--8hIBfIm.js";import"./BaseLayout-sXkR-4Uw.js";import"./Icon-wreK45eH.js";const R={components:{AdminLayout:C,JetInputError:g,LoadingButton:k,XInput:V,XCheckbox:D},props:{download:Object},data(){return{form:E({name:this.download.name,description:this.download.description,file_name:this.download.file_name,is_external_url_hidden:this.download.is_external_url_hidden,is_only_auth:this.download.is_only_auth,min_role_weight_required:this.download.min_role_weight_required,is_active:this.download.is_active,_method:"PUT"}),easyMDE:null}},mounted(){this.easyMDE=new U({previewClass:"editor-preview prose max-w-none"})},methods:{updateDownload(){this.form.description=this.easyMDE.value(),this.form.post(route("admin.download.update",this.download.id),{})}}},B={class:"py-12 px-10 max-w-6xl mx-auto"},T={class:"flex justify-between mb-8"},I={class:"font-bold text-3xl text-secondary-500 dark:text-secondary-300"},X={class:"mt-10 sm:mt-0"},z={class:"md:grid md:grid-cols-3 md:gap-6"},F={class:"md:col-span-1"},O={class:"px-4 sm:px-0"},H={class:"text-lg font-medium leading-6 text-secondary-900 dark:text-secondary-400"},S={class:"mt-1 text-sm text-secondary-600 dark:text-secondary-500"},J={class:"mt-1 text-sm text-secondary-600 dark:text-secondary-500"},P={class:"mt-5 md:mt-0 md:col-span-2"},W={class:"shadow overflow-hidden sm:rounded-md"},Y={class:"px-4 py-5 bg-white dark:bg-surface-800 sm:p-6"},G={class:"grid grid-cols-6 gap-6"},K={class:"col-span-6 sm:col-span-6"},Q={class:"col-span-6 sm:col-span-6"},Z={class:"flex items-center col-span-6 sm:col-span-3"},$={key:0,class:"flex items-center col-span-6 sm:col-span-3"},ee={key:1,class:"col-span-6 sm:col-span-6"},oe={key:2,class:"col-span-6 sm:col-span-6"},re={key:3,class:"col-span-6 sm:col-span-6"},se={for:"file",class:"block text-sm font-medium text-secondary-700 dark:text-secondary-400"},le={class:"block p-2 w-full text-sm text-secondary-900 border border-secondary-300 cursor-default rounded-lg bg-surface-50 dark:text-secondary-400 focus:outline-none dark:bg-surface-700 dark:border-secondary-600 dark:placeholder-secondary-400"},ne={class:"flex items-center col-span-6 sm:col-span-3"},te={key:4,class:"col-span-6 sm:col-span-3"},ie={class:"flex items-center col-span-6 sm:col-span-6"},ae={class:"px-4 py-3 bg-surface-50 dark:bg-surface-800 sm:px-6 flex justify-end"};function de(r,s,i,me,e,f){const x=a("app-head"),y=a("inertia-link"),u=a("x-input"),h=a("jet-input-error"),c=a("x-checkbox"),b=a("loading-button"),v=a("AdminLayout");return d(),L(v,null,{default:p(()=>{var w;return[n(x,{title:`Edit Download #${i.download.id}`},null,8,["title"]),o("div",B,[o("div",T,[o("h1",I,t(r.__("Edit Download")),1),n(y,{href:r.route("admin.download.index"),class:"inline-flex items-center px-4 py-2 bg-surface-400 dark:bg-surface-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-surface-500 active:bg-surface-600 focus:outline-none focus:border-secondary-500 focus:shadow-outline-gray transition ease-in-out duration-150"},{default:p(()=>[o("span",null,t(r.__("Cancel")),1)]),_:1},8,["href"])]),o("div",X,[o("div",z,[o("div",F,[o("div",O,[o("h3",H,t(r.__("Overview")),1),o("p",S,t(r.__("Using downloads you can safely provide your users way to download anything like resource packs etc.")),1),o("p",J,t(r.__("You can restrict the download to a paricular role and even hide actual external download URL from end user by stream the file directly from within minetrax.")),1)])]),o("div",P,[o("form",{onSubmit:s[7]||(s[7]=q((...l)=>f.updateDownload&&f.updateDownload(...l),["prevent"]))},[o("div",W,[o("div",Y,[o("div",G,[o("div",K,[n(u,{id:"name",modelValue:e.form.name,"onUpdate:modelValue":s[0]||(s[0]=l=>e.form.name=l),label:r.__("Download Name/Title"),error:e.form.errors.name,type:"text",name:"name","help-error-flex":"flex-row"},null,8,["modelValue","label","error"])]),o("div",Q,[M(o("textarea",{id:"description","onUpdate:modelValue":s[1]||(s[1]=l=>e.form.description=l),"aria-label":"description",name:"description",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-secondary-300 rounded-md"},null,512),[[j,e.form.description]]),n(h,{message:e.form.errors.description,class:"mt-2"},null,8,["message"])]),o("div",Z,[n(c,{id:"is_external","model-value":i.download.is_external,disabled:!0,label:r.__("External URL"),help:r.__("If you want to link to an external file, check this."),error:e.form.errors.is_external},null,8,["model-value","label","help","error"])]),i.download.is_external?(d(),m("div",$,[n(c,{id:"is_external_url_hidden",modelValue:e.form.is_external_url_hidden,"onUpdate:modelValue":s[2]||(s[2]=l=>e.form.is_external_url_hidden=l),label:r.__("Hide External URL"),help:r.__("Hide the actual external URL from end users."),name:"is_external_url_hidden",error:e.form.errors.is_external_url_hidden},null,8,["modelValue","label","help","error"])])):_("",!0),i.download.is_external?(d(),m("div",ee,[n(u,{id:"file_url",disabled:!0,"model-value":i.download.file_url,label:r.__("File Download URL"),error:e.form.errors.file_url,help:r.__("Eg: http://s3.amazonaws.com/bucket/file.zip"),type:"text",name:"file_url","help-error-flex":"flex-row"},null,8,["model-value","label","error","help"])])):_("",!0),i.download.is_external?(d(),m("div",oe,[n(u,{id:"file_name",modelValue:e.form.file_name,"onUpdate:modelValue":s[3]||(s[3]=l=>e.form.file_name=l),label:r.__("File Name (with extension)"),error:e.form.errors.file_name,help:r.__("Eg: file.zip"),type:"text",name:"file_name","help-error-flex":"flex-row"},null,8,["modelValue","label","error","help"])])):_("",!0),e.form.is_external?_("",!0):(d(),m("div",re,[o("label",se,t(r.__("File")),1),o("span",le,t((w=i.download.file)==null?void 0:w.file_name),1),n(h,{message:e.form.errors.file,class:"mt-2"},null,8,["message"])])),o("div",ne,[n(c,{id:"is_only_auth",modelValue:e.form.is_only_auth,"onUpdate:modelValue":s[4]||(s[4]=l=>e.form.is_only_auth=l),label:r.__("Authenticated Users Only"),help:r.__("If only authenticated users should be able to view & download this file."),name:"is_only_auth",error:e.form.errors.is_only_auth},null,8,["modelValue","label","help","error"])]),e.form.is_only_auth?(d(),m("div",te,[n(u,{id:"min_role_weight_required",modelValue:e.form.min_role_weight_required,"onUpdate:modelValue":s[5]||(s[5]=l=>e.form.min_role_weight_required=l),label:r.__("Minimum Role Weight"),help:r.__("The minimum role weight required to download. Leave empty to allow all authenticated users."),error:e.form.errors.min_role_weight_required,type:"number",name:"min_role_weight_required","help-error-flex":"flex-row"},null,8,["modelValue","label","help","error"])])):_("",!0),o("div",ie,[n(c,{id:"is_active",modelValue:e.form.is_active,"onUpdate:modelValue":s[6]||(s[6]=l=>e.form.is_active=l),label:r.__("Active"),help:r.__("Active downloads are visible to end users."),name:"is_active",error:e.form.errors.is_active},null,8,["modelValue","label","help","error"])])])]),o("div",ae,[n(b,{loading:e.form.processing,class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primary-500 hover:bg-primary-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50",type:"submit"},{default:p(()=>[A(t(r.__("Update Download")),1)]),_:1},8,["loading"])])])],32)])])])])]}),_:1})}const De=N(R,[["render",de]]);export{De as default};
