import{_ as D}from"./AdminLayout-CxVM27ib.js";import{u as A}from"./useAuthorizable-Cf1MTXSt.js";import{u as J}from"./AppLayout-D09sHPWy.js";import{s as y,z as k,c as l,w as a,q as I,o as n,b as i,u as e,a as o,t as r,f as d,e as p,p as m,d as N}from"./app-B6MSbjiR.js";import{_ as T}from"./DataTable-hnP3yKY2.js";import{D as b}from"./DtRowItem-Cfc6QIWY.js";import{r as C}from"./ArrowPathIcon-CfePkx4F.js";import{r as E}from"./TrashIcon-C6bDJBBA.js";import"./keyboard-D8XalHIH.js";import"./open-closed-LifvgtoZ.js";import"./CloudArrowDownIcon-CMU1uDwp.js";import"./index-DwFICxA8.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Icon-DyYhHgsS.js";import"./vue-multiselect.esm-Dtutmjl3.js";import"./XMarkIcon-o8SeIREM.js";import"./hidden-BChwjN3c.js";const B={class:"px-10 py-8 mx-auto text-secondary-400"},F={class:"flex justify-between mb-4"},R={class:"text-3xl font-bold text-secondary-500 dark:text-secondary-300"},V={class:"flex"},L={class:"px-4 py-4 text-sm font-medium text-secondary-800 whitespace-nowrap dark:text-secondary-200"},$={class:"px-4 whitespace-nowrap"},q={class:"text-sm font-medium text-secondary-900 dark:text-secondary-300"},z={class:"text-sm text-secondary-500 dark:text-secondary-400"},O=["title"],S=["title"],U={class:"px-6 py-4 space-x-2 text-sm font-medium text-right whitespace-nowrap"},le={__name:"IndexFailedJob",props:{jobs:Object,filters:Object},setup(h){const{can:c}=A(),{__:t}=I(),{formatTimeAgoToNow:w,formatToDayDateString:g}=J(),v=[{key:"id",label:t("ID"),sortable:!0},{key:"uuid",label:t("UUID"),sortable:!0},{key:"job",sortable:!1,label:t("Job")},{key:"connection",sortable:!0,label:t("Connection/Queue")},{key:"exception",label:t("Exception"),sortable:!0},{key:"failed_at",sortable:!0,label:t("Failed At")},{key:"actions",label:t("Actions"),sortable:!1,class:"w-1/12 text-right"}];return(u,H)=>{const j=y("app-head"),f=y("InertiaLink"),x=k("confirm"),_=k("tippy");return n(),l(D,null,{default:a(()=>[i(j,{title:e(t)("Failed Jobs")},null,8,["title"]),o("div",B,[o("div",F,[o("h1",R,r(e(t)("Failed Jobs")),1),o("div",V,[e(c)("retry failed_jobs")?(n(),l(f,{key:0,href:u.route("admin.failed-job.retry"),method:"post",class:"mr-2 inline-flex items-center px-4 py-2 text-xs font-semibold tracking-widest text-white uppercase transition duration-150 ease-in-out bg-success-500 border border-transparent rounded-md hover:bg-success-700 active:bg-success-900 focus:outline-none focus:border-success-900 focus:shadow-outline-gray"},{default:a(()=>[d(r(e(t)("Retry All Jobs")),1)]),_:1},8,["href"])):p("",!0),e(c)("delete failed_jobs")?m((n(),l(f,{key:1,method:"delete",as:"button",href:u.route("admin.failed-job.clear"),class:"inline-flex items-center px-4 py-2 bg-error-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-error-700 active:bg-error-900 focus:outline-none focus:border-error-900 focus:shadow-outline-red transition ease-in-out duration-150"},{default:a(()=>[d(r(e(t)("Clear All Jobs")),1)]),_:1},8,["href"])),[[x,{message:"Are you sure you want to delete all failed jobs?"}]]):p("",!0)])]),i(T,{class:"bg-white rounded shadow dark:bg-surface-800",header:v,data:h.jobs,filters:h.filters},{default:a(({item:s})=>[o("td",L,r(s.id),1),i(b,{class:"text-left"},{default:a(()=>[d(r(s.uuid),1)]),_:2},1024),o("td",$,[o("div",null,[o("div",q,r(s.payload.displayName),1),o("div",z,r(e(t)("Attempts: :attempts",{attempts:s.payload.attempts})),1)])]),i(b,{class:"text-left"},{default:a(()=>[d(r(s.connection+"/"+s.queue),1)]),_:2},1024),i(b,{class:"text-left"},{default:a(()=>[o("span",{class:"truncate",title:s.exception},r(s.exception.substring(0,30)+"..."),9,O)]),_:2},1024),i(b,null,{default:a(()=>[m((n(),N("span",{title:e(g)(s.failed_at)},[d(r(e(w)(s.failed_at)),1)],8,S)),[[_]])]),_:2},1024),o("td",U,[e(c)("retry failed_jobs")?m((n(),l(f,{key:0,as:"button",method:"post",data:{uuid:s.uuid},href:u.route("admin.failed-job.retry"),class:"inline-flex items-center justify-center text-success-600 dark:text-success-500 hover:text-success-800 dark:hover:text-success-800",title:e(t)("Retry Job")},{default:a(()=>[i(e(C),{class:"inline-block w-5 h-5"})]),_:2},1032,["data","href","title"])),[[_]]):p("",!0),e(c)("delete failed_jobs")?m((n(),l(f,{key:1,as:"button",method:"DELETE",data:{uuid:s.uuid},href:u.route("admin.failed-job.clear"),class:"inline-flex items-center justify-center text-error-600 hover:text-error-900 focus:outline-none",title:e(t)("Delete Job")},{default:a(()=>[i(e(E),{class:"inline-block w-5 h-5"})]),_:2},1032,["data","href","title"])),[[x,{message:"Are you sure you want to delete this Job permanently?"}],[_]]):p("",!0)])]),_:1},8,["data","filters"])])]),_:1})}}};export{le as default};
