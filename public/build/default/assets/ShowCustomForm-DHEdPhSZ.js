import{A as S}from"./AppLayout-D09sHPWy.js";import{S as B}from"./ServerStatusBox-6MQUIOTd.js";import{S as T}from"./ShoutBox-Bgd5_jY3.js";import{i as _,s as f,c as y,w as n,o as u,b as r,a as t,t as m,u as d,f as v,e as b,d as g,L as C,q as O,k as z,T as J}from"./app-B6MSbjiR.js";import{u as K}from"./useFormKit-DsPcY36i.js";import{_ as L}from"./AlertCard-Byhaxell.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Icon-DyYhHgsS.js";import"./useAuthorizable-Cf1MTXSt.js";import"./CopyToClipboard-o78WAkIw.js";import"./XMarkIcon-o8SeIREM.js";const N={class:"py-4 px-2 md:py-12 md:px-10 max-w-7xl mx-auto"},P={class:"flex justify-between md:mb-4"},V={class:"text-center font-bold text-2xl text-secondary-900 dark:text-secondary-200 mb-5"},Y={class:""},A={class:"flex flex-col md:flex-row md:space-x-4"},E={class:"overflow-x-auto md:w-9/12"},H={class:"min-w-full"},M={class:"shadow max-w-none bg-white dark:bg-surface-800 px-3 py-2 md:px-10 md:py-5 overflow-hidden rounded"},j=["innerHTML"],D={key:1,class:"text-xs text-secondary-500 dark:text-secondary-400 text-right"},I={class:"md:w-3/12 flex-1 space-y-4 mt-4 md:mt-0"},oe={__name:"ShowCustomForm",props:{customForm:{type:Object},currentUserCanSubmit:{type:Boolean}},setup(o){const{__:e}=O(),s=o,F=K().generateSchemaFromFieldsArray(s.customForm.fields),k=async a=>{await w(a)},w=a=>new Promise((p,l)=>{z({...a}).post(route("custom-form.submit",s.customForm.slug),{onSuccess:i=>{p(i)},onError:i=>{l(i)}})}),c=_(()=>s.customForm.status.value!=="active"||!s.currentUserCanSubmit),h=_(()=>c.value?s.customForm.status.value==="disabled"?{title:e("Oh Jeez! This form is currently disabled."),body:e("It seems the form is no longer accepting submissions. Please check back later.")}:s.customForm.status.value!=="active"?{title:e("Oh Jeez! This form is not active."),body:e("It seems the form is not active yet. Please check back later.")}:["auth","staff"].includes(s.customForm.can_create_submission)&&!J().props.auth.user?{title:e("Oh Jeez! You need to be logged in to submit this form."),body:e("Please login and try again.")}:{title:e("Oh Jeez! You have already submitted this form."),body:e("You have already submitted this form maximum number of times allowed.")}:{title:null,body:null});return(a,p)=>{const l=f("app-head"),x=f("inertia-link"),i=f("FormKit");return u(),y(S,null,{default:n(()=>[r(l,{title:o.customForm.title},null,8,["title"]),t("div",N,[t("div",P,[t("h1",V,m(o.customForm.title),1),t("div",Y,[r(x,{href:a.route("home"),class:"inline-flex items-center px-4 py-2 bg-surface-400 dark:bg-surface-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-surface-500 active:bg-surface-600 focus:outline-none focus:border-secondary-500 focus:shadow-outline-gray transition ease-in-out duration-150"},{default:n(()=>[t("span",null,m(d(e)("Homepage")),1)]),_:1},8,["href"])])]),t("div",A,[t("div",E,[c.value?(u(),y(L,{key:0,"text-color":"text-orange-800 dark:text-orange-500","border-color":"border-orange-500"},{body:n(()=>[v(m(h.value.body),1)]),default:n(()=>[v(m(h.value.title)+" ",1)]),_:1})):b("",!0),t("div",H,[t("div",M,[o.customForm.description?(u(),g("div",{key:0,class:"prose dark:prose-invert max-w-none mb-6 pb-6 border-b dark:border-secondary-700",innerHTML:o.customForm.description_html},null,8,j)):b("",!0),r(i,{disabled:c.value,type:"form",onSubmit:k},{default:n(()=>[r(d(C),{schema:d(F)},null,8,["schema"])]),_:1},8,["disabled"]),!c.value&&o.customForm.max_submission_per_user?(u(),g("p",D,m(d(e)("You can submit this form only :count times.",{count:o.customForm.max_submission_per_user})),1)):b("",!0)])])]),t("div",I,[r(B),r(T)])])])]),_:1})}}};export{oe as default};
