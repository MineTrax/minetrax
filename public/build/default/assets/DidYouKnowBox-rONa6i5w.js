import{_ as p}from"./index-oDi_KVMO.js";import{_ as I}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{y as C,o as r,d as a,a as s,t as n,i as h,F as m,l as _,n as w,g as d,c as D,w as y,h as g,p as E,A as b,S as M,b as B,j as k}from"./app-Do9q-MyE.js";import{q as z}from"./index-DlYoUYeQ.js";import{_ as N}from"./Card-L72ilMm5.js";import{_ as A}from"./CardContent-CXvCEuPJ.js";const S={components:{Button:p},props:{enabled:Boolean,server:String,invite:String|null},data(){return{colorMode:window.colorMode,loading:!1,error:null,discordData:null,refreshInterval:null}},computed:{voiceChannels(){var i;return(i=this.discordData)!=null&&i.channels?this.discordData.channels.filter(e=>e.name.includes("ðŸŽ™")||e.name.includes("voice")||e.name.includes("vc")).sort((e,l)=>e.position-l.position):[]},onlineMembers(){var i;return(i=this.discordData)!=null&&i.members?this.discordData.members.filter(e=>e.status==="online"&&!e.channel_id):[]},idleMembers(){var i;return(i=this.discordData)!=null&&i.members?this.discordData.members.filter(e=>e.status==="idle"&&!e.channel_id):[]},dndMembers(){var i;return(i=this.discordData)!=null&&i.members?this.discordData.members.filter(e=>e.status==="dnd"&&!e.channel_id):[]}},mounted(){this.enabled&&this.server&&(this.fetchDiscordData(),this.refreshInterval=setInterval(()=>{this.fetchDiscordData(!0)},3e4))},beforeUnmount(){this.refreshInterval&&clearInterval(this.refreshInterval)},methods:{async fetchDiscordData(i=!1){i||(this.loading=!0,this.error=null);try{const e=await fetch(`https://discord.com/api/guilds/${this.server}/widget.json`);if(!e.ok)throw e.status===404?new Error("Discord server not found or widget not enabled"):e.status===403?new Error("Discord server widget is disabled"):new Error(`Discord API error: ${e.status} ${e.statusText}`);const l=await e.json();if(!l||typeof l!="object")throw new Error("Invalid response from Discord API");this.discordData=l,this.error=null}catch(e){console.error("Error fetching Discord data:",e),e.name==="TypeError"&&e.message.includes("fetch")?this.error="Network error: Unable to connect to Discord":e.name==="SyntaxError"?this.error="Invalid response from Discord API":this.error=e.message||"Failed to load Discord server",this.discordData=null}finally{this.loading=!1}},getMembersInChannel(i){var e;return(e=this.discordData)!=null&&e.members?this.discordData.members.filter(l=>l.channel_id===i):[]},handleImageError(i){i.target.style.display="none"}}},U={key:0,class:"discord-widget w-full rounded-xl border bg-card text-card-foreground shadow"},V={key:0,class:"discord-widget-loading"},L={class:"loading-text"},j={key:1,class:"discord-widget-error"},T={class:"error-text"},O={key:2,class:"discord-widget-content"},F={class:"discord-header"},H={class:"server-info"},P={class:"server-details"},q=["href"],K={class:"server-name"},R={key:1,class:"server-name"},Y={class:"member-count"},J={key:0,class:"channels-section"},Z={class:"section-title"},G={class:"channels-list"},Q={class:"channel-content"},W={class:"channel-name"},X={key:0,class:"voice-members"},$={class:"member-avatar small"},ee=["src","alt"],se={key:1,class:"avatar-placeholder small"},te={class:"voice-member-name"},re={key:0,class:"more-channels"},ae={class:"members-container"},ie={key:0,class:"members-section"},ne={class:"section-title online"},oe={class:"members-list"},le={class:"member-avatar"},de=["src","alt"],ce={key:1,class:"avatar-placeholder"},ue={class:"member-info"},he={class:"member-name"},ve={key:0,class:"member-activity"},me={key:0,class:"more-members"},_e={key:1,class:"members-section"},fe={class:"section-title idle"},ge={class:"members-list"},ye={class:"member-avatar"},be=["src","alt"],ke={key:1,class:"avatar-placeholder"},we={class:"member-info"},De={class:"member-name"},xe={key:0,class:"member-activity"},pe={key:0,class:"more-members"},Ie={key:2,class:"members-section"},Ce={class:"section-title dnd"},Ee={class:"members-list"},Me={class:"member-avatar"},Be=["src","alt"],ze={key:1,class:"avatar-placeholder"},Ne={class:"member-info"},Ae={class:"member-name"},Se={key:0,class:"member-activity"},Ue={key:0,class:"more-members"},Ve={class:"join-section"};function Le(i,e,l,v,u,o){const f=C("Button");return l.enabled&&l.server?(r(),a("div",U,[u.loading?(r(),a("div",V,[e[5]||(e[5]=s("div",{class:"loading-spinner"},null,-1)),s("p",L,n(i.__("Loading Discord server...")),1)])):u.error?(r(),a("div",j,[e[6]||(e[6]=s("div",{class:"error-icon"},"âš ï¸",-1)),s("p",T,n(u.error),1),s("button",{onClick:e[0]||(e[0]=(...t)=>o.fetchDiscordData&&o.fetchDiscordData(...t)),class:"retry-button"},n(i.__("Retry")),1)])):u.discordData?(r(),a("div",O,[s("div",F,[s("div",H,[e[7]||(e[7]=s("div",{class:"server-icon"},[s("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor"},[s("path",{d:"M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419-.0190 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.9555 2.4189-2.1568 2.4189Z"})])],-1)),s("div",P,[l.invite||u.discordData.instant_invite?(r(),a("a",{key:0,href:l.invite||u.discordData.instant_invite,target:"_blank",rel:"noopener noreferrer",class:"server-name-link"},[s("h3",K,n(u.discordData.name),1)],8,q)):(r(),a("h3",R,n(u.discordData.name),1)),s("p",Y,n(i.__(":count members online",{count:u.discordData.presence_count})),1)])])]),o.voiceChannels.length>0?(r(),a("div",J,[s("h4",Z,[e[8]||(e[8]=s("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor"},[s("path",{d:"M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"}),s("path",{d:"M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"})],-1)),h(" "+n(i.__("VOICE CHANNELS"))+" â€” "+n(o.voiceChannels.length),1)]),s("div",G,[(r(!0),a(m,null,_(o.voiceChannels.slice(0,4),t=>(r(),a("div",{key:t.id,class:"channel-item"},[e[9]||(e[9]=s("div",{class:"channel-indicator"},null,-1)),s("div",Q,[s("div",W,n(t.name),1),o.getMembersInChannel(t.id).length>0?(r(),a("div",X,[(r(!0),a(m,null,_(o.getMembersInChannel(t.id),c=>(r(),a("div",{key:c.id,class:"voice-member"},[s("div",$,[c.avatar_url?(r(),a("img",{key:0,src:c.avatar_url,alt:c.username,loading:"lazy",onError:e[1]||(e[1]=(...x)=>o.handleImageError&&o.handleImageError(...x))},null,40,ee)):(r(),a("div",se,n(c.username.charAt(0).toUpperCase()),1)),s("div",{class:w(["status-indicator","small",c.status])},null,2)]),s("span",te,n(c.username),1)]))),128))])):d("",!0)])]))),128)),o.voiceChannels.length>4?(r(),a("div",re,n(i.__("+:count more channels",{count:o.voiceChannels.length-4})),1)):d("",!0)])])):d("",!0),s("div",ae,[o.onlineMembers.length>0?(r(),a("div",ie,[s("h4",ne,[e[10]||(e[10]=s("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor"},[s("circle",{cx:"12",cy:"12",r:"10"})],-1)),h(" "+n(i.__("ONLINE")),1)]),s("div",oe,[(r(!0),a(m,null,_(o.onlineMembers.slice(0,8),t=>(r(),a("div",{key:t.id,class:"member-item"},[s("div",le,[t.avatar_url?(r(),a("img",{key:0,src:t.avatar_url,alt:t.username,loading:"lazy",onError:e[2]||(e[2]=(...c)=>o.handleImageError&&o.handleImageError(...c))},null,40,de)):(r(),a("div",ce,n(t.username.charAt(0).toUpperCase()),1)),e[11]||(e[11]=s("div",{class:"status-indicator online"},null,-1))]),s("div",ue,[s("div",he,n(t.username),1),t.game?(r(),a("div",ve,[e[12]||(e[12]=s("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"currentColor"},[s("circle",{cx:"12",cy:"12",r:"3"})],-1)),h(" "+n(t.game.name),1)])):d("",!0)])]))),128))]),o.onlineMembers.length>8?(r(),a("div",me,n(i.__("and more...")),1)):d("",!0)])):d("",!0),o.idleMembers.length>0?(r(),a("div",_e,[s("h4",fe,[e[13]||(e[13]=s("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor"},[s("circle",{cx:"12",cy:"12",r:"10"}),s("path",{d:"M12 6v6l4 2"})],-1)),h(" "+n(i.__("IDLE")),1)]),s("div",ge,[(r(!0),a(m,null,_(o.idleMembers.slice(0,6),t=>(r(),a("div",{key:t.id,class:"member-item"},[s("div",ye,[t.avatar_url?(r(),a("img",{key:0,src:t.avatar_url,alt:t.username,loading:"lazy",onError:e[3]||(e[3]=(...c)=>o.handleImageError&&o.handleImageError(...c))},null,40,be)):(r(),a("div",ke,n(t.username.charAt(0).toUpperCase()),1)),e[14]||(e[14]=s("div",{class:"status-indicator idle"},null,-1))]),s("div",we,[s("div",De,n(t.username),1),t.game?(r(),a("div",xe,[e[15]||(e[15]=s("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"currentColor"},[s("circle",{cx:"12",cy:"12",r:"3"})],-1)),h(" "+n(t.game.name),1)])):d("",!0)])]))),128))]),o.idleMembers.length>6?(r(),a("div",pe,n(i.__("and more...")),1)):d("",!0)])):d("",!0),o.dndMembers.length>0?(r(),a("div",Ie,[s("h4",Ce,[e[16]||(e[16]=s("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor"},[s("circle",{cx:"12",cy:"12",r:"10"}),s("path",{d:"M15 9H9v6h6z"})],-1)),h(" "+n(i.__("DO NOT DISTURB")),1)]),s("div",Ee,[(r(!0),a(m,null,_(o.dndMembers.slice(0,6),t=>(r(),a("div",{key:t.id,class:"member-item"},[s("div",Me,[t.avatar_url?(r(),a("img",{key:0,src:t.avatar_url,alt:t.username,loading:"lazy",onError:e[4]||(e[4]=(...c)=>o.handleImageError&&o.handleImageError(...c))},null,40,Be)):(r(),a("div",ze,n(t.username.charAt(0).toUpperCase()),1)),e[17]||(e[17]=s("div",{class:"status-indicator dnd"},null,-1))]),s("div",Ne,[s("div",Ae,n(t.username),1),t.game?(r(),a("div",Se,[e[18]||(e[18]=s("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"currentColor"},[s("circle",{cx:"12",cy:"12",r:"3"})],-1)),h(" "+n(t.game.name),1)])):d("",!0)])]))),128))]),o.dndMembers.length>6?(r(),a("div",Ue,n(i.__("and more...")),1)):d("",!0)])):d("",!0)]),s("div",Ve,[l.invite||u.discordData.instant_invite?(r(),D(f,{key:0,as:"a",href:l.invite||u.discordData.instant_invite,target:"_blank",rel:"noopener noreferrer",variant:"outline",size:"lg",class:"w-full"},{default:y(()=>[h(n(i.__("Join Discord"))+" ",1),e[19]||(e[19]=s("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor"},[s("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"})],-1))]),_:1},8,["href"])):d("",!0)])])):d("",!0)])):d("",!0)}const Je=I(S,[["render",Le],["__scopeId","data-v-68650210"]]),je={class:"font-extrabold text-foreground dark:text-foreground"},Te={key:0,class:"mt-4 space-y-4"},Oe={key:1,class:"flex flex-col mt-4 space-y-2"},Fe=["src"],Ze={__name:"DidYouKnowBox",props:{enabled:{type:Boolean,required:!0}},setup(i){const e=g(null),l=g(null),v=g(!0),u=g(null),o=z(u);let f=null;return E(()=>{b.get(route("didyouknow.get")).then(t=>{e.value=t.data.text,l.value=t.data.image}).finally(()=>{v.value=!1}),f=setInterval(()=>{o.value&&(v.value=!0,b.get(route("didyouknow.get")).then(t=>{e.value=t.data.text,l.value=t.data.image}).finally(()=>{v.value=!1}))},3e4)}),M(()=>{clearInterval(f)}),(t,c)=>i.enabled?(r(),D(k(N),{key:0,ref_key:"box",ref:u},{default:y(()=>[B(k(A),{class:"p-3 sm:px-5"},{default:y(()=>[s("h3",je,n(t.__("Did You Know?")),1),v.value?(r(),a("div",Te,c[0]||(c[0]=[s("div",{class:"w-full max-w-sm mx-auto"},[s("div",{class:"flex space-x-4 animate-pulse"},[s("div",{class:"w-8 h-8 bg-surface-300 rounded dark:bg-surface-700"}),s("div",{class:"flex-1 py-1 space-y-1"},[s("div",{class:"w-3/4 h-4 bg-surface-300 rounded dark:bg-surface-700"}),s("div",{class:"w-5/6 h-4 bg-surface-300 rounded dark:bg-surface-700"})])])],-1)]))):d("",!0),v.value?d("",!0):(r(),a("div",Oe,[l.value?(r(),a("img",{key:0,class:"w-full rounded",src:l.value,alt:"Image"},null,8,Fe)):d("",!0),s("div",{class:w(["text-sm text-foreground dark:text-foreground",{"font-semibold text-center":l.value}])},n(e.value),3)]))]),_:1})]),_:1},512)):d("",!0)}};export{Je as D,Ze as _};
