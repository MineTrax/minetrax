import{r as S,i as T,H as B,s as L,z as j,c,w as a,q as E,o,b as l,u as t,_ as O,a as r,t as i,J as $,f as _,y as z,p as m,e as w,d as g,W as U,L as F}from"./app-kSkIihla.js";import{u as H}from"./AppLayout-d-I9SvxN.js";import{_ as M}from"./AdminLayout-BWgdlXcH.js";import{_ as W}from"./DataTable-DHc5K6NX.js";import{D as p}from"./DtRowItem-CA5bF9Um.js";import{u as X}from"./useAuthorizable-BQqf7wpa.js";import{X as J}from"./XSelect-CVLl--4U.js";import{_ as G}from"./CommonStatusBadge-Jy9vfo8l.js";import{_ as C}from"./UserDisplayname-DFwdEz8T.js";import{I as k}from"./Icon-CcRkSBTv.js";import{r as K}from"./EyeIcon-C0eLo3r0.js";import{r as P}from"./TrashIcon-BzatiTWa.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./keyboard-CVw2ZNfl.js";import"./open-closed-5Dj2TMlO.js";import"./CloudArrowDownIcon-Cf_hiFfm.js";import"./index-D_KNLYhE.js";import"./vue-multiselect.esm-C5unvQeQ.js";import"./XMarkIcon-CctKu-mh.js";import"./hidden-B-mm076j.js";const Q={class:"p-4 mx-auto space-y-4 px-10"},Y={class:"flex items-center justify-between"},Z={class:"text-xl font-extrabold text-gray-800 dark:text-gray-200"},ee={class:"text-sm px-4 font-medium text-left text-gray-800 whitespace-nowrap dark:text-gray-200"},te={class:"px-4"},se={class:"flex-shrink-0 h-10 w-10 mr-2"},ae=["src"],re={class:"flex-col"},le={class:"text-sm text-gray-500"},oe=["title"],ie={class:"text-xs text-gray-400 dark:text-gray-500"},ne={key:1,class:"text-gray-400 text-sm italic"},ce={class:"text-xs text-gray-400 dark:text-gray-500"},ue={key:1,class:"text-gray-400 text-sm italic"},de={class:"px-6 py-4 space-x-2 text-sm font-medium text-right whitespace-nowrap"},Ne={__name:"IndexRecruitmentSubmission",props:{forms:{type:Object},filters:{type:Object},submissions:{type:Object},closed:{type:Boolean,default:!1}},setup(u){var A,D,R;const{can:V}=X(),{__:s}=E(),{formatTimeAgoToNow:x,formatToDayDateString:v}=H(),f=u,q=[{key:"id",label:s("ID"),sortable:!0,class:"text-left w-[5%]",filterable:{key:"id",type:"text"}},{key:"user_id",sortable:!0,label:s("Applicant"),class:"w-3/12",filterable:{key:"user.name",type:"text"}},{key:"recruitment_id",label:s("Application"),sortable:!0},{key:"status",label:s("Status"),sortable:!0,filterable:{type:"multiselect",options:["pending","inprogress","approved","rejected","withdrawn","onhold"]}},{key:"last_act_at",sortable:!0,label:s("Last Actor"),class:"text-right",filterable:{key:"lastActor.name",type:"text"}},{key:"last_comment_at",sortable:!0,label:s("Last Comment"),class:"text-right",filterable:{key:"lastCommentor.name",type:"text"}},{key:"created_at",label:s("Created At"),class:"text-right w-1/12 whitespace-nowrap",sortable:!0},{key:"updated_at",label:s("Updated At"),class:"text-right w-1/12 whitespace-nowrap",sortable:!0},{key:"actions",label:s("Actions"),sortable:!1,class:"w-1/12 text-right"}];let h=S((D=(A=f.filters)==null?void 0:A.forms)!=null&&D.length?(R=f.filters)==null?void 0:R.forms[0]:null);const I=T(()=>f.filters.forms&&f.filters.forms.length>0?f.filters.forms.map(n=>f.forms[n]).join(", "):null);return B(h,n=>{const y={forms:n?[n]:null};U.get(route(route().current()),F.pickBy(y))}),(n,y)=>{const b=L("InertiaLink"),d=j("tippy"),N=j("confirm");return o(),c(M,null,{default:a(()=>[l(O,{title:u.closed?t(s)("Closed Request - Applications"):t(s)("Open Requests - Applications")},null,8,["title"]),r("div",Q,[r("div",Y,[r("h3",Z,i(u.closed?t(s)("Closed Requests:"):t(s)("Open Requests:"))+" "+i(I.value??t(s)("All Applications")),1),l(J,{id:"selectForms",modelValue:t(h),"onUpdate:modelValue":y[0]||(y[0]=e=>$(h)?h.value=e:h=e),name:"selectForms","select-list":u.forms,placeholder:t(s)("All Applications"),class:"w-48 max-w-48 dark:border dark:rounded dark:border-gray-700"},null,8,["modelValue","select-list","placeholder"])]),r("div",null,[l(W,{class:"bg-white rounded shadow dark:bg-gray-800",header:q,data:u.submissions,filters:u.filters},{default:a(({item:e})=>[r("td",ee,[l(b,{as:"a",href:n.route("admin.recruitment-submission.show",e.id),class:"hover:text-sky-500"},{default:a(()=>[_(i(e.id),1)]),_:2},1032,["href"])]),r("td",te,[l(b,{href:n.route("admin.recruitment-submission.show",e.id),class:"flex items-center"},{default:a(()=>[r("div",se,[r("img",{class:"h-10 w-10 rounded-full",src:e.user.profile_photo_url,alt:"Avatar"},null,8,ae)]),r("div",re,[r("div",{class:"text-sm font-semibold text-gray-900 dark:text-gray-300 whitespace-nowrap truncate",style:z([e.user.roles[0].color?{color:e.user.roles[0].color}:null])},[_(i(e.user.name)+" ",1),e.user.verified_at?m((o(),c(k,{key:0,name:"verified-check-fill",title:t(s)("Verified Account"),class:"inline mb-1 fill-current focus:outline-none text-light-blue-400 w-5 h-5"},null,8,["title"])),[[d]]):w("",!0),e.user.is_staff?m((o(),c(k,{key:1,name:"shield-check-fill",title:t(s)("Staff Member"),class:"inline mb-1 text-amber-400 fill-current focus:outline-none w-5 h-5"},null,8,["title"])),[[d]]):w("",!0),e.user.muted_at?m((o(),c(k,{key:2,name:"volume-off-fill",title:t(s)("Muted User"),class:"inline mb-1 text-red-500 fill-current focus:outline-none w-5 h-5"},null,8,["title"])),[[d]]):w("",!0)],4),r("div",le," @"+i(e.user.username),1)])]),_:2},1032,["href"])]),l(p,null,{default:a(()=>[m((o(),g("p",{title:e.recruitment.title,class:"truncate w-32"},[_(i(e.recruitment.title),1)],8,oe)),[[d]])]),_:2},1024),l(p,null,{default:a(()=>[l(G,{status:e.status.value},null,8,["status"])]),_:2},1024),l(p,{class:"text-right whitespace-nowrap"},{default:a(()=>[e.last_actor?(o(),c(C,{key:0,"text-class":"text-sm text-gray-700 dark:text-gray-400",user:e.last_actor,"show-badges":!0},{default:a(()=>[r("div",ie,i(t(x)(e.last_act_at)),1)]),_:2},1032,["user"])):(o(),g("span",ne,i(t(s)("None")),1))]),_:2},1024),l(p,{class:"text-right whitespace-nowrap"},{default:a(()=>[e.last_commentor?(o(),c(C,{key:0,"text-class":"text-sm text-gray-700 dark:text-gray-400",user:e.last_commentor,"show-badges":!0},{default:a(()=>[r("div",ce,i(t(x)(e.last_comment_at)),1)]),_:2},1032,["user"])):(o(),g("span",ue,i(t(s)("None")),1))]),_:2},1024),m((o(),c(p,{class:"text-right whitespace-nowrap",content:t(v)(e.created_at)},{default:a(()=>[_(i(t(x)(e.created_at)),1)]),_:2},1032,["content"])),[[d]]),m((o(),c(p,{class:"text-right whitespace-nowrap",content:t(v)(e.updated_at)},{default:a(()=>[_(i(t(x)(e.updated_at)),1)]),_:2},1032,["content"])),[[d]]),r("td",de,[l(b,{as:"a",href:n.route("admin.recruitment-submission.show",e.id),class:"inline-flex items-center justify-center text-blue-500 hover:text-blue-800"},{default:a(()=>[l(t(K),{class:"inline-block w-5 h-5"})]),_:2},1032,["href"]),t(V)("delete recruitment_submissions")&&u.closed?m((o(),c(b,{key:0,as:"button",method:"DELETE",href:n.route("admin.recruitment-submission.delete",e.id),class:"inline-flex items-center justify-center text-red-600 hover:text-red-900 focus:outline-none",title:t(s)("Delete Submission")},{default:a(()=>[l(t(P),{class:"inline-block w-5 h-5"})]),_:2},1032,["href","title"])),[[N,{message:"Delete this Request? This action cannot be undone."}],[d]]):w("",!0)])]),_:1},8,["data","filters"])])])]),_:1})}}};export{Ne as default};
