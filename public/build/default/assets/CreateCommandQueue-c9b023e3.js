import{A as ie,r as R,i as v,B,C as D,j as G,D as W,u as r,E as z,G as S,H as de,I as M,F as ue,T as pe,s as ce,o as O,c as me,w as E,b as x,a as n,t as g,l as fe,f as C,n as $,d as A,e as N,q as ye}from"./app-309ec2d0.js";import{_ as ve}from"./AdminLayout-87783a14.js";import{L as ge}from"./LoadingButton-d82e2a30.js";import{X as be}from"./XInput-9a426272.js";import{X as he}from"./XSelect-f50a52e1.js";import{X as xe}from"./XCheckbox-233bbca8.js";import{s as Y}from"./vue-multiselect.esm-6c961ab3.js";import{i as _e}from"./index.es-789dacdf.js";import{_ as ke}from"./InputError-3d323756.js";import{t as I,H as F,o as j,K as we,T as Se,a as V}from"./use-resolve-button-type-e56b64b8.js";import{m as L,O as Re,f as Ee,a as Ve,P as H,N as T,T as K}from"./hidden-b3acf244.js";import"./AppLayout-2122863e.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./Icon-612a869f.js";import"./useAuthorizable-a07adc3e.js";import"./open-closed-b66a7380.js";import"./CloudArrowDownIcon-81b94048.js";import"./index-126c5c53.js";function Oe({container:e,accept:a,walk:o,enabled:t}){ie(()=>{let s=e.value;if(!s||t!==void 0&&!t.value)return;let u=L(e);if(!u)return;let d=Object.assign(p=>a(p),{acceptNode:a}),y=u.createTreeWalker(s,NodeFilter.SHOW_ELEMENT,d,!1);for(;y.nextNode();)o(y.currentNode)})}function J(e={},a=null,o=[]){for(let[t,s]of Object.entries(e))Z(o,Q(a,t),s);return o}function Q(e,a){return e?e+"["+a+"]":a}function Z(e,a,o){if(Array.isArray(o))for(let[t,s]of o.entries())Z(e,Q(a,t.toString()),s);else o instanceof Date?e.push([a,o.toISOString()]):typeof o=="boolean"?e.push([a,o?"1":"0"]):typeof o=="string"?e.push([a,o]):typeof o=="number"?e.push([a,`${o}`]):o==null?e.push([a,""]):J(o,a,e)}function Ce(e){var a,o;let t=(a=e==null?void 0:e.form)!=null?a:e.closest("form");if(t){for(let s of t.elements)if(s!==e&&(s.tagName==="INPUT"&&s.type==="submit"||s.tagName==="BUTTON"&&s.type==="submit"||s.nodeName==="INPUT"&&s.type==="image")){s.click();return}(o=t.requestSubmit)==null||o.call(t)}}function $e(e,a,o){let t=R(o==null?void 0:o.value),s=v(()=>e.value!==void 0);return[v(()=>s.value?e.value:t.value),function(u){return s.value||(t.value=u),a==null?void 0:a(u)}]}let Ae=Symbol("DescriptionContext");function ee({slot:e=R({}),name:a="Description",props:o={}}={}){let t=R([]);function s(u){return t.value.push(u),()=>{let d=t.value.indexOf(u);d!==-1&&t.value.splice(d,1)}}return B(Ae,{register:s,slot:e,name:a,props:o}),v(()=>t.value.length>0?t.value.join(" "):void 0)}let te=Symbol("LabelContext");function ae(){let e=z(te,null);if(e===null){let a=new Error("You used a <Label /> component, but it is not inside a parent.");throw Error.captureStackTrace&&Error.captureStackTrace(a,ae),a}return e}function re({slot:e={},name:a="Label",props:o={}}={}){let t=R([]);function s(u){return t.value.push(u),()=>{let d=t.value.indexOf(u);d!==-1&&t.value.splice(d,1)}}return B(te,{register:s,slot:e,name:a,props:o}),v(()=>t.value.length>0?t.value.join(" "):void 0)}let Ne=D({name:"Label",props:{as:{type:[Object,String],default:"label"},passive:{type:[Boolean],default:!1},id:{type:String,default:()=>`headlessui-label-${I()}`}},setup(e,{slots:a,attrs:o}){let t=ae();return G(()=>W(t.register(e.id))),()=>{let{name:s="Label",slot:u={},props:d={}}=t,{id:y,passive:p,...b}=e,i={...Object.entries(d).reduce((_,[k,w])=>Object.assign(_,{[k]:r(w)}),{}),id:y};return p&&(delete i.onClick,delete i.htmlFor,delete b.onClick),F({ourProps:i,theirProps:b,slot:u,attrs:o,slots:a,name:s})}}});function Te(e,a){return e===a}let le=Symbol("RadioGroupContext");function oe(e){let a=z(le,null);if(a===null){let o=new Error(`<${e} /> is missing a parent <RadioGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(o,oe),o}return a}let Le=D({name:"RadioGroup",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"div"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>Te},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},id:{type:String,default:()=>`headlessui-radiogroup-${I()}`}},inheritAttrs:!1,setup(e,{emit:a,attrs:o,slots:t,expose:s}){let u=R(null),d=R([]),y=re({name:"RadioGroupLabel"}),p=ee({name:"RadioGroupDescription"});s({el:u,$el:u});let[b,i]=$e(v(()=>e.modelValue),l=>a("update:modelValue",l),v(()=>e.defaultValue)),_={options:d,value:b,disabled:v(()=>e.disabled),firstOption:v(()=>d.value.find(l=>!l.propsRef.disabled)),containsCheckedOption:v(()=>d.value.some(l=>_.compare(S(l.propsRef.value),S(e.modelValue)))),compare(l,m){if(typeof e.by=="string"){let c=e.by;return(l==null?void 0:l[c])===(m==null?void 0:m[c])}return e.by(l,m)},change(l){var m;if(e.disabled||_.compare(S(b.value),S(l)))return!1;let c=(m=d.value.find(h=>_.compare(S(h.propsRef.value),S(l))))==null?void 0:m.propsRef;return c!=null&&c.disabled?!1:(i(l),!0)},registerOption(l){d.value.push(l),d.value=Re(d.value,m=>m.element)},unregisterOption(l){let m=d.value.findIndex(c=>c.id===l);m!==-1&&d.value.splice(m,1)}};B(le,_),Oe({container:v(()=>j(u)),accept(l){return l.getAttribute("role")==="radio"?NodeFilter.FILTER_REJECT:l.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(l){l.setAttribute("role","none")}});function k(l){if(!u.value||!u.value.contains(l.target))return;let m=d.value.filter(c=>c.propsRef.disabled===!1).map(c=>c.element);switch(l.key){case V.Enter:Ce(l.currentTarget);break;case V.ArrowLeft:case V.ArrowUp:if(l.preventDefault(),l.stopPropagation(),H(m,T.Previous|T.WrapAround)===K.Success){let c=d.value.find(h=>{var f;return h.element===((f=L(u))==null?void 0:f.activeElement)});c&&_.change(c.propsRef.value)}break;case V.ArrowRight:case V.ArrowDown:if(l.preventDefault(),l.stopPropagation(),H(m,T.Next|T.WrapAround)===K.Success){let c=d.value.find(h=>{var f;return h.element===((f=L(h.element))==null?void 0:f.activeElement)});c&&_.change(c.propsRef.value)}break;case V.Space:{l.preventDefault(),l.stopPropagation();let c=d.value.find(h=>{var f;return h.element===((f=L(h.element))==null?void 0:f.activeElement)});c&&_.change(c.propsRef.value)}break}}let w=v(()=>{var l;return(l=j(u))==null?void 0:l.closest("form")});return G(()=>{de([w],()=>{if(!w.value||e.defaultValue===void 0)return;function l(){_.change(e.defaultValue)}return w.value.addEventListener("reset",l),()=>{var m;(m=w.value)==null||m.removeEventListener("reset",l)}},{immediate:!0})}),()=>{let{disabled:l,name:m,id:c,form:h,...f}=e,q={ref:u,id:c,role:"radiogroup","aria-labelledby":y.value,"aria-describedby":p.value,onKeydown:k};return M(ue,[...m!=null&&b.value!=null?J({[m]:b.value}).map(([P,U])=>M(Ee,we({features:Ve.Hidden,key:P,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:h,name:P,value:U}))):[],F({ourProps:q,theirProps:{...o,...Se(f,["modelValue","defaultValue","by"])},slot:{},attrs:o,slots:t,name:"RadioGroup"})])}}});var je=(e=>(e[e.Empty=1]="Empty",e[e.Active=2]="Active",e))(je||{});let X=D({name:"RadioGroupOption",props:{as:{type:[Object,String],default:"div"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1},id:{type:String,default:()=>`headlessui-radiogroup-option-${I()}`}},setup(e,{attrs:a,slots:o,expose:t}){let s=oe("RadioGroupOption"),u=re({name:"RadioGroupLabel"}),d=ee({name:"RadioGroupDescription"}),y=R(null),p=v(()=>({value:e.value,disabled:e.disabled})),b=R(1);t({el:y,$el:y});let i=v(()=>j(y));G(()=>s.registerOption({id:e.id,element:i,propsRef:p})),W(()=>s.unregisterOption(e.id));let _=v(()=>{var f;return((f=s.firstOption.value)==null?void 0:f.id)===e.id}),k=v(()=>s.disabled.value||e.disabled),w=v(()=>s.compare(S(s.value.value),S(e.value))),l=v(()=>k.value?-1:w.value||!s.containsCheckedOption.value&&_.value?0:-1);function m(){var f;s.change(e.value)&&(b.value|=2,(f=j(y))==null||f.focus())}function c(){b.value|=2}function h(){b.value&=-3}return()=>{let{id:f,value:q,disabled:P,...U}=e,se={checked:w.value,disabled:k.value,active:!!(b.value&2)},ne={id:f,ref:y,role:"radio","aria-checked":w.value?"true":"false","aria-labelledby":u.value,"aria-describedby":d.value,"aria-disabled":k.value?!0:void 0,tabIndex:l.value,onClick:k.value?void 0:m,onFocus:k.value?void 0:c,onBlur:k.value?void 0:h};return F({ourProps:ne,theirProps:U,slot:se,attrs:a,slots:o,name:"RadioGroupOption"})}}}),Pe=Ne;const Ue={class:"max-w-6xl px-10 py-12 mx-auto"},Be={class:"flex justify-between mb-8"},De={class:"text-3xl font-bold text-gray-500 dark:text-gray-300"},Ge={class:"mt-10 sm:mt-0"},Ie={class:"mt-5 md:mt-0 md:col-span-2"},Fe=["onSubmit"],qe={class:"shadow sm:rounded-md"},Me={class:"px-4 py-5 bg-white dark:bg-cool-gray-800 sm:p-6"},Ye={class:"grid grid-cols-6 gap-6"},He={class:"col-span-6 sm:col-span-6"},Ke={class:"flex items-center justify-center"},Xe=["checked"],We={class:"ms-2"},ze={class:"flex items-center justify-center"},Je=["checked"],Qe={class:"ms-2"},Ze={class:"col-span-6 sm:col-span-6"},et={class:"mb-2 text-gray-700 dark:text-gray-300 font-semibold"},tt={class:"text-sm text-red-500 mt-0.5"},at={class:"col-span-6 sm:col-span-6"},rt={key:0,class:"flex flex-col items-end mb-2"},lt={class:"text-gray-700 dark:text-gray-300 text-sm font-semibold"},ot={class:"text-sm text-right text-gray-600 dark:text-gray-400"},st=n("code",{class:"text-sm bg-gray-100 dark:bg-cool-gray-700 dark:text-gray-300 p-1 rounded-md"},"{PLAYER_USERNAME}",-1),nt=n("code",{class:"text-sm bg-gray-100 dark:bg-cool-gray-700 dark:text-gray-300 p-1 rounded-md"},"{PLAYER_UUID}",-1),it={class:"col-span-6 sm:col-span-6 relative"},dt={for:"execute_at",class:"absolute -top-2.5 left-0 px-3 py-5 text-xs text-gray-500 h-full pointer-events-none transform origin-left transition-all duration-100 ease-in-out"},ut={key:0,class:"col-span-6 sm:col-span-6"},pt={key:1,class:"col-span-6 sm:col-span-6"},ct={class:"mb-2 text-gray-700 dark:text-gray-300 font-semibold"},mt={class:"text-sm text-red-500 mt-0.5"},ft={key:2,class:"col-span-6 sm:col-span-6"},yt={class:"flex justify-end px-4 py-3 bg-gray-50 dark:bg-cool-gray-800 sm:px-6"},Lt={__name:"CreateCommandQueue",props:{servers:{type:Array},players:{type:Array}},setup(e){const{__:a}=ye(),o={all:"All - for every player in the web",linked:"Linked Only - for every player who are linked to a user account",unlinked:"Unlinked Only - for every player who are not linked to a user account",custom:"Custom - select players from dropdown"},t=pe({scope:"global",command:"",execute_at:null,servers:[],players:{scope:"all",is_player_online_required:!1,id:[]}});function s({name:y,hostname:p}){return`${y} - ${p}`}function u({username:y,uuid:p}){return`${y} - ${p}`}const d=()=>{t.post(route("admin.command-queue.store"),{preserveScroll:!0,onSuccess:()=>{t.reset("command","servers","players","execute_at")}})};return(y,p)=>{const b=ce("app-head");return O(),me(ve,null,{default:E(()=>[x(b,{title:"Run Command"}),n("div",Ue,[n("div",Be,[n("h1",De,g(r(a)("Run Command")),1)]),n("div",Ge,[n("div",Ie,[n("form",{onSubmit:fe(d,["prevent"])},[n("div",qe,[n("div",Me,[n("div",Ye,[n("div",He,[x(r(Le),{modelValue:r(t).scope,"onUpdate:modelValue":p[0]||(p[0]=i=>r(t).scope=i),class:"flex justify-between gap-2"},{default:E(()=>[x(r(Pe),{class:"flex items-center flex-none w-1/12 font-semibold text-gray-700 dark:text-gray-300"},{default:E(()=>[C(g(r(a)("Scope")),1)]),_:1}),x(r(X),{class:"flex-1 text-sm text-center uppercase",value:"global"},{default:E(({checked:i})=>[n("div",{class:$(["p-3 rounded shadow-sm cursor-pointer",i?"dark:bg-gray-900 dark:text-gray-200 font-bold bg-sky-400 text-white":"dark:bg-gray-600 dark:text-gray-300 bg-gray-200 text-gray-700"])},[n("div",Ke,[n("input",{checked:i,type:"radio",disabled:"",class:"w-4 h-4 bg-gray-100 border-gray-300 text-sky-600 focus:ring-sky-500 dark:focus:ring-sky-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,8,Xe),n("label",We,g(r(a)("Global")),1)]),n("div",null,[n("span",{class:$([i?"text-gray-200 dark:text-gray-400":"text-gray-400","text-xs"])},g(r(a)("Run generic command")),3)])],2)]),_:1}),x(r(X),{class:"flex-1 text-sm text-center uppercase",value:"player"},{default:E(({checked:i})=>[n("div",{class:$(["p-3 rounded shadow-sm cursor-pointer",i?"dark:bg-gray-900 dark:text-gray-200 font-bold bg-sky-400 text-white":"dark:bg-gray-600 dark:text-gray-300 bg-gray-200 text-gray-700"])},[n("div",ze,[n("input",{checked:i,type:"radio",disabled:"",class:"w-4 h-4 bg-gray-100 border-gray-300 text-sky-600 focus:ring-sky-500 dark:focus:ring-sky-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,8,Je),n("label",Qe,g(r(a)("Player")),1)]),n("div",null,[n("span",{class:$([i?"text-gray-200 dark:text-gray-400":"text-gray-400","text-xs"])},g(r(a)("Run against players")),3)])],2)]),_:1})]),_:1},8,["modelValue"])]),n("div",Ze,[n("p",et,g(r(a)("Servers to run on")),1),x(r(Y),{modelValue:r(t).servers,"onUpdate:modelValue":p[1]||(p[1]=i=>r(t).servers=i),class:"block w-full border-gray-900 rounded-md shadow-sm focus:ring-light-blue-500 focus:border-light-blue-500 sm:text-sm",options:e.servers,"custom-label":s,"track-by":"id",multiple:!0,"close-on-select":!1,"clear-on-select":!1,searchable:!1,placeholder:r(a)("Leave empty to run on all servers")+"..."},null,8,["modelValue","options","placeholder"]),n("p",tt,g(r(t).errors.servers),1)]),n("div",at,[r(t).scope==="player"?(O(),A("div",rt,[n("h3",lt,g(r(a)("Available Placeholders")),1),n("ol",ot,[n("li",null,[st,C(" - "+g(r(a)("Username of the player.")),1)]),n("li",null,[nt,C(" - "+g(r(a)("Unique Id of the player.")),1)])])])):N("",!0),x(be,{id:"command",modelValue:r(t).command,"onUpdate:modelValue":p[2]||(p[2]=i=>r(t).command=i),label:r(a)("Enter command to run..."),error:r(t).errors.command,type:"text",name:"command",help:r(t).scope=="player"?r(a)("Eg: give {PLAYER_USERNAME} diamond 64"):r(a)("Eg: broadcast Hello world!"),"help-error-flex":"flex-row"},null,8,["modelValue","label","error","help"])]),n("div",it,[x(r(_e),{id:"execute_at",value:r(t).execute_at,"onUpdate:value":p[3]||(p[3]=i=>r(t).execute_at=i),placeholder:r(a)("Leave empty to run immediately without any delay")+"...",class:"w-full","value-type":"date",type:"datetime",format:"YYYY-MM-DD hh:mm:ss A","input-class":"border-gray-300 h-14 p-3 text-sm pt-7 focus:border-light-blue-300 focus:ring focus:ring-light-blue-200 focus:ring-opacity-50 rounded-md block w-full dark:bg-cool-gray-900 dark:text-gray-300 dark:border-gray-900"},null,8,["value","placeholder"]),n("label",dt,g(r(a)("Run at")),1),x(ke,{message:r(t).errors.execute_at,class:"mt-2"},null,8,["message"])]),r(t).scope==="player"?(O(),A("div",ut,[x(he,{id:"players.scope",modelValue:r(t).players.scope,"onUpdate:modelValue":p[4]||(p[4]=i=>r(t).players.scope=i),error:r(t).errors["players.scope"],name:"players.scope",label:r(a)("Players to run on"),"select-list":o},null,8,["modelValue","error","label"])])):N("",!0),r(t).players.scope==="custom"&&r(t).scope==="player"?(O(),A("div",pt,[n("p",ct,g(r(a)("Select players")),1),x(r(Y),{modelValue:r(t).players.id,"onUpdate:modelValue":p[5]||(p[5]=i=>r(t).players.id=i),class:"block w-full border-gray-900 rounded-md shadow-sm focus:ring-light-blue-500 focus:border-light-blue-500 sm:text-sm",options:e.players,"custom-label":u,"track-by":"id",multiple:!0,"close-on-select":!1,"clear-on-select":!1,searchable:!0,placeholder:r(a)("Select players to run command on")+"..."},null,8,["modelValue","options","placeholder"]),n("p",mt,g(r(t).errors["players.id"]),1)])):N("",!0),r(t).scope==="player"?(O(),A("div",ft,[x(xe,{id:"players.is_player_online_required",modelValue:r(t).players.is_player_online_required,"onUpdate:modelValue":p[6]||(p[6]=i=>r(t).players.is_player_online_required=i),label:r(a)("Require player to be online"),help:r(a)("This command should only run if player is online on running server. If not online it will be queued to run when player comes online."),name:"players.is_player_online_required",error:r(t).errors["players.is_player_online_required"]},null,8,["modelValue","label","help","error"])])):N("",!0)])]),n("div",yt,[x(ge,{loading:r(t).processing,class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-green-500 hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50",type:"submit"},{default:E(()=>[C(g(r(t).execute_at?r(a)("Schedule Command"):r(a)("Run Command")),1)]),_:1},8,["loading"])])])],40,Fe)])])])]),_:1})}}};export{Lt as default};
