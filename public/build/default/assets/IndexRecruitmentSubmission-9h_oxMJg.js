import{r as S,i as T,H as B,s as E,z as j,c,w as a,q as L,o as l,b as o,u as t,_ as O,a as r,t as n,K as $,f as _,y as z,p as m,e as w,d as k,W as M,M as U}from"./app-B6MSbjiR.js";import{u as F}from"./AppLayout-D09sHPWy.js";import{_ as H}from"./AdminLayout-CxVM27ib.js";import{_ as W}from"./DataTable-hnP3yKY2.js";import{D as p}from"./DtRowItem-Cfc6QIWY.js";import{u as X}from"./useAuthorizable-Cf1MTXSt.js";import{X as K}from"./XSelect-u_rqq2TM.js";import{_ as G}from"./CommonStatusBadge-Bs39Cfhf.js";import{_ as C}from"./UserDisplayname-DrgyYFYl.js";import{I as g}from"./Icon-DyYhHgsS.js";import{r as J}from"./EyeIcon-BI7y0NRc.js";import{r as P}from"./TrashIcon-C6bDJBBA.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./keyboard-D8XalHIH.js";import"./open-closed-LifvgtoZ.js";import"./CloudArrowDownIcon-CMU1uDwp.js";import"./index-DwFICxA8.js";import"./vue-multiselect.esm-Dtutmjl3.js";import"./XMarkIcon-o8SeIREM.js";import"./hidden-BChwjN3c.js";const Q={class:"p-4 mx-auto space-y-4 px-10"},Y={class:"flex items-center justify-between"},Z={class:"text-xl font-extrabold text-secondary-800 dark:text-secondary-200"},ee={class:"text-sm px-4 font-medium text-left text-secondary-800 whitespace-nowrap dark:text-secondary-200"},te={class:"px-4"},se={class:"flex-shrink-0 h-10 w-10 mr-2"},ae=["src"],re={class:"flex-col"},oe={class:"text-sm text-secondary-500"},le=["title"],ne={class:"text-xs text-secondary-400 dark:text-secondary-500"},ie={key:1,class:"text-secondary-400 text-sm italic"},ce={class:"text-xs text-secondary-400 dark:text-secondary-500"},de={key:1,class:"text-secondary-400 text-sm italic"},ue={class:"px-6 py-4 space-x-2 text-sm font-medium text-right whitespace-nowrap"},Ne={__name:"IndexRecruitmentSubmission",props:{forms:{type:Object},filters:{type:Object},submissions:{type:Object},closed:{type:Boolean,default:!1}},setup(d){var A,D,R;const{can:V}=X(),{__:s}=L(),{formatTimeAgoToNow:x,formatToDayDateString:v}=F(),f=d,q=[{key:"id",label:s("ID"),sortable:!0,class:"text-left w-[5%]",filterable:{key:"id",type:"text"}},{key:"user_id",sortable:!0,label:s("Applicant"),class:"w-3/12",filterable:{key:"user.name",type:"text"}},{key:"recruitment_id",label:s("Application"),sortable:!0},{key:"status",label:s("Status"),sortable:!0,filterable:{type:"multiselect",options:["pending","inprogress","approved","rejected","withdrawn","onhold"]}},{key:"last_act_at",sortable:!0,label:s("Last Actor"),class:"text-right",filterable:{key:"lastActor.name",type:"text"}},{key:"last_comment_at",sortable:!0,label:s("Last Comment"),class:"text-right",filterable:{key:"lastCommentor.name",type:"text"}},{key:"created_at",label:s("Created At"),class:"text-right w-1/12 whitespace-nowrap",sortable:!0},{key:"updated_at",label:s("Updated At"),class:"text-right w-1/12 whitespace-nowrap",sortable:!0},{key:"actions",label:s("Actions"),sortable:!1,class:"w-1/12 text-right"}];let h=S((D=(A=f.filters)==null?void 0:A.forms)!=null&&D.length?(R=f.filters)==null?void 0:R.forms[0]:null);const I=T(()=>f.filters.forms&&f.filters.forms.length>0?f.filters.forms.map(i=>f.forms[i]).join(", "):null);return B(h,i=>{const y={forms:i?[i]:null};M.get(route(route().current()),U.pickBy(y))}),(i,y)=>{const b=E("InertiaLink"),u=j("tippy"),N=j("confirm");return l(),c(H,null,{default:a(()=>[o(O,{title:d.closed?t(s)("Closed Request - Applications"):t(s)("Open Requests - Applications")},null,8,["title"]),r("div",Q,[r("div",Y,[r("h3",Z,n(d.closed?t(s)("Closed Requests:"):t(s)("Open Requests:"))+" "+n(I.value??t(s)("All Applications")),1),o(K,{id:"selectForms",modelValue:t(h),"onUpdate:modelValue":y[0]||(y[0]=e=>$(h)?h.value=e:h=e),name:"selectForms","select-list":d.forms,placeholder:t(s)("All Applications"),class:"w-48 max-w-48 dark:border dark:rounded dark:border-secondary-700"},null,8,["modelValue","select-list","placeholder"])]),r("div",null,[o(W,{class:"bg-white rounded shadow dark:bg-surface-800",header:q,data:d.submissions,filters:d.filters},{default:a(({item:e})=>[r("td",ee,[o(b,{as:"a",href:i.route("admin.recruitment-submission.show",e.id),class:"hover:text-primary-500"},{default:a(()=>[_(n(e.id),1)]),_:2},1032,["href"])]),r("td",te,[o(b,{href:i.route("admin.recruitment-submission.show",e.id),class:"flex items-center"},{default:a(()=>[r("div",se,[r("img",{class:"h-10 w-10 rounded-full",src:e.user.profile_photo_url,alt:"Avatar"},null,8,ae)]),r("div",re,[r("div",{class:"text-sm font-semibold text-secondary-900 dark:text-secondary-300 whitespace-nowrap truncate",style:z([e.user.roles[0].color?{color:e.user.roles[0].color}:null])},[_(n(e.user.name)+" ",1),e.user.verified_at?m((l(),c(g,{key:0,name:"verified-check-fill",title:t(s)("Verified Account"),class:"inline mb-1 fill-current focus:outline-none text-primary-400 w-5 h-5"},null,8,["title"])),[[u]]):w("",!0),e.user.is_staff?m((l(),c(g,{key:1,name:"shield-check-fill",title:t(s)("Staff Member"),class:"inline mb-1 text-amber-400 fill-current focus:outline-none w-5 h-5"},null,8,["title"])),[[u]]):w("",!0),e.user.muted_at?m((l(),c(g,{key:2,name:"volume-off-fill",title:t(s)("Muted User"),class:"inline mb-1 text-error-500 fill-current focus:outline-none w-5 h-5"},null,8,["title"])),[[u]]):w("",!0)],4),r("div",oe," @"+n(e.user.username),1)])]),_:2},1032,["href"])]),o(p,null,{default:a(()=>[m((l(),k("p",{title:e.recruitment.title,class:"truncate w-32"},[_(n(e.recruitment.title),1)],8,le)),[[u]])]),_:2},1024),o(p,null,{default:a(()=>[o(G,{status:e.status.value},null,8,["status"])]),_:2},1024),o(p,{class:"text-right whitespace-nowrap"},{default:a(()=>[e.last_actor?(l(),c(C,{key:0,"text-class":"text-sm text-secondary-700 dark:text-secondary-400",user:e.last_actor,"show-badges":!0},{default:a(()=>[r("div",ne,n(t(x)(e.last_act_at)),1)]),_:2},1032,["user"])):(l(),k("span",ie,n(t(s)("None")),1))]),_:2},1024),o(p,{class:"text-right whitespace-nowrap"},{default:a(()=>[e.last_commentor?(l(),c(C,{key:0,"text-class":"text-sm text-secondary-700 dark:text-secondary-400",user:e.last_commentor,"show-badges":!0},{default:a(()=>[r("div",ce,n(t(x)(e.last_comment_at)),1)]),_:2},1032,["user"])):(l(),k("span",de,n(t(s)("None")),1))]),_:2},1024),m((l(),c(p,{class:"text-right whitespace-nowrap",content:t(v)(e.created_at)},{default:a(()=>[_(n(t(x)(e.created_at)),1)]),_:2},1032,["content"])),[[u]]),m((l(),c(p,{class:"text-right whitespace-nowrap",content:t(v)(e.updated_at)},{default:a(()=>[_(n(t(x)(e.updated_at)),1)]),_:2},1032,["content"])),[[u]]),r("td",ue,[o(b,{as:"a",href:i.route("admin.recruitment-submission.show",e.id),class:"inline-flex items-center justify-center text-primary-500 hover:text-primary-800"},{default:a(()=>[o(t(J),{class:"inline-block w-5 h-5"})]),_:2},1032,["href"]),t(V)("delete recruitment_submissions")&&d.closed?m((l(),c(b,{key:0,as:"button",method:"DELETE",href:i.route("admin.recruitment-submission.delete",e.id),class:"inline-flex items-center justify-center text-error-600 hover:text-error-900 focus:outline-none",title:t(s)("Delete Submission")},{default:a(()=>[o(t(P),{class:"inline-block w-5 h-5"})]),_:2},1032,["href","title"])),[[N,{message:"Delete this Request? This action cannot be undone."}],[u]]):w("",!0)])]),_:1},8,["data","filters"])])])]),_:1})}}};export{Ne as default};
