import{o as i,d as w,a as t,h as B,k as C,e as x,y as H,z as U,c as p,w as l,b as n,j as e,t as d,g as f,K as A,i as h,f as D,v as Y,s as j,U as L}from"./app-D9GuHpcZ.js";import{s as M}from"./vue-multiselect.esm-BzlgdUyi.js";import{_ as g}from"./XInput-Cvs-Jhqz.js";import{_ as T}from"./AppLayout-DkSe-eud.js";import{L as q}from"./LoadingButton-_fqb0NWc.js";import{_ as b}from"./AlertCard-Z1pYpzqK.js";import{u as z}from"./BaseLayout-B3-iVEMv.js";import{_ as Z}from"./Card-oMkD0KjW.js";import{_ as E}from"./CardContent-C9CiR_8_.js";import{_ as F}from"./index-B5if8pRS.js";import{_ as G}from"./AppBreadcrumb-6YgoLuD3.js";import{r as I}from"./CheckCircleIcon-DiW8VsCO.js";import"./index-CybQGOSJ.js";import"./utils-D-KgF5mV.js";import"./Input-17rNUrUJ.js";import"./Label-hpeRY5vg.js";import"./Icon-DCyQcqwq.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./loader-circle-Bf0wsS0z.js";import"./XMarkIcon-CwP4vCZW.js";import"./useForwardPropsEmits-Ci0C5-5c.js";import"./chevron-down-BRQ4-0aA.js";import"./Teleport-Ck1GoC8n.js";import"./VisuallyHidden-bdJjphAo.js";import"./x-ChK5Vw_y.js";import"./useAuthorizable-jSLZg7XL.js";function K(_,s){return i(),w("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"fill-rule":"evenodd",d:"M4.755 10.059a7.5 7.5 0 0 1 12.548-3.364l1.903 1.903h-3.183a.75.75 0 1 0 0 1.5h4.992a.75.75 0 0 0 .75-.75V4.356a.75.75 0 0 0-1.5 0v3.18l-1.9-1.9A9 9 0 0 0 3.306 9.67a.75.75 0 1 0 1.45.388Zm15.408 3.352a.75.75 0 0 0-.919.53 7.5 7.5 0 0 1-12.548 3.364l-1.902-1.903h3.183a.75.75 0 0 0 0-1.5H2.984a.75.75 0 0 0-.75.75v4.992a.75.75 0 0 0 1.5 0v-3.18l1.9 1.9a9 9 0 0 0 15.059-4.035.75.75 0 0 0-.53-.918Z","clip-rule":"evenodd"})])}const J={class:"max-w-4xl px-2 py-3 mx-auto space-y-4 md:py-12 md:px-10"},O={class:"flex flex-col md:flex-row md:items-center md:justify-between gap-4"},Q={key:0,class:"text-lg md:text-2xl font-bold text-foreground"},W={key:1,class:"text-lg italic md:text-2xl font-bold text-foreground"},X={key:2,class:"text-sm text-muted-foreground mt-1"},ee={class:"text-xl"},se={class:"text-sm"},oe={class:"text-sm"},re={class:"space-y-4"},te={class:"relative"},ae={class:"flex flex-col gap-2"},le={key:0,class:"text-sm text-orange-600 dark:text-orange-400"},Ue={__name:"ResetPassword",props:{uuid:{type:String,required:!1},players:{type:Array,required:!0},cooldown:{type:Number},cannotPlayerPasswordReset:{type:Boolean}},setup(_){const{__:s}=j(),{generateRandomString:k,secondsToHMS:P}=z(),u=_;let o=B(u.players[0]);const v=u.players.find(m=>m.uuid===u.uuid);v&&(o.value=v);const r=C({player_uuid:null,new_password:null,new_password_confirmation:null,reason:null}),V=()=>{r.player_uuid=o.value.uuid,r.post(route("reset-player-password.update"),{onSuccess:()=>{r.reset()}})},y=x(()=>r.processing||!o.value||u.cannotPlayerPasswordReset||u.cooldown>0),R=x(()=>{var m,a;return((a=(m=L().props)==null?void 0:m.toast)==null?void 0:a.type)==="success"}),S=x(()=>[{text:s("Home"),url:route("home"),current:!1},{text:s("Reset Player Password"),current:!0}]);return(m,a)=>{const N=H("AppHead"),$=U("tippy");return i(),p(T,null,{default:l(()=>[n(N,{title:e(s)("Reset Player Password")},null,8,["title"]),n(G,{class:"max-w-4xl mx-auto",items:S.value},null,8,["items"]),t("div",J,[t("div",O,[t("div",null,[e(o)?(i(),w("h2",Q,d(e(s)("Reset password for :username",{username:e(o).username})),1)):(i(),w("h2",W,d(e(s)("No Linked Players")),1)),e(o)?(i(),w("p",X,d(e(s)("Player Uuid"))+": "+d(e(o).uuid),1)):f("",!0)]),n(e(M),{id:"username",modelValue:e(o),"onUpdate:modelValue":a[0]||(a[0]=c=>A(o)?o.value=c:o=c),class:"w-full md:w-1/3 rounded-md shadow-sm focus:ring-ring focus:border-input sm:text-sm",options:_.players,multiple:!1,placeholder:e(s)("Search")+"...",label:"username","allow-empty":!1,"deselect-label":e(s)("Can't remove"),"track-by":"id"},null,8,["modelValue","options","placeholder","deselect-label"])]),R.value?(i(),p(b,{key:0,"text-color":"text-success-800 dark:text-success-500","border-color":"border-success-500"},{icon:l(()=>[n(e(I),{class:"fill-current h-6 w-6 text-success-500 mr-4"})]),body:l(()=>[t("p",se,d(e(s)("Your player password has been changed successfully. You can now join the server with new password.")),1)]),default:l(()=>[t("h2",ee,d(e(s)("Password changed successfully!")),1)]),_:1})):f("",!0),e(o)?f("",!0):(i(),p(b,{key:1,"text-color":"text-error-800 dark:text-error-500","border-color":"border-error-500"},{default:l(()=>[h(d(e(s)("No linked players found. Please link a player to your account.")),1)]),_:1})),_.cannotPlayerPasswordReset?(i(),p(b,{key:2,"text-color":"text-error-800 dark:text-error-500","border-color":"border-error-500"},{body:l(()=>[t("p",oe,d(e(s)("Site administrator has explicitly disabled this feature for your role. Contact for more information.")),1)]),default:l(()=>[h(d(e(s)("Your are not allowed to reset your player passwords."))+" ",1)]),_:1})):f("",!0),n(e(Z),{class:"shadow-sm"},{default:l(()=>[n(e(E),{class:"p-6"},{default:l(()=>[t("form",{class:"space-y-6",onSubmit:D(V,["prevent"])},[t("div",re,[t("div",te,[n(g,{id:"new_password",modelValue:e(r).new_password,"onUpdate:modelValue":a[1]||(a[1]=c=>e(r).new_password=c),disabled:y.value,label:e(s)("New Password"),error:e(r).errors.new_password,type:"text",name:"new_password","help-error-flex":"flex-row",class:"pr-12"},null,8,["modelValue","disabled","label","error"]),Y((i(),p(e(F),{title:e(s)("Generate Secure Password"),disabled:y.value,type:"button",variant:"ghost",size:"sm",class:"absolute right-0 top-[1.85rem] h-9 w-9 p-0",onClick:a[2]||(a[2]=c=>e(r).new_password=e(k)(16))},{default:l(()=>[n(e(K),{class:"w-5 h-5"})]),_:1},8,["title","disabled"])),[[$]])]),t("div",null,[n(g,{id:"reason",modelValue:e(r).reason,"onUpdate:modelValue":a[3]||(a[3]=c=>e(r).reason=c),disabled:y.value,label:e(s)("Reason"),error:e(r).errors.reason,type:"text",name:"reason","help-error-flex":"flex-row",help:e(s)("Small reason why are you changing the password?")},null,8,["modelValue","disabled","label","error","help"])])]),t("div",ae,[n(q,{loading:e(r).processing,disabled:y.value,type:"submit"},{default:l(()=>[h(d(e(s)("Reset Player Password")),1)]),_:1},8,["loading","disabled"]),u.cooldown>0?(i(),w("p",le,d(e(s)("You are on a cooldown because you have recently changed your password. Refresh the page and try again after :cooldown.",{cooldown:e(P)(u.cooldown,!0)})),1)):f("",!0)])],32)]),_:1})]),_:1})])]),_:1})}}};export{Ue as default};
