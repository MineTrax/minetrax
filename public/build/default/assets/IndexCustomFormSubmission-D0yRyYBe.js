import{o as r,d as w,a as o,h as T,e as V,C as $,z as F,c as u,w as n,s as E,b as l,j as e,_ as I,B as N,t as d,v as f,g as _,P as x,G as O,i as y,W as R,E as P}from"./app-CKqa03ai.js";import{u as z}from"./BaseLayout-CbEnUUda.js";import{_ as H}from"./AdminLayout-DlC2W12Q.js";import{_ as L}from"./DataTable-DBKHLj0J.js";import{D as g}from"./DtRowItem-B9pg471C.js";import{_ as U}from"./AppBreadcrumb-xm79qTMp.js";import{u as W}from"./useAuthorizable-C3hyZrBu.js";import{_ as q}from"./XSelect-BZc1JjD3.js";import{r as G}from"./EyeIcon-_SL6YV-n.js";import{r as M}from"./TrashIcon-D5-A_1T9.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Icon-yp24RCPW.js";import"./useForwardPropsEmits-oMML2ssv.js";import"./chevron-down-C5aVEVJv.js";import"./Teleport-BzeA4ril.js";import"./index-C1xLcZ71.js";import"./utils-D-KgF5mV.js";import"./VisuallyHidden-B8DQXMOS.js";import"./x-BvgAlvXN.js";import"./CloudArrowDownIcon-Ba9dDFea.js";import"./SelectValue-D-GmGA0M.js";import"./useFormControl-BdLrMG8I.js";import"./vue-multiselect.esm-DY0nToq7.js";import"./XMarkIcon-DHdUA9mB.js";import"./Label-CSyFC4dL.js";function Z(i,h){return r(),w("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5m8.25 3v6.75m0 0-3-3m3 3 3-3M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z"})])}function J(i,h){return r(),w("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m9 9 6-6m0 0 6 6m-6-6v12a6 6 0 0 1-12 0v-3"})])}const K={class:"px-10 py-8 mx-auto space-y-4"},Q={class:"flex items-center justify-between"},X={class:"text-sm px-4 font-medium text-left text-foreground whitespace-nowrap dark:text-foreground"},Y={class:"px-4 py-4 text-sm font-medium text-foreground whitespace-nowrap dark:text-foreground"},ee={class:"flex items-center"},te=["content"],se=["src"],oe={class:"px-4"},re={class:"flex-shrink-0 h-10 w-10 mr-2"},ie=["src"],ae={class:"flex-col"},ne={class:"text-sm text-foreground"},le={key:1,class:"flex items-center italic text-sm text-foreground dark:text-foreground"},ce={class:"px-6 py-4 space-x-2 text-sm font-medium text-right whitespace-nowrap"},Ie={__name:"IndexCustomFormSubmission",props:{forms:{type:Object},filters:{type:Object},submissions:{type:Object},archived:{type:Boolean,default:!1}},setup(i){var A,j,D;const{can:h}=W(),{__:s}=E(),{formatTimeAgoToNow:k,formatToDayDateString:S}=z(),c=i,C=[{key:"id",label:s("ID"),sortable:!0,class:"text-left w-[5%]",filterable:{key:"id",type:"text"}},{key:"country_id",label:s("Country"),sortable:!0,class:"text-left w-1/12"},{key:"user_id",sortable:!0,label:s("User"),class:"w-3/12",filterable:{key:"user.name",type:"text"}},{key:"custom_form_id",label:s("Custom Form"),sortable:!0},{key:"created_at",label:s("Created At"),class:"text-right w-1/12 whitespace-nowrap",sortable:!0},{key:"actions",label:s("Actions"),sortable:!1,class:"w-1/12 text-right"}];c.archived&&C.splice(5,0,{key:"deleted_at",label:s("Archived At"),class:"text-right w-1/12 whitespace-nowrap",sortable:!0});let p=T((j=(A=c.filters)==null?void 0:A.forms)!=null&&j.length?(D=c.filters)==null?void 0:D.forms[0]:null);V(()=>c.filters.forms&&c.filters.forms.length>0?c.filters.forms.map(a=>c.forms[a]).join(", "):null),$(p,a=>{const b={forms:a?[a]:null};R.get(route(route().current()),P.pickBy(b))});const B=[{text:s("Admin"),current:!1},{text:s("Custom Forms"),url:route("admin.custom-form.index"),current:!1},{text:c.archived?s("Archived Submissions"):s("Submissions"),current:!0}];return(a,b)=>{const m=F("tippy"),v=F("confirm");return r(),u(H,null,{default:n(()=>[l(I,{title:i.archived?e(s)("Archived Custom Form Submissions"):e(s)("Custom Form Submissions")},null,8,["title"]),o("div",K,[o("div",Q,[l(U,{class:"mt-0","breadcrumb-class":"max-w-none px-0 md:px-0",items:B}),l(q,{id:"selectForms",modelValue:e(p),"onUpdate:modelValue":b[0]||(b[0]=t=>N(p)?p.value=t:p=t),name:"selectForms","select-list":i.forms,placeholder:e(s)("All Forms"),class:"w-48 max-w-48 border rounded bg-card"},null,8,["modelValue","select-list","placeholder"])]),o("div",null,[l(L,{class:"bg-card rounded-lg shadow",header:C,data:i.submissions,filters:i.filters},{default:n(({item:t})=>[o("td",X,d(t.id),1),o("td",Y,[o("div",ee,[t.country?f((r(),w("div",{key:0,class:"flex-shrink-0 h-10 w-10 focus:outline-none",content:t.country.name},[o("img",{class:"h-10 w-10",src:t.country.photo_path,alt:""},null,8,se)],8,te)),[[m]]):_("",!0)])]),o("td",oe,[t.user?(r(),u(e(x),{key:0,href:a.route("user.public.get",t.user.username),class:"flex items-center"},{default:n(()=>[o("div",re,[o("img",{class:"h-10 w-10 rounded-full",src:t.user.profile_photo_url,alt:"Avatar"},null,8,ie)]),o("div",ae,[o("div",{class:"text-sm font-semibold text-foreground dark:text-foreground whitespace-nowrap truncate",style:O([t.user.roles[0].color?{color:t.user.roles[0].color}:null])},d(t.user.name),5),o("div",ne," @"+d(t.user.username),1)])]),_:2},1032,["href"])):(r(),w("div",le,d(e(s)("Anonymous")),1))]),l(g,null,{default:n(()=>[y(d(t.custom_form.title),1)]),_:2},1024),f((r(),u(g,{class:"text-right whitespace-nowrap",content:e(S)(t.created_at)},{default:n(()=>[y(d(e(k)(t.created_at)),1)]),_:2},1032,["content"])),[[m]]),i.archived?f((r(),u(g,{key:0,class:"text-right whitespace-nowrap",content:e(S)(t.deleted_at)},{default:n(()=>[y(d(e(k)(t.deleted_at)),1)]),_:2},1032,["content"])),[[m]]):_("",!0),o("td",ce,[f((r(),u(e(x),{as:"a",href:a.route("admin.custom-form-submission.show",t.id),class:"inline-flex items-center justify-center text-primary hover:text-primary",title:e(s)("View Submission")},{default:n(()=>[l(e(G),{class:"inline-block w-5 h-5"})]),_:2},1032,["href","title"])),[[m]]),e(h)("archive custom_form_submissions")&&!i.archived?f((r(),u(e(x),{key:0,as:"button",method:"POST",href:a.route("admin.custom-form-submission.archive",t.id),class:"inline-flex items-center justify-center text-orange-500 hover:text-orange-900 focus:outline-none",title:e(s)("Archive Submission")},{default:n(()=>[l(e(Z),{class:"inline-block w-5 h-5"})]),_:2},1032,["href","title"])),[[v,{message:"Archive this Custom Form Submission? It will move to archive section."}],[m]]):_("",!0),e(h)("delete custom_form_submissions")&&i.archived?f((r(),u(e(x),{key:1,as:"button",method:"POST",href:a.route("admin.custom-form-submission.restore",t.id),class:"inline-flex items-center justify-center text-success-500 hover:text-success-900 focus:outline-none",title:e(s)("Restore Submission")},{default:n(()=>[l(e(J),{class:"inline-block w-5 h-5"})]),_:2},1032,["href","title"])),[[v,{message:"Restore this Custom Form Submission? It will move back to submissions list."}],[m]]):_("",!0),e(h)("delete custom_form_submissions")?f((r(),u(e(x),{key:2,as:"button",method:"DELETE",href:a.route("admin.custom-form-submission.delete",t.id),class:"inline-flex items-center justify-center text-error-600 hover:text-error-900 focus:outline-none",title:e(s)("Delete Submission")},{default:n(()=>[l(e(M),{class:"inline-block w-5 h-5"})]),_:2},1032,["href","title"])),[[v,{message:"Delete this Custom Form Submission? This action cannot be undone."}],[m]]):_("",!0)])]),_:1},8,["data","filters"])])])]),_:1})}}};export{Ie as default};
