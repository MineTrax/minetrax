import{h as T,e as $,C as q,z as R,c as i,w as r,s as E,o as a,b as o,j as t,_ as I,a as l,B as O,P as w,i as h,t as n,G as z,v as d,g as y,d as g,W as L,E as U}from"./app-CKqa03ai.js";import{u as F}from"./BaseLayout-CbEnUUda.js";import{_ as M}from"./AdminLayout-DlC2W12Q.js";import{_ as P}from"./DataTable-DBKHLj0J.js";import{D as p}from"./DtRowItem-B9pg471C.js";import{_ as W}from"./AppBreadcrumb-xm79qTMp.js";import{u as G}from"./useAuthorizable-C3hyZrBu.js";import{_ as H}from"./XSelect-BZc1JjD3.js";import{_ as J}from"./CommonStatusBadge-BXJQnLHj.js";import{_ as V}from"./UserDisplayname-yp7YpyW7.js";import{I as k}from"./Icon-yp24RCPW.js";import{r as K}from"./EyeIcon-_SL6YV-n.js";import{r as Q}from"./TrashIcon-D5-A_1T9.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useForwardPropsEmits-oMML2ssv.js";import"./chevron-down-C5aVEVJv.js";import"./Teleport-BzeA4ril.js";import"./index-C1xLcZ71.js";import"./utils-D-KgF5mV.js";import"./VisuallyHidden-B8DQXMOS.js";import"./x-BvgAlvXN.js";import"./CloudArrowDownIcon-Ba9dDFea.js";import"./SelectValue-D-GmGA0M.js";import"./useFormControl-BdLrMG8I.js";import"./vue-multiselect.esm-DY0nToq7.js";import"./XMarkIcon-DHdUA9mB.js";import"./Label-CSyFC4dL.js";const X={class:"px-10 py-8 mx-auto space-y-4"},Y={class:"flex items-center justify-between"},Z={class:"text-sm px-4 font-medium text-left text-foreground whitespace-nowrap dark:text-foreground"},ee={class:"px-4"},te={class:"flex-shrink-0 h-10 w-10 mr-2"},se=["src"],re={class:"flex-col"},ae={class:"text-sm text-foreground"},oe=["title"],le={class:"text-xs text-foreground dark:text-foreground"},ie={key:1,class:"text-foreground text-sm italic"},ne={class:"text-xs text-foreground dark:text-foreground"},ce={key:1,class:"text-foreground text-sm italic"},ue={class:"px-6 py-4 space-x-2 text-sm font-medium text-right whitespace-nowrap"},Oe={__name:"IndexRecruitmentSubmission",props:{forms:{type:Object},filters:{type:Object},submissions:{type:Object},closed:{type:Boolean,default:!1}},setup(f){var A,D,j;const{can:C}=G(),{__:s}=E(),{formatTimeAgoToNow:x,formatToDayDateString:v}=F(),m=f,B=[{key:"id",label:s("ID"),sortable:!0,class:"text-left w-[5%]",filterable:{key:"id",type:"text"}},{key:"user_id",sortable:!0,label:s("Applicant"),class:"w-3/12",filterable:{key:"user.name",type:"text"}},{key:"recruitment_id",label:s("Application"),sortable:!0},{key:"status",label:s("Status"),sortable:!0,filterable:{type:"multiselect",options:["pending","inprogress","approved","rejected","withdrawn","onhold"]}},{key:"last_act_at",sortable:!0,label:s("Last Actor"),class:"text-right",filterable:{key:"lastActor.name",type:"text"}},{key:"last_comment_at",sortable:!0,label:s("Last Comment"),class:"text-right",filterable:{key:"lastCommentor.name",type:"text"}},{key:"created_at",label:s("Created At"),class:"text-right w-1/12 whitespace-nowrap",sortable:!0},{key:"updated_at",label:s("Updated At"),class:"text-right w-1/12 whitespace-nowrap",sortable:!0},{key:"actions",label:s("Actions"),sortable:!1,class:"w-1/12 text-right"}];let _=T((D=(A=m.filters)==null?void 0:A.forms)!=null&&D.length?(j=m.filters)==null?void 0:j.forms[0]:null);$(()=>m.filters.forms&&m.filters.forms.length>0?m.filters.forms.map(c=>m.forms[c]).join(", "):null),q(_,c=>{const b={forms:c?[c]:null};L.get(route(route().current()),U.pickBy(b))});const N=[{text:s("Admin"),current:!1},{text:s("Applications"),current:!1},{text:m.closed?s("Closed Requests"):s("Open Requests"),current:!0}];return(c,b)=>{const u=R("tippy"),S=R("confirm");return a(),i(M,null,{default:r(()=>[o(I,{title:f.closed?t(s)("Closed Request - Applications"):t(s)("Open Requests - Applications")},null,8,["title"]),l("div",X,[l("div",Y,[o(W,{class:"mt-0","breadcrumb-class":"max-w-none px-0 md:px-0",items:N}),o(H,{id:"selectForms",modelValue:t(_),"onUpdate:modelValue":b[0]||(b[0]=e=>O(_)?_.value=e:_=e),name:"selectForms","select-list":f.forms,placeholder:t(s)("All Applications"),class:"w-48 max-w-48 border rounded bg-card"},null,8,["modelValue","select-list","placeholder"])]),l("div",null,[o(P,{class:"bg-card rounded-lg shadow",header:B,data:f.submissions,filters:f.filters},{default:r(({item:e})=>[l("td",Z,[o(t(w),{as:"a",href:c.route("admin.recruitment-submission.show",e.id),class:"hover:text-primary"},{default:r(()=>[h(n(e.id),1)]),_:2},1032,["href"])]),l("td",ee,[o(t(w),{href:c.route("admin.recruitment-submission.show",e.id),class:"flex items-center"},{default:r(()=>[l("div",te,[l("img",{class:"h-10 w-10 rounded-full",src:e.user.profile_photo_url,alt:"Avatar"},null,8,se)]),l("div",re,[l("div",{class:"text-sm font-semibold text-foreground dark:text-foreground whitespace-nowrap truncate",style:z([e.user.roles[0].color?{color:e.user.roles[0].color}:null])},[h(n(e.user.name)+" ",1),e.user.verified_at?d((a(),i(k,{key:0,name:"verified-check-fill",title:t(s)("Verified Account"),class:"inline mb-1 fill-current focus:outline-none text-primary w-5 h-5"},null,8,["title"])),[[u]]):y("",!0),e.user.is_staff?d((a(),i(k,{key:1,name:"shield-check-fill",title:t(s)("Staff Member"),class:"inline mb-1 text-amber-400 fill-current focus:outline-none w-5 h-5"},null,8,["title"])),[[u]]):y("",!0),e.user.muted_at?d((a(),i(k,{key:2,name:"volume-off-fill",title:t(s)("Muted User"),class:"inline mb-1 text-error-500 fill-current focus:outline-none w-5 h-5"},null,8,["title"])),[[u]]):y("",!0)],4),l("div",ae," @"+n(e.user.username),1)])]),_:2},1032,["href"])]),o(p,null,{default:r(()=>[d((a(),g("p",{title:e.recruitment.title,class:"truncate w-32"},[h(n(e.recruitment.title),1)],8,oe)),[[u]])]),_:2},1024),o(p,null,{default:r(()=>[o(J,{status:e.status.value},null,8,["status"])]),_:2},1024),o(p,{class:"text-right whitespace-nowrap"},{default:r(()=>[e.last_actor?(a(),i(V,{key:0,"text-class":"text-sm text-foreground dark:text-foreground",user:e.last_actor,"show-badges":!0},{default:r(()=>[l("div",le,n(t(x)(e.last_act_at)),1)]),_:2},1032,["user"])):(a(),g("span",ie,n(t(s)("None")),1))]),_:2},1024),o(p,{class:"text-right whitespace-nowrap"},{default:r(()=>[e.last_commentor?(a(),i(V,{key:0,"text-class":"text-sm text-foreground dark:text-foreground",user:e.last_commentor,"show-badges":!0},{default:r(()=>[l("div",ne,n(t(x)(e.last_comment_at)),1)]),_:2},1032,["user"])):(a(),g("span",ce,n(t(s)("None")),1))]),_:2},1024),d((a(),i(p,{class:"text-right whitespace-nowrap",content:t(v)(e.created_at)},{default:r(()=>[h(n(t(x)(e.created_at)),1)]),_:2},1032,["content"])),[[u]]),d((a(),i(p,{class:"text-right whitespace-nowrap",content:t(v)(e.updated_at)},{default:r(()=>[h(n(t(x)(e.updated_at)),1)]),_:2},1032,["content"])),[[u]]),l("td",ue,[d((a(),i(t(w),{as:"a",href:c.route("admin.recruitment-submission.show",e.id),class:"inline-flex items-center justify-center text-primary hover:text-primary",title:t(s)("View Submission")},{default:r(()=>[o(t(K),{class:"inline-block w-5 h-5"})]),_:2},1032,["href","title"])),[[u]]),t(C)("delete recruitment_submissions")&&f.closed?d((a(),i(t(w),{key:0,as:"button",method:"DELETE",href:c.route("admin.recruitment-submission.delete",e.id),class:"inline-flex items-center justify-center text-error-600 hover:text-error-900 focus:outline-none",title:t(s)("Delete Submission")},{default:r(()=>[o(t(Q),{class:"inline-block w-5 h-5"})]),_:2},1032,["href","title"])),[[S,{message:"Delete this Request? This action cannot be undone."}],[u]]):y("",!0)])]),_:1},8,["data","filters"])])])]),_:1})}}};export{Oe as default};
