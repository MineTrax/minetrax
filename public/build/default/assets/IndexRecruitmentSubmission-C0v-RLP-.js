import{h as $,e as q,H as B,z as R,c as i,w as r,s as I,o as a,b as o,j as t,_ as E,a as l,K as O,P as w,i as h,t as n,N as z,v as d,g as y,d as g,W as L,M}from"./app-D9GuHpcZ.js";import{u as U}from"./BaseLayout-B3-iVEMv.js";import{_ as F}from"./AdminLayout-DdnXiWbQ.js";import{_ as H}from"./DataTable-CargCGHc.js";import{D as p}from"./DtRowItem-ClEJpXXp.js";import{_ as P}from"./AppBreadcrumb-6YgoLuD3.js";import{u as W}from"./useAuthorizable-jSLZg7XL.js";import{_ as K}from"./XSelect-C4vUI2IC.js";import{_ as G}from"./CommonStatusBadge-BMXKPmpH.js";import{_ as V}from"./UserDisplayname-BVzyzniK.js";import{I as k}from"./Icon-DCyQcqwq.js";import{r as J}from"./EyeIcon-6uoja94i.js";import{r as Q}from"./TrashIcon-CpTPbmZd.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useForwardPropsEmits-Ci0C5-5c.js";import"./chevron-down-BRQ4-0aA.js";import"./Teleport-Ck1GoC8n.js";import"./index-CybQGOSJ.js";import"./utils-D-KgF5mV.js";import"./VisuallyHidden-bdJjphAo.js";import"./x-ChK5Vw_y.js";import"./CloudArrowDownIcon-COtJdbQg.js";import"./SelectValue-D9eI7XgB.js";import"./useFormControl-C0VJqXgZ.js";import"./vue-multiselect.esm-BzlgdUyi.js";import"./XMarkIcon-CwP4vCZW.js";import"./Label-hpeRY5vg.js";const X={class:"px-10 py-8 mx-auto space-y-4"},Y={class:"flex items-center justify-between"},Z={class:"text-sm px-4 font-medium text-left text-foreground whitespace-nowrap dark:text-foreground"},ee={class:"px-4"},te={class:"flex-shrink-0 h-10 w-10 mr-2"},se=["src"],re={class:"flex-col"},ae={class:"text-sm text-foreground"},oe=["title"],le={class:"text-xs text-foreground dark:text-foreground"},ie={key:1,class:"text-foreground text-sm italic"},ne={class:"text-xs text-foreground dark:text-foreground"},ce={key:1,class:"text-foreground text-sm italic"},ue={class:"px-6 py-4 space-x-2 text-sm font-medium text-right whitespace-nowrap"},Oe={__name:"IndexRecruitmentSubmission",props:{forms:{type:Object},filters:{type:Object},submissions:{type:Object},closed:{type:Boolean,default:!1}},setup(f){var A,D,j;const{can:N}=W(),{__:s}=I(),{formatTimeAgoToNow:x,formatToDayDateString:v}=U(),m=f,C=[{key:"id",label:s("ID"),sortable:!0,class:"text-left w-[5%]",filterable:{key:"id",type:"text"}},{key:"user_id",sortable:!0,label:s("Applicant"),class:"w-3/12",filterable:{key:"user.name",type:"text"}},{key:"recruitment_id",label:s("Application"),sortable:!0},{key:"status",label:s("Status"),sortable:!0,filterable:{type:"multiselect",options:["pending","inprogress","approved","rejected","withdrawn","onhold"]}},{key:"last_act_at",sortable:!0,label:s("Last Actor"),class:"text-right",filterable:{key:"lastActor.name",type:"text"}},{key:"last_comment_at",sortable:!0,label:s("Last Comment"),class:"text-right",filterable:{key:"lastCommentor.name",type:"text"}},{key:"created_at",label:s("Created At"),class:"text-right w-1/12 whitespace-nowrap",sortable:!0},{key:"updated_at",label:s("Updated At"),class:"text-right w-1/12 whitespace-nowrap",sortable:!0},{key:"actions",label:s("Actions"),sortable:!1,class:"w-1/12 text-right"}];let _=$((D=(A=m.filters)==null?void 0:A.forms)!=null&&D.length?(j=m.filters)==null?void 0:j.forms[0]:null);q(()=>m.filters.forms&&m.filters.forms.length>0?m.filters.forms.map(c=>m.forms[c]).join(", "):null),B(_,c=>{const b={forms:c?[c]:null};L.get(route(route().current()),M.pickBy(b))});const S=[{text:s("Admin"),current:!1},{text:m.closed?s("Closed Requests - Applications"):s("Open Requests - Applications"),current:!0}];return(c,b)=>{const u=R("tippy"),T=R("confirm");return a(),i(F,null,{default:r(()=>[o(E,{title:f.closed?t(s)("Closed Request - Applications"):t(s)("Open Requests - Applications")},null,8,["title"]),l("div",X,[l("div",Y,[o(P,{class:"mt-0","breadcrumb-class":"max-w-none px-0 md:px-0",items:S}),o(K,{id:"selectForms",modelValue:t(_),"onUpdate:modelValue":b[0]||(b[0]=e=>O(_)?_.value=e:_=e),name:"selectForms","select-list":f.forms,placeholder:t(s)("All Applications"),class:"w-48 max-w-48 border rounded bg-card"},null,8,["modelValue","select-list","placeholder"])]),l("div",null,[o(H,{class:"bg-card rounded-lg shadow",header:C,data:f.submissions,filters:f.filters},{default:r(({item:e})=>[l("td",Z,[o(t(w),{as:"a",href:c.route("admin.recruitment-submission.show",e.id),class:"hover:text-primary"},{default:r(()=>[h(n(e.id),1)]),_:2},1032,["href"])]),l("td",ee,[o(t(w),{href:c.route("admin.recruitment-submission.show",e.id),class:"flex items-center"},{default:r(()=>[l("div",te,[l("img",{class:"h-10 w-10 rounded-full",src:e.user.profile_photo_url,alt:"Avatar"},null,8,se)]),l("div",re,[l("div",{class:"text-sm font-semibold text-foreground dark:text-foreground whitespace-nowrap truncate",style:z([e.user.roles[0].color?{color:e.user.roles[0].color}:null])},[h(n(e.user.name)+" ",1),e.user.verified_at?d((a(),i(k,{key:0,name:"verified-check-fill",title:t(s)("Verified Account"),class:"inline mb-1 fill-current focus:outline-none text-primary w-5 h-5"},null,8,["title"])),[[u]]):y("",!0),e.user.is_staff?d((a(),i(k,{key:1,name:"shield-check-fill",title:t(s)("Staff Member"),class:"inline mb-1 text-amber-400 fill-current focus:outline-none w-5 h-5"},null,8,["title"])),[[u]]):y("",!0),e.user.muted_at?d((a(),i(k,{key:2,name:"volume-off-fill",title:t(s)("Muted User"),class:"inline mb-1 text-error-500 fill-current focus:outline-none w-5 h-5"},null,8,["title"])),[[u]]):y("",!0)],4),l("div",ae," @"+n(e.user.username),1)])]),_:2},1032,["href"])]),o(p,null,{default:r(()=>[d((a(),g("p",{title:e.recruitment.title,class:"truncate w-32"},[h(n(e.recruitment.title),1)],8,oe)),[[u]])]),_:2},1024),o(p,null,{default:r(()=>[o(G,{status:e.status.value},null,8,["status"])]),_:2},1024),o(p,{class:"text-right whitespace-nowrap"},{default:r(()=>[e.last_actor?(a(),i(V,{key:0,"text-class":"text-sm text-foreground dark:text-foreground",user:e.last_actor,"show-badges":!0},{default:r(()=>[l("div",le,n(t(x)(e.last_act_at)),1)]),_:2},1032,["user"])):(a(),g("span",ie,n(t(s)("None")),1))]),_:2},1024),o(p,{class:"text-right whitespace-nowrap"},{default:r(()=>[e.last_commentor?(a(),i(V,{key:0,"text-class":"text-sm text-foreground dark:text-foreground",user:e.last_commentor,"show-badges":!0},{default:r(()=>[l("div",ne,n(t(x)(e.last_comment_at)),1)]),_:2},1032,["user"])):(a(),g("span",ce,n(t(s)("None")),1))]),_:2},1024),d((a(),i(p,{class:"text-right whitespace-nowrap",content:t(v)(e.created_at)},{default:r(()=>[h(n(t(x)(e.created_at)),1)]),_:2},1032,["content"])),[[u]]),d((a(),i(p,{class:"text-right whitespace-nowrap",content:t(v)(e.updated_at)},{default:r(()=>[h(n(t(x)(e.updated_at)),1)]),_:2},1032,["content"])),[[u]]),l("td",ue,[d((a(),i(t(w),{as:"a",href:c.route("admin.recruitment-submission.show",e.id),class:"inline-flex items-center justify-center text-primary hover:text-primary",title:t(s)("View Submission")},{default:r(()=>[o(t(J),{class:"inline-block w-5 h-5"})]),_:2},1032,["href","title"])),[[u]]),t(N)("delete recruitment_submissions")&&f.closed?d((a(),i(t(w),{key:0,as:"button",method:"DELETE",href:c.route("admin.recruitment-submission.delete",e.id),class:"inline-flex items-center justify-center text-error-600 hover:text-error-900 focus:outline-none",title:t(s)("Delete Submission")},{default:r(()=>[o(t(Q),{class:"inline-block w-5 h-5"})]),_:2},1032,["href","title"])),[[T,{message:"Delete this Request? This action cannot be undone."}],[u]]):y("",!0)])]),_:1},8,["data","filters"])])])]),_:1})}}};export{Oe as default};
