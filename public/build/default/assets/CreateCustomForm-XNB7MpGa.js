import{k as T,j as N,r as E,i as L,H as j,s as x,c,w as m,o as f,b as a,a as e,t as r,m as A,u as t,p as D,v as M,e as q,f as p,d as X,L as B,M as P}from"./app-CKBhx7zV.js";import{_ as b}from"./InputError-Dp3C5VSl.js";import{L as v}from"./LoadingButton-cdNAmWwn.js";import{X as u}from"./XInput-ClJh1Lz8.js";import{X as g}from"./XSelect-BWsiRgaZ.js";import{X as w}from"./XCheckbox-CvhnHG1x.js";import{E as I}from"./easymde-JG0RkL4p.js";import{_ as H}from"./AdminLayout-D2t3at6Y.js";import{I as K}from"./Icon-3FFVVDHc.js";import{_ as G}from"./DialogModal-BavXQr5c.js";import{_ as R}from"./SecondaryButton-BYJw3HKA.js";import{u as W}from"./useFormKit-DsPcY36i.js";import{D as z}from"./vuedraggable.umd-CISAQbju.js";import{r as J}from"./ArrowsUpDownIcon-CqvaErlN.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./AppLayout-CR1QU6uX.js";import"./useAuthorizable-BBfNqKKU.js";import"./keyboard-Y_7UJT0o.js";import"./open-closed-D34uHY_3.js";import"./CloudArrowDownIcon-CcTOlBCj.js";import"./index-BsZ509qW.js";import"./Modal-LRtfKD-h.js";const Q={class:"py-12 px-10 max-w-7xl mx-auto"},Y={class:"flex justify-between mb-8"},Z={class:"font-bold text-3xl text-gray-500 dark:text-gray-300"},ee={class:"mt-10 sm:mt-0"},se={class:"md:grid md:grid-cols-6 md:gap-6"},le={class:"mt-5 md:mt-0 md:col-span-6"},oe={class:"shadow overflow-hidden sm:rounded-md"},te={class:"px-4 py-5 bg-white dark:bg-cool-gray-800 sm:p-6"},ie={class:"grid grid-cols-6 gap-4"},ae={class:"col-span-6 sm:col-span-6"},re={class:"col-span-6 sm:col-span-6"},ne={class:"col-span-6 sm:col-span-6"},de={class:"col-span-6 sm:col-span-6"},me={class:"col-span-6 sm:col-span-3"},ue={class:"col-span-6 sm:col-span-3"},pe={class:"col-span-6 sm:col-span-3"},_e={class:"flex items-center col-span-6 sm:col-span-3"},fe={class:"mt-4 flex space-x-4"},ce={class:"flex items-center col-span-6 sm:col-span-3"},be={class:"mt-4 flex space-x-4"},ge={class:"flex-col col-span-6 space-y-1 sm:col-span-6"},he={class:"text-base font-medium text-gray-900 dark:text-gray-300"},ye={class:"w-full space-y-1"},xe={class:"flex space-x-4"},ve={class:"flex-1 block text-sm font-medium text-gray-700 dark:text-gray-400"},we={class:"flex-1 block text-sm font-medium text-gray-700 dark:text-gray-400"},Ve={class:"flex-1 block text-sm font-medium text-gray-700 dark:text-gray-400"},ke={class:"flex-1 block text-sm font-medium text-gray-700 dark:text-gray-400"},Fe={class:"flex-1 block text-sm font-medium text-gray-700 dark:text-gray-400"},Ce={class:"flex space-x-4 items-start"},Ue={class:"drag-handle cursor-move mt-6"},Se=["onClick"],Oe={class:"flex-1"},$e={class:"flex-1"},Te={class:"flex-1"},Ne={class:"flex-1"},Ee={class:"flex-1"},Le={key:1,class:"h-full text-gray-700 text-lg font-semibold dark:text-gray-300 w-full flex items-center justify-center"},je={class:"flex justify-end mt-1"},Ae={class:"px-4 py-3 bg-gray-50 dark:bg-cool-gray-800 sm:px-6 flex justify-between gap-2"},De={class:"text-lg font-bold"},rs={__name:"CreateCustomForm",setup(Me){const V={draft:"Draft - Form is under development and not visible to users",active:"Active - Form is actively accepting submissions",disabled:"Disabled - Form is disabled for new submissions",archived:"Archived - Form is archived and not visible to users"},k={anyone:"Anyone - Anyone including Guest can submit this form",auth:"Auth Only - Only registered users can submit this form",staff:"Staff Only - Only staff members (is_staff) can submit this form"},h={text:{},textarea:{},select:{hasOptions:!0},multiselect:{hasOptions:!0},radio:{hasOptions:!0},checkbox:{},email:{},number:{},password:{},tel:{},url:{},week:{},month:{},time:{},date:{},"datetime-local":{}},s=T({title:"",slug:"",status:"draft",description:"",can_create_submission:"anyone",max_submission_per_user:null,min_role_weight_to_view_submission:null,is_notify_staff_on_submission:!0,is_visible_in_listing:!0,fields:[{type:"text",label:"Name",name:"name",placeholder:null,help:null,validation:"required|length:3,100",options:null},{type:"select",label:"Type",name:"select",placeholder:null,help:null,validation:"required",options:"Type1,Type2,Type3"}]});let y=null;const F=()=>{s.description=y.value(),s.fields.map(l=>{l.name=l.label.toLowerCase().replace(/ /g,"_")}),s.can_create_submission==="anyone"&&(s.max_submission_per_user=null),s.post(route("admin.custom-form.store"),{})};N(()=>{y=new I({previewClass:"editor-preview prose max-w-none"})});function C(){s.fields.push({type:"text",label:"",name:"",validation:"required"})}function U(l){s.fields.length!==1&&s.fields.splice(l,1)}const _=E(!1),S=L(()=>W().generateSchemaFromFieldsArray(s.fields));return j(()=>s.title,l=>{s.slug=P.kebabCase(l)}),(l,o)=>{const O=x("app-head"),$=x("inertia-link");return f(),c(H,null,{default:m(()=>[a(O,{title:"Create Custom Form"}),e("div",Q,[e("div",Y,[e("h1",Z,r(l.__("Create Custom Form")),1),a($,{href:l.route("admin.custom-form.index"),class:"inline-flex items-center px-4 py-2 bg-gray-400 dark:bg-gray-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-500 active:bg-gray-600 focus:outline-none focus:border-gray-500 focus:shadow-outline-gray transition ease-in-out duration-150"},{default:m(()=>[e("span",null,r(l.__("Cancel")),1)]),_:1},8,["href"])]),e("div",ee,[e("div",se,[e("div",le,[e("form",{onSubmit:A(F,["prevent"])},[e("div",oe,[e("div",te,[e("div",ie,[e("div",ae,[a(u,{id:"title",modelValue:t(s).title,"onUpdate:modelValue":o[0]||(o[0]=i=>t(s).title=i),label:l.__("Title of Custom Form"),help:l.__("Eg: Contact Us"),error:t(s).errors.title,type:"text",name:"title","help-error-flex":"flex-row"},null,8,["modelValue","label","help","error"])]),e("div",re,[a(u,{id:"slug",modelValue:t(s).slug,"onUpdate:modelValue":o[1]||(o[1]=i=>t(s).slug=i),label:l.__("Form Slug"),help:l.__("Only alphabet, number and dashes. Eg: contact-us"),error:t(s).errors.slug,type:"text",name:"slug","help-error-flex":"flex-row"},null,8,["modelValue","label","help","error"])]),e("div",ne,[a(g,{id:"status",modelValue:t(s).status,"onUpdate:modelValue":o[2]||(o[2]=i=>t(s).status=i),name:"status",label:l.__("Form Status"),placeholder:l.__("Select a status of form.."),"disable-null":!0,"select-list":V},null,8,["modelValue","label","placeholder"])]),e("div",de,[D(e("textarea",{id:"description","onUpdate:modelValue":o[3]||(o[3]=i=>t(s).description=i),"aria-label":"description",name:"description",class:"mt-1 focus:ring-light-blue-500 focus:border-light-blue-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[M,t(s).description]]),a(b,{message:t(s).errors.description,class:"mt-2 text-right"},null,8,["message"])]),e("div",me,[a(g,{id:"can_create_submission",modelValue:t(s).can_create_submission,"onUpdate:modelValue":o[4]||(o[4]=i=>t(s).can_create_submission=i),name:"can_create_submission",label:l.__("Permission to Create Submission"),placeholder:l.__("Select a who can create submittion for this form.."),"disable-null":!0,"select-list":k},null,8,["modelValue","label","placeholder","select-list"])]),e("div",ue,[t(s).can_create_submission!=="anyone"?(f(),c(u,{key:0,id:"max_submission_per_user",modelValue:t(s).max_submission_per_user,"onUpdate:modelValue":o[5]||(o[5]=i=>t(s).max_submission_per_user=i),label:l.__("Max Submission Per User"),help:l.__("Leave empty to allow unlimited submission per user."),error:t(s).errors.max_submission_per_user,type:"number",name:"max_submission_per_user","help-error-flex":"flex-row"},null,8,["modelValue","label","help","error"])):q("",!0)]),e("div",pe,[a(u,{id:"min_role_weight_to_view_submission",modelValue:t(s).min_role_weight_to_view_submission,"onUpdate:modelValue":o[6]||(o[6]=i=>t(s).min_role_weight_to_view_submission=i),label:l.__("Min Staff Role Weight to View Submission"),help:l.__("Leave empty to allow any staff with view custom_form_submissions permission to view submissions."),error:t(s).errors.min_role_weight_to_view_submission,type:"number",name:"min_role_weight_to_view_submission","help-error-flex":"flex-row"},null,8,["modelValue","label","help","error"])]),e("div",_e,[e("fieldset",null,[e("div",fe,[a(w,{id:"is_notify_staff_on_submission",modelValue:t(s).is_notify_staff_on_submission,"onUpdate:modelValue":o[7]||(o[7]=i=>t(s).is_notify_staff_on_submission=i),label:l.__("Notify Staff on Submission"),help:l.__("Notify staff members (with view submission permission) when new submission is made for this form."),name:"is_notify_staff_on_submission"},null,8,["modelValue","label","help"])]),a(b,{message:t(s).errors.is_notify_staff_on_submission,class:"mt-2"},null,8,["message"])])]),e("div",ce,[e("fieldset",null,[e("div",be,[a(w,{id:"is_visible_in_listing",modelValue:t(s).is_visible_in_listing,"onUpdate:modelValue":o[8]||(o[8]=i=>t(s).is_visible_in_listing=i),label:l.__("Is Visible in Listing"),help:l.__("Allow this form to be listed in custom form listing page."),name:"is_visible_in_listing"},null,8,["modelValue","label","help"])]),a(b,{message:t(s).errors.is_visible_in_listing,class:"mt-2"},null,8,["message"])])]),e("div",ge,[e("legend",he,r(l.__("Fields")),1),e("div",ye,[e("div",xe,[o[17]||(o[17]=e("div",{class:"w-5"},null,-1)),o[18]||(o[18]=e("div",{class:"w-5"},null,-1)),e("label",ve,[p(r(l.__("Name"))+" ",1),o[13]||(o[13]=e("span",{class:"text-red-500"},"*",-1))]),e("label",we,[p(r(l.__("Type"))+" ",1),o[14]||(o[14]=e("span",{class:"text-red-500"},"*",-1))]),e("label",Ve,r(l.__("Validation")),1),e("label",ke,r(l.__("Help Text")),1),e("label",Fe,[p(r(l.__("Options"))+" ",1),o[15]||(o[15]=e("span",{class:"text-red-500"},"* ",-1)),o[16]||(o[16]=e("span",{class:"text-xs text-gray-500"},"(Eg: Options1,Option2)",-1))])]),a(t(z),{modelValue:t(s).fields,"onUpdate:modelValue":o[9]||(o[9]=i=>t(s).fields=i),"swap-threshold":.65,class:"space-y-2",handle:".drag-handle"},{item:m(({element:i,index:n})=>[e("div",Ce,[e("div",Ue,[a(t(J),{class:"w-5 h-5 text-gray-400 hover:text-gray-600"})]),e("button",{type:"button",class:"focus:outline-none group mt-6",onClick:d=>U(n)},[a(K,{class:"w-5 h-5 text-gray-300 group-hover:text-red-500",name:"trash"})],8,Se),e("div",Oe,[a(u,{modelValue:i.label,"onUpdate:modelValue":d=>i.label=d,label:l.__("Name Field :index",{index:n+1}),error:t(s).errors[`fields.${n}.label`]||t(s).errors[`fields.${n}.name`],type:"text","help-error-flex":"flex-col",required:!0},null,8,["modelValue","onUpdate:modelValue","label","error"])]),e("div",$e,[a(g,{modelValue:i.type,"onUpdate:modelValue":d=>i.type=d,label:l.__("Field Type"),error:t(s).errors[`fields.${n}.type`],"help-error-flex":"flex-col","select-list":Object.keys(h),required:!0},null,8,["modelValue","onUpdate:modelValue","label","error","select-list"])]),e("div",Te,[a(u,{modelValue:i.validation,"onUpdate:modelValue":d=>i.validation=d,label:l.__("Validation Field :index",{index:n+1}),error:t(s).errors[`fields.${n}.validation`],type:"text","help-error-flex":"flex-col"},null,8,["modelValue","onUpdate:modelValue","label","error"])]),e("div",Ne,[a(u,{modelValue:i.help,"onUpdate:modelValue":d=>i.help=d,label:l.__("Help Text Field :index",{index:n+1}),error:t(s).errors[`fields.${n}.help`],type:"text","help-error-flex":"flex-col"},null,8,["modelValue","onUpdate:modelValue","label","error"])]),e("div",Ee,[h[i.type].hasOptions?(f(),c(u,{key:0,modelValue:i.options,"onUpdate:modelValue":d=>i.options=d,label:l.__("Options Field :index",{index:n+1}),error:t(s).errors[`fields.${n}.options`],type:"text","help-error-flex":"flex-col",required:!0},null,8,["modelValue","onUpdate:modelValue","label","error"])):(f(),X("div",Le," - "))])])]),_:1},8,["modelValue"]),e("div",je,[e("button",{type:"button",class:"p-1.5 text-xs text-light-blue-500 rounded border border-light-blue-500 focus:outline-none hover:text-light-blue-300 hover:border-light-blue-300 transition ease-in-out duration-150",onClick:C},r(l.__("Add New Field")),1)])])])])]),e("div",Ae,[a(v,{class:"inline-flex justify-center py-2 px-4 border border-gray-200 shadow-sm text-sm font-medium rounded-md text-gray-600 bg-gray-50 hover:bg-white disabled:opacity-50 dark:bg-gray-700 dark:border-gray-700 dark:text-gray-300 dark:hover:bg-gray-600 dark:hover:border-gray-600",type:"button",onClick:o[10]||(o[10]=i=>_.value=!0)},{default:m(()=>[p(r(l.__("Preview Form")),1)]),_:1}),a(v,{loading:t(s).processing,class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-light-blue-500 hover:bg-light-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-light-blue-500 disabled:opacity-50",type:"submit"},{default:m(()=>[p(r(l.__("Create Custom Form")),1)]),_:1},8,["loading"])])])],32)])])]),a(G,{show:_.value,onClose:o[12]||(o[12]=i=>_.value=!1)},{title:m(()=>[e("h3",De,r(l.__("Form Preview")),1)]),content:m(()=>[a(t(B),{schema:S.value},null,8,["schema"])]),footer:m(()=>[a(R,{onClick:o[11]||(o[11]=i=>_.value=!1)},{default:m(()=>[p(r(l.__("Close")),1)]),_:1})]),_:1},8,["show"])])]),_:1})}}};export{rs as default};
