import{A as S}from"./AppLayout-DXZxqPA-.js";import{S as B}from"./ServerStatusBox-DyTRO680.js";import{S as C}from"./ShoutBox-28z9atHK.js";import{i as x,q as f,c as _,w as m,o as u,b as r,a as t,t as n,u as l,f as g,e as b,d as v,J as T,p as J,C as O,U as z}from"./app-Dpl9gX7Q.js";import{u as K}from"./useFormKit-DsPcY36i.js";import{_ as N}from"./AlertCard-Dsd0DVIu.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Icon-DaGQmWS8.js";import"./useAuthorizable-CurI0iCo.js";import"./CopyToClipboard-o78WAkIw.js";import"./XMarkIcon-DHZWClRQ.js";const P={class:"py-4 px-2 md:py-12 md:px-10 max-w-7xl mx-auto"},V={class:"flex justify-between md:mb-4"},Y={class:"text-center font-bold text-2xl text-gray-900 dark:text-gray-200 mb-5"},A={class:""},E={class:"flex flex-col md:flex-row md:space-x-4"},H={class:"overflow-x-auto md:w-9/12"},L={class:"min-w-full"},M={class:"shadow max-w-none bg-white dark:bg-cool-gray-800 px-3 py-2 md:px-10 md:py-5 overflow-hidden rounded"},U=["innerHTML"],j={key:1,class:"text-xs text-gray-500 dark:text-gray-400 text-right"},D={class:"md:w-3/12 flex-1 space-y-4 mt-4 md:mt-0"},oe={__name:"ShowCustomForm",props:{customForm:{type:Object},currentUserCanSubmit:{type:Boolean}},setup(o){const{__:e}=J(),s=o,F=K().generateSchemaFromFieldsArray(s.customForm.fields),w=async a=>{await k(a)},k=a=>new Promise((p,d)=>{O({...a}).post(route("custom-form.submit",s.customForm.slug),{onSuccess:i=>{p(i)},onError:i=>{d(i)}})}),c=x(()=>s.customForm.status.value!=="active"||!s.currentUserCanSubmit),h=x(()=>c.value?s.customForm.status.value==="disabled"?{title:e("Oh Jeez! This form is currently disabled."),body:e("It seems the form is no longer accepting submissions. Please check back later.")}:s.customForm.status.value!=="active"?{title:e("Oh Jeez! This form is not active."),body:e("It seems the form is not active yet. Please check back later.")}:["auth","staff"].includes(s.customForm.can_create_submission)&&!z().props.auth.user?{title:e("Oh Jeez! You need to be logged in to submit this form."),body:e("Please login and try again.")}:{title:e("Oh Jeez! You have already submitted this form."),body:e("You have already submitted this form maximum number of times allowed.")}:{title:null,body:null});return(a,p)=>{const d=f("app-head"),y=f("inertia-link"),i=f("FormKit");return u(),_(S,null,{default:m(()=>[r(d,{title:o.customForm.title},null,8,["title"]),t("div",P,[t("div",V,[t("h1",Y,n(o.customForm.title),1),t("div",A,[r(y,{href:a.route("home"),class:"inline-flex items-center px-4 py-2 bg-gray-400 dark:bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-500 active:bg-gray-600 focus:outline-none focus:border-gray-500 focus:shadow-outline-gray transition ease-in-out duration-150"},{default:m(()=>[t("span",null,n(l(e)("Homepage")),1)]),_:1},8,["href"])])]),t("div",E,[t("div",H,[c.value?(u(),_(N,{key:0,"text-color":"text-orange-800 dark:text-orange-500","border-color":"border-orange-500"},{body:m(()=>[g(n(h.value.body),1)]),default:m(()=>[g(n(h.value.title)+" ",1)]),_:1})):b("",!0),t("div",L,[t("div",M,[o.customForm.description?(u(),v("div",{key:0,class:"prose dark:prose-invert max-w-none mb-6 pb-6 border-b dark:border-gray-700",innerHTML:o.customForm.description_html},null,8,U)):b("",!0),r(i,{disabled:c.value,type:"form",onSubmit:w},{default:m(()=>[r(l(T),{schema:l(F)},null,8,["schema"])]),_:1},8,["disabled"]),!c.value&&o.customForm.max_submission_per_user?(u(),v("p",j,n(l(e)("You can submit this form only :count times.",{count:o.customForm.max_submission_per_user})),1)):b("",!0)])])]),t("div",D,[r(B),r(C)])])])]),_:1})}}};export{oe as default};
