import{r as E,i as v,z as ue,A as D,B as I,j as F,D as z,u as r,E as J,G as S,H as de,I as Y,F as pe,C as ce,q as me,c as fe,w as O,o as A,b as x,a as n,t as g,l as ye,f as N,n as $,d as L,e as T,p as ve}from"./app-luBSUb-y.js";import{_ as ge}from"./AdminLayout-ChYp5Oxc.js";import{L as be}from"./LoadingButton-IVXnvI8w.js";import{X as he}from"./XInput-BO9IqNKN.js";import{X as xe}from"./XSelect-DpfdoHxs.js";import{X as _e}from"./XCheckbox-DXTiDjZw.js";import{s as X}from"./vue-multiselect.esm-CkysRNlb.js";import{i as ke}from"./index.es-DMOlHypy.js";import{_ as we}from"./InputError-Bxc-16Ja.js";import{i as q,A as M,o as U,E as Re,T as Se,a as V}from"./keyboard-CdSDiPUN.js";import{i as j,O as Ee,f as Oe,u as Ve,P as H,N as P,T as K}from"./hidden-BF7pBHXO.js";import"./AppLayout-5FPtFZxB.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Icon-DeiOO_W9.js";import"./useAuthorizable-BSHISSy0.js";import"./open-closed-D1_kXgls.js";import"./CloudArrowDownIcon-GSSk-rVh.js";import"./index-CE5LmwrU.js";function Ce(e,a,s){let t=E(s==null?void 0:s.value),i=v(()=>e.value!==void 0);return[v(()=>i.value?e.value:t.value),function(d){return i.value||(t.value=d),a==null?void 0:a(d)}]}function Ae({container:e,accept:a,walk:s,enabled:t}){ue(()=>{let i=e.value;if(!i||t!==void 0&&!t.value)return;let d=j(e);if(!d)return;let c=Object.assign(l=>a(l),{acceptNode:a}),f=d.createTreeWalker(i,NodeFilter.SHOW_ELEMENT,c,!1);for(;f.nextNode();)s(f.currentNode)})}function Q(e={},a=null,s=[]){for(let[t,i]of Object.entries(e))ee(s,Z(a,t),i);return s}function Z(e,a){return e?e+"["+a+"]":a}function ee(e,a,s){if(Array.isArray(s))for(let[t,i]of s.entries())ee(e,Z(a,t.toString()),i);else s instanceof Date?e.push([a,s.toISOString()]):typeof s=="boolean"?e.push([a,s?"1":"0"]):typeof s=="string"?e.push([a,s]):typeof s=="number"?e.push([a,`${s}`]):s==null?e.push([a,""]):Q(s,a,e)}function Ne(e){var a,s;let t=(a=e==null?void 0:e.form)!=null?a:e.closest("form");if(t){for(let i of t.elements)if(i!==e&&(i.tagName==="INPUT"&&i.type==="submit"||i.tagName==="BUTTON"&&i.type==="submit"||i.nodeName==="INPUT"&&i.type==="image")){i.click();return}(s=t.requestSubmit)==null||s.call(t)}}let $e=Symbol("DescriptionContext");function te({slot:e=E({}),name:a="Description",props:s={}}={}){let t=E([]);function i(d){return t.value.push(d),()=>{let c=t.value.indexOf(d);c!==-1&&t.value.splice(c,1)}}return D($e,{register:i,slot:e,name:a,props:s}),v(()=>t.value.length>0?t.value.join(" "):void 0)}let ae=Symbol("LabelContext");function re(){let e=J(ae,null);if(e===null){let a=new Error("You used a <Label /> component, but it is not inside a parent.");throw Error.captureStackTrace&&Error.captureStackTrace(a,re),a}return e}function le({slot:e={},name:a="Label",props:s={}}={}){let t=E([]);function i(d){return t.value.push(d),()=>{let c=t.value.indexOf(d);c!==-1&&t.value.splice(c,1)}}return D(ae,{register:i,slot:e,name:a,props:s}),v(()=>t.value.length>0?t.value.join(" "):void 0)}let Le=I({name:"Label",props:{as:{type:[Object,String],default:"label"},passive:{type:[Boolean],default:!1},id:{type:String,default:null}},setup(e,{slots:a,attrs:s}){var t;let i=(t=e.id)!=null?t:`headlessui-label-${q()}`,d=re();return F(()=>z(d.register(i))),()=>{let{name:c="Label",slot:f={},props:l={}}=d,{passive:k,...u}=e,b={...Object.entries(l).reduce((C,[_,w])=>Object.assign(C,{[_]:r(w)}),{}),id:i};return k&&(delete b.onClick,delete b.htmlFor,delete u.onClick),M({ourProps:b,theirProps:u,slot:f,attrs:s,slots:a,name:c})}}});function Te(e,a){return e===a}let oe=Symbol("RadioGroupContext");function se(e){let a=J(oe,null);if(a===null){let s=new Error(`<${e} /> is missing a parent <RadioGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,se),s}return a}let Pe=I({name:"RadioGroup",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"div"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>Te},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},id:{type:String,default:null}},inheritAttrs:!1,setup(e,{emit:a,attrs:s,slots:t,expose:i}){var d;let c=(d=e.id)!=null?d:`headlessui-radiogroup-${q()}`,f=E(null),l=E([]),k=le({name:"RadioGroupLabel"}),u=te({name:"RadioGroupDescription"});i({el:f,$el:f});let[b,C]=Ce(v(()=>e.modelValue),o=>a("update:modelValue",o),v(()=>e.defaultValue)),_={options:l,value:b,disabled:v(()=>e.disabled),firstOption:v(()=>l.value.find(o=>!o.propsRef.disabled)),containsCheckedOption:v(()=>l.value.some(o=>_.compare(S(o.propsRef.value),S(e.modelValue)))),compare(o,m){if(typeof e.by=="string"){let p=e.by;return(o==null?void 0:o[p])===(m==null?void 0:m[p])}return e.by(o,m)},change(o){var m;if(e.disabled||_.compare(S(b.value),S(o)))return!1;let p=(m=l.value.find(h=>_.compare(S(h.propsRef.value),S(o))))==null?void 0:m.propsRef;return p!=null&&p.disabled?!1:(C(o),!0)},registerOption(o){l.value.push(o),l.value=Ee(l.value,m=>m.element)},unregisterOption(o){let m=l.value.findIndex(p=>p.id===o);m!==-1&&l.value.splice(m,1)}};D(oe,_),Ae({container:v(()=>U(f)),accept(o){return o.getAttribute("role")==="radio"?NodeFilter.FILTER_REJECT:o.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(o){o.setAttribute("role","none")}});function w(o){if(!f.value||!f.value.contains(o.target))return;let m=l.value.filter(p=>p.propsRef.disabled===!1).map(p=>p.element);switch(o.key){case V.Enter:Ne(o.currentTarget);break;case V.ArrowLeft:case V.ArrowUp:if(o.preventDefault(),o.stopPropagation(),H(m,P.Previous|P.WrapAround)===K.Success){let p=l.value.find(h=>{var y;return h.element===((y=j(f))==null?void 0:y.activeElement)});p&&_.change(p.propsRef.value)}break;case V.ArrowRight:case V.ArrowDown:if(o.preventDefault(),o.stopPropagation(),H(m,P.Next|P.WrapAround)===K.Success){let p=l.value.find(h=>{var y;return h.element===((y=j(h.element))==null?void 0:y.activeElement)});p&&_.change(p.propsRef.value)}break;case V.Space:{o.preventDefault(),o.stopPropagation();let p=l.value.find(h=>{var y;return h.element===((y=j(h.element))==null?void 0:y.activeElement)});p&&_.change(p.propsRef.value)}break}}let R=v(()=>{var o;return(o=U(f))==null?void 0:o.closest("form")});return F(()=>{de([R],()=>{if(!R.value||e.defaultValue===void 0)return;function o(){_.change(e.defaultValue)}return R.value.addEventListener("reset",o),()=>{var m;(m=R.value)==null||m.removeEventListener("reset",o)}},{immediate:!0})}),()=>{let{disabled:o,name:m,form:p,...h}=e,y={ref:f,id:c,role:"radiogroup","aria-labelledby":k.value,"aria-describedby":u.value,onKeydown:w};return Y(pe,[...m!=null&&b.value!=null?Q({[m]:b.value}).map(([B,G])=>Y(Oe,Re({features:Ve.Hidden,key:B,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:p,disabled:o,name:B,value:G}))):[],M({ourProps:y,theirProps:{...s,...Se(h,["modelValue","defaultValue","by"])},slot:{},attrs:s,slots:t,name:"RadioGroup"})])}}});var je=(e=>(e[e.Empty=1]="Empty",e[e.Active=2]="Active",e))(je||{});let W=I({name:"RadioGroupOption",props:{as:{type:[Object,String],default:"div"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1},id:{type:String,default:null}},setup(e,{attrs:a,slots:s,expose:t}){var i;let d=(i=e.id)!=null?i:`headlessui-radiogroup-option-${q()}`,c=se("RadioGroupOption"),f=le({name:"RadioGroupLabel"}),l=te({name:"RadioGroupDescription"}),k=E(null),u=v(()=>({value:e.value,disabled:e.disabled})),b=E(1);t({el:k,$el:k});let C=v(()=>U(k));F(()=>c.registerOption({id:d,element:C,propsRef:u})),z(()=>c.unregisterOption(d));let _=v(()=>{var y;return((y=c.firstOption.value)==null?void 0:y.id)===d}),w=v(()=>c.disabled.value||e.disabled),R=v(()=>c.compare(S(c.value.value),S(e.value))),o=v(()=>w.value?-1:R.value||!c.containsCheckedOption.value&&_.value?0:-1);function m(){var y;c.change(e.value)&&(b.value|=2,(y=U(k))==null||y.focus())}function p(){b.value|=2}function h(){b.value&=-3}return()=>{let{value:y,disabled:B,...G}=e,ne={checked:R.value,disabled:w.value,active:!!(b.value&2)},ie={id:d,ref:k,role:"radio","aria-checked":R.value?"true":"false","aria-labelledby":f.value,"aria-describedby":l.value,"aria-disabled":w.value?!0:void 0,tabIndex:o.value,onClick:w.value?void 0:m,onFocus:w.value?void 0:p,onBlur:w.value?void 0:h};return M({ourProps:ie,theirProps:G,slot:ne,attrs:a,slots:s,name:"RadioGroupOption"})}}}),Ue=Le;const Be={class:"max-w-6xl px-10 py-12 mx-auto"},Ge={class:"flex justify-between mb-8"},De={class:"text-3xl font-bold text-gray-500 dark:text-gray-300"},Ie={class:"mt-10 sm:mt-0"},Fe={class:"mt-5 md:mt-0 md:col-span-2"},qe={class:"shadow sm:rounded-md"},Me={class:"px-4 py-5 bg-white dark:bg-cool-gray-800 sm:p-6"},Ye={class:"grid grid-cols-6 gap-6"},Xe={class:"col-span-6 sm:col-span-6"},He={class:"flex items-center justify-center"},Ke=["checked"],We={class:"ms-2"},ze={class:"flex items-center justify-center"},Je=["checked"],Qe={class:"ms-2"},Ze={class:"col-span-6 sm:col-span-6"},et={class:"mb-2 text-gray-700 dark:text-gray-300 font-semibold"},tt={class:"text-sm text-red-500 mt-0.5"},at={class:"col-span-6 sm:col-span-6"},rt={key:0,class:"flex flex-col items-end mb-2"},lt={class:"text-gray-700 dark:text-gray-300 text-sm font-semibold"},ot={class:"text-sm text-right text-gray-600 dark:text-gray-400"},st={class:"col-span-6 sm:col-span-6 relative"},nt={for:"execute_at",class:"absolute -top-2.5 left-0 px-3 py-5 text-xs text-gray-500 h-full pointer-events-none transform origin-left transition-all duration-100 ease-in-out"},it={key:0,class:"col-span-6 sm:col-span-6"},ut={key:1,class:"col-span-6 sm:col-span-6"},dt={class:"mb-2 text-gray-700 dark:text-gray-300 font-semibold"},pt={class:"text-sm text-red-500 mt-0.5"},ct={key:2,class:"col-span-6 sm:col-span-6"},mt={class:"flex justify-end px-4 py-3 bg-gray-50 dark:bg-cool-gray-800 sm:px-6"},$t={__name:"CreateCommandQueue",props:{servers:{type:Array},players:{type:Array}},setup(e){const{__:a}=ve(),s={all:"All - for every player in the web",linked:"Linked Only - for every player who are linked to a user account",unlinked:"Unlinked Only - for every player who are not linked to a user account",custom:"Custom - select players from dropdown"},t=ce({scope:"global",command:"",execute_at:null,servers:[],players:{scope:"all",is_player_online_required:!1,id:[]}});function i({name:f,hostname:l}){return`${f} - ${l}`}function d({username:f,uuid:l}){return`${f} - ${l}`}const c=()=>{t.post(route("admin.command-queue.store"),{preserveScroll:!0,onSuccess:()=>{t.reset("command","servers","players","execute_at")}})};return(f,l)=>{const k=me("app-head");return A(),fe(ge,null,{default:O(()=>[x(k,{title:"Run Command"}),n("div",Be,[n("div",Ge,[n("h1",De,g(r(a)("Run Command")),1)]),n("div",Ie,[n("div",Fe,[n("form",{onSubmit:ye(c,["prevent"])},[n("div",qe,[n("div",Me,[n("div",Ye,[n("div",Xe,[x(r(Pe),{modelValue:r(t).scope,"onUpdate:modelValue":l[0]||(l[0]=u=>r(t).scope=u),class:"flex justify-between gap-2"},{default:O(()=>[x(r(Ue),{class:"flex items-center flex-none w-1/12 font-semibold text-gray-700 dark:text-gray-300"},{default:O(()=>[N(g(r(a)("Scope")),1)]),_:1}),x(r(W),{class:"flex-1 text-sm text-center uppercase",value:"global"},{default:O(({checked:u})=>[n("div",{class:$(["p-3 rounded shadow-sm cursor-pointer",u?"dark:bg-gray-900 dark:text-gray-200 font-bold bg-sky-400 text-white":"dark:bg-gray-600 dark:text-gray-300 bg-gray-200 text-gray-700"])},[n("div",He,[n("input",{checked:u,type:"radio",disabled:"",class:"w-4 h-4 bg-gray-100 border-gray-300 text-sky-600 focus:ring-sky-500 dark:focus:ring-sky-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,8,Ke),n("label",We,g(r(a)("Global")),1)]),n("div",null,[n("span",{class:$([u?"text-gray-200 dark:text-gray-400":"text-gray-400","text-xs"])},g(r(a)("Run generic command")),3)])],2)]),_:1}),x(r(W),{class:"flex-1 text-sm text-center uppercase",value:"player"},{default:O(({checked:u})=>[n("div",{class:$(["p-3 rounded shadow-sm cursor-pointer",u?"dark:bg-gray-900 dark:text-gray-200 font-bold bg-sky-400 text-white":"dark:bg-gray-600 dark:text-gray-300 bg-gray-200 text-gray-700"])},[n("div",ze,[n("input",{checked:u,type:"radio",disabled:"",class:"w-4 h-4 bg-gray-100 border-gray-300 text-sky-600 focus:ring-sky-500 dark:focus:ring-sky-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,8,Je),n("label",Qe,g(r(a)("Player")),1)]),n("div",null,[n("span",{class:$([u?"text-gray-200 dark:text-gray-400":"text-gray-400","text-xs"])},g(r(a)("Run against players")),3)])],2)]),_:1})]),_:1},8,["modelValue"])]),n("div",Ze,[n("p",et,g(r(a)("Servers to run on")),1),x(r(X),{modelValue:r(t).servers,"onUpdate:modelValue":l[1]||(l[1]=u=>r(t).servers=u),class:"block w-full border-gray-900 rounded-md shadow-sm focus:ring-light-blue-500 focus:border-light-blue-500 sm:text-sm",options:e.servers,"custom-label":i,"track-by":"id",multiple:!0,"close-on-select":!1,"clear-on-select":!1,searchable:!1,placeholder:r(a)("Leave empty to run on all servers")+"..."},null,8,["modelValue","options","placeholder"]),n("p",tt,g(r(t).errors.servers),1)]),n("div",at,[r(t).scope==="player"?(A(),L("div",rt,[n("h3",lt,g(r(a)("Available Placeholders")),1),n("ol",ot,[n("li",null,[l[7]||(l[7]=n("code",{class:"text-sm bg-gray-100 dark:bg-cool-gray-700 dark:text-gray-300 p-1 rounded-md"},"{PLAYER_USERNAME}",-1)),N(" - "+g(r(a)("Username of the player.")),1)]),n("li",null,[l[8]||(l[8]=n("code",{class:"text-sm bg-gray-100 dark:bg-cool-gray-700 dark:text-gray-300 p-1 rounded-md"},"{PLAYER_UUID}",-1)),N(" - "+g(r(a)("Unique Id of the player.")),1)])])])):T("",!0),x(he,{id:"command",modelValue:r(t).command,"onUpdate:modelValue":l[2]||(l[2]=u=>r(t).command=u),label:r(a)("Enter command to run..."),error:r(t).errors.command,type:"text",name:"command",help:r(t).scope=="player"?r(a)("Eg: give {PLAYER_USERNAME} diamond 64"):r(a)("Eg: broadcast Hello world!"),"help-error-flex":"flex-row"},null,8,["modelValue","label","error","help"])]),n("div",st,[x(r(ke),{id:"execute_at",value:r(t).execute_at,"onUpdate:value":l[3]||(l[3]=u=>r(t).execute_at=u),placeholder:r(a)("Leave empty to run immediately without any delay")+"...",class:"w-full","value-type":"date",type:"datetime",format:"YYYY-MM-DD hh:mm:ss A","input-class":"border-gray-300 h-14 p-3 text-sm pt-7 focus:border-light-blue-300 focus:ring focus:ring-light-blue-200 focus:ring-opacity-50 rounded-md block w-full dark:bg-cool-gray-900 dark:text-gray-300 dark:border-gray-900"},null,8,["value","placeholder"]),n("label",nt,g(r(a)("Run at")),1),x(we,{message:r(t).errors.execute_at,class:"mt-2"},null,8,["message"])]),r(t).scope==="player"?(A(),L("div",it,[x(xe,{id:"players.scope",modelValue:r(t).players.scope,"onUpdate:modelValue":l[4]||(l[4]=u=>r(t).players.scope=u),error:r(t).errors["players.scope"],name:"players.scope",label:r(a)("Players to run on"),"select-list":s},null,8,["modelValue","error","label"])])):T("",!0),r(t).players.scope==="custom"&&r(t).scope==="player"?(A(),L("div",ut,[n("p",dt,g(r(a)("Select players")),1),x(r(X),{modelValue:r(t).players.id,"onUpdate:modelValue":l[5]||(l[5]=u=>r(t).players.id=u),class:"block w-full border-gray-900 rounded-md shadow-sm focus:ring-light-blue-500 focus:border-light-blue-500 sm:text-sm",options:e.players,"custom-label":d,"track-by":"id",multiple:!0,"close-on-select":!1,"clear-on-select":!1,searchable:!0,placeholder:r(a)("Select players to run command on")+"..."},null,8,["modelValue","options","placeholder"]),n("p",pt,g(r(t).errors["players.id"]),1)])):T("",!0),r(t).scope==="player"?(A(),L("div",ct,[x(_e,{id:"players.is_player_online_required",modelValue:r(t).players.is_player_online_required,"onUpdate:modelValue":l[6]||(l[6]=u=>r(t).players.is_player_online_required=u),label:r(a)("Require player to be online"),help:r(a)("This command should only run if player is online on running server. If not online it will be queued to run when player comes online."),name:"players.is_player_online_required",error:r(t).errors["players.is_player_online_required"]},null,8,["modelValue","label","help","error"])])):T("",!0)])]),n("div",mt,[x(be,{loading:r(t).processing,class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-green-500 hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50",type:"submit"},{default:O(()=>[N(g(r(t).execute_at?r(a)("Schedule Command"):r(a)("Run Command")),1)]),_:1},8,["loading"])])])],32)])])])]),_:1})}}};export{$t as default};
