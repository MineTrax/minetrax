import{h as V,k as g,p as k,y as U,c as D,w as m,s as C,o as a,b as i,j as e,a as s,f as E,d as n,g as d,t as u,P as q,i as h}from"./app-CCKLH5ME.js";import{_ as A}from"./AdminLayout-y-VDq6pb.js";import{_ as M}from"./AppBreadcrumb-B7ASgHLN.js";import{_ as x}from"./index-EGyC-5xi.js";import{_}from"./XInput-BC27vhcd.js";import{_ as N}from"./XTextarea-CKgEP4Pn.js";import{_ as p}from"./XSwitch-C63tkC4o.js";import{E as $}from"./easymde-DPrB6VN5.js";import"./useAuthorizable-BcHdws2r.js";import"./CloudArrowDownIcon-C08Kt2Ph.js";import"./BaseLayout-EMqiVgMT.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Icon-DlyfKWQ8.js";import"./useForwardPropsEmits-Dm3zbijY.js";import"./chevron-down-BttFxFy5.js";import"./Teleport-EbLwDdUQ.js";import"./index-B_t7zORc.js";import"./utils-D-KgF5mV.js";import"./VisuallyHidden-GtrTMWr0.js";import"./x-DbrWVFCU.js";import"./Input-DXLGdtIU.js";import"./Label-JlxotZKr.js";import"./Textarea-BSeHE2lz.js";import"./Switch-DG7pdYGw.js";import"./useFormControl-z8lEV1m4.js";const z={class:"px-10 py-8 mx-auto max-w-6xl text-foreground"},B={class:"flex justify-between mb-4"},I={class:"mt-6"},L={class:"shadow overflow-hidden rounded-lg"},R={class:"px-4 py-5 bg-card sm:p-6"},T={class:"grid grid-cols-6 gap-6"},j={class:"col-span-6 sm:col-span-6"},F={class:"col-span-6 sm:col-span-6"},H={class:"flex items-center col-span-6 sm:col-span-3"},P={key:0,class:"flex items-center col-span-6 sm:col-span-3"},S={key:1,class:"col-span-6 sm:col-span-6"},O={key:2,class:"col-span-6 sm:col-span-6"},W={key:3,class:"col-span-6 sm:col-span-6"},G={for:"file",class:"block text-sm font-medium text-foreground mb-2"},J={key:0,class:"text-xs text-destructive mt-2"},K={class:"flex items-center col-span-6 sm:col-span-3"},Q={key:4,class:"col-span-6 sm:col-span-3"},X={class:"flex items-center col-span-6 sm:col-span-6"},Y={class:"px-4 py-3 bg-card border-t border-border sm:px-6 flex justify-end gap-2"},Z={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},De={__name:"CreateDownload",setup(ee){const{__:o}=C(),b=[{text:o("Admin"),current:!1},{text:o("Downloads"),url:route("admin.download.index"),current:!1},{text:o("Create Download"),current:!0}],c=V(null);let f=null;const l=g({name:null,description:"",is_external:!1,file_url:null,file_name:null,is_external_url_hidden:!1,is_only_auth:!1,min_role_weight_required:null,is_active:!0,file:null});k(()=>{f=new $({previewClass:"editor-preview prose max-w-none"})});function w(){!l.is_external&&c.value&&(l.file=c.value.files[0]),l.description=f.value(),l.post(route("admin.download.store"),{})}return(v,r)=>{const y=U("app-head");return a(),D(A,null,{default:m(()=>[i(y,{title:e(o)("Create Download")},null,8,["title"]),s("div",z,[s("div",B,[i(M,{class:"mt-0","breadcrumb-class":"max-w-none px-0 md:px-0",items:b})]),s("div",I,[s("form",{onSubmit:E(w,["prevent"])},[s("div",L,[s("div",R,[s("div",T,[s("div",j,[i(_,{id:"name",modelValue:e(l).name,"onUpdate:modelValue":r[0]||(r[0]=t=>e(l).name=t),label:e(o)("Download Name/Title"),error:e(l).errors.name,type:"text",name:"name"},null,8,["modelValue","label","error"])]),s("div",F,[i(N,{id:"description",modelValue:e(l).description,"onUpdate:modelValue":r[1]||(r[1]=t=>e(l).description=t),label:e(o)("Description"),error:e(l).errors.description,name:"description"},null,8,["modelValue","label","error"])]),s("div",H,[i(p,{id:"is_external",modelValue:e(l).is_external,"onUpdate:modelValue":r[2]||(r[2]=t=>e(l).is_external=t),label:e(o)("External URL"),help:e(o)("If you want to link to an external file, check this."),name:"is_external",error:e(l).errors.is_external},null,8,["modelValue","label","help","error"])]),e(l).is_external?(a(),n("div",P,[i(p,{id:"is_external_url_hidden",modelValue:e(l).is_external_url_hidden,"onUpdate:modelValue":r[3]||(r[3]=t=>e(l).is_external_url_hidden=t),label:e(o)("Hide External URL"),help:e(o)("Hide the actual external URL from end users."),name:"is_external_url_hidden",error:e(l).errors.is_external_url_hidden},null,8,["modelValue","label","help","error"])])):d("",!0),e(l).is_external?(a(),n("div",S,[i(_,{id:"file_url",modelValue:e(l).file_url,"onUpdate:modelValue":r[4]||(r[4]=t=>e(l).file_url=t),label:e(o)("File Download URL"),error:e(l).errors.file_url,help:e(o)("Eg: http://s3.amazonaws.com/bucket/file.zip"),type:"text",name:"file_url"},null,8,["modelValue","label","error","help"])])):d("",!0),e(l).is_external?(a(),n("div",O,[i(_,{id:"file_name",modelValue:e(l).file_name,"onUpdate:modelValue":r[5]||(r[5]=t=>e(l).file_name=t),label:e(o)("File Name (with extension)"),error:e(l).errors.file_name,help:e(o)("Eg: file.zip"),type:"text",name:"file_name"},null,8,["modelValue","label","error","help"])])):d("",!0),e(l).is_external?d("",!0):(a(),n("div",W,[s("label",G,u(e(o)("File")),1),s("input",{id:"file",ref_key:"fileInput",ref:c,type:"file",class:"block p-2 w-full text-sm text-foreground border border-input rounded-lg cursor-pointer bg-background focus:outline-none"},null,512),e(l).errors.file?(a(),n("p",J,u(e(l).errors.file),1)):d("",!0)])),s("div",K,[i(p,{id:"is_only_auth",modelValue:e(l).is_only_auth,"onUpdate:modelValue":r[6]||(r[6]=t=>e(l).is_only_auth=t),label:e(o)("Authenticated Users Only"),help:e(o)("If only authenticated users should be able to view & download this file."),name:"is_only_auth",error:e(l).errors.is_only_auth},null,8,["modelValue","label","help","error"])]),e(l).is_only_auth?(a(),n("div",Q,[i(_,{id:"min_role_weight_required",modelValue:e(l).min_role_weight_required,"onUpdate:modelValue":r[7]||(r[7]=t=>e(l).min_role_weight_required=t),label:e(o)("Minimum Role Weight"),help:e(o)("The minimum role weight required to download. Leave empty to allow all authenticated users."),error:e(l).errors.min_role_weight_required,type:"number",name:"min_role_weight_required"},null,8,["modelValue","label","help","error"])])):d("",!0),s("div",X,[i(p,{id:"is_active",modelValue:e(l).is_active,"onUpdate:modelValue":r[8]||(r[8]=t=>e(l).is_active=t),label:e(o)("Active"),help:e(o)("Active downloads are visible to end users."),name:"is_active",error:e(l).errors.is_active},null,8,["modelValue","label","help","error"])])])]),s("div",Y,[i(e(x),{variant:"outline","as-child":""},{default:m(()=>[i(e(q),{href:v.route("admin.download.index")},{default:m(()=>[h(u(e(o)("Cancel")),1)]),_:1},8,["href"])]),_:1}),i(e(x),{type:"submit",disabled:e(l).processing},{default:m(()=>[e(l).processing?(a(),n("svg",Z,r[9]||(r[9]=[s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):d("",!0),h(" "+u(e(o)("Add Download")),1)]),_:1},8,["disabled"])])])],32)])])]),_:1})}}};export{De as default};
