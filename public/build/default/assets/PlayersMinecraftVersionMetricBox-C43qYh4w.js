import{h as n,p as y,A as h,c as _,w as o,j as e,o as x,b as r,i as v,t as b}from"./app-CKqa03ai.js";import{u as B,_ as w}from"./Chart-C8Te2q1m.js";import{_ as C}from"./Card-JiHMqSLw.js";import{_ as S}from"./CardContent-BTTmHOnn.js";import{_ as A}from"./CardHeader-BhRy8pe5.js";import{_ as P}from"./CardTitle-DPv5glKy.js";const z={__name:"PlayersPerCountryMetricBox",props:{routeName:{type:String,required:!1,default:route("admin.graph.players-per-country")},mapHeight:{type:String,required:!1,default:"410px"}},setup(i){const{getMapColorPalette:a,getTooltipStyle:p,getToolboxStyle:l,getMapStyle:d,getNoDataColor:t}=B();let u=n({}),s=n(null),$=n(!0);const H=i;return y(async()=>{const m=await h.get(H.routeName);$.value=!1,s.value=m.data;const c=window.colorMode==="dark",f=p(),N=l();d();const g=a(c),M=t(c);u.value={tooltip:{formatter:function(D){const{name:V,value:T}=D.data;return`
                    <div class="flex flex-col">
                        <div class="flex flex-row items-center">
                            <img :alt="name" src="${D.data.image}" class="w-8 h-8 mr-2" />
                            <span class="font-bold">${V}</span>
                        </div>
                        <div class="flex flex-row justify-center items-center">
                            <span class="font-bold">${T||0}</span>
                            <span class="ml-1">players</span>
                        </div>
                    </div>`},...f},toolbox:{feature:{restore:{},saveAsImage:{},dataView:{readOnly:!0}},...N},visualMap:{min:0,max:s.value.max,left:"left",top:"bottom",text:["High","Low"],textStyle:{color:f.textStyle.color},calculable:!0,inRange:{color:g},outOfRange:{color:M}},series:[{name:"Players",type:"map",mapType:"world",roam:!0,itemStyle:{normal:{areaColor:M,borderColor:c?"rgba(100, 116, 139, 0.3)":"rgba(148, 163, 184, 0.3)",borderWidth:.5},emphasis:{areaColor:c?"rgba(100, 116, 139, 0.6)":"rgba(148, 163, 184, 0.6)",borderColor:g[g.length-1],borderWidth:1}},label:{show:!1,emphasis:{textStyle:{color:f.textStyle.color}}},data:s.value.data}]}}),(m,c)=>(x(),_(e(C),{class:"w-full h-full"},{default:o(()=>[r(e(A),null,{default:o(()=>[r(e(P),null,{default:o(()=>[v(b(m.__("Player's Country")),1)]),_:1})]),_:1}),r(e(S),{class:"pt-0"},{default:o(()=>[r(w,{autoresize:!0,options:e(u),height:i.mapHeight,loading:e($)},null,8,["options","height","loading"])]),_:1})]),_:1}))}},J={__name:"PlayersJoinAddressMetricBox",props:{servers:{type:Array,required:!1},chartHeight:{type:String,default:"350px"},topCount:{type:Number,default:null}},setup(i){const a=i;let p=n({}),l=n(null),d=n(!0);return y(async()=>{const t={};a.servers&&a.servers.length>0&&(t.servers=a.servers),a.topCount&&(t.top=a.topCount);const u=await h.get(route("admin.graph.player-join-addresses",t));d.value=!1,l.value=u.data??[],p.value={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},toolbox:{feature:{saveAsImage:{},dataZoom:{yAxisIndex:"none"},restore:{},dataView:{readOnly:!0}}},xAxis:{type:"category",data:l.value.map(s=>s.name)},yAxis:{type:"value"},series:[{name:"Players",type:"bar",barWidth:"60%",data:l.value.map(s=>s.value)}]}}),(t,u)=>(x(),_(e(C),{class:"w-full h-full"},{default:o(()=>[r(e(A),null,{default:o(()=>[r(e(P),null,{default:o(()=>[v(b(t.__("Top Join Addresses")),1)]),_:1})]),_:1}),r(e(S),{class:"pt-0"},{default:o(()=>[r(w,{options:e(p),height:i.chartHeight,loading:e(d),autoresize:!0},null,8,["options","height","loading"])]),_:1})]),_:1}))}},R={__name:"PlayersMinecraftVersionMetricBox",props:{servers:{type:Array,required:!1},chartHeight:{type:String,default:"350px"},topCount:{type:Number,default:null}},setup(i){const a=i;let p=n({}),l=n(null),d=n(!0);return y(async()=>{const t={};a.servers&&a.servers.length>0&&(t.servers=a.servers),a.topCount&&(t.top=a.topCount);const u=await h.get(route("admin.graph.player-minecraft-versions",t));d.value=!1,l.value=u.data??[],p.value={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},toolbox:{feature:{dataZoom:{yAxisIndex:"none"},restore:{},saveAsImage:{},dataView:{readOnly:!0}}},xAxis:{type:"category",data:l.value.map(s=>s.name)},yAxis:{type:"value"},series:[{name:"Players",type:"bar",barWidth:"60%",data:l.value.map(s=>s.value)}]}}),(t,u)=>(x(),_(e(C),{class:"w-full h-full"},{default:o(()=>[r(e(A),null,{default:o(()=>[r(e(P),null,{default:o(()=>[v(b(t.__("Player Client Versions")),1)]),_:1})]),_:1}),r(e(S),{class:"pt-0"},{default:o(()=>[r(w,{options:e(p),height:i.chartHeight,loading:e(d),autoresize:!0},null,8,["options","height","loading"])]),_:1})]),_:1}))}};export{z as _,J as a,R as b};
