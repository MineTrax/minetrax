import{k as O,h as T,e as N,C as j,y as x,c,w as m,o as f,b as i,a as e,t as a,f as A,j as l,g as L,i as p,d as q,D,E}from"./app-Bh5uq5T2.js";import{_ as b}from"./InputError-DD2BS3SX.js";import{L as v}from"./LoadingButton-DJCkcFSn.js";import{_ as u}from"./XInput-DCzxRxFm.js";import{_ as h}from"./XSelect-BNHpxeBM.js";import{X as y}from"./XCheckbox-aEaacEzu.js";import{_ as B}from"./AdminLayout-CjagHNcW.js";import{I as P}from"./Icon-B54a8he6.js";import{a as I}from"./DialogModal-9hKmpm8j.js";import{_ as M}from"./SecondaryButton-DzG_01Qp.js";import{u as H}from"./useFormKit-DsPcY36i.js";import{D as K}from"./vuedraggable.umd-C3X-JBo3.js";import{_ as X}from"./TipTapEditor-mFt-sJin.js";import{r as G}from"./ArrowsUpDownIcon-BF3pp2LW.js";import"./index-Bvduyk2Y.js";import"./index-BlQc97mu.js";import"./utils-D-KgF5mV.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./loader-circle-_EK4DVU-.js";import"./Input-L4k_NWmM.js";import"./Label-Ba68SC45.js";import"./SelectValue-B7I_M8gp.js";import"./useForwardPropsEmits-CoSvaN6q.js";import"./Teleport-C8LT0wZ6.js";import"./chevron-down-BM8GSVcu.js";import"./VisuallyHidden-C0pHwiql.js";import"./useFormControl-pZlKIA-M.js";import"./useAuthorizable-B2TCKEv8.js";import"./CloudArrowDownIcon-peUI9MxF.js";import"./BaseLayout-DfXV1WNK.js";import"./x-Dxr5v1SF.js";const R={class:"py-12 px-10 max-w-7xl mx-auto"},W={class:"flex justify-between mb-8"},z={class:"font-bold text-3xl text-foreground dark:text-foreground"},J={class:"mt-10 sm:mt-0"},Q={class:"md:grid md:grid-cols-6 md:gap-6"},Y={class:"mt-5 md:mt-0 md:col-span-6"},Z={class:"shadow overflow-hidden sm:rounded-md"},ee={class:"px-4 py-5 bg-white dark:bg-surface-800 sm:p-6"},se={class:"grid grid-cols-6 gap-4"},oe={class:"col-span-6 sm:col-span-6"},te={class:"col-span-6 sm:col-span-6"},le={class:"col-span-6 sm:col-span-6"},re={class:"col-span-6 sm:col-span-6"},ie={class:"col-span-6 sm:col-span-3"},ae={class:"col-span-6 sm:col-span-3"},ne={class:"col-span-6 sm:col-span-3"},de={class:"flex items-center col-span-6 sm:col-span-3"},me={class:"mt-4 flex space-x-4"},ue={class:"flex items-center col-span-6 sm:col-span-3"},pe={class:"mt-4 flex space-x-4"},_e={class:"flex-col col-span-6 space-y-1 sm:col-span-6"},fe={class:"text-base font-medium text-foreground dark:text-foreground"},ce={class:"w-full space-y-1"},be={class:"flex space-x-4"},he={class:"flex-1 block text-sm font-medium text-foreground dark:text-foreground"},ge={class:"flex-1 block text-sm font-medium text-foreground dark:text-foreground"},xe={class:"flex-1 block text-sm font-medium text-foreground dark:text-foreground"},ve={class:"flex-1 block text-sm font-medium text-foreground dark:text-foreground"},ye={class:"flex-1 block text-sm font-medium text-foreground dark:text-foreground"},we={class:"flex space-x-4 items-start"},Ve={class:"drag-handle cursor-move mt-6"},ke=["onClick"],Fe={class:"flex-1"},Ce={class:"flex-1"},Ue={class:"flex-1"},Se={class:"flex-1"},$e={class:"flex-1"},Oe={key:1,class:"h-full text-foreground text-lg font-semibold dark:text-foreground w-full flex items-center justify-center"},Te={class:"flex justify-end mt-1"},Ne={class:"px-4 py-3 bg-surface-50 dark:bg-surface-800 sm:px-6 flex justify-between gap-2"},je={class:"text-lg font-bold"},ps={__name:"CreateCustomForm",setup(Ae){const w={draft:"Draft - Form is under development and not visible to users",active:"Active - Form is actively accepting submissions",disabled:"Disabled - Form is disabled for new submissions",archived:"Archived - Form is archived and not visible to users"},V={anyone:"Anyone - Anyone including Guest can submit this form",auth:"Auth Only - Only registered users can submit this form",staff:"Staff Only - Only staff members (is_staff) can submit this form"},g={text:{},textarea:{},select:{hasOptions:!0},multiselect:{hasOptions:!0},radio:{hasOptions:!0},checkbox:{},email:{},number:{},password:{},tel:{},url:{},week:{},month:{},time:{},date:{},"datetime-local":{}},s=O({title:"",slug:"",status:"draft",description:"",can_create_submission:"anyone",max_submission_per_user:null,min_role_weight_to_view_submission:null,is_notify_staff_on_submission:!0,is_visible_in_listing:!0,fields:[{type:"text",label:"Name",name:"name",placeholder:null,help:null,validation:"required|length:3,100",options:null},{type:"select",label:"Type",name:"select",placeholder:null,help:null,validation:"required",options:"Type1,Type2,Type3"}]}),k=()=>{s.fields.map(o=>{o.name=o.label.toLowerCase().replace(/ /g,"_")}),s.can_create_submission==="anyone"&&(s.max_submission_per_user=null),s.post(route("admin.custom-form.store"),{})};function F(){s.fields.push({type:"text",label:"",name:"",validation:"required"})}function C(o){s.fields.length!==1&&s.fields.splice(o,1)}const _=T(!1),U=N(()=>H().generateSchemaFromFieldsArray(s.fields));return j(()=>s.title,o=>{s.slug=E.kebabCase(o)}),(o,t)=>{const S=x("app-head"),$=x("inertia-link");return f(),c(B,null,{default:m(()=>[i(S,{title:"Create Custom Form"}),e("div",R,[e("div",W,[e("h1",z,a(o.__("Create Custom Form")),1),i($,{href:o.route("admin.custom-form.index"),class:"inline-flex items-center px-4 py-2 bg-surface-400 dark:bg-surface-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-surface-500 active:bg-surface-600 focus:outline-none focus:border-foreground focus:shadow-outline-gray transition ease-in-out duration-150"},{default:m(()=>[e("span",null,a(o.__("Cancel")),1)]),_:1},8,["href"])]),e("div",J,[e("div",Q,[e("div",Y,[e("form",{onSubmit:A(k,["prevent"])},[e("div",Z,[e("div",ee,[e("div",se,[e("div",oe,[i(u,{id:"title",modelValue:l(s).title,"onUpdate:modelValue":t[0]||(t[0]=r=>l(s).title=r),label:o.__("Title of Custom Form"),help:o.__("Eg: Contact Us"),error:l(s).errors.title,type:"text",name:"title","help-error-flex":"flex-row"},null,8,["modelValue","label","help","error"])]),e("div",te,[i(u,{id:"slug",modelValue:l(s).slug,"onUpdate:modelValue":t[1]||(t[1]=r=>l(s).slug=r),label:o.__("Form Slug"),help:o.__("Only alphabet, number and dashes. Eg: contact-us"),error:l(s).errors.slug,type:"text",name:"slug","help-error-flex":"flex-row"},null,8,["modelValue","label","help","error"])]),e("div",le,[i(h,{id:"status",modelValue:l(s).status,"onUpdate:modelValue":t[2]||(t[2]=r=>l(s).status=r),name:"status",label:o.__("Form Status"),placeholder:o.__("Select a status of form.."),"disable-null":!0,"select-list":w},null,8,["modelValue","label","placeholder"])]),e("div",re,[i(X,{id:"description",modelValue:l(s).description,"onUpdate:modelValue":t[3]||(t[3]=r=>l(s).description=r)},null,8,["modelValue"]),i(b,{message:l(s).errors.description,class:"mt-2 text-right"},null,8,["message"])]),e("div",ie,[i(h,{id:"can_create_submission",modelValue:l(s).can_create_submission,"onUpdate:modelValue":t[4]||(t[4]=r=>l(s).can_create_submission=r),name:"can_create_submission",label:o.__("Permission to Create Submission"),placeholder:o.__("Select a who can create submittion for this form.."),"disable-null":!0,"select-list":V},null,8,["modelValue","label","placeholder","select-list"])]),e("div",ae,[l(s).can_create_submission!=="anyone"?(f(),c(u,{key:0,id:"max_submission_per_user",modelValue:l(s).max_submission_per_user,"onUpdate:modelValue":t[5]||(t[5]=r=>l(s).max_submission_per_user=r),label:o.__("Max Submission Per User"),help:o.__("Leave empty to allow unlimited submission per user."),error:l(s).errors.max_submission_per_user,type:"number",name:"max_submission_per_user","help-error-flex":"flex-row"},null,8,["modelValue","label","help","error"])):L("",!0)]),e("div",ne,[i(u,{id:"min_role_weight_to_view_submission",modelValue:l(s).min_role_weight_to_view_submission,"onUpdate:modelValue":t[6]||(t[6]=r=>l(s).min_role_weight_to_view_submission=r),label:o.__("Min Staff Role Weight to View Submission"),help:o.__("Leave empty to allow any staff with view custom_form_submissions permission to view submissions."),error:l(s).errors.min_role_weight_to_view_submission,type:"number",name:"min_role_weight_to_view_submission","help-error-flex":"flex-row"},null,8,["modelValue","label","help","error"])]),e("div",de,[e("fieldset",null,[e("div",me,[i(y,{id:"is_notify_staff_on_submission",modelValue:l(s).is_notify_staff_on_submission,"onUpdate:modelValue":t[7]||(t[7]=r=>l(s).is_notify_staff_on_submission=r),label:o.__("Notify Staff on Submission"),help:o.__("Notify staff members (with view submission permission) when new submission is made for this form."),name:"is_notify_staff_on_submission"},null,8,["modelValue","label","help"])]),i(b,{message:l(s).errors.is_notify_staff_on_submission,class:"mt-2"},null,8,["message"])])]),e("div",ue,[e("fieldset",null,[e("div",pe,[i(y,{id:"is_visible_in_listing",modelValue:l(s).is_visible_in_listing,"onUpdate:modelValue":t[8]||(t[8]=r=>l(s).is_visible_in_listing=r),label:o.__("Is Visible in Listing"),help:o.__("Allow this form to be listed in custom form listing page."),name:"is_visible_in_listing"},null,8,["modelValue","label","help"])]),i(b,{message:l(s).errors.is_visible_in_listing,class:"mt-2"},null,8,["message"])])]),e("div",_e,[e("legend",fe,a(o.__("Fields")),1),e("div",ce,[e("div",be,[t[17]||(t[17]=e("div",{class:"w-5"},null,-1)),t[18]||(t[18]=e("div",{class:"w-5"},null,-1)),e("label",he,[p(a(o.__("Name"))+" ",1),t[13]||(t[13]=e("span",{class:"text-error-500"},"*",-1))]),e("label",ge,[p(a(o.__("Type"))+" ",1),t[14]||(t[14]=e("span",{class:"text-error-500"},"*",-1))]),e("label",xe,a(o.__("Validation")),1),e("label",ve,a(o.__("Help Text")),1),e("label",ye,[p(a(o.__("Options"))+" ",1),t[15]||(t[15]=e("span",{class:"text-error-500"},"* ",-1)),t[16]||(t[16]=e("span",{class:"text-xs text-foreground"},"(Eg: Options1,Option2)",-1))])]),i(l(K),{modelValue:l(s).fields,"onUpdate:modelValue":t[9]||(t[9]=r=>l(s).fields=r),"swap-threshold":.65,class:"space-y-2",handle:".drag-handle"},{item:m(({element:r,index:n})=>[e("div",we,[e("div",Ve,[i(l(G),{class:"w-5 h-5 text-foreground hover:text-foreground"})]),e("button",{type:"button",class:"focus:outline-none group mt-6",onClick:d=>C(n)},[i(P,{class:"w-5 h-5 text-foreground group-hover:text-error-500",name:"trash"})],8,ke),e("div",Fe,[i(u,{modelValue:r.label,"onUpdate:modelValue":d=>r.label=d,label:o.__("Name Field :index",{index:n+1}),error:l(s).errors[`fields.${n}.label`]||l(s).errors[`fields.${n}.name`],type:"text","help-error-flex":"flex-col",required:!0},null,8,["modelValue","onUpdate:modelValue","label","error"])]),e("div",Ce,[i(h,{modelValue:r.type,"onUpdate:modelValue":d=>r.type=d,label:o.__("Field Type"),error:l(s).errors[`fields.${n}.type`],"help-error-flex":"flex-col","select-list":Object.keys(g),required:!0},null,8,["modelValue","onUpdate:modelValue","label","error","select-list"])]),e("div",Ue,[i(u,{modelValue:r.validation,"onUpdate:modelValue":d=>r.validation=d,label:o.__("Validation Field :index",{index:n+1}),error:l(s).errors[`fields.${n}.validation`],type:"text","help-error-flex":"flex-col"},null,8,["modelValue","onUpdate:modelValue","label","error"])]),e("div",Se,[i(u,{modelValue:r.help,"onUpdate:modelValue":d=>r.help=d,label:o.__("Help Text Field :index",{index:n+1}),error:l(s).errors[`fields.${n}.help`],type:"text","help-error-flex":"flex-col"},null,8,["modelValue","onUpdate:modelValue","label","error"])]),e("div",$e,[g[r.type].hasOptions?(f(),c(u,{key:0,modelValue:r.options,"onUpdate:modelValue":d=>r.options=d,label:o.__("Options Field :index",{index:n+1}),error:l(s).errors[`fields.${n}.options`],type:"text","help-error-flex":"flex-col",required:!0},null,8,["modelValue","onUpdate:modelValue","label","error"])):(f(),q("div",Oe," - "))])])]),_:1},8,["modelValue"]),e("div",Te,[e("button",{type:"button",class:"p-1.5 text-xs text-primary rounded border border-primary focus:outline-none hover:text-primary hover:border-primary transition ease-in-out duration-150",onClick:F},a(o.__("Add New Field")),1)])])])])]),e("div",Ne,[i(v,{class:"inline-flex justify-center py-2 px-4 border border-foreground shadow-sm text-sm font-medium rounded-md text-foreground bg-surface-50 hover:bg-white disabled:opacity-50 dark:bg-surface-700 dark:border-foreground dark:text-foreground dark:hover:bg-surface-600 dark:hover:border-foreground",type:"button",onClick:t[10]||(t[10]=r=>_.value=!0)},{default:m(()=>[p(a(o.__("Preview Form")),1)]),_:1}),i(v,{loading:l(s).processing,class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primary hover:bg-primary focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary disabled:opacity-50",type:"submit"},{default:m(()=>[p(a(o.__("Create Custom Form")),1)]),_:1},8,["loading"])])])],32)])])]),i(I,{show:_.value,onClose:t[12]||(t[12]=r=>_.value=!1)},{title:m(()=>[e("h3",je,a(o.__("Form Preview")),1)]),content:m(()=>[i(l(D),{schema:U.value},null,8,["schema"])]),footer:m(()=>[i(M,{onClick:t[11]||(t[11]=r=>_.value=!1)},{default:m(()=>[p(a(o.__("Close")),1)]),_:1})]),_:1},8,["show"])])]),_:1})}}};export{ps as default};
