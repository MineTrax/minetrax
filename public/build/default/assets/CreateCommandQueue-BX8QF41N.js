import{o as i,d,a as r,h as v,k as $,y as q,c as E,w as u,s as P,b as s,j as e,f as L,t as l,n as f,g as m,P as M,i as h,A as j}from"./app-Do9q-MyE.js";import{_ as T}from"./AdminLayout-BwN0mh-k.js";import{_ as Y}from"./AppBreadcrumb-DZUMC8fH.js";import{_ as x}from"./index-oDi_KVMO.js";import{_ as B}from"./XInput-CTxc_vGG.js";import{_ as N}from"./XSelect-eoibG_9u.js";import{_ as D}from"./XSwitch-CX7xGN6B.js";import{_ as I,a as g,b as z}from"./TabsTrigger-Bn9FdNkn.js";import{s as w}from"./vue-multiselect.esm-Bll4-Ezs.js";import{X as H}from"./XDatePicker-DW5Du2Yh.js";import{r as O}from"./UserIcon-DzPxEwtp.js";import"./useAuthorizable-CYy4Wh89.js";import"./CloudArrowDownIcon-BPF7BCYT.js";import"./BaseLayout-D4bLMm7A.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Icon-DFL_HybF.js";import"./useForwardPropsEmits-L3e3_QW0.js";import"./chevron-down-DrlPincR.js";import"./Teleport-YoVnS0TY.js";import"./index-DlYoUYeQ.js";import"./utils-D-KgF5mV.js";import"./VisuallyHidden-Ckc87s0l.js";import"./x-DOdw7ujo.js";import"./Input-BsT2nuw1.js";import"./Label-MSuCJuMN.js";import"./SelectValue-CKzp-AAz.js";import"./useFormControl-DGZk-wbf.js";import"./Switch-CVcmIixB.js";import"./index.es-Dq7cyA3B.js";function X(b,a){return i(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 21a9.004 9.004 0 0 0 8.716-6.747M12 21a9.004 9.004 0 0 1-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 0 1 7.843 4.582M12 3a8.997 8.997 0 0 0-7.843 4.582m15.686 0A11.953 11.953 0 0 1 12 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0 1 21 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0 1 12 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 0 1 3 12c0-1.605.42-3.113 1.157-4.418"})])}const F={class:"px-10 py-8 mx-auto max-w-6xl text-foreground"},G={class:"flex justify-between mb-4"},Q={class:"mt-6"},J={class:"shadow rounded-lg"},K={class:"px-4 py-5 bg-card sm:p-6"},W={class:"grid grid-cols-6 gap-6"},Z={class:"col-span-6"},ee={class:"block text-sm font-medium text-foreground mb-3"},te={class:"text-center"},re={class:"text-xs text-muted-foreground mt-0.5 whitespace-normal"},ae={key:0,class:"absolute top-2 right-2 w-2 h-2 rounded-full bg-primary"},oe={class:"text-center"},se={class:"text-xs text-muted-foreground mt-0.5 whitespace-normal"},le={key:0,class:"absolute top-2 right-2 w-2 h-2 rounded-full bg-primary"},ne={class:"col-span-6"},ie={for:"servers",class:"block text-sm font-medium text-foreground mb-2"},de={key:0,class:"text-xs text-destructive mt-2"},ce={class:"col-span-6"},me={key:0,class:"flex flex-col items-end mb-3 p-3 bg-muted rounded-md"},ue={class:"text-sm font-semibold text-foreground"},pe={class:"text-sm text-right text-muted-foreground mt-1 space-y-1"},fe={class:"ml-1"},ye={class:"ml-1"},_e={class:"col-span-6"},be={key:0,class:"col-span-6"},ve={key:1,class:"col-span-6"},he={for:"players_id",class:"block text-sm font-medium text-foreground mb-2"},xe={key:0,class:"text-xs text-destructive mt-2"},ge={key:2,class:"col-span-6"},we={class:"px-4 py-4 bg-card border-t border-border sm:px-6 flex justify-end gap-2"},ke={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Ze={__name:"CreateCommandQueue",props:{servers:{type:Array}},setup(b){const{__:a}=P(),k=[{text:a("Admin"),current:!1},{text:a("Commands"),url:route("admin.command-queue.index"),current:!1},{text:a("Run Command"),current:!0}],V={all:"All - for every player in the web",linked:"Linked Only - for every player who are linked to a user account",unlinked:"Unlinked Only - for every player who are not linked to a user account",custom:"Custom - select players from dropdown"},p=v([]),y=v(!1);let _=null;const t=$({scope:"global",command:"",execute_at:null,servers:[],players:{scope:"all",is_player_online_required:!1,id:[]}});function C({name:c,hostname:o}){return`${c} - ${o}`}function A({username:c,uuid:o}){return`${c} - ${o}`}const R=c=>{if(_&&clearTimeout(_),!c||c.length<2){p.value=[];return}_=setTimeout(async()=>{y.value=!0;try{const o=await j.get("/stats",{params:{"filter[q]":c}});p.value=o.data.data||o.data||[]}catch(o){console.error("Error searching players:",o),p.value=[]}finally{y.value=!1}},300)},S=()=>{t.post(route("admin.command-queue.store"),{preserveScroll:!0,onSuccess:()=>{t.reset("command","servers","players","execute_at")}})};return(c,o)=>{const U=q("app-head");return i(),E(T,null,{default:u(()=>[s(U,{title:e(a)("Run Command")},null,8,["title"]),r("div",F,[r("div",G,[s(Y,{class:"mt-0","breadcrumb-class":"max-w-none px-0 md:px-0",items:k})]),r("div",Q,[r("form",{onSubmit:L(S,["prevent"])},[r("div",J,[r("div",K,[r("div",W,[r("div",Z,[r("label",ee,l(e(a)("Scope")),1),s(e(z),{modelValue:e(t).scope,"onUpdate:modelValue":o[0]||(o[0]=n=>e(t).scope=n),class:"w-full"},{default:u(()=>[s(e(I),{class:"grid w-full grid-cols-2 h-auto gap-3 bg-transparent p-0"},{default:u(()=>[s(e(g),{value:"global",class:"relative flex flex-col items-center justify-center gap-2 p-4 rounded-lg border-2 transition-all duration-200 data-[state=inactive]:border-border data-[state=inactive]:bg-muted/30 data-[state=inactive]:text-muted-foreground data-[state=inactive]:shadow-none hover:data-[state=inactive]:border-primary/50 hover:data-[state=inactive]:bg-muted/50 data-[state=active]:border-primary data-[state=active]:bg-primary/10 data-[state=active]:text-primary data-[state=active]:shadow-none [&>span]:w-full"},{default:u(()=>[r("div",{class:f(["flex items-center justify-center w-10 h-10 rounded-full transition-colors mx-auto",e(t).scope==="global"?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"])},[s(e(X),{class:"w-5 h-5"})],2),r("div",te,[r("div",{class:f(["font-semibold",e(t).scope==="global"?"text-primary":"text-foreground"])},l(e(a)("Global")),3),r("div",re,l(e(a)("Run generic command")),1)]),e(t).scope==="global"?(i(),d("div",ae)):m("",!0)]),_:1}),s(e(g),{value:"player",class:"relative flex flex-col items-center justify-center gap-2 p-4 rounded-lg border-2 transition-all duration-200 data-[state=inactive]:border-border data-[state=inactive]:bg-muted/30 data-[state=inactive]:text-muted-foreground data-[state=inactive]:shadow-none hover:data-[state=inactive]:border-primary/50 hover:data-[state=inactive]:bg-muted/50 data-[state=active]:border-primary data-[state=active]:bg-primary/10 data-[state=active]:text-primary data-[state=active]:shadow-none [&>span]:w-full"},{default:u(()=>[r("div",{class:f(["flex items-center justify-center w-10 h-10 rounded-full transition-colors mx-auto",e(t).scope==="player"?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"])},[s(e(O),{class:"w-5 h-5"})],2),r("div",oe,[r("div",{class:f(["font-semibold",e(t).scope==="player"?"text-primary":"text-foreground"])},l(e(a)("Player")),3),r("div",se,l(e(a)("Run against players")),1)]),e(t).scope==="player"?(i(),d("div",le)):m("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),r("div",ne,[r("label",ie,l(e(a)("Servers to run on")),1),s(e(w),{id:"servers",modelValue:e(t).servers,"onUpdate:modelValue":o[1]||(o[1]=n=>e(t).servers=n),class:"block w-full border-input rounded-md shadow-sm focus:ring-primary focus:border-primary sm:text-sm",options:b.servers,"custom-label":C,"track-by":"id",multiple:!0,"close-on-select":!1,"clear-on-select":!1,searchable:!1,placeholder:e(a)("Leave empty to run on all servers")+"..."},null,8,["modelValue","options","placeholder"]),e(t).errors.servers?(i(),d("p",de,l(e(t).errors.servers),1)):m("",!0)]),r("div",ce,[e(t).scope==="player"?(i(),d("div",me,[r("h3",ue,l(e(a)("Available Placeholders")),1),r("ul",pe,[r("li",null,[o[7]||(o[7]=r("code",{class:"text-xs bg-background px-1.5 py-0.5 rounded font-mono"},"{PLAYER_USERNAME}",-1)),r("span",fe,"- "+l(e(a)("Username of the player.")),1)]),r("li",null,[o[8]||(o[8]=r("code",{class:"text-xs bg-background px-1.5 py-0.5 rounded font-mono"},"{PLAYER_UUID}",-1)),r("span",ye,"- "+l(e(a)("Unique Id of the player.")),1)])])])):m("",!0),s(B,{id:"command",modelValue:e(t).command,"onUpdate:modelValue":o[2]||(o[2]=n=>e(t).command=n),label:e(a)("Command to run"),error:e(t).errors.command,type:"text",name:"command",placeholder:e(t).scope=="player"?e(a)("Eg: give {PLAYER_USERNAME} diamond 64"):e(a)("Eg: broadcast Hello world!")},null,8,["modelValue","label","error","placeholder"])]),r("div",_e,[s(H,{id:"execute_at",modelValue:e(t).execute_at,"onUpdate:modelValue":o[3]||(o[3]=n=>e(t).execute_at=n),label:e(a)("Run at"),placeholder:e(a)("Leave empty to run immediately without any delay")+"...",error:e(t).errors.execute_at,type:"datetime",format:"YYYY-MM-DD hh:mm:ss A","value-type":"date"},null,8,["modelValue","label","placeholder","error"])]),e(t).scope==="player"?(i(),d("div",be,[s(N,{id:"players.scope",modelValue:e(t).players.scope,"onUpdate:modelValue":o[4]||(o[4]=n=>e(t).players.scope=n),error:e(t).errors["players.scope"],name:"players.scope",label:e(a)("Players to run on"),"select-list":V,"disable-null":!0},null,8,["modelValue","error","label"])])):m("",!0),e(t).players.scope==="custom"&&e(t).scope==="player"?(i(),d("div",ve,[r("label",he,l(e(a)("Select players")),1),s(e(w),{id:"players_id",modelValue:e(t).players.id,"onUpdate:modelValue":o[5]||(o[5]=n=>e(t).players.id=n),class:"block w-full border-input rounded-md shadow-sm focus:ring-primary focus:border-primary sm:text-sm",options:p.value,"custom-label":A,"track-by":"id",multiple:!0,"close-on-select":!1,"clear-on-select":!1,searchable:!0,"hide-selected":!0,loading:y.value,"internal-search":!1,placeholder:e(a)("Type to search players")+"...","no-options":e(a)("Type at least 2 characters to search"),onSearchChange:R},null,8,["modelValue","options","loading","placeholder","no-options"]),e(t).errors["players.id"]?(i(),d("p",xe,l(e(t).errors["players.id"]),1)):m("",!0)])):m("",!0),e(t).scope==="player"?(i(),d("div",ge,[s(D,{id:"players.is_player_online_required",modelValue:e(t).players.is_player_online_required,"onUpdate:modelValue":o[6]||(o[6]=n=>e(t).players.is_player_online_required=n),label:e(a)("Require player to be online"),help:e(a)("This command should only run if player is online on running server. If not online it will be queued to run when player comes online."),name:"players.is_player_online_required",error:e(t).errors["players.is_player_online_required"]},null,8,["modelValue","label","help","error"])])):m("",!0)])]),r("div",we,[s(e(x),{variant:"outline","as-child":""},{default:u(()=>[s(e(M),{href:c.route("admin.command-queue.index")},{default:u(()=>[h(l(e(a)("Cancel")),1)]),_:1},8,["href"])]),_:1}),s(e(x),{type:"submit",disabled:e(t).processing},{default:u(()=>[e(t).processing?(i(),d("svg",ke,o[9]||(o[9]=[r("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),r("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):m("",!0),h(" "+l(e(t).execute_at?e(a)("Schedule Command"):e(a)("Run Command")),1)]),_:1},8,["disabled"])])])],32)])])]),_:1})}}};export{Ze as default};
