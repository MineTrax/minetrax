import{C as L,j as M,r as j,i as N,H as O,q as x,c as h,w as _,o as u,b as a,a as s,t as r,l as T,u as o,m as q,v as R,e as D,f as p,d as g,g as P,F as X,K as B,L as H}from"./app-BDqFx3nJ.js";import{_ as f}from"./InputError-Bm7rj2f_.js";import{L as V}from"./LoadingButton-CIF9JOGX.js";import{X as d}from"./XInput-BBvCiCBA.js";import{X as y}from"./XSelect-B83QMKfN.js";import{X as b}from"./XCheckbox-CWVtNjoa.js";import{E as I}from"./easymde-Bgoi3dDB.js";import{_ as W}from"./AdminLayout-CH0XHXWF.js";import{I as K}from"./Icon-Bn9n1IU_.js";import{_ as Y}from"./DialogModal-D-nBiMiA.js";import{_ as z}from"./SecondaryButton-CaI8Cy0t.js";import{u as G}from"./useFormKit-DsPcY36i.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./AppLayout-_QfSG3gX.js";import"./useAuthorizable-CnlAWZWI.js";import"./keyboard-B8FqkKla.js";import"./open-closed-j5RvPIdu.js";import"./CloudArrowDownIcon-qQUAiaKd.js";import"./index-DLGdJHO1.js";import"./Modal-DLYNQJic.js";const J={class:"py-12 px-10 max-w-7xl mx-auto"},Q={class:"flex justify-between mb-8"},Z={class:"font-bold text-3xl text-gray-500 dark:text-gray-300"},ee={class:"mt-10 sm:mt-0"},se={class:"md:grid md:grid-cols-6 md:gap-6"},le={class:"mt-5 md:mt-0 md:col-span-6"},oe={class:"shadow overflow-hidden sm:rounded-md"},te={class:"px-4 py-5 bg-white dark:bg-cool-gray-800 sm:p-6"},ie={class:"grid grid-cols-6 gap-4"},ae={class:"col-span-6 sm:col-span-6"},re={class:"col-span-6 sm:col-span-6"},ne={class:"col-span-6 sm:col-span-6"},de={class:"col-span-6 sm:col-span-6"},me={class:"col-span-6 sm:col-span-3"},_e={class:"col-span-6 sm:col-span-3"},ue={class:"col-span-6 sm:col-span-3"},pe={class:"col-span-6 sm:col-span-3"},fe={class:"col-span-6 sm:col-span-6"},ce={class:"flex items-center col-span-6 sm:col-span-3"},be={class:"mt-4 flex space-x-4"},he={class:"flex items-center col-span-6 sm:col-span-3"},ge={class:"mt-4 flex space-x-4"},ye={class:"flex items-center col-span-6 sm:col-span-3"},we={class:"mt-4 flex space-x-4"},ve={class:"flex items-center col-span-6 sm:col-span-3"},xe={class:"mt-4 flex space-x-4"},Ve={class:"col-span-6 sm:col-span-3"},ke={class:"flex-col col-span-6 space-y-1 sm:col-span-6"},Ue={class:"text-base font-medium text-gray-900 dark:text-gray-300"},Ae={class:"w-full space-y-1"},Fe={class:"flex space-x-4"},Se={class:"flex-1 block text-sm font-medium text-gray-700 dark:text-gray-400"},Ce={class:"flex-1 block text-sm font-medium text-gray-700 dark:text-gray-400"},$e={class:"flex-1 block text-sm font-medium text-gray-700 dark:text-gray-400"},Ee={class:"flex-1 block text-sm font-medium text-gray-700 dark:text-gray-400"},Le={class:"flex-1 block text-sm font-medium text-gray-700 dark:text-gray-400"},Me=["onClick"],je={class:"flex-1"},Ne={class:"flex-1"},Oe={class:"flex-1"},Te={class:"flex-1"},qe={class:"flex-1"},Re={key:1,class:"h-full text-gray-700 text-lg font-semibold dark:text-gray-300 w-full flex items-center justify-center"},De={class:"flex justify-end mt-1"},Pe={class:"px-4 py-3 bg-gray-50 dark:bg-cool-gray-800 sm:px-6 flex justify-between gap-2"},Xe={class:"text-lg font-bold"},ds={__name:"CreateRecruitment",props:{roles:{type:Array,required:!0}},setup(k){const U={draft:"Draft - Application is under development and not visible to users",active:"Active - Application is actively accepting submissions",disabled:"Disabled - Application is disabled for new submissions",archived:"Archived - Application is archived and not visible to users"},w={text:{},textarea:{},select:{hasOptions:!0},multiselect:{hasOptions:!0},radio:{hasOptions:!0},checkbox:{},email:{},number:{},password:{},tel:{},url:{},week:{},month:{},time:{},date:{},"datetime-local":{}},e=L({title:"",slug:"",status:"draft",description:"",max_submission_per_user:null,submission_cooldown_in_seconds:null,is_allow_only_player_linked_users:!1,is_allow_only_verified_users:!1,is_allow_messages_from_users:!0,min_role_weight_to_view_submission:null,min_role_weight_to_vote_on_submission:null,min_role_weight_to_act_on_submission:null,is_notify_staff_on_submission:!0,related_role_id:null,fields:[{type:"number",label:"Years of Experience",name:"experience",placeholder:null,help:null,validation:"required|number",options:null},{type:"textarea",label:"Tell us about yourself",name:"aboutme",placeholder:null,help:"Write about your experience, skills, and why you want to join us.",validation:"required|string",options:null}]});let v=null;const A=()=>{e.description=v.value(),e.fields.map(l=>{l.name=l.label.toLowerCase().replace(/ /g,"_")}),e.post(route("admin.recruitment.store"),{})};M(()=>{v=new I({previewClass:"editor-preview prose max-w-none"})});function F(){e.fields.push({type:"text",label:"",name:"",validation:"required"})}function S(l){e.fields.length!==1&&e.fields.splice(l,1)}const c=j(!1),C=N(()=>G().generateSchemaFromFieldsArray(e.fields));return O(()=>e.title,l=>{e.slug=H.kebabCase(l)}),(l,t)=>{const $=x("app-head"),E=x("inertia-link");return u(),h(W,null,{default:_(()=>[a($,{title:"Create Application Form"}),s("div",J,[s("div",Q,[s("h1",Z,r(l.__("Create Application Form")),1),a(E,{href:l.route("admin.recruitment.index"),class:"inline-flex items-center px-4 py-2 bg-gray-400 dark:bg-gray-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-500 active:bg-gray-600 focus:outline-none focus:border-gray-500 focus:shadow-outline-gray transition ease-in-out duration-150"},{default:_(()=>[s("span",null,r(l.__("Cancel")),1)]),_:1},8,["href"])]),s("div",ee,[s("div",se,[s("div",le,[s("form",{onSubmit:T(A,["prevent"])},[s("div",oe,[s("div",te,[s("div",ie,[s("div",ae,[a(d,{id:"title",modelValue:o(e).title,"onUpdate:modelValue":t[0]||(t[0]=i=>o(e).title=i),label:l.__("Title of this Application"),help:l.__("Eg: Apply to be a Staff Member"),error:o(e).errors.title,type:"text",name:"title","help-error-flex":"flex-row"},null,8,["modelValue","label","help","error"])]),s("div",re,[a(d,{id:"slug",modelValue:o(e).slug,"onUpdate:modelValue":t[1]||(t[1]=i=>o(e).slug=i),label:l.__("Application Slug for URL"),help:l.__("Only alphabet, number and dashes. Eg: apply-to-be-a-staff-member"),error:o(e).errors.slug,type:"text",name:"slug","help-error-flex":"flex-row"},null,8,["modelValue","label","help","error"])]),s("div",ne,[a(y,{id:"status",modelValue:o(e).status,"onUpdate:modelValue":t[2]||(t[2]=i=>o(e).status=i),name:"status",label:l.__("Application Status"),placeholder:l.__("Select a status of application.."),"disable-null":!0,"select-list":U},null,8,["modelValue","label","placeholder"])]),s("div",de,[q(s("textarea",{id:"description","onUpdate:modelValue":t[3]||(t[3]=i=>o(e).description=i),"aria-label":"description",name:"description",class:"mt-1 focus:ring-light-blue-500 focus:border-light-blue-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[R,o(e).description]]),a(f,{message:o(e).errors.description,class:"mt-2 text-right"},null,8,["message"])]),s("div",me,[a(d,{id:"max_submission_per_user",modelValue:o(e).max_submission_per_user,"onUpdate:modelValue":t[4]||(t[4]=i=>o(e).max_submission_per_user=i),label:l.__("Max Submission Per User"),help:l.__("How many times a user can reapply after rejection. Leave empty for no limit."),error:o(e).errors.max_submission_per_user,type:"number",name:"max_submission_per_user","help-error-flex":"flex-row"},null,8,["modelValue","label","help","error"])]),s("div",_e,[o(e).max_submission_per_user!=1?(u(),h(d,{key:0,id:"submission_cooldown_in_seconds",modelValue:o(e).submission_cooldown_in_seconds,"onUpdate:modelValue":t[5]||(t[5]=i=>o(e).submission_cooldown_in_seconds=i),label:l.__("Submission Cooldown in Seconds"),help:l.__("After how many seconds user can reapply this application. Leave empty for no cooldown."),error:o(e).errors.submission_cooldown_in_seconds,type:"number",name:"submission_cooldown_in_seconds","help-error-flex":"flex-row"},null,8,["modelValue","label","help","error"])):D("",!0)]),s("div",ue,[a(d,{id:"min_role_weight_to_view_submission",modelValue:o(e).min_role_weight_to_view_submission,"onUpdate:modelValue":t[6]||(t[6]=i=>o(e).min_role_weight_to_view_submission=i),label:l.__("Min Staff Role Weight to View Submission"),help:l.__("Leave empty to allow any staff with [view recruitment_submissions] permission to view submissions."),error:o(e).errors.min_role_weight_to_view_submission,type:"number",name:"min_role_weight_to_view_submission","help-error-flex":"flex-row"},null,8,["modelValue","label","help","error"])]),s("div",pe,[a(d,{id:"min_role_weight_to_vote_on_submission",modelValue:o(e).min_role_weight_to_vote_on_submission,"onUpdate:modelValue":t[7]||(t[7]=i=>o(e).min_role_weight_to_vote_on_submission=i),label:l.__("Min Staff Role Weight to Vote on Submission"),help:l.__("Leave empty to allow any staff with [vote recruitment_submissions] permission to vote on submissions."),error:o(e).errors.min_role_weight_to_vote_on_submission,type:"number",name:"min_role_weight_to_vote_on_submission","help-error-flex":"flex-row"},null,8,["modelValue","label","help","error"])]),s("div",fe,[a(d,{id:"min_role_weight_to_act_on_submission",modelValue:o(e).min_role_weight_to_act_on_submission,"onUpdate:modelValue":t[8]||(t[8]=i=>o(e).min_role_weight_to_act_on_submission=i),label:l.__("Min Staff Role Weight to Act on Submission"),help:l.__("Min staff role weight required to Approve/Reject on submission. Leave empty to allow any staff with [acton recruitment_submissions] permission to act on submissions."),error:o(e).errors.min_role_weight_to_act_on_submission,type:"number",name:"min_role_weight_to_act_on_submission","help-error-flex":"flex-row"},null,8,["modelValue","label","help","error"])]),s("div",ce,[s("fieldset",null,[s("div",be,[a(b,{id:"is_allow_messages_from_users",modelValue:o(e).is_allow_messages_from_users,"onUpdate:modelValue":t[9]||(t[9]=i=>o(e).is_allow_messages_from_users=i),label:l.__("Enable Messages Feature"),help:l.__("Enable messages feature for this application. User & Staff will be able to send messages."),name:"is_allow_messages_from_users"},null,8,["modelValue","label","help"])]),a(f,{message:o(e).errors.is_allow_messages_from_users,class:"mt-2"},null,8,["message"])])]),s("div",he,[s("fieldset",null,[s("div",ge,[a(b,{id:"is_notify_staff_on_submission",modelValue:o(e).is_notify_staff_on_submission,"onUpdate:modelValue":t[10]||(t[10]=i=>o(e).is_notify_staff_on_submission=i),label:l.__("Notify Staff on Event"),help:l.__("Notify staff (with view permission) when application created/withdrawn or message from user."),name:"is_notify_staff_on_submission"},null,8,["modelValue","label","help"])]),a(f,{message:o(e).errors.is_notify_staff_on_submission,class:"mt-2"},null,8,["message"])])]),s("div",ye,[s("fieldset",null,[s("div",we,[a(b,{id:"is_allow_only_player_linked_users",modelValue:o(e).is_allow_only_player_linked_users,"onUpdate:modelValue":t[11]||(t[11]=i=>o(e).is_allow_only_player_linked_users=i),label:l.__("Allow only Player Linked Users"),help:l.__("Allow only users who have linked player to their account to apply."),name:"is_allow_only_player_linked_users"},null,8,["modelValue","label","help"])]),a(f,{message:o(e).errors.is_allow_only_player_linked_users,class:"mt-2"},null,8,["message"])])]),s("div",ve,[s("fieldset",null,[s("div",xe,[a(b,{id:"is_allow_only_verified_users",modelValue:o(e).is_allow_only_verified_users,"onUpdate:modelValue":t[12]||(t[12]=i=>o(e).is_allow_only_verified_users=i),label:l.__("Allow only Verified Users"),help:l.__("Allow only verified users to apply for this application."),name:"is_allow_only_verified_users"},null,8,["modelValue","label","help"])]),a(f,{message:o(e).errors.is_allow_only_verified_users,class:"mt-2"},null,8,["message"])])]),s("div",Ve,[a(y,{id:"related_role_id",modelValue:o(e).related_role_id,"onUpdate:modelValue":t[13]||(t[13]=i=>o(e).related_role_id=i),name:"related_role_id",label:l.__("This Application is Hiring for"),placeholder:l.__("Not Applicable (None)"),"disable-null":!1,"select-list":k.roles,help:l.__("If this application is for hiring of a specific role, select the role here.")},null,8,["modelValue","label","placeholder","select-list","help"])]),s("div",ke,[s("legend",Ue,r(l.__("Fields")),1),s("div",Ae,[s("div",Fe,[t[21]||(t[21]=s("div",{class:"w-5"},null,-1)),s("label",Se,[p(r(l.__("Name"))+" ",1),t[17]||(t[17]=s("span",{class:"text-red-500"},"*",-1))]),s("label",Ce,[p(r(l.__("Type"))+" ",1),t[18]||(t[18]=s("span",{class:"text-red-500"},"*",-1))]),s("label",$e,r(l.__("Validation")),1),s("label",Ee,r(l.__("Help Text")),1),s("label",Le,[p(r(l.__("Options"))+" ",1),t[19]||(t[19]=s("span",{class:"text-red-500"},"* ",-1)),t[20]||(t[20]=s("span",{class:"text-xs text-gray-500"},"(Eg: Options1,Option2)",-1))])]),(u(!0),g(X,null,P(o(e).fields,(i,n)=>(u(),g("div",{key:n,class:"flex space-x-4"},[s("button",{type:"button",class:"focus:outline-none group",onClick:m=>S(n)},[a(K,{class:"w-5 h-5 text-gray-300 group-hover:text-red-500",name:"trash"})],8,Me),s("div",je,[a(d,{modelValue:i.label,"onUpdate:modelValue":m=>i.label=m,label:l.__("Name Field :index",{index:n+1}),error:o(e).errors[`fields.${n}.label`]||o(e).errors[`fields.${n}.name`],type:"text","help-error-flex":"flex-col",required:!0},null,8,["modelValue","onUpdate:modelValue","label","error"])]),s("div",Ne,[a(y,{modelValue:i.type,"onUpdate:modelValue":m=>i.type=m,label:l.__("Page Type"),error:o(e).errors[`fields.${n}.type`],"help-error-flex":"flex-col","select-list":Object.keys(w),required:!0},null,8,["modelValue","onUpdate:modelValue","label","error","select-list"])]),s("div",Oe,[a(d,{modelValue:i.validation,"onUpdate:modelValue":m=>i.validation=m,label:l.__("Validation Field :index",{index:n+1}),error:o(e).errors[`fields.${n}.validation`],type:"text","help-error-flex":"flex-col"},null,8,["modelValue","onUpdate:modelValue","label","error"])]),s("div",Te,[a(d,{modelValue:i.help,"onUpdate:modelValue":m=>i.help=m,label:l.__("Help Text Field :index",{index:n+1}),error:o(e).errors[`fields.${n}.help`],type:"text","help-error-flex":"flex-col"},null,8,["modelValue","onUpdate:modelValue","label","error"])]),s("div",qe,[w[i.type].hasOptions?(u(),h(d,{key:0,modelValue:i.options,"onUpdate:modelValue":m=>i.options=m,label:l.__("Options Field :index",{index:n+1}),error:o(e).errors[`fields.${n}.options`],type:"text","help-error-flex":"flex-col",required:!0},null,8,["modelValue","onUpdate:modelValue","label","error"])):(u(),g("div",Re," - "))])]))),128)),s("div",De,[s("button",{type:"button",class:"p-1.5 text-xs text-light-blue-500 rounded border border-light-blue-500 focus:outline-none hover:text-light-blue-300 hover:border-light-blue-300 transition ease-in-out duration-150",onClick:F},r(l.__("Add New Field")),1)])])])])]),s("div",Pe,[a(V,{class:"inline-flex justify-center py-2 px-4 border border-gray-200 shadow-sm text-sm font-medium rounded-md text-gray-600 bg-gray-50 hover:bg-white disabled:opacity-50 dark:bg-gray-700 dark:border-gray-700 dark:text-gray-300 dark:hover:bg-gray-600 dark:hover:border-gray-600",type:"button",onClick:t[14]||(t[14]=i=>c.value=!0)},{default:_(()=>[p(r(l.__("Preview Form")),1)]),_:1}),a(V,{loading:o(e).processing,class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-light-blue-500 hover:bg-light-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-light-blue-500 disabled:opacity-50",type:"submit"},{default:_(()=>[p(r(l.__("Create Application Form")),1)]),_:1},8,["loading"])])])],32)])])]),a(Y,{show:c.value,onClose:t[16]||(t[16]=i=>c.value=!1)},{title:_(()=>[s("h3",Xe,r(l.__("Form Preview")),1)]),content:_(()=>[a(o(B),{schema:C.value},null,8,["schema"])]),footer:_(()=>[a(z,{onClick:t[15]||(t[15]=i=>c.value=!1)},{default:_(()=>[p(r(l.__("Close")),1)]),_:1})]),_:1},8,["show"])])]),_:1})}}};export{ds as default};
