import{_ as A}from"./AdminLayout-DdnXiWbQ.js";import{u as J}from"./useAuthorizable-jSLZg7XL.js";import{u as N}from"./BaseLayout-B3-iVEMv.js";import{y as T,z as y,c as d,w as a,s as C,o as i,b as o,j as e,a as r,i as n,t as l,P as f,g as m,v as p,d as E}from"./app-D9GuHpcZ.js";import{_ as I}from"./DataTable-CargCGHc.js";import{D as _}from"./DtRowItem-ClEJpXXp.js";import{_ as $}from"./AppBreadcrumb-6YgoLuD3.js";import{_ as k}from"./index-B5if8pRS.js";import{r as B}from"./ArrowPathIcon-M-WRxqtF.js";import{r as F}from"./TrashIcon-CpTPbmZd.js";import"./CloudArrowDownIcon-COtJdbQg.js";import"./index-CybQGOSJ.js";import"./utils-D-KgF5mV.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Icon-DCyQcqwq.js";import"./useForwardPropsEmits-Ci0C5-5c.js";import"./chevron-down-BRQ4-0aA.js";import"./Teleport-Ck1GoC8n.js";import"./VisuallyHidden-bdJjphAo.js";import"./x-ChK5Vw_y.js";import"./SelectValue-D9eI7XgB.js";import"./useFormControl-C0VJqXgZ.js";import"./vue-multiselect.esm-BzlgdUyi.js";import"./XMarkIcon-CwP4vCZW.js";const R={class:"px-10 py-8 mx-auto text-foreground"},V={class:"flex justify-between mb-4"},z={class:"flex gap-2"},O={class:"px-4 py-4 text-sm font-medium text-foreground whitespace-nowrap dark:text-foreground"},P={class:"px-4 whitespace-nowrap"},S={class:"text-sm font-medium text-foreground dark:text-foreground"},U={class:"text-sm text-foreground dark:text-foreground"},q=["title"],H=["title"],L={class:"px-6 py-4 space-x-2 text-sm font-medium text-right whitespace-nowrap"},he={__name:"IndexFailedJob",props:{jobs:Object,filters:Object},setup(h){const{can:c}=J(),{__:t}=C(),{formatTimeAgoToNow:w,formatToDayDateString:g}=N(),v=[{text:t("Admin"),current:!1},{text:t("Failed Jobs"),current:!0}],j=[{key:"id",label:t("ID"),sortable:!0},{key:"uuid",label:t("UUID"),sortable:!0},{key:"job",sortable:!1,label:t("Job")},{key:"connection",sortable:!0,label:t("Connection/Queue")},{key:"exception",label:t("Exception"),sortable:!0},{key:"failed_at",sortable:!0,label:t("Failed At")},{key:"actions",label:t("Actions"),sortable:!1,class:"w-1/12 text-right"}];return(u,Q)=>{const D=T("app-head"),x=y("confirm"),b=y("tippy");return i(),d(A,null,{default:a(()=>[o(D,{title:e(t)("Failed Jobs")},null,8,["title"]),r("div",R,[r("div",V,[o($,{class:"mt-0","breadcrumb-class":"max-w-none px-0 md:px-0",items:v}),r("div",z,[e(c)("retry failed_jobs")?(i(),d(e(k),{key:0,variant:"default","as-child":""},{default:a(()=>[o(e(f),{href:u.route("admin.failed-job.retry"),method:"post"},{default:a(()=>[n(l(e(t)("Retry All Jobs")),1)]),_:1},8,["href"])]),_:1})):m("",!0),e(c)("delete failed_jobs")?(i(),d(e(k),{key:1,variant:"destructive","as-child":""},{default:a(()=>[p((i(),d(e(f),{method:"delete",as:"button",href:u.route("admin.failed-job.clear")},{default:a(()=>[n(l(e(t)("Clear All Jobs")),1)]),_:1},8,["href"])),[[x,{message:"Are you sure you want to delete all failed jobs?"}]])]),_:1})):m("",!0)])]),o(I,{class:"bg-card rounded-lg shadow",header:j,data:h.jobs,filters:h.filters},{default:a(({item:s})=>[r("td",O,l(s.id),1),o(_,{class:"text-left"},{default:a(()=>[n(l(s.uuid),1)]),_:2},1024),r("td",P,[r("div",null,[r("div",S,l(s.payload.displayName),1),r("div",U,l(e(t)("Attempts: :attempts",{attempts:s.payload.attempts})),1)])]),o(_,{class:"text-left"},{default:a(()=>[n(l(s.connection+"/"+s.queue),1)]),_:2},1024),o(_,{class:"text-left"},{default:a(()=>[r("span",{class:"truncate",title:s.exception},l(s.exception.substring(0,30)+"..."),9,q)]),_:2},1024),o(_,null,{default:a(()=>[p((i(),E("span",{title:e(g)(s.failed_at)},[n(l(e(w)(s.failed_at)),1)],8,H)),[[b]])]),_:2},1024),r("td",L,[e(c)("retry failed_jobs")?p((i(),d(e(f),{key:0,as:"button",method:"post",data:{uuid:s.uuid},href:u.route("admin.failed-job.retry"),class:"inline-flex items-center justify-center text-success-600 dark:text-success-500 hover:text-success-800 dark:hover:text-success-800",title:e(t)("Retry Job")},{default:a(()=>[o(e(B),{class:"inline-block w-5 h-5"})]),_:2},1032,["data","href","title"])),[[b]]):m("",!0),e(c)("delete failed_jobs")?p((i(),d(e(f),{key:1,as:"button",method:"DELETE",data:{uuid:s.uuid},href:u.route("admin.failed-job.clear"),class:"inline-flex items-center justify-center text-error-600 hover:text-error-900 focus:outline-none",title:e(t)("Delete Job")},{default:a(()=>[o(e(F),{class:"inline-block w-5 h-5"})]),_:2},1032,["data","href","title"])),[[x,{message:"Are you sure you want to delete this Job permanently?"}],[b]]):m("",!0)])]),_:1},8,["data","filters"])])]),_:1})}}};export{he as default};
