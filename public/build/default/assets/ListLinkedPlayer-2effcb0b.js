import{A as O,u as V}from"./AppLayout-71218cf0.js";import{I as D}from"./Icon-d882aed8.js";import{S as N,W as M}from"./viewer-90f975be.js";import{_ as R}from"./CopyToClipboard-da0e6391.js";import{_ as U}from"./_plugin-vue_export-helper-c27b6911.js";import{o as s,d as r,a as t,l as d,q as P,c as m,w as u,b as h,n as k,t as n,j as c,f as g,e as y,g as H,F as Y}from"./app-41ebb6d8.js";import"./useAuthorizable-558b6e21.js";function F(e,i){return s(),r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[t("path",{d:"M3.53 2.47a.75.75 0 00-1.06 1.06l18 18a.75.75 0 101.06-1.06l-18-18zM20.25 5.507v11.561L5.853 2.671c.15-.043.306-.075.467-.094a49.255 49.255 0 0111.36 0c1.497.174 2.57 1.46 2.57 2.93zM3.75 21V6.932l14.063 14.063L12 18.088l-7.165 3.583A.75.75 0 013.75 21z"})])}function W(e,i){return s(),r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[t("path",{"fill-rule":"evenodd",d:"M12 1.5a5.25 5.25 0 00-5.25 5.25v3a3 3 0 00-3 3v6.75a3 3 0 003 3h10.5a3 3 0 003-3v-6.75a3 3 0 00-3-3v-3c0-2.9-2.35-5.25-5.25-5.25zm3.75 8.25v-3a3.75 3.75 0 10-7.5 0v3h7.5z","clip-rule":"evenodd"})])}function q(e,i){return s(),r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[t("path",{"fill-rule":"evenodd",d:"M20.599 1.5c-.376 0-.743.111-1.055.32l-5.08 3.385a18.747 18.747 0 00-3.471 2.987 10.04 10.04 0 014.815 4.815 18.748 18.748 0 002.987-3.472l3.386-5.079A1.902 1.902 0 0020.599 1.5zm-8.3 14.025a18.76 18.76 0 001.896-1.207 8.026 8.026 0 00-4.513-4.513A18.75 18.75 0 008.475 11.7l-.278.5a5.26 5.26 0 013.601 3.602l.502-.278zM6.75 13.5A3.75 3.75 0 003 17.25a1.5 1.5 0 01-1.601 1.497.75.75 0 00-.7 1.123 5.25 5.25 0 009.8-2.62 3.75 3.75 0 00-3.75-3.75z","clip-rule":"evenodd"})])}const G={components:{Icon:D,AppLayout:O,PaintBrushIcon:q,CopyToClipboard:R,BookmarkSlashIcon:F,LockClosedIcon:W},props:{linkedPlayers:Array,maxPlayerPerUser:Number,currentLinkOtp:Object,isUnlinkingDisabled:Boolean},setup(){const{formatTimeAgoToNow:e,formatToDayDateString:i}=V();return{formatTimeAgoToNow:e,formatToDayDateString:i}},data(){var e;return{skinViewers:[],otpExpiryCountdownInterval:null,otpExpiryCountdownSeconds:(e=this.currentLinkOtp)!=null&&e.expires_at?Math.floor((new Date(this.currentLinkOtp.expires_at).getTime()-new Date().getTime())/1e3):null}},computed:{linkSlotsLeft(){return this.maxPlayerPerUser-this.linkedPlayers.length}},unmounted(){for(const e of this.skinViewers)e.dispose();clearInterval(this.otpExpiryCountdownInterval)},mounted(){for(const e of this.linkedPlayers){let i=new N({canvas:document.getElementById(`skin_container_${e.uuid}`),width:200,height:300,skin:route("player.skin.get",{uuid:e.uuid,username:e.username,textureid:e.skin_texture_id})});i.autoRotate=!0,i.animation=new M,i.animation.speed=.1,i.autoRotateSpeed=.5,this.skinViewers.push(i)}this.startOtpExpiryCountdown()},methods:{startOtpExpiryCountdown(){this.otpExpiryCountdownSeconds>0&&(this.otpExpiryCountdownInterval=setInterval(()=>{this.otpExpiryCountdownSeconds--,this.otpExpiryCountdownSeconds<=0&&clearInterval(this.otpExpiryCountdownInterval)},1e3))}}},J={class:"max-w-6xl px-2 py-3 mx-auto space-y-4 md:py-12 md:px-10"},K={class:"flex"},Q={class:"py-1"},X=t("path",{d:"M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z"},null,-1),Z=[X],$={class:"w-full"},ee={class:"font-bold"},te={key:0},oe={key:1},se={class:"flex flex-col items-center mt-2 text-sm"},ne={class:"text-gray-500 dark:text-gray-400"},re=["title","onClick"],ie={key:0},ae={key:1},le={key:0,class:"italic dark:text-gray-400 mt-4"},de={key:1},ce={class:"dark:text-gray-400 mt-4"},ue={key:0,class:"flex justify-center pt-5 pb-5 pr-10"},he={class:"italic text-red-500"},_e=["id"],pe={class:"flex flex-col space-y-2"},fe={class:"username"},me={class:"text-xs text-gray-500 dark:text-gray-400"},ye={class:"flex items-center justify-between"},ke={class:"font-bold dark:text-gray-400"},ge={class:"flex items-center space-x-2 text-sm font-extrabold text-center text-light-blue-400"},xe={key:0,class:"px-2 text-lg border-2 rounded border-light-blue-300 bg-light-blue-50 dark:bg-cool-gray-800"},we={key:1,class:"text-sm italic text-gray-500 dark:text-gray-400"},ve={class:"flex items-center justify-between"},be={class:"font-bold dark:text-gray-400"},Ce={key:1,class:"text-sm italic text-gray-500 dark:text-gray-400"},Se={class:"flex items-center justify-between"},Pe={class:"font-bold dark:text-gray-400"},Le={class:"flex items-center space-x-2"},Ie={key:0,class:"dark:text-gray-200"},Ee={key:1,class:"text-sm italic text-gray-500 dark:text-gray-400"},Be=["src","alt","title"],Te={class:"flex items-center justify-between"},je={class:"font-bold dark:text-gray-400"},ze={class:"flex items-center space-x-2"},Ae={class:"dark:text-gray-200"},Oe=["title","src","alt"],Ve={class:"flex items-center justify-between"},De={class:"font-bold dark:text-gray-400"},Ne={class:"flex items-center space-x-2"},Me=["title"],Re={class:"flex justify-end space-x-4"};function Ue(e,i,a,v,x,_){const L=d("app-head"),I=d("copy-to-clipboard"),p=d("inertia-link"),E=d("icon"),B=d("LockClosedIcon"),T=d("PaintBrushIcon"),j=d("BookmarkSlashIcon"),z=d("app-layout"),l=P("tippy"),A=P("confirm");return s(),m(z,null,{default:u(()=>{var b,C;return[h(L,{title:e.__("Your Linked Players")},null,8,["title"]),t("div",J,[t("div",{class:k(["px-4 py-3 mb-4 bg-white border-t-4 rounded-b shadow dark:bg-cool-gray-800",{"border-sky-500 text-sky-900 dark:text-sky-400":_.linkSlotsLeft>0,"border-orange-500 opacity-35 text-orange-900 dark:text-orange-400":_.linkSlotsLeft<=0}]),role:"alert"},[t("div",K,[t("div",Q,[(s(),r("svg",{class:k(["w-6 h-6 mr-4 fill-current text-light-blue-500",{"text-orange-500":_.linkSlotsLeft<=0}]),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},Z,2))]),t("div",$,[t("p",ee,[_.linkSlotsLeft>0?(s(),r("span",te,n(e.__("You can link upto :count :player to your account! ( :left available )",{count:a.maxPlayerPerUser,player:a.maxPlayerPerUser===1?e.__("player"):e.__("players"),left:_.linkSlotsLeft})),1)):(s(),r("span",oe,n(e.__("You have already linked maximum number of players to your account!")),1))]),t("div",se,[t("p",ne,n(e.__("To link a player to your account, join server and type '/link :otp' in your chat.",{otp:(b=a.currentLinkOtp)==null?void 0:b.otp})),1),t("h1",{class:k([{"line-through":x.otpExpiryCountdownSeconds<=0},"font-mono text-6xl font-extrabold tracking-widest text-center text-black dark:text-white"])},n((C=a.currentLinkOtp)==null?void 0:C.otp),3),h(I,null,{default:u(o=>{var f;return[c((s(),r("button",{title:e.__("Click to Copy"),type:"button",class:"p-2 mt-3 font-semibold text-center font-mono tracking-wider text-gray-600 transition duration-150 ease-in-out border border-gray-200 rounded w-full md:w-1/2 dark:border-gray-700 dark:text-gray-300 hover:text-light-blue-500 dark:hover:text-light-blue-400 hover:bg-light-blue-50 dark:hover:bg-cool-gray-900 hover:border-light-blue-500 dark:hover:border-cool-gray-800 focus:ring focus:ring-light-blue-200 focus:ring-opacity-50 focus:outline-none",onClick:w=>{var S;return o.copy("/link "+((S=a.currentLinkOtp)==null?void 0:S.otp))}},[o.status!=="copied"?(s(),r("span",ie,n("/link "+((f=a.currentLinkOtp)==null?void 0:f.otp)),1)):(s(),r("span",ae,n(e.__("Copied!")),1))],8,re)),[[l]])]}),_:1}),x.otpExpiryCountdownSeconds>0?(s(),r("p",le,n(e.__("This OTP will expire in :seconds seconds.",{seconds:x.otpExpiryCountdownSeconds})),1)):(s(),r("div",de,[t("p",ce,[g(n(e.__("This OTP has expired. Refresh the page to get a new OTP."))+" ",1),h(p,{as:"button",href:e.route("linked-player.list"),class:"dark:text-sky-400 dark:hover:text-sky-500 text-sky-500 hover:text-sky-700 hover:underline"},{default:u(()=>[g(n(e.__("Click here to refresh.")),1)]),_:1},8,["href"])])]))])])])],2),t("div",{class:k(["gap-4 space-y-2 md:grid md:space-y-0",a.linkedPlayers.length>1?"grid-cols-2":"grid-cols-1 place-items-center"])},[a.linkedPlayers.length<=0?(s(),r("div",ue,[t("p",he,n(e.__("No players linked to your account right now.")),1)])):y("",!0),(s(!0),r(Y,null,H(a.linkedPlayers,o=>{var f,w;return s(),r("div",{key:o.uuid,class:"flex justify-center pt-5 pb-5 pr-10 bg-white rounded shadow dark:bg-cool-gray-800"},[t("canvas",{id:`skin_container_${o.uuid}`},null,8,_e),t("div",pe,[t("div",fe,[h(p,{as:"a",href:e.route("player.show",o.uuid),class:"text-lg font-bold text-light-blue-400 hover:text-light-blue-500"},{default:u(()=>[g(n(o.username),1)]),_:2},1032,["href"]),t("p",me,n(o.uuid),1)]),t("div",ye,[t("p",ke,n(e.__("Position"))+": ",1),t("div",ge,[o.position?(s(),r("span",xe,n(o.position),1)):(s(),r("span",we,n(e.__("None")),1))])]),t("div",ve,[t("p",be,n(e.__("Rating"))+": ",1),o.rating!=null?c((s(),m(E,{key:0,class:"w-8 h-8 focus:outline-none",name:`rating-${o.rating}`,content:o.rating},null,8,["name","content"])),[[l]]):(s(),r("p",Ce,n(e.__("None")),1))]),t("div",Se,[t("p",Pe,n(e.__("Rank"))+": ",1),t("div",Le,[o.rank?(s(),r("p",Ie,n(o.rank.name),1)):(s(),r("p",Ee,n(e.__("None")),1)),o.rank&&o.rank.photo_url?c((s(),r("img",{key:2,src:o.rank.photo_url,alt:o.rank.name,title:o.rank.name,class:"max-h-12 max-w-12 focus:outline-none"},null,8,Be)),[[l]]):y("",!0)])]),t("div",Te,[t("p",je,n(e.__("Country"))+": ",1),t("div",ze,[t("p",Ae,n(o.country.name),1),c(t("img",{title:o.country.name,src:o.country.photo_path,alt:o.country.name,class:"h-8 w-8 -mt-0.5 focus:outline-none"},null,8,Oe),[[l]])])]),t("div",Ve,[t("p",De,n(e.__("Last Seen"))+": ",1),t("div",Ne,[c((s(),r("p",{class:"focus:outline-none dark:text-gray-200",title:v.formatToDayDateString(o.last_seen_at)},[g(n(v.formatTimeAgoToNow(o.last_seen_at)),1)],8,Me)),[[l]])])]),t("div",Re,[(w=(f=e.$page.props)==null?void 0:f.pluginSettings)!=null&&w.playerPasswordResetEnabled?c((s(),m(p,{key:0,as:"a",href:e.route("reset-player-password.show",{player_uuid:o.uuid}),class:"inline-flex justify-center px-4 py-2 mt-5 text-sm font-medium text-white border border-transparent rounded-md shadow-sm bg-gray-400 hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-400 disabled:opacity-50",title:e.__("Reset Password of this player.")},{default:u(()=>[h(B,{class:"w-5 h-5"})]),_:2},1032,["href","title"])),[[l]]):y("",!0),e.$page.props.playerSkinChangerEnabled?c((s(),m(p,{key:1,as:"a",href:e.route("change-player-skin.show",{player_uuid:o.uuid}),class:"inline-flex justify-center px-4 py-2 mt-5 text-sm font-medium text-white border border-transparent rounded-md shadow-sm bg-sky-400 hover:bg-sky-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-sky-400 disabled:opacity-50",title:e.__("Change Skin of this player.")},{default:u(()=>[h(T,{class:"w-5 h-5"})]),_:2},1032,["href","title"])),[[l]]):y("",!0),a.isUnlinkingDisabled?y("",!0):c((s(),m(p,{key:2,as:"button","preserve-scroll":!0,"preserve-state":!1,method:"delete",href:e.route("account-link.delete",o.uuid),class:"inline-flex justify-center px-4 py-2 mt-5 text-sm font-medium text-white bg-red-600 border border-transparent rounded-md shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50",title:e.__("Unlink this player from your account.")},{default:u(()=>[h(j,{class:"w-5 h-5"})]),_:2},1032,["href","title"])),[[l],[A,{message:e.__("Are you sure you want to unlink this player from your account?")}]])])])])}),128))],2)])]}),_:1})}const Ke=U(G,[["render",Ue]]);export{Ke as default};
