import{o as r,d as i,a as l,z as A,c as f,w as a,s as B,b as o,j as s,_ as L,v as _,P as h,t as n,i as p,g as k}from"./app-CKqa03ai.js";import{u as $}from"./BaseLayout-CbEnUUda.js";import{u as V}from"./useAuthorizable-C3hyZrBu.js";import{_ as N}from"./AdminLayout-DlC2W12Q.js";import{_ as E}from"./ServerIntelServerSelector-ECjq6It7.js";import{_ as M}from"./AppBreadcrumb-xm79qTMp.js";import{_ as R}from"./DataTable-DBKHLj0J.js";import{D as u}from"./DtRowItem-B9pg471C.js";import{m as U}from"./millify-CahAZcjU.js";import{r as I}from"./LockClosedIcon-CIbeop1y.js";import{r as O}from"./TrashIcon-D5-A_1T9.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Icon-yp24RCPW.js";import"./useForwardPropsEmits-oMML2ssv.js";import"./chevron-down-C5aVEVJv.js";import"./Teleport-BzeA4ril.js";import"./index-C1xLcZ71.js";import"./utils-D-KgF5mV.js";import"./VisuallyHidden-B8DQXMOS.js";import"./x-BvgAlvXN.js";import"./CloudArrowDownIcon-Ba9dDFea.js";import"./XSelect-BZc1JjD3.js";import"./Label-CSyFC4dL.js";import"./SelectValue-D-GmGA0M.js";import"./useFormControl-BdLrMG8I.js";import"./vue-multiselect.esm-DY0nToq7.js";import"./XMarkIcon-DHdUA9mB.js";function z(c,e){return r(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.53 16.122a3 3 0 0 0-5.78 1.128 2.25 2.25 0 0 1-2.4 2.245 4.5 4.5 0 0 0 8.4-2.245c0-.399-.078-.78-.22-1.128Zm0 0a15.998 15.998 0 0 0 3.388-1.62m-5.043-.025a15.994 15.994 0 0 1 1.622-3.395m3.42 3.42a15.995 15.995 0 0 0 4.764-4.648l3.876-5.814a1.151 1.151 0 0 0-1.597-1.597L14.146 6.32a15.996 15.996 0 0 0-4.649 4.763m3.42 3.42a6.776 6.776 0 0 0-3.42-3.42"})])}const F={class:"px-10 py-8 mx-auto space-y-4"},H={class:"flex items-center justify-between"},J={class:"px-4 py-4 text-sm font-medium text-foreground whitespace-nowrap dark:text-foreground"},Z={class:"flex items-center"},q=["content"],G=["src"],K={class:"px-4 py-4 text-sm font-medium text-foreground whitespace-nowrap dark:text-foreground"},Q={class:"flex items-center"},W={class:"flex-shrink-0 h-10 w-10"},X=["src"],Y={class:"ml-4"},ee={key:0,class:"font-extrabold text-foreground dark:text-foreground"},te={key:1,class:"text-error-500 italic"},se={key:0},re={key:1},ae={key:0},oe={key:1},le={key:0},ne={key:1},ie={class:"px-6 py-4 space-x-2 text-sm font-medium text-right whitespace-nowrap"},Me={__name:"PlayersList",props:{serverList:{type:Object},countries:{type:Array},filters:{type:Object},data:{type:Object},canResetAnyPlayerPassword:{type:Boolean},canChangeAnyPlayerSkin:{type:Boolean}},setup(c){var w,g,P;const{__:e}=B(),{can:j}=V(),{formatTimeAgoToNow:x,formatToDayDateString:b,secondsToHMS:v}=$(),y=c;let S=(g=(w=y.filters)==null?void 0:w.servers)!=null&&g.length?(P=y.filters)==null?void 0:P.servers[0]:null;const T=[{text:e("Admin"),current:!1},{text:e("Players"),current:!0},{text:y.serverList[S]??e("All Servers"),current:!0}],D=[{key:"country_id",label:e("Flag"),sortable:!0,class:"text-left",filterable:{key:"country.name",type:"multiselect",options:y.countries,searchable:!0}},{key:"player_username",label:e("Username"),sortable:!0,class:"text-left",filterable:{type:"text"}},{key:"server_play_count",label:e("Servers Played"),sortable:!0},{key:"play_time",label:e("Play Time"),sortable:!0},{key:"afk_time",label:e("Afk Time"),sortable:!0},{key:"vault_balance",label:e("Vault Money"),sortable:!0},{key:"last_join_address",label:e("Join Address"),sortable:!0,filterable:{type:"text"}},{key:"last_minecraft_version",label:e("MC Version"),sortable:!0,filterable:{type:"multiselect",options:["1.21","1.20","1.19","1.18","1.17","1.16","1.15","1.14","1.13","1.12","1.11","1.10","1.9","1.8"]}},{key:"first_seen_at",label:e("First Seen"),sortable:!0},{key:"last_seen_at",label:e("Last Seen"),sortable:!0},{key:"actions",label:e("Actions"),sortable:!1,class:"w-1/12 text-right"}];return(m,ce)=>{const d=A("tippy"),C=A("confirm");return r(),f(N,null,{default:a(()=>[o(L,{title:s(e)("Players - PlayerIntel")},null,8,["title"]),l("div",F,[l("div",H,[o(M,{class:"mt-0","breadcrumb-class":"max-w-none px-0 md:px-0",items:T}),o(E,{"server-list":c.serverList,filters:c.filters},null,8,["server-list","filters"])]),l("div",null,[o(R,{class:"bg-card rounded-lg shadow",header:D,data:c.data,filters:c.filters},{default:a(({item:t})=>[l("td",J,[l("div",Z,[_((r(),i("div",{class:"flex-shrink-0 h-10 w-10 focus:outline-none",content:t.country.name},[l("img",{class:"h-10 w-10",src:t.country.photo_path,alt:""},null,8,G)],8,q)),[[d]])])]),l("td",K,[l("div",Q,[l("div",W,[l("img",{class:"h-10 w-10",src:t.player.avatar_url,alt:""},null,8,X)]),l("div",Y,[_((r(),f(s(h),{as:"a",href:m.route("player.show",t.player.uuid),class:"text-sm font-medium text-foreground dark:text-foreground focus:outline-none cursor-pointer hover:underline",content:t.player.uuid},{default:a(()=>[t.player_username?(r(),i("span",ee,n(t.player_username),1)):(r(),i("span",te,n(s(e)("Unknown")),1))]),_:2},1032,["href","content"])),[[d]])])])]),o(u,null,{default:a(()=>[p(n(t.server_play_count)+" "+n(s(e)("servers")),1)]),_:2},1024),o(u,null,{default:a(()=>[t.play_time?(r(),i("span",se,n(s(v)(t.play_time,!0)),1)):(r(),i("span",re," -- "))]),_:2},1024),o(u,null,{default:a(()=>[t.afk_time?(r(),i("span",ae,n(s(v)(t.afk_time,!0)),1)):(r(),i("span",oe," -- "))]),_:2},1024),o(u,null,{default:a(()=>[t.vault_balance?(r(),i("span",le,n(s(U)(t.vault_balance,{precision:2})),1)):(r(),i("span",ne," -- "))]),_:2},1024),o(u,null,{default:a(()=>[p(n(t.last_join_address||s(e)("Unknown")),1)]),_:2},1024),o(u,null,{default:a(()=>[p(n(t.last_minecraft_version||s(e)("Unknown")),1)]),_:2},1024),_((r(),f(u,{content:s(b)(t.first_seen_at)},{default:a(()=>[p(n(s(x)(t.first_seen_at)),1)]),_:2},1032,["content"])),[[d]]),_((r(),f(u,{content:s(b)(t.last_seen_at)},{default:a(()=>[p(n(s(x)(t.last_seen_at)),1)]),_:2},1032,["content"])),[[d]]),l("td",ie,[c.canChangeAnyPlayerSkin?_((r(),f(s(h),{key:0,as:"a",href:m.route("change-player-skin.show",{player_uuid:t.player.uuid}),class:"inline-flex items-center justify-center text-primary hover:text-primary focus:outline-none",title:s(e)("Change Skin of this player.")},{default:a(()=>[o(s(z),{class:"w-5 h-5"})]),_:2},1032,["href","title"])),[[d]]):k("",!0),c.canResetAnyPlayerPassword?_((r(),f(s(h),{key:1,as:"a",href:m.route("reset-player-password.show",{player_uuid:t.player.uuid}),class:"inline-flex items-center justify-center text-foreground hover:text-foreground dark:text-foreground dark:hover:text-foreground focus:outline-none",title:s(e)("Change Password of this player.")},{default:a(()=>[o(s(I),{class:"w-5 h-5"})]),_:2},1032,["href","title"])),[[d]]):k("",!0),s(j)("delete players")?_((r(),f(s(h),{key:2,as:"button",method:"DELETE",href:m.route("admin.intel.player.delete",t.player.uuid),class:"inline-flex items-center justify-center text-error-600 hover:text-error-900 focus:outline-none",title:s(e)("Delete Player")},{default:a(()=>[o(s(O),{class:"inline-block w-5 h-5"})]),_:2},1032,["href","title"])),[[C,{message:"This action will delete this player stats and unlink account if linked. Are you sure?"}],[d]]):k("",!0)])]),_:1},8,["data","filters"])])])]),_:1})}}};export{Me as default};
