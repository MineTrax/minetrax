import{_ as T}from"./AppLayout-DmSILS6s.js";import{S as z}from"./ServerStatusBox-Cg2XkJjm.js";import{S as E}from"./ShoutBox-s0s6wlwy.js";import{R as x,E as H,e as y,y as v,c as g,w as n,s as N,o as c,b as r,a as s,i as F,t as u,g as p,d as k,j as m,D as O,n as J,k as K}from"./app-Ia0bJDXi.js";import{u as P}from"./useFormKit-DsPcY36i.js";import{_ as V}from"./AlertCard-DZGSGYW7.js";import{_ as Y}from"./AppBreadcrumb-D-yy1VJY.js";import"./BaseLayout-CyMXUReW.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Icon-BR_JXAZL.js";import"./useForwardPropsEmits-WVrHBpLe.js";import"./chevron-down-CtjWoryU.js";import"./Teleport-DSkR7jkG.js";import"./index-5qxomotu.js";import"./utils-D-KgF5mV.js";import"./VisuallyHidden-Cc6JWPqo.js";import"./x-BUMdF8YT.js";import"./useAuthorizable-Buizf3Yh.js";import"./Card-xSJBqBdx.js";import"./CardContent-CE_SpfjF.js";import"./CopyToClipboard-o78WAkIw.js";import"./index-Bf3skjKm.js";import"./LoadingSpinner-r7xua1a_.js";import"./Input-D1sNIaQE.js";import"./Skeleton-B1qyjnai.js";import"./XMarkIcon-aRZJoNuL.js";const A={class:"py-4 px-2 md:px-10 max-w-screen-2xl mx-auto"},D={class:"flex flex-col md:flex-row md:space-x-4"},I={class:"md:w-9/12 flex-1"},M={class:"min-w-full"},$={class:"bg-card text-card-foreground border rounded-lg shadow p-4 md:p-6"},j={class:"font-bold text-4xl text-foreground mb-5"},L=["innerHTML"],U={key:1,class:"text-xs text-muted-foreground text-right"},vt={__name:"ShowCustomForm",props:{customForm:{type:Object},currentUserCanSubmit:{type:Boolean}},setup(o){const{__:t}=N(),e=o,S=P().generateSchemaFromFieldsArray(e.customForm.fields),f=x().props.generalSettings.enable_sticky_header_menu,w=[{text:t("Home"),url:route("home"),current:!1},{text:t("Forms"),url:route("custom-form.index"),current:!1},{text:H.truncate(e.customForm.title,{length:50}),current:!0}],B=async i=>{await C(i)},C=i=>new Promise((h,l)=>{K({...i}).post(route("custom-form.submit",e.customForm.slug),{onSuccess:d=>{h(d)},onError:d=>{l(d)}})}),a=y(()=>e.customForm.status.value!=="active"||!e.currentUserCanSubmit),b=y(()=>a.value?e.customForm.status.value==="disabled"?{title:t("Oh Jeez! This form is currently disabled."),body:t("It seems the form is no longer accepting submissions. Please check back later.")}:e.customForm.status.value!=="active"?{title:t("Oh Jeez! This form is not active."),body:t("It seems the form is not active yet. Please check back later.")}:["auth","staff"].includes(e.customForm.can_create_submission)&&!x().props.auth.user?{title:t("Oh Jeez! You need to be logged in to submit this form."),body:t("Please login and try again.")}:{title:t("Oh Jeez! You have already submitted this form."),body:t("You have already submitted this form maximum number of times allowed.")}:{title:null,body:null});return(i,h)=>{const l=v("AppHead"),_=v("FormKit");return c(),g(T,null,{default:n(()=>[r(l,{title:o.customForm.title},null,8,["title"]),r(Y,{items:w}),s("div",A,[s("div",D,[s("div",I,[a.value?(c(),g(V,{key:0,"text-color":"text-orange-800 dark:text-orange-500","border-color":"border-orange-500"},{body:n(()=>[F(u(b.value.body),1)]),default:n(()=>[F(u(b.value.title)+" ",1)]),_:1})):p("",!0),s("div",M,[s("div",$,[s("h1",j,u(o.customForm.title),1),o.customForm.description?(c(),k("div",{key:0,class:"prose dark:prose-invert max-w-none mb-6 pb-6 border-b border-border",innerHTML:o.customForm.description_html},null,8,L)):p("",!0),r(_,{disabled:a.value,type:"form",onSubmit:B},{default:n(()=>[r(m(O),{schema:m(S)},null,8,["schema"])]),_:1},8,["disabled"]),!a.value&&o.customForm.max_submission_per_user?(c(),k("p",U,u(m(t)("You can submit this form only :count times.",{count:o.customForm.max_submission_per_user})),1)):p("",!0)])])]),s("div",{class:J(["hidden md:flex flex-col md:w-3/12 flex-none space-y-4 sticky",{"top-16":m(f),"top-5":!m(f)}])},[r(z),r(E)],2)])])]),_:1})}}};export{vt as default};
