import{_ as B}from"./Card-rlQgMSQR.js";import{_ as Q}from"./CardContent-r4Z7iLTW.js";import{_ as I}from"./CopyToClipboard-o78WAkIw.js";import{_ as y}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{o as t,d,r as V,y as l,z,c as u,w as c,b as g,a as n,t as o,g as p,i as m,v as E}from"./app-U7F8fpli.js";import{_ as N}from"./index-BIDzpq-S.js";const j={name:"ErrorMessage"},D={class:"bg-destructive/5 border border-destructive rounded mt-2 p-1 text-center text-destructive"};function M(e,r,a,C,s,f){return t(),d("div",D,[V(e.$slots,"default")])}const O=y(j,[["render",M]]),T={components:{ErrorMessage:O,CopyToClipboard:I,Card:B,CardContent:Q,Button:N},props:{server:Object},data(){return{serverInfo:Object,loading:!0,error:null,interval:null}},computed:{enabled(){return this.$page.props.generalSettings.enable_mcserver_statuspingbox?!!(this.server||this.$page.props.defaultQueryServer.server):!1}},created(){this.enabled&&(this.getServerQuery(),this.interval=setInterval(()=>this.getServerQuery(),1e4))},unmounted(){clearInterval(this.interval)},methods:{getServerQuery(){let e=this.server;e||(e=this.$page.props.defaultQueryServer.server),axios.get(route("server.ping.get",e.id)).then(r=>{this.serverInfo=r.data,this.error=null}).catch(r=>{this.error=r.response.data.message||r.message,this.serverInfo=null}).finally(()=>{this.loading=!1})}}},A={class:"font-extrabold text-card-foreground"},H={key:0,class:"flex p-4 justify-center"},J={key:2,class:"flex flex-col"},P={class:"mt-3 text-card-foreground text-center font-semibold"},q={class:"font-bold text-primary"},F={key:0},G={key:1};function K(e,r,a,C,s,f){const b=l("error-message"),x=l("Button"),k=l("copy-to-clipboard"),S=l("CardContent"),w=l("Card"),$=z("tippy");return f.enabled?(t(),u(w,{key:0},{default:c(()=>[g(S,{class:"p-3 sm:px-5 break-words"},{default:c(()=>[n("h3",A,o(e.__("Server Status")),1),s.loading?(t(),d("div",H,r[0]||(r[0]=[n("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-primary",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[n("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),n("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):p("",!0),s.error?(t(),u(b,{key:1},{default:c(()=>[m(o(s.error),1)]),_:1})):p("",!0),!s.loading&&!s.error?(t(),d("div",J,[n("div",P,[m(o(e.__("Join"))+" ",1),n("span",q,o(s.serverInfo.players.online),1),m(" "+o(e.__("Online Players"))+"! ",1)]),g(k,null,{default:c(v=>[E((t(),u(x,{class:"mt-3 font-extrabold",size:"lg",title:e.__("Click to Copy"),type:"button",onClick:_=>{var i,h;return v.copy(a.server?a.server.hostname:(h=(i=e.$page.props.defaultQueryServer)==null?void 0:i.server)==null?void 0:h.hostname)}},{default:c(()=>{var _,i;return[v.status!=="copied"?(t(),d("span",F,o(a.server?a.server.hostname:(i=(_=e.$page.props.defaultQueryServer)==null?void 0:_.server)==null?void 0:i.hostname),1)):(t(),d("span",G,o(e.__("Copied!")),1))]}),_:2},1032,["title","onClick"])),[[$]])]),_:1})])):p("",!0)]),_:1})]),_:1})):p("",!0)}const Z=y(T,[["render",K]]);export{O as E,Z as S};
