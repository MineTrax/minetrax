import{o as a,d as g,a as t,e as O,h as q,k as E,y as C,z as $,c as m,w as r,s as I,b as n,j as e,_ as L,t as o,i as l,v as h,g as c,G as R,E as M,D as N}from"./app-CKqa03ai.js";import{u as P}from"./BaseLayout-CbEnUUda.js";import{_ as K}from"./AdminLayout-DlC2W12Q.js";import{_ as U}from"./AppBreadcrumb-xm79qTMp.js";import{u as H}from"./useFormKit-DsPcY36i.js";import{_ as G}from"./RecruitmentMessagesBox-ByCW_U2j.js";import{_ as D}from"./CommonStatusBadge-BXJQnLHj.js";import{_ as Z,a as J,b as Q,c as W,d as X}from"./DialogTitle-CaVHgJo9.js";import{_ as x}from"./index-s8bxsPUj.js";import{_ as Y}from"./XTextarea-Bc4VxUFY.js";import{L as ee}from"./LoadingButton-BhRjI4uL.js";import{I as y}from"./Icon-yp24RCPW.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useForwardPropsEmits-oMML2ssv.js";import"./chevron-down-C5aVEVJv.js";import"./Teleport-BzeA4ril.js";import"./index-C1xLcZ71.js";import"./utils-D-KgF5mV.js";import"./VisuallyHidden-B8DQXMOS.js";import"./x-BvgAlvXN.js";import"./useAuthorizable-C3hyZrBu.js";import"./CloudArrowDownIcon-Ba9dDFea.js";import"./LoadingSpinner-COkJzwCk.js";import"./UserDisplayname-yp7YpyW7.js";import"./AlertCard-zBiHF3s2.js";import"./Card-JiHMqSLw.js";import"./CardContent-BTTmHOnn.js";import"./XMarkIcon-DHdUA9mB.js";import"./Textarea-DjMvwZ4z.js";import"./Label-CSyFC4dL.js";import"./loader-circle-u9Iipotc.js";function T(s,i){return a(),g("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m11.25 9-3 3m0 0 3 3m-3-3h7.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}const te={class:"px-10 py-8 mx-auto max-w-screen-2xl space-y-4"},se={class:"flex items-center justify-between"},ie={class:"flex justify-between items-center"},ne={class:"font-bold text-xl text-foreground dark:text-foreground flex items-center"},oe={class:"mr-3"},re={class:"flex gap-2"},ae={class:"flex flex-col md:flex-row gap-4"},le={class:"md:w-1/2 space-y-4"},ue={class:"bg-card text-card-foreground border rounded-lg shadow p-4"},de={class:"flex flex-col mt-3"},me={class:"inline-flex items-center px-4 py-3 -mt-px text-sm font-semibold text-foreground gap-x-2 first:rounded-t-lg first:mt-0 last:rounded-b-lg dark:text-foreground"},ce={class:"flex items-center justify-between w-full"},fe={class:"flex-shrink-0 h-10 w-10 mr-2"},be=["src"],xe={class:"flex-col"},he={class:"text-sm text-muted-foreground"},pe={class:"inline-flex items-center px-4 py-3 -mt-px text-sm font-semibold text-foreground gap-x-2 first:rounded-t-lg first:mt-0 last:rounded-b-lg dark:text-foreground"},ge={class:"flex items-center justify-between w-full"},_e={class:"inline-flex items-center px-4 py-3 -mt-px text-sm font-semibold text-foreground gap-x-2 first:rounded-t-lg first:mt-0 last:rounded-b-lg dark:text-foreground"},ve={class:"flex items-center justify-between w-full"},we=["title"],ye={class:"inline-flex items-center px-4 py-3 -mt-px text-sm font-semibold text-foreground gap-x-2 first:rounded-t-lg first:mt-0 last:rounded-b-lg dark:text-foreground"},ke={class:"flex items-center justify-between w-full"},je=["title"],Se={class:"inline-flex items-center px-4 py-3 -mt-px text-sm font-semibold text-foreground gap-x-2 first:rounded-t-lg first:mt-0 last:rounded-b-lg dark:text-foreground"},Ae={class:"flex items-center justify-between w-full"},Ce={key:0,class:"inline-flex items-center px-4 py-3 -mt-px text-sm font-semibold text-foreground gap-x-2 first:rounded-t-lg first:mt-0 last:rounded-b-lg dark:text-foreground"},$e={class:"flex items-center justify-between w-full"},Re={class:"w-1/2 whitespace-pre-line text-right"},De={key:1,class:"inline-flex items-center px-4 py-3 -mt-px text-sm font-semibold text-foreground gap-x-2 first:rounded-t-lg first:mt-0 last:rounded-b-lg dark:text-foreground"},Te={class:"flex items-center justify-between w-full"},ze={class:"flex-shrink-0 h-10 w-10 mr-2"},Be=["src"],Fe={class:"flex-col"},Ve={class:"text-sm text-muted-foreground"},Oe={key:0,class:"flex justify-end mt-4 pt-4 border-t border-border space-x-2"},qe={class:"bg-card text-card-foreground border rounded-lg shadow overflow-hidden"},Ee={class:"md:w-1/2"},Ie={class:"bg-card text-card-foreground border rounded-lg shadow p-4 md:p-6 no-disabled-effect"},Le={class:"font-extrabold text-lg mb-4"},Me={class:"grid gap-4 py-4"},_t={__name:"ShowRecruitmentSubmission",props:{submission:{type:Object}},setup(s){const{__:i}=I(),{formatTimeAgoToNow:k,formatToDayDateString:j}=P(),w=s,z=O(()=>w.submission.data.map(u=>({...u,value:u.data}))),B=H().generateSchemaFromFieldsArray(z.value,!0),_=q(!1),v=E({action:"rejected",reason:""}),S=["approved","rejected","withdrawn"].includes(w.submission.status.value),F=[{text:i("Admin"),current:!1},{text:i("Applications"),url:route("admin.recruitment.index"),current:!1},{text:i(S?"Closed Requests":"Open Requests"),url:S?route("admin.recruitment-submission.index-closed"):route("admin.recruitment-submission.index-open"),current:!1},{text:i("Submission #")+w.submission.id,current:!0}];return(u,d)=>{const f=C("InertiaLink"),V=C("FormKit"),A=$("confirm"),p=$("tippy");return a(),m(K,null,{default:r(()=>[n(L,{title:e(i)(":user application for :recruitmenttitle #:index - Applications",{user:s.submission.user.name,index:s.submission.id,recruitmenttitle:s.submission.recruitment.title})},null,8,["title"]),t("div",te,[t("div",se,[n(U,{class:"mt-0","breadcrumb-class":"max-w-none px-0 md:px-0",items:F})]),t("div",ie,[t("h1",ne,[t("span",oe,o(e(i)(":user application for :recruitmenttitle #:index",{user:s.submission.user.name,index:s.submission.id,recruitmenttitle:s.submission.recruitment.title})),1),n(D,{status:s.submission.status.value},null,8,["status"])]),t("div",re,[n(e(x),{variant:"secondary",size:"sm","as-child":""},{default:r(()=>[n(f,{href:u.route("admin.recruitment-submission.index-open")},{default:r(()=>[n(e(T),{class:"h-4"}),l(" "+o(e(i)("Open Requests")),1)]),_:1},8,["href"])]),_:1}),n(e(x),{variant:"secondary",size:"sm","as-child":""},{default:r(()=>[n(f,{href:u.route("admin.recruitment-submission.index-closed")},{default:r(()=>[n(e(T),{class:"h-4"}),l(" "+o(e(i)("Closed Requests")),1)]),_:1},8,["href"])]),_:1}),s.submission.i_can_delete?(a(),m(e(x),{key:0,variant:"destructive",size:"sm","as-child":""},{default:r(()=>[h((a(),m(f,{as:"button",method:"DELETE",href:u.route("admin.recruitment-submission.delete",s.submission.id)},{default:r(()=>[l(o(e(i)("Delete")),1)]),_:1},8,["href"])),[[A,{message:"Delete this Submission? This action cannot be undone."}],[p]])]),_:1})):c("",!0)])]),t("div",ae,[t("div",le,[t("div",ue,[t("ul",de,[t("li",me,[t("div",ce,[t("span",null,o(e(i)("Applicant")),1),t("div",null,[n(f,{href:u.route("user.public.get",s.submission.user.username),class:"flex items-center"},{default:r(()=>[t("div",fe,[t("img",{class:"h-10 w-10 rounded-full",src:s.submission.user.profile_photo_url,alt:"Avatar"},null,8,be)]),t("div",xe,[t("div",{class:"text-sm font-semibold text-foreground dark:text-foreground whitespace-nowrap truncate",style:R([s.submission.user.roles[0].color?{color:s.submission.user.roles[0].color}:null])},[l(o(s.submission.user.name)+" ",1),s.submission.user.verified_at?h((a(),m(y,{key:0,name:"verified-check-fill",title:e(i)("Verified Account"),class:"inline mb-1 fill-current focus:outline-none text-primary w-5 h-5"},null,8,["title"])),[[p]]):c("",!0),s.submission.user.is_staff?h((a(),m(y,{key:1,name:"shield-check-fill",title:e(i)("Staff Member"),class:"inline mb-1 text-amber-400 fill-current focus:outline-none w-5 h-5"},null,8,["title"])),[[p]]):c("",!0),s.submission.user.muted_at?h((a(),m(y,{key:2,name:"volume-off-fill",title:e(i)("Muted User"),class:"inline mb-1 text-destructive fill-current focus:outline-none w-5 h-5"},null,8,["title"])),[[p]]):c("",!0)],4),t("div",he," @"+o(s.submission.user.username),1)])]),_:1},8,["href"])])])]),t("li",pe,[t("div",ge,[t("span",null,o(e(i)("Application")),1),t("span",null,o(s.submission.recruitment.title),1)])]),t("li",_e,[t("div",ve,[t("span",null,o(e(i)("Created At")),1),h((a(),g("span",{title:e(k)(s.submission.created_at)},[l(o(e(j)(s.submission.created_at)),1)],8,we)),[[p]])])]),t("li",ye,[t("div",ke,[t("span",null,o(e(i)("Last Updated At")),1),h((a(),g("span",{title:e(k)(s.submission.updated_at)},[l(o(e(j)(s.submission.updated_at)),1)],8,je)),[[p]])])]),t("li",Se,[t("div",Ae,[t("span",null,o(e(i)("Request Status")),1),n(D,{status:s.submission.status.value},null,8,["status"])])]),s.submission.last_act_reason?(a(),g("li",Ce,[t("div",$e,[t("span",null,o(e(i)("Reason")),1),t("span",Re,o(s.submission.last_act_reason),1)])])):c("",!0),s.submission.last_act_by?(a(),g("li",De,[t("div",Te,[t("span",null,o(e(i)("Marked :status By",{status:e(M.startCase)(s.submission.status.value)})),1),t("span",null,[n(f,{href:u.route("user.public.get",s.submission.last_actor.username),class:"flex items-center"},{default:r(()=>{var b;return[t("div",ze,[t("img",{class:"h-10 w-10 rounded-full",src:s.submission.last_actor.profile_photo_url,alt:"Avatar"},null,8,Be)]),t("div",Fe,[t("div",{class:"text-sm font-semibold text-foreground dark:text-foreground whitespace-nowrap truncate",style:R([(b=s.submission.last_actor.roles[0])!=null&&b.color?{color:s.submission.last_actor.roles[0].color}:null])},o(s.submission.last_actor.name),5),t("div",Ve," @"+o(s.submission.last_actor.username),1)])]}),_:1},8,["href"])])])])):c("",!0)]),s.submission.i_can_act?(a(),g("div",Oe,[["pending","onhold"].includes(s.submission.status.value)?(a(),m(e(x),{key:0,size:"sm","as-child":""},{default:r(()=>[n(f,{as:"button",method:"POST",href:u.route("admin.recruitment-submission.act",s.submission.id),data:{action:"inprogress"}},{default:r(()=>[l(o(e(i)("Mark In-Progress")),1)]),_:1},8,["href"])]),_:1})):c("",!0),s.submission.status.value!="onhold"?(a(),m(e(x),{key:1,variant:"outline",size:"sm","as-child":""},{default:r(()=>[n(f,{as:"button",method:"POST",href:u.route("admin.recruitment-submission.act",s.submission.id),data:{action:"onhold"}},{default:r(()=>[l(o(e(i)("Mark On-Hold")),1)]),_:1},8,["href"])]),_:1})):c("",!0),n(e(x),{size:"sm",class:"bg-success-500 text-white hover:bg-success-600","as-child":""},{default:r(()=>[h((a(),m(f,{as:"button",method:"POST",href:u.route("admin.recruitment-submission.act",s.submission.id),data:{action:"approved"}},{default:r(()=>[l(o(e(i)("Approve")),1)]),_:1},8,["href"])),[[A,{title:"Approve",confirmButtonColor:"green",icon:"success",message:"Approve this request? This action cannot be undone."}]])]),_:1}),n(e(x),{variant:"destructive",size:"sm",onClick:d[0]||(d[0]=b=>_.value=!0)},{default:r(()=>[l(o(e(i)("Reject")),1)]),_:1})])):c("",!0)]),t("div",qe,[n(G,{submission:s.submission,"for-admin":!0},null,8,["submission"])])]),t("div",Ee,[t("div",Ie,[t("h3",Le,o(e(i)("Submission Details")),1),n(V,{disabled:!0,type:"form","submit-attrs":{inputClass:"hidden"}},{default:r(()=>[n(e(N),{schema:e(B)},null,8,["schema"])]),_:1})])])])]),n(e(X),{open:_.value,"onUpdate:open":d[4]||(d[4]=b=>_.value=b)},{default:r(()=>[n(e(Z),{class:"sm:max-w-[500px]"},{default:r(()=>[n(e(J),null,{default:r(()=>[n(e(Q),null,{default:r(()=>[l(o(e(i)("Reject Application")),1)]),_:1})]),_:1}),t("div",Me,[n(Y,{modelValue:e(v).reason,"onUpdate:modelValue":d[1]||(d[1]=b=>e(v).reason=b),label:e(i)("Reason for Rejection"),placeholder:e(i)("Please provide a reason for rejecting this application."),error:e(v).errors.reason},null,8,["modelValue","label","placeholder","error"])]),n(e(W),null,{default:r(()=>[n(e(x),{variant:"outline",class:"mr-2",onClick:d[2]||(d[2]=b=>_.value=!1)},{default:r(()=>[l(o(e(i)("Cancel")),1)]),_:1}),n(ee,{variant:"destructive",loading:e(v).processing,class:"px-4 py-2",onClick:d[3]||(d[3]=()=>{e(v).post(u.route("admin.recruitment-submission.act",s.submission.id),{onSuccess:()=>{_.value=!1}})})},{default:r(()=>[l(o(e(i)("Reject")),1)]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["open"])]),_:1})}}};export{_t as default};
