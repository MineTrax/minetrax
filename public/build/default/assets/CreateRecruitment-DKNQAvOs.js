import{k as $,h as j,e as L,C as N,y as v,c as h,w as _,o as c,b as i,a as e,t as a,f as E,j as l,g as O,i as u,d as T,D as q,E as M}from"./app-Ia0bJDXi.js";import{_ as p}from"./InputError-CrsOt3pL.js";import{L as y}from"./LoadingButton-BaSTJi40.js";import{_ as d}from"./XInput-Bx6aykrQ.js";import{_ as g}from"./XSelect-CAfXjSv2.js";import{X as b}from"./XCheckbox-B_2kuuTU.js";import{_ as R}from"./AdminLayout-CJ_PtlCd.js";import{I as D}from"./Icon-BR_JXAZL.js";import{a as B}from"./DialogModal-9zu0aEO6.js";import{_ as P}from"./SecondaryButton-rrbjePsD.js";import{u as H}from"./useFormKit-DsPcY36i.js";import{D as W}from"./vuedraggable.umd-CyzKgORJ.js";import{_ as I}from"./TipTapEditor-DhY4UlE2.js";import{r as K}from"./ArrowsUpDownIcon-B3QXI-TK.js";import"./index-Bf3skjKm.js";import"./index-5qxomotu.js";import"./utils-D-KgF5mV.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./loader-circle-DT0Cqvha.js";import"./Input-D1sNIaQE.js";import"./Label-DZbOjpU-.js";import"./SelectValue-CsA2ftb2.js";import"./useForwardPropsEmits-WVrHBpLe.js";import"./Teleport-DSkR7jkG.js";import"./chevron-down-CtjWoryU.js";import"./VisuallyHidden-Cc6JWPqo.js";import"./useFormControl-D3_NwxXr.js";import"./useAuthorizable-Buizf3Yh.js";import"./CloudArrowDownIcon-vObJWmJX.js";import"./BaseLayout-CyMXUReW.js";import"./x-BUMdF8YT.js";const X={class:"py-12 px-10 max-w-7xl mx-auto"},Y={class:"flex justify-between mb-8"},z={class:"font-bold text-3xl text-foreground dark:text-foreground"},G={class:"mt-10 sm:mt-0"},J={class:"md:grid md:grid-cols-6 md:gap-6"},Q={class:"mt-5 md:mt-0 md:col-span-6"},Z={class:"shadow overflow-hidden sm:rounded-md"},ee={class:"px-4 py-5 bg-white dark:bg-surface-800 sm:p-6"},oe={class:"grid grid-cols-6 gap-4"},se={class:"col-span-6 sm:col-span-6"},le={class:"col-span-6 sm:col-span-6"},te={class:"col-span-6 sm:col-span-6"},re={class:"col-span-6 sm:col-span-6"},ie={class:"col-span-6 sm:col-span-3"},ae={class:"col-span-6 sm:col-span-3"},ne={class:"col-span-6 sm:col-span-3"},de={class:"col-span-6 sm:col-span-3"},me={class:"col-span-6 sm:col-span-6"},_e={class:"flex items-center col-span-6 sm:col-span-3"},ue={class:"mt-4 flex space-x-4"},pe={class:"flex items-center col-span-6 sm:col-span-3"},fe={class:"mt-4 flex space-x-4"},ce={class:"flex items-center col-span-6 sm:col-span-3"},be={class:"mt-4 flex space-x-4"},he={class:"flex items-center col-span-6 sm:col-span-3"},ge={class:"mt-4 flex space-x-4"},we={class:"col-span-6 sm:col-span-3"},ve={class:"flex-col col-span-6 space-y-1 sm:col-span-6"},ye={class:"text-base font-medium text-foreground dark:text-foreground"},xe={class:"w-full space-y-1"},Ve={class:"flex space-x-4"},ke={class:"flex-1 block text-sm font-medium text-foreground dark:text-foreground"},Ue={class:"flex-1 block text-sm font-medium text-foreground dark:text-foreground"},Ae={class:"flex-1 block text-sm font-medium text-foreground dark:text-foreground"},Fe={class:"flex-1 block text-sm font-medium text-foreground dark:text-foreground"},Se={class:"flex-1 block text-sm font-medium text-foreground dark:text-foreground"},Ce={class:"flex space-x-4 items-start"},$e={class:"drag-handle cursor-move mt-6"},je=["onClick"],Le={class:"flex-1"},Ne={class:"flex-1"},Ee={class:"flex-1"},Oe={class:"flex-1"},Te={class:"flex-1"},qe={key:1,class:"h-full text-foreground text-lg font-semibold dark:text-foreground w-full flex items-center justify-center"},Me={class:"flex justify-end mt-1"},Re={class:"px-4 py-3 bg-surface-50 dark:bg-surface-800 sm:px-6 flex justify-between gap-2"},De={class:"text-lg font-bold"},wo={__name:"CreateRecruitment",props:{roles:{type:Array,required:!0}},setup(x){const V={draft:"Draft - Application is under development and not visible to users",active:"Active - Application is actively accepting submissions",disabled:"Disabled - Application is disabled for new submissions",archived:"Archived - Application is archived and not visible to users"},w={text:{},textarea:{},select:{hasOptions:!0},multiselect:{hasOptions:!0},radio:{hasOptions:!0},checkbox:{},email:{},number:{},password:{},tel:{},url:{},week:{},month:{},time:{},date:{},"datetime-local":{}},o=$({title:"",slug:"",status:"draft",description:"",max_submission_per_user:null,submission_cooldown_in_seconds:null,is_allow_only_player_linked_users:!1,is_allow_only_verified_users:!1,is_allow_messages_from_users:!0,min_role_weight_to_view_submission:null,min_role_weight_to_vote_on_submission:null,min_role_weight_to_act_on_submission:null,is_notify_staff_on_submission:!0,related_role_id:null,fields:[{type:"number",label:"Years of Experience",name:"experience",placeholder:null,help:null,validation:"required|number",options:null},{type:"textarea",label:"Tell us about yourself",name:"aboutme",placeholder:null,help:"Write about your experience, skills, and why you want to join us.",validation:"required|string",options:null}]}),k=()=>{o.fields.map(s=>{s.name=s.label.toLowerCase().replace(/ /g,"_")}),o.post(route("admin.recruitment.store"),{})};function U(){o.fields.push({type:"text",label:"",name:"",validation:"required"})}function A(s){o.fields.length!==1&&o.fields.splice(s,1)}const f=j(!1),F=L(()=>H().generateSchemaFromFieldsArray(o.fields));return N(()=>o.title,s=>{o.slug=M.kebabCase(s)}),(s,t)=>{const S=v("app-head"),C=v("inertia-link");return c(),h(R,null,{default:_(()=>[i(S,{title:"Create Application Form"}),e("div",X,[e("div",Y,[e("h1",z,a(s.__("Create Application Form")),1),i(C,{href:s.route("admin.recruitment.index"),class:"inline-flex items-center px-4 py-2 bg-surface-400 dark:bg-surface-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-surface-500 active:bg-surface-600 focus:outline-none focus:border-foreground focus:shadow-outline-gray transition ease-in-out duration-150"},{default:_(()=>[e("span",null,a(s.__("Cancel")),1)]),_:1},8,["href"])]),e("div",G,[e("div",J,[e("div",Q,[e("form",{onSubmit:E(k,["prevent"])},[e("div",Z,[e("div",ee,[e("div",oe,[e("div",se,[i(d,{id:"title",modelValue:l(o).title,"onUpdate:modelValue":t[0]||(t[0]=r=>l(o).title=r),label:s.__("Title of this Application"),help:s.__("Eg: Apply to be a Staff Member"),error:l(o).errors.title,type:"text",name:"title","help-error-flex":"flex-row"},null,8,["modelValue","label","help","error"])]),e("div",le,[i(d,{id:"slug",modelValue:l(o).slug,"onUpdate:modelValue":t[1]||(t[1]=r=>l(o).slug=r),label:s.__("Application Slug for URL"),help:s.__("Only alphabet, number and dashes. Eg: apply-to-be-a-staff-member"),error:l(o).errors.slug,type:"text",name:"slug","help-error-flex":"flex-row"},null,8,["modelValue","label","help","error"])]),e("div",te,[i(g,{id:"status",modelValue:l(o).status,"onUpdate:modelValue":t[2]||(t[2]=r=>l(o).status=r),name:"status",label:s.__("Application Status"),placeholder:s.__("Select a status of application.."),"disable-null":!0,"select-list":V},null,8,["modelValue","label","placeholder"])]),e("div",re,[i(I,{id:"description",modelValue:l(o).description,"onUpdate:modelValue":t[3]||(t[3]=r=>l(o).description=r)},null,8,["modelValue"]),i(p,{message:l(o).errors.description,class:"mt-2 text-right"},null,8,["message"])]),e("div",ie,[i(d,{id:"max_submission_per_user",modelValue:l(o).max_submission_per_user,"onUpdate:modelValue":t[4]||(t[4]=r=>l(o).max_submission_per_user=r),label:s.__("Max Submission Per User"),help:s.__("How many times a user can reapply after rejection. Leave empty for no limit."),error:l(o).errors.max_submission_per_user,type:"number",name:"max_submission_per_user","help-error-flex":"flex-row"},null,8,["modelValue","label","help","error"])]),e("div",ae,[l(o).max_submission_per_user!=1?(c(),h(d,{key:0,id:"submission_cooldown_in_seconds",modelValue:l(o).submission_cooldown_in_seconds,"onUpdate:modelValue":t[5]||(t[5]=r=>l(o).submission_cooldown_in_seconds=r),label:s.__("Submission Cooldown in Seconds"),help:s.__("After how many seconds user can reapply this application. Leave empty for no cooldown."),error:l(o).errors.submission_cooldown_in_seconds,type:"number",name:"submission_cooldown_in_seconds","help-error-flex":"flex-row"},null,8,["modelValue","label","help","error"])):O("",!0)]),e("div",ne,[i(d,{id:"min_role_weight_to_view_submission",modelValue:l(o).min_role_weight_to_view_submission,"onUpdate:modelValue":t[6]||(t[6]=r=>l(o).min_role_weight_to_view_submission=r),label:s.__("Min Staff Role Weight to View Submission"),help:s.__("Leave empty to allow any staff with [view recruitment_submissions] permission to view submissions."),error:l(o).errors.min_role_weight_to_view_submission,type:"number",name:"min_role_weight_to_view_submission","help-error-flex":"flex-row"},null,8,["modelValue","label","help","error"])]),e("div",de,[i(d,{id:"min_role_weight_to_vote_on_submission",modelValue:l(o).min_role_weight_to_vote_on_submission,"onUpdate:modelValue":t[7]||(t[7]=r=>l(o).min_role_weight_to_vote_on_submission=r),label:s.__("Min Staff Role Weight to Vote on Submission"),help:s.__("Leave empty to allow any staff with [vote recruitment_submissions] permission to vote on submissions."),error:l(o).errors.min_role_weight_to_vote_on_submission,type:"number",name:"min_role_weight_to_vote_on_submission","help-error-flex":"flex-row"},null,8,["modelValue","label","help","error"])]),e("div",me,[i(d,{id:"min_role_weight_to_act_on_submission",modelValue:l(o).min_role_weight_to_act_on_submission,"onUpdate:modelValue":t[8]||(t[8]=r=>l(o).min_role_weight_to_act_on_submission=r),label:s.__("Min Staff Role Weight to Act on Submission"),help:s.__("Min staff role weight required to Approve/Reject on submission. Leave empty to allow any staff with [acton recruitment_submissions] permission to act on submissions."),error:l(o).errors.min_role_weight_to_act_on_submission,type:"number",name:"min_role_weight_to_act_on_submission","help-error-flex":"flex-row"},null,8,["modelValue","label","help","error"])]),e("div",_e,[e("fieldset",null,[e("div",ue,[i(b,{id:"is_allow_messages_from_users",modelValue:l(o).is_allow_messages_from_users,"onUpdate:modelValue":t[9]||(t[9]=r=>l(o).is_allow_messages_from_users=r),label:s.__("Enable Messages Feature"),help:s.__("Enable messages feature for this application. User & Staff will be able to send messages."),name:"is_allow_messages_from_users"},null,8,["modelValue","label","help"])]),i(p,{message:l(o).errors.is_allow_messages_from_users,class:"mt-2"},null,8,["message"])])]),e("div",pe,[e("fieldset",null,[e("div",fe,[i(b,{id:"is_notify_staff_on_submission",modelValue:l(o).is_notify_staff_on_submission,"onUpdate:modelValue":t[10]||(t[10]=r=>l(o).is_notify_staff_on_submission=r),label:s.__("Notify Staff on Event"),help:s.__("Notify staff (with view permission) when application created/withdrawn or message from user."),name:"is_notify_staff_on_submission"},null,8,["modelValue","label","help"])]),i(p,{message:l(o).errors.is_notify_staff_on_submission,class:"mt-2"},null,8,["message"])])]),e("div",ce,[e("fieldset",null,[e("div",be,[i(b,{id:"is_allow_only_player_linked_users",modelValue:l(o).is_allow_only_player_linked_users,"onUpdate:modelValue":t[11]||(t[11]=r=>l(o).is_allow_only_player_linked_users=r),label:s.__("Allow only Player Linked Users"),help:s.__("Allow only users who have linked player to their account to apply."),name:"is_allow_only_player_linked_users"},null,8,["modelValue","label","help"])]),i(p,{message:l(o).errors.is_allow_only_player_linked_users,class:"mt-2"},null,8,["message"])])]),e("div",he,[e("fieldset",null,[e("div",ge,[i(b,{id:"is_allow_only_verified_users",modelValue:l(o).is_allow_only_verified_users,"onUpdate:modelValue":t[12]||(t[12]=r=>l(o).is_allow_only_verified_users=r),label:s.__("Allow only Verified Users"),help:s.__("Allow only verified users to apply for this application."),name:"is_allow_only_verified_users"},null,8,["modelValue","label","help"])]),i(p,{message:l(o).errors.is_allow_only_verified_users,class:"mt-2"},null,8,["message"])])]),e("div",we,[i(g,{id:"related_role_id",modelValue:l(o).related_role_id,"onUpdate:modelValue":t[13]||(t[13]=r=>l(o).related_role_id=r),name:"related_role_id",label:s.__("This Application is Hiring for"),placeholder:s.__("Not Applicable (None)"),"disable-null":!1,"select-list":x.roles,help:s.__("If this application is for hiring of a specific role, select the role here.")},null,8,["modelValue","label","placeholder","select-list","help"])]),e("div",ve,[e("legend",ye,a(s.__("Fields")),1),e("div",xe,[e("div",Ve,[t[22]||(t[22]=e("div",{class:"w-5"},null,-1)),t[23]||(t[23]=e("div",{class:"w-5"},null,-1)),e("label",ke,[u(a(s.__("Name"))+" ",1),t[18]||(t[18]=e("span",{class:"text-error-500"},"*",-1))]),e("label",Ue,[u(a(s.__("Type"))+" ",1),t[19]||(t[19]=e("span",{class:"text-error-500"},"*",-1))]),e("label",Ae,a(s.__("Validation")),1),e("label",Fe,a(s.__("Help Text")),1),e("label",Se,[u(a(s.__("Options"))+" ",1),t[20]||(t[20]=e("span",{class:"text-error-500"},"* ",-1)),t[21]||(t[21]=e("span",{class:"text-xs text-foreground"},"(Eg: Options1,Option2)",-1))])]),i(l(W),{modelValue:l(o).fields,"onUpdate:modelValue":t[14]||(t[14]=r=>l(o).fields=r),"swap-threshold":.65,class:"space-y-2",handle:".drag-handle"},{item:_(({element:r,index:n})=>[e("div",Ce,[e("div",$e,[i(l(K),{class:"w-5 h-5 text-foreground hover:text-foreground"})]),e("button",{type:"button",class:"focus:outline-none group mt-6",onClick:m=>A(n)},[i(D,{class:"w-5 h-5 text-foreground group-hover:text-error-500",name:"trash"})],8,je),e("div",Le,[i(d,{modelValue:r.label,"onUpdate:modelValue":m=>r.label=m,label:s.__("Name Field :index",{index:n+1}),error:l(o).errors[`fields.${n}.label`]||l(o).errors[`fields.${n}.name`],type:"text","help-error-flex":"flex-col",required:!0},null,8,["modelValue","onUpdate:modelValue","label","error"])]),e("div",Ne,[i(g,{modelValue:r.type,"onUpdate:modelValue":m=>r.type=m,label:s.__("Field Type"),error:l(o).errors[`fields.${n}.type`],"help-error-flex":"flex-col","select-list":Object.keys(w),required:!0},null,8,["modelValue","onUpdate:modelValue","label","error","select-list"])]),e("div",Ee,[i(d,{modelValue:r.validation,"onUpdate:modelValue":m=>r.validation=m,label:s.__("Validation Field :index",{index:n+1}),error:l(o).errors[`fields.${n}.validation`],type:"text","help-error-flex":"flex-col"},null,8,["modelValue","onUpdate:modelValue","label","error"])]),e("div",Oe,[i(d,{modelValue:r.help,"onUpdate:modelValue":m=>r.help=m,label:s.__("Help Text Field :index",{index:n+1}),error:l(o).errors[`fields.${n}.help`],type:"text","help-error-flex":"flex-col"},null,8,["modelValue","onUpdate:modelValue","label","error"])]),e("div",Te,[w[r.type].hasOptions?(c(),h(d,{key:0,modelValue:r.options,"onUpdate:modelValue":m=>r.options=m,label:s.__("Options Field :index",{index:n+1}),error:l(o).errors[`fields.${n}.options`],type:"text","help-error-flex":"flex-col",required:!0},null,8,["modelValue","onUpdate:modelValue","label","error"])):(c(),T("div",qe," - "))])])]),_:1},8,["modelValue"]),e("div",Me,[e("button",{type:"button",class:"p-1.5 text-xs text-primary rounded border border-primary focus:outline-none hover:text-primary hover:border-primary transition ease-in-out duration-150",onClick:U},a(s.__("Add New Field")),1)])])])])]),e("div",Re,[i(y,{class:"inline-flex justify-center py-2 px-4 border border-foreground shadow-sm text-sm font-medium rounded-md text-foreground bg-surface-50 hover:bg-white disabled:opacity-50 dark:bg-surface-700 dark:border-foreground dark:text-foreground dark:hover:bg-surface-600 dark:hover:border-foreground",type:"button",onClick:t[15]||(t[15]=r=>f.value=!0)},{default:_(()=>[u(a(s.__("Preview Form")),1)]),_:1}),i(y,{loading:l(o).processing,class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primary hover:bg-primary focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary disabled:opacity-50",type:"submit"},{default:_(()=>[u(a(s.__("Create Application Form")),1)]),_:1},8,["loading"])])])],32)])])]),i(B,{show:f.value,onClose:t[17]||(t[17]=r=>f.value=!1)},{title:_(()=>[e("h3",De,a(s.__("Form Preview")),1)]),content:_(()=>[i(l(q),{schema:F.value},null,8,["schema"])]),footer:_(()=>[i(P,{onClick:t[16]||(t[16]=r=>f.value=!1)},{default:_(()=>[u(a(s.__("Close")),1)]),_:1})]),_:1},8,["show"])])]),_:1})}}};export{wo as default};
