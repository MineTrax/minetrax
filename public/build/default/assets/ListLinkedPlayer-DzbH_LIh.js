import{A as j,u as V}from"./AppLayout-Bad1xh2T.js";import{I as D}from"./Icon-BRyGKuy3.js";import{S as M,W as U}from"./viewer-DElAxp3u.js";import{_ as Z}from"./CopyToClipboard-o78WAkIw.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{d as r,a as t,o as n,s as d,z as P,c as f,w as u,b as h,n as k,t as s,p as c,f as g,e as y,g as z,F as H}from"./app-Cue287CJ.js";import"./useAuthorizable-EXRySIfj.js";function Y(e,i){return n(),r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{d:"M3.53 2.47a.75.75 0 0 0-1.06 1.06l18 18a.75.75 0 1 0 1.06-1.06l-18-18ZM20.25 5.507v11.561L5.853 2.671c.15-.043.306-.075.467-.094a49.255 49.255 0 0 1 11.36 0c1.497.174 2.57 1.46 2.57 2.93ZM3.75 21V6.932l14.063 14.063L12 18.088l-7.165 3.583A.75.75 0 0 1 3.75 21Z"})])}function W(e,i){return n(),r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"fill-rule":"evenodd",d:"M12 1.5a5.25 5.25 0 0 0-5.25 5.25v3a3 3 0 0 0-3 3v6.75a3 3 0 0 0 3 3h10.5a3 3 0 0 0 3-3v-6.75a3 3 0 0 0-3-3v-3c0-2.9-2.35-5.25-5.25-5.25Zm3.75 8.25v-3a3.75 3.75 0 1 0-7.5 0v3h7.5Z","clip-rule":"evenodd"})])}function F(e,i){return n(),r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"fill-rule":"evenodd",d:"M20.599 1.5c-.376 0-.743.111-1.055.32l-5.08 3.385a18.747 18.747 0 0 0-3.471 2.987 10.04 10.04 0 0 1 4.815 4.815 18.748 18.748 0 0 0 2.987-3.472l3.386-5.079A1.902 1.902 0 0 0 20.599 1.5Zm-8.3 14.025a18.76 18.76 0 0 0 1.896-1.207 8.026 8.026 0 0 0-4.513-4.513A18.75 18.75 0 0 0 8.475 11.7l-.278.5a5.26 5.26 0 0 1 3.601 3.602l.502-.278ZM6.75 13.5A3.75 3.75 0 0 0 3 17.25a1.5 1.5 0 0 1-1.601 1.497.75.75 0 0 0-.7 1.123 5.25 5.25 0 0 0 9.8-2.62 3.75 3.75 0 0 0-3.75-3.75Z","clip-rule":"evenodd"})])}const q={components:{Icon:D,AppLayout:j,PaintBrushIcon:F,CopyToClipboard:Z,BookmarkSlashIcon:Y,LockClosedIcon:W},props:{linkedPlayers:Array,maxPlayerPerUser:Number,currentLinkOtp:Object,isUnlinkingDisabled:Boolean},setup(){const{formatTimeAgoToNow:e,formatToDayDateString:i}=V();return{formatTimeAgoToNow:e,formatToDayDateString:i}},data(){var e;return{skinViewers:[],otpExpiryCountdownInterval:null,otpExpiryCountdownSeconds:(e=this.currentLinkOtp)!=null&&e.expires_at?Math.floor((new Date(this.currentLinkOtp.expires_at).getTime()-new Date().getTime())/1e3):null}},computed:{linkSlotsLeft(){return this.maxPlayerPerUser-this.linkedPlayers.length}},unmounted(){for(const e of this.skinViewers)e.dispose();clearInterval(this.otpExpiryCountdownInterval)},mounted(){for(const e of this.linkedPlayers){let i=new M({canvas:document.getElementById(`skin_container_${e.uuid}`),width:200,height:300,skin:route("player.skin.get",{uuid:e.uuid,username:e.username,textureid:e.skin_texture_id})});i.autoRotate=!0,i.animation=new U,i.animation.speed=.1,i.autoRotateSpeed=.5,this.skinViewers.push(i)}this.startOtpExpiryCountdown()},methods:{startOtpExpiryCountdown(){this.otpExpiryCountdownSeconds>0&&(this.otpExpiryCountdownInterval=setInterval(()=>{this.otpExpiryCountdownSeconds--,this.otpExpiryCountdownSeconds<=0&&clearInterval(this.otpExpiryCountdownInterval)},1e3))}}},G={class:"max-w-6xl px-2 py-3 mx-auto space-y-4 md:py-12 md:px-10"},J={class:"flex"},K={class:"py-1"},Q={class:"w-full"},X={class:"font-bold"},$={key:0},ee={key:1},te={class:"flex flex-col items-center mt-2 text-sm"},oe={class:"text-gray-500 dark:text-gray-400"},se=["title","onClick"],ne={key:0},re={key:1},ie={key:0,class:"italic dark:text-gray-400 mt-4"},ae={key:1},le={class:"dark:text-gray-400 mt-4"},de={class:"text-xs font-bold mt-2 text-red-500 dark:text-red-400"},ce={key:0,class:"flex justify-center pt-5 pb-5 pr-10"},ue={class:"italic text-red-500"},he={class:"flex justify-center pr-10"},_e=["id"],pe={class:"flex flex-col space-y-2"},me={class:"username"},fe={class:"text-xs text-gray-500 dark:text-gray-400"},ye={class:"flex items-center justify-between"},ke={class:"font-bold dark:text-gray-400"},ge={class:"flex items-center space-x-2 text-sm font-extrabold text-center text-light-blue-400"},xe={key:0,class:"px-2 text-lg border-2 rounded border-light-blue-300 bg-light-blue-50 dark:bg-cool-gray-800"},we={key:1,class:"text-sm italic text-gray-500 dark:text-gray-400"},ve={class:"flex items-center justify-between"},be={class:"font-bold dark:text-gray-400"},Ce={key:1,class:"text-sm italic text-gray-500 dark:text-gray-400"},Se={class:"flex items-center justify-between"},Pe={class:"font-bold dark:text-gray-400"},Le={class:"flex items-center space-x-2"},Ie={key:0,class:"dark:text-gray-200"},Te={key:1,class:"text-sm italic text-gray-500 dark:text-gray-400"},Ee=["src","alt","title"],Oe={class:"flex items-center justify-between"},Ae={class:"font-bold dark:text-gray-400"},Be={class:"flex items-center space-x-2"},Ne={class:"dark:text-gray-200"},je=["title","src","alt"],Ve={class:"flex items-center justify-between"},De={class:"font-bold dark:text-gray-400"},Me={class:"flex items-center space-x-2"},Ue=["title"],Ze={class:"flex justify-end space-x-4"},Re={class:"hidden md:block mt-0.5 ml-1"},ze={class:"hidden md:block mt-0.5 ml-1"},He={class:"hidden md:block mt-0.5 ml-1"};function Ye(e,i,a,v,x,_){const L=d("app-head"),I=d("copy-to-clipboard"),p=d("inertia-link"),T=d("icon"),E=d("LockClosedIcon"),O=d("PaintBrushIcon"),A=d("BookmarkSlashIcon"),B=d("app-layout"),l=P("tippy"),N=P("confirm");return n(),f(B,null,{default:u(()=>{var b,C;return[h(L,{title:e.__("Your Linked Players")},null,8,["title"]),t("div",G,[t("div",{class:k(["px-4 py-3 mb-4 bg-white border-t-4 rounded-b shadow dark:bg-cool-gray-800",{"border-sky-500 text-sky-900 dark:text-sky-400":_.linkSlotsLeft>0,"border-orange-500 opacity-35 text-orange-900 dark:text-orange-400":_.linkSlotsLeft<=0}]),role:"alert"},[t("div",J,[t("div",K,[(n(),r("svg",{class:k(["w-6 h-6 mr-4 fill-current text-light-blue-500",{"text-orange-500":_.linkSlotsLeft<=0}]),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},i[0]||(i[0]=[t("path",{d:"M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z"},null,-1)]),2))]),t("div",Q,[t("p",X,[_.linkSlotsLeft>0?(n(),r("span",$,s(e.__("You can link upto :count :player to your account! ( :left available )",{count:a.maxPlayerPerUser,player:a.maxPlayerPerUser===1?e.__("player"):e.__("players"),left:_.linkSlotsLeft})),1)):(n(),r("span",ee,s(e.__("You have already linked maximum number of players to your account!")),1))]),t("div",te,[t("p",oe,s(e.__("To link a player to your account, join server and type '/link :otp' in your chat.",{otp:(b=a.currentLinkOtp)==null?void 0:b.otp})),1),t("h1",{class:k([{"line-through":x.otpExpiryCountdownSeconds<=0},"font-mono text-6xl font-extrabold tracking-widest text-center text-black dark:text-white"])},s((C=a.currentLinkOtp)==null?void 0:C.otp),3),h(I,null,{default:u(o=>{var m;return[c((n(),r("button",{title:e.__("Click to Copy"),type:"button",class:"p-2 mt-3 font-semibold text-center font-mono tracking-wider text-gray-600 transition duration-150 ease-in-out border border-gray-200 rounded w-full md:w-1/2 dark:border-gray-700 dark:text-gray-300 hover:text-light-blue-500 dark:hover:text-light-blue-400 hover:bg-light-blue-50 dark:hover:bg-cool-gray-900 hover:border-light-blue-500 dark:hover:border-cool-gray-800 focus:ring focus:ring-light-blue-200 focus:ring-opacity-50 focus:outline-none",onClick:w=>{var S;return o.copy("/link "+((S=a.currentLinkOtp)==null?void 0:S.otp))}},[o.status!=="copied"?(n(),r("span",ne,s("/link "+((m=a.currentLinkOtp)==null?void 0:m.otp)),1)):(n(),r("span",re,s(e.__("Copied!")),1))],8,se)),[[l]])]}),_:1}),x.otpExpiryCountdownSeconds>0?(n(),r("p",ie,s(e.__("This OTP will expire in :seconds seconds.",{seconds:x.otpExpiryCountdownSeconds})),1)):(n(),r("div",ae,[t("p",le,[g(s(e.__("This OTP has expired. Refresh the page to get a new OTP."))+" ",1),h(p,{as:"button",href:e.route("linked-player.list"),class:"dark:text-sky-400 dark:hover:text-sky-500 text-sky-500 hover:text-sky-700 hover:underline"},{default:u(()=>[g(s(e.__("Click here to refresh.")),1)]),_:1},8,["href"])])])),t("div",de,s(e.__("CAUTION: DO NOT SHARE THIS OTP WITH ANYONE!")),1)])])])],2),t("div",{class:k(["gap-4 space-y-2 md:grid md:space-y-0",a.linkedPlayers.length>1?"grid-cols-2":"grid-cols-1 place-items-center"])},[a.linkedPlayers.length<=0?(n(),r("div",ce,[t("p",ue,s(e.__("No players linked to your account right now.")),1)])):y("",!0),(n(!0),r(H,null,z(a.linkedPlayers,o=>{var m,w;return n(),r("div",{key:o.uuid,class:"flex flex-col p-4 items-center bg-white rounded shadow dark:bg-cool-gray-800"},[t("div",he,[t("canvas",{id:`skin_container_${o.uuid}`},null,8,_e),t("div",pe,[t("div",me,[h(p,{as:"a",href:e.route("player.show",o.uuid),class:"text-lg font-bold text-light-blue-400 hover:text-light-blue-500"},{default:u(()=>[g(s(o.username),1)]),_:2},1032,["href"]),t("p",fe,s(o.uuid),1)]),t("div",ye,[t("p",ke,s(e.__("Position"))+": ",1),t("div",ge,[o.position?(n(),r("span",xe,s(o.position),1)):(n(),r("span",we,s(e.__("None")),1))])]),t("div",ve,[t("p",be,s(e.__("Rating"))+": ",1),o.rating!=null?c((n(),f(T,{key:0,class:"w-8 h-8 focus:outline-none",name:`rating-${o.rating}`,content:o.rating},null,8,["name","content"])),[[l]]):(n(),r("p",Ce,s(e.__("None")),1))]),t("div",Se,[t("p",Pe,s(e.__("Rank"))+": ",1),t("div",Le,[o.rank?(n(),r("p",Ie,s(o.rank.name),1)):(n(),r("p",Te,s(e.__("None")),1)),o.rank&&o.rank.photo_url?c((n(),r("img",{key:2,src:o.rank.photo_url,alt:o.rank.name,title:o.rank.name,class:"max-h-12 max-w-12 focus:outline-none"},null,8,Ee)),[[l]]):y("",!0)])]),t("div",Oe,[t("p",Ae,s(e.__("Country"))+": ",1),t("div",Be,[t("p",Ne,s(o.country.name),1),c(t("img",{title:o.country.name,src:o.country.photo_path,alt:o.country.name,class:"h-8 w-8 -mt-0.5 focus:outline-none"},null,8,je),[[l]])])]),t("div",Ve,[t("p",De,s(e.__("Last Seen"))+": ",1),t("div",Me,[c((n(),r("p",{class:"focus:outline-none dark:text-gray-200",title:v.formatToDayDateString(o.last_seen_at)},[g(s(v.formatTimeAgoToNow(o.last_seen_at)),1)],8,Ue)),[[l]])])])])]),t("div",Ze,[(w=(m=e.$page.props)==null?void 0:m.pluginSettings)!=null&&w.playerPasswordResetEnabled?c((n(),f(p,{key:0,as:"a",href:e.route("reset-player-password.show",{player_uuid:o.uuid}),class:"inline-flex justify-center px-4 py-2 text-sm font-medium text-white border border-transparent rounded-md shadow-sm bg-gray-600 hover:bg-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-600 disabled:opacity-50",title:e.__("Change Password of this player.")},{default:u(()=>[h(E,{class:"w-5 h-5"}),t("span",Re,s(e.__("Change Password")),1)]),_:2},1032,["href","title"])),[[l]]):y("",!0),e.$page.props.playerSkinChangerEnabled?c((n(),f(p,{key:1,as:"a",href:e.route("change-player-skin.show",{player_uuid:o.uuid}),class:"inline-flex justify-center px-4 py-2 text-sm font-medium text-white border border-transparent rounded-md shadow-sm bg-sky-400 hover:bg-sky-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-sky-400 disabled:opacity-50",title:e.__("Change Skin of this player.")},{default:u(()=>[h(O,{class:"w-5 h-5"}),t("span",ze,s(e.__("Change Skin")),1)]),_:2},1032,["href","title"])),[[l]]):y("",!0),a.isUnlinkingDisabled?y("",!0):c((n(),f(p,{key:2,as:"button","preserve-scroll":!0,"preserve-state":!1,method:"delete",href:e.route("account-link.delete",o.uuid),class:"inline-flex justify-center px-4 py-2 text-sm font-medium text-white bg-red-600 border border-transparent rounded-md shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50",title:e.__("Unlink this player from your account.")},{default:u(()=>[h(A,{class:"w-5 h-5"}),t("span",He,s(e.__("Unlink Player")),1)]),_:2},1032,["href","title"])),[[l],[N,{message:e.__("Are you sure you want to unlink this player from your account?")}]])])])}),128))],2)])]}),_:1})}const Xe=R(q,[["render",Ye]]);export{Xe as default};
