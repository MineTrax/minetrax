import{r as d,i as k,j as O,o as D,d as C,a as y,t as M,u as l,b as c,L,q as $,Q as T,c as S,w as Y,_ as B}from"./app-309ec2d0.js";import{_ as R}from"./AdminLayout-87783a14.js";import{_ as V}from"./ServerIntelServerSelector-90251817.js";import{_ as z,a as H,b as Z}from"./PlayersMinecraftVersionMetricBox-be768078.js";import{_ as A}from"./Chart-0aaeca0e.js";import{i as P}from"./index.es-789dacdf.js";import{s as o,e as n,a as m,b as x,c as b,d as I,f as j}from"./index-f6fe5576.js";import"./AppLayout-2122863e.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./Icon-612a869f.js";import"./useAuthorizable-a07adc3e.js";import"./use-resolve-button-type-e56b64b8.js";import"./open-closed-b66a7380.js";import"./CloudArrowDownIcon-81b94048.js";import"./index-126c5c53.js";import"./XSelect-f50a52e1.js";const q={class:"bg-white dark:bg-cool-gray-800 rounded w-full h-full space-y-2 p-3 shadow"},E={class:"flex justify-between"},J={class:"font-extrabold text-gray-800 dark:text-gray-200 flex items-center"},N={__name:"PlayersJoinAddressOverTimeMetricBox",props:{servers:{type:Array,required:!1},chartHeight:{type:String,default:"400px"}},setup(i){const f=i,{__:s}=$();let u=d({}),v=d([]),p=d([]),h=d(!0),a=d(null);const _=k(()=>a.value===null||a.value.length<=0||a.value[0]===null||a.value[1]===null);async function g(){h.value=!0;let e={};_.value||(e.from_date=a.value[0],e.to_date=a.value[1]),f.servers&&f.servers.length>0&&(e.servers=f.servers);const t=await T.get(route("admin.graph.player-join-addresses.timeseries",e));h.value=!1,v.value=t.data.data,p.value=t.data.series,u.value={tooltip:{trigger:"axis",axisPointer:{type:"cross"}},legend:{},toolbox:{feature:{dataZoom:{yAxisIndex:"none"},restore:{},saveAsImage:{}}},dataZoom:[{type:"inside",zoomLock:!0},{}],xAxis:{type:"time"},yAxis:{type:"value"},series:p.value.map(r=>({name:r,type:"bar",stack:"total",emphasis:{focus:"series"},datasetIndex:p.value.indexOf(r)})),dataset:v.value}}O(async()=>{await g()});const w=[{text:s("Today"),onClick(){const e=new Date;return[o(e),n(e)]}},{text:s("Yesterday"),onClick(){const e=m(new Date,1);return[o(e),n(e)]}},{text:s("Last 7 Days"),onClick(){const e=new Date,t=m(e,7);return[o(t),n(e)]}},{text:s("Last 30 Days"),onClick(){const e=new Date,t=m(e,30);return[o(t),n(e)]}},{text:s("This Month"),onClick(){const e=new Date,t=x(e);return[o(t),n(e)]}},{text:s("Last Month"),onClick(){const e=new Date,t=x(b(e,1)),r=I(b(e,1));return[o(t),n(r)]}},{text:s("This Year"),onClick(){const e=new Date,t=j(e);return[o(t),n(e)]}}];return(e,t)=>(D(),C("div",q,[y("div",E,[y("h3",J,M(l(s)("Join Addresses over time")),1),c(l(P),{value:l(a),"onUpdate:value":t[0]||(t[0]=r=>L(a)?a.value=r:a=r),type:"date",range:"",placeholder:l(s)("View for date range"),"input-class":"block w-full p-2 text-sm border-gray-300 rounded-md focus:border-light-blue-300 focus:ring focus:ring-light-blue-200 focus:ring-opacity-50 dark:bg-cool-gray-900 dark:text-gray-300 dark:border-gray-900",shortcuts:w,onChange:t[1]||(t[1]=r=>g())},null,8,["value","placeholder"])]),c(A,{options:l(u),height:i.chartHeight,loading:l(h),autoresize:!0},null,8,["options","height","loading"])]))}},U={class:"bg-white dark:bg-cool-gray-800 rounded w-full h-full space-y-2 p-3 shadow"},Q={class:"flex justify-between"},F={class:"font-extrabold text-gray-800 dark:text-gray-200 flex items-center"},G={__name:"PlayersMinecraftVersionOverTimeMetricBox",props:{servers:{type:Array,required:!1},chartHeight:{type:String,default:"400px"}},setup(i){const f=i,{__:s}=$();let u=d({}),v=d([]),p=d([]),h=d(!0),a=d(null);const _=k(()=>a.value===null||a.value.length<=0||a.value[0]===null||a.value[1]===null);async function g(){h.value=!0;let e={};_.value||(e.from_date=a.value[0],e.to_date=a.value[1]),f.servers&&f.servers.length>0&&(e.servers=f.servers);const t=await T.get(route("admin.graph.player-minecraft-versions.timeseries",e));h.value=!1,v.value=t.data.data,p.value=t.data.series,u.value={tooltip:{trigger:"axis",axisPointer:{type:"cross"}},legend:{},toolbox:{feature:{dataZoom:{yAxisIndex:"none"},restore:{},saveAsImage:{}}},dataZoom:[{type:"inside",zoomLock:!0},{}],xAxis:{type:"time"},yAxis:{type:"value"},series:p.value.map(r=>({name:r,type:"bar",stack:"total",emphasis:{focus:"series"},datasetIndex:p.value.indexOf(r)})),dataset:v.value}}O(async()=>{await g()});const w=[{text:s("Today"),onClick(){const e=new Date;return[o(e),n(e)]}},{text:s("Yesterday"),onClick(){const e=m(new Date,1);return[o(e),n(e)]}},{text:s("Last 7 Days"),onClick(){const e=new Date,t=m(e,7);return[o(t),n(e)]}},{text:s("Last 30 Days"),onClick(){const e=new Date,t=m(e,30);return[o(t),n(e)]}},{text:s("This Month"),onClick(){const e=new Date,t=x(e);return[o(t),n(e)]}},{text:s("Last Month"),onClick(){const e=new Date,t=x(b(e,1)),r=I(b(e,1));return[o(t),n(r)]}},{text:s("This Year"),onClick(){const e=new Date,t=j(e);return[o(t),n(e)]}}];return(e,t)=>(D(),C("div",U,[y("div",Q,[y("h3",F,M(l(s)("Player Client Versions over time")),1),c(l(P),{value:l(a),"onUpdate:value":t[0]||(t[0]=r=>L(a)?a.value=r:a=r),type:"date",range:"",placeholder:l(s)("View for date range"),"input-class":"block w-full p-2 text-sm border-gray-300 rounded-md focus:border-light-blue-300 focus:ring focus:ring-light-blue-200 focus:ring-opacity-50 dark:bg-cool-gray-900 dark:text-gray-300 dark:border-gray-900",shortcuts:w,onChange:t[1]||(t[1]=r=>g())},null,8,["value","placeholder"])]),c(A,{options:l(u),height:i.chartHeight,loading:l(h),autoresize:!0},null,8,["options","height","loading"])]))}},K={class:"p-4 mx-auto space-y-4 px-10"},W={id:"row1"},X={id:"row2",class:"flex justify-between flex-1 space-x-4"},ee={id:"row3",class:"flex justify-between flex-1 space-x-4"},me={__name:"Playerbase",props:{serverList:{type:Object},filters:{type:Object}},setup(i){const f=i,s=k(()=>{var u;return route("admin.intel.server.playerbase.countries",{servers:(u=f.filters)==null?void 0:u.servers})});return(u,v)=>(D(),S(R,null,{default:Y(()=>[c(B,{title:u.__("Playerbase - ServerIntel")},null,8,["title"]),y("div",K,[c(V,{title:u.__("Playerbase"),"server-list":i.serverList,filters:i.filters},null,8,["title","server-list","filters"]),y("div",W,[c(z,{"map-height":"500px","route-name":s.value},null,8,["route-name"])]),y("div",X,[c(N,{"chart-height":"387px",class:"basis-2/3",servers:i.filters.servers},null,8,["servers"]),c(H,{class:"basis-1/3","chart-height":"400px",servers:i.filters.servers},null,8,["servers"])]),y("div",ee,[c(G,{class:"basis-2/3","chart-height":"387px",servers:i.filters.servers},null,8,["servers"]),c(Z,{class:"basis-1/3","chart-height":"400px",servers:i.filters.servers},null,8,["servers"])])])]),_:1}))}};export{me as default};
