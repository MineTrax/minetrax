import{I as T,u as P}from"./AppLayout-a080016c.js";import{C as D}from"./Comments-457e29e9.js";import{_ as A}from"./UserDisplayname-5bfde4b4.js";import{_ as N}from"./_plugin-vue_export-helper-c27b6911.js";import{l as h,q as x,o as n,d as l,a as t,b as u,w as g,j as v,c as _,f as j,t as p,e as f,n as k,F as B,g as L}from"./app-40253c50.js";const S={components:{Comments:D,Icon:T,UserDisplayname:A},props:{post:Object,commentsSectionOpened:{type:Boolean,default:!1}},setup(){const{purifyAndLinkifyText:o,formatTimeAgoToNow:s,formatToDayDateString:e}=P();return{purifyAndLinkifyText:o,formatTimeAgoToNow:s,formatToDayDateString:e}},data(){var o,s,e,a,r;return{liked:((s=(o=this.post.love_reactant)==null?void 0:o.reactions)==null?void 0:s.length)>0,likes_count:((r=(a=(e=this.post)==null?void 0:e.love_reactant)==null?void 0:a.reaction_total)==null?void 0:r.count)??0,showComments:this.commentsSectionOpened}},methods:{likePost(){if(!this.$page.props.auth.user){this.$inertia.get(route("login"));return}this.liked=!0,this.likes_count++,axios.post(route("reaction.post.like",this.post.id)).then(()=>{}).catch(()=>{this.liked=!1,this.likes_count--})},unlikePost(){if(!this.$page.props.auth.user){this.$inertia.get(route("login"));return}this.liked=!1,this.likes_count--,axios.post(route("reaction.post.unlike",this.post.id)).then(()=>{}).catch(()=>{this.liked=!0,this.likes_count++})}}},V={class:"flex justify-between"},H={class:"flex"},O=["src"],F={class:"ml-2 mt-0.5"},I={class:"flex"},M=["innerHTML"],q=["src"],z={class:"flex items-center justify-end mt-5 space-x-10 text-gray-500"},E={class:"group-hover:bg-pink-100 dark:group-hover:bg-cool-gray-900 group-hover:text-pink-500 p-1.5 rounded-full transition duration-300 ease-in-out"},U={class:"text-gray-500 dark:text-gray-400 font-light py-1.5 group-hover:text-pink-500 transition duration-300 ease-in-out"},G={class:"group-hover:bg-pink-100 dark:group-hover:bg-cool-gray-900 group-hover:text-pink-500 p-1.5 rounded-full transition duration-300 ease-in-out"},J={class:"text-pink-500 dark:text-gray-400 font-light py-1.5 group-hover:text-pink-500 transition duration-300 ease-in-out"},K={class:"group-hover:bg-light-blue-100 dark:group-hover:bg-cool-gray-900 group-hover:text-light-blue-500 p-1.5 rounded-full transition duration-300 ease-in-out"},Q={class:"text-gray-500 dark:text-gray-400 font-light py-1.5 flex items-center group-hover:text-light-blue-500 transition duration-300 ease-in-out"};function R(o,s,e,a,r,c){const b=h("user-displayname"),m=h("inertia-link"),d=h("icon"),w=h("comments"),y=x("tippy"),C=x("confirm");return n(),l("div",{class:k(["px-5 py-4 bg-white rounded shadow dark:bg-cool-gray-800",{"rounded-l-none border-l-4 border-light-blue-500":o.$page.props.auth.user&&o.$page.props.auth.user.id===e.post.user.id}])},[t("div",V,[t("div",H,[t("img",{class:"w-12 h-12 rounded-full",src:e.post.user.profile_photo_url,alt:"profile photo"},null,8,O),t("div",F,[u(m,{class:"cursor-pointer hover:underline dark:text-gray-300",as:"div",href:o.route("user.public.get",e.post.user.username)},{default:g(()=>[u(b,{user:e.post.user,"show-username":!0},null,8,["user"])]),_:1},8,["href"]),t("div",I,[v((n(),_(m,{as:"a",href:o.route("post.show",e.post.id),content:a.formatToDayDateString(e.post.created_at),class:"text-sm font-light leading-snug text-gray-500 dark:hover:text-light-blue-500 focus:outline-none hover:text-light-blue-500 dark:text-gray-300"},{default:g(()=>[j(p(a.formatTimeAgoToNow(e.post.created_at)),1)]),_:1},8,["href","content"])),[[y]])])])]),o.$page.props.auth.user&&e.post.permissions.delete?v((n(),_(m,{key:0,title:o.__("Delete Post"),"preserve-scroll":!0,"preserve-state":!1,as:"button",method:"delete",href:o.route("post.delete",e.post.id),class:"flex items-start text-gray-500 rounded-full hover:text-red-500 focus:outline-none"},{default:g(()=>[u(d,{name:"trash",class:"h-6 w-6 p-0.5"})]),_:1},8,["title","href"])),[[C,{message:o.__("Are you sure you want to delete this Post?")}],[y]]):f("",!0)]),t("p",{class:"mt-2 leading-snug text-gray-800 break-words whitespace-pre-line dark:text-gray-200 md:leading-normal",innerHTML:a.purifyAndLinkifyText(e.post.body)},null,8,M),e.post.media_url_array.length?(n(),l("div",{key:0,class:k(["grid gap-2",{"grid-cols-2":e.post.media_url_array.length>1}])},[(n(!0),l(B,null,L(e.post.media_url_array,i=>(n(),l("div",{key:i,class:"relative"},[t("img",{src:i,alt:"Attachment",class:k(["object-cover w-full h-full rounded-xl",e.post.media_url_array.length>1?"max-h-56":"max-h-96"])},null,10,q)]))),128))],2)):f("",!0),t("div",z,[r.liked?(n(),l("button",{key:1,class:"flex text-pink-500 cursor-pointer group focus:outline-none",onClick:s[1]||(s[1]=(...i)=>c.unlikePost&&c.unlikePost(...i))},[t("span",G,[u(d,{name:"heart-fill",class:"w-6 h-6 p-0.5"})]),t("span",J,p(r.likes_count),1)])):(n(),l("button",{key:0,class:"flex cursor-pointer group focus:outline-none",onClick:s[0]||(s[0]=(...i)=>c.likePost&&c.likePost(...i))},[t("span",E,[u(d,{name:"heart-hollow",class:"h-6 w-6 p-0.5"})]),t("span",U,p(r.likes_count),1)])),t("button",{class:"flex cursor-pointer group focus:outline-none",onClick:s[2]||(s[2]=i=>r.showComments=!r.showComments)},[t("span",K,[u(d,{name:"comment",class:"h-6 w-6 p-0.5"})]),t("span",Q,p(e.post.comments_count),1)])]),r.showComments?(n(),_(w,{key:1,commentable:e.post,"commentable-type":"post"},null,8,["commentable"])):f("",!0)],2)}const ee=N(S,[["render",R]]);export{ee as P};
