import{o as a,d as y,a as o,r as B,i as I,H as V,s as E,z as D,c as d,w as n,q as N,b as l,u as t,_ as O,t as c,K as R,p as f,e as _,y as $,f as v,W as H,M as L}from"./app-jpCRGzWE.js";import{u as z}from"./BaseLayout-sXkR-4Uw.js";import{_ as q}from"./AdminLayout-C3c7ijIe.js";import{_ as M}from"./DataTable-pHQxfe0U.js";import{D as k}from"./DtRowItem-ZEfbfaLY.js";import{u as P}from"./useAuthorizable-e--Skqmp.js";import{X as U}from"./XSelect-We86Hyyh.js";import{r as W}from"./EyeIcon-C86KfWW7.js";import{r as X}from"./TrashIcon-C-n0oh30.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Icon-wreK45eH.js";import"./keyboard-BsWWh6cB.js";import"./open-closed-7-ABnrJt.js";import"./CloudArrowDownIcon-Dg55l3VV.js";import"./index--8hIBfIm.js";import"./vue-multiselect.esm-DnFUxAWZ.js";import"./XMarkIcon-B9z5I5uI.js";import"./hidden-DS7qYPlv.js";function K(r,h){return a(),y("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5m8.25 3v6.75m0 0-3-3m3 3 3-3M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z"})])}function Z(r,h){return a(),y("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m9 9 6-6m0 0 6 6m-6-6v12a6 6 0 0 1-12 0v-3"})])}const G={class:"p-4 mx-auto space-y-4 px-10"},J={class:"flex items-center justify-between"},Q={class:"text-xl font-extrabold text-secondary-800 dark:text-secondary-200"},Y={class:"text-sm px-4 font-medium text-left text-secondary-800 whitespace-nowrap dark:text-secondary-200"},ee={class:"px-4 py-4 text-sm font-medium text-secondary-800 whitespace-nowrap dark:text-secondary-200"},te={class:"flex items-center"},se=["content"],oe=["src"],re={class:"px-4"},ae={class:"flex-shrink-0 h-10 w-10 mr-2"},ie=["src"],ne={class:"flex-col"},le={class:"text-sm text-secondary-500"},ce={key:1,class:"flex items-center italic text-sm text-secondary-500 dark:text-secondary-400"},ue={class:"px-6 py-4 space-x-2 text-sm font-medium text-right whitespace-nowrap"},De={__name:"IndexCustomFormSubmission",props:{forms:{type:Object},filters:{type:Object},submissions:{type:Object},archived:{type:Boolean,default:!1}},setup(r){var C,F,j;const{can:h}=P(),{__:s}=N(),{formatTimeAgoToNow:g,formatToDayDateString:S}=z(),u=r,A=[{key:"id",label:s("ID"),sortable:!0,class:"text-left w-[5%]",filterable:{key:"id",type:"text"}},{key:"country_id",label:s("Country"),sortable:!0,class:"text-left w-1/12"},{key:"user_id",sortable:!0,label:s("User"),class:"w-3/12",filterable:{key:"user.name",type:"text"}},{key:"custom_form_id",label:s("Custom Form"),sortable:!0},{key:"created_at",label:s("Created At"),class:"text-right w-1/12 whitespace-nowrap",sortable:!0},{key:"actions",label:s("Actions"),sortable:!1,class:"w-1/12 text-right"}];u.archived&&A.splice(5,0,{key:"deleted_at",label:s("Archived At"),class:"text-right w-1/12 whitespace-nowrap",sortable:!0});let p=B((F=(C=u.filters)==null?void 0:C.forms)!=null&&F.length?(j=u.filters)==null?void 0:j.forms[0]:null);const T=I(()=>u.filters.forms&&u.filters.forms.length>0?u.filters.forms.map(i=>u.forms[i]).join(", "):null);return V(p,i=>{const b={forms:i?[i]:null};H.get(route(route().current()),L.pickBy(b))}),(i,b)=>{const x=E("InertiaLink"),m=D("tippy"),w=D("confirm");return a(),d(q,null,{default:n(()=>[l(O,{title:r.archived?t(s)("Archived Custom Form Submissions"):t(s)("Custom Form Submissions")},null,8,["title"]),o("div",G,[o("div",J,[o("h3",Q,c(r.archived?t(s)("Archived Form Submissions:"):t(s)("Form Submissions:"))+" "+c(T.value??t(s)("All Forms")),1),l(U,{id:"selectForms",modelValue:t(p),"onUpdate:modelValue":b[0]||(b[0]=e=>R(p)?p.value=e:p=e),name:"selectForms","select-list":r.forms,placeholder:t(s)("All Forms"),class:"w-48 max-w-48 dark:border dark:rounded dark:border-secondary-700"},null,8,["modelValue","select-list","placeholder"])]),o("div",null,[l(M,{class:"bg-white rounded shadow dark:bg-surface-800",header:A,data:r.submissions,filters:r.filters},{default:n(({item:e})=>[o("td",Y,c(e.id),1),o("td",ee,[o("div",te,[e.country?f((a(),y("div",{key:0,class:"flex-shrink-0 h-10 w-10 focus:outline-none",content:e.country.name},[o("img",{class:"h-10 w-10",src:e.country.photo_path,alt:""},null,8,oe)],8,se)),[[m]]):_("",!0)])]),o("td",re,[e.user?(a(),d(x,{key:0,href:i.route("user.public.get",e.user.username),class:"flex items-center"},{default:n(()=>[o("div",ae,[o("img",{class:"h-10 w-10 rounded-full",src:e.user.profile_photo_url,alt:"Avatar"},null,8,ie)]),o("div",ne,[o("div",{class:"text-sm font-semibold text-secondary-900 dark:text-secondary-300 whitespace-nowrap truncate",style:$([e.user.roles[0].color?{color:e.user.roles[0].color}:null])},c(e.user.name),5),o("div",le," @"+c(e.user.username),1)])]),_:2},1032,["href"])):(a(),y("div",ce,c(t(s)("Anonymous")),1))]),l(k,null,{default:n(()=>[v(c(e.custom_form.title),1)]),_:2},1024),f((a(),d(k,{class:"text-right whitespace-nowrap",content:t(S)(e.created_at)},{default:n(()=>[v(c(t(g)(e.created_at)),1)]),_:2},1032,["content"])),[[m]]),r.archived?f((a(),d(k,{key:0,class:"text-right whitespace-nowrap",content:t(S)(e.deleted_at)},{default:n(()=>[v(c(t(g)(e.deleted_at)),1)]),_:2},1032,["content"])),[[m]]):_("",!0),o("td",ue,[l(x,{as:"a",href:i.route("admin.custom-form-submission.show",e.id),class:"inline-flex items-center justify-center text-primary-500 hover:text-primary-800"},{default:n(()=>[l(t(W),{class:"inline-block w-5 h-5"})]),_:2},1032,["href"]),t(h)("archive custom_form_submissions")&&!r.archived?f((a(),d(x,{key:0,as:"button",method:"POST",href:i.route("admin.custom-form-submission.archive",e.id),class:"inline-flex items-center justify-center text-orange-500 hover:text-orange-900 focus:outline-none",title:t(s)("Archive Submission")},{default:n(()=>[l(t(K),{class:"inline-block w-5 h-5"})]),_:2},1032,["href","title"])),[[w,{message:"Archive this Custom Form Submission? It will move to archive section."}],[m]]):_("",!0),t(h)("delete custom_form_submissions")&&r.archived?f((a(),d(x,{key:1,as:"button",method:"POST",href:i.route("admin.custom-form-submission.restore",e.id),class:"inline-flex items-center justify-center text-success-500 hover:text-success-900 focus:outline-none",title:t(s)("Restore Submission")},{default:n(()=>[l(t(Z),{class:"inline-block w-5 h-5"})]),_:2},1032,["href","title"])),[[w,{message:"Restore this Custom Form Submission? It will move back to submissions list."}],[m]]):_("",!0),t(h)("delete custom_form_submissions")?f((a(),d(x,{key:2,as:"button",method:"DELETE",href:i.route("admin.custom-form-submission.delete",e.id),class:"inline-flex items-center justify-center text-error-600 hover:text-error-900 focus:outline-none",title:t(s)("Delete Submission")},{default:n(()=>[l(t(X),{class:"inline-block w-5 h-5"})]),_:2},1032,["href","title"])),[[w,{message:"Delete this Custom Form Submission? This action cannot be undone."}],[m]]):_("",!0)])]),_:1},8,["data","filters"])])])]),_:1})}}};export{De as default};
