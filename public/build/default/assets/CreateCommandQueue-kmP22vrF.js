import{r as R,i as b,A as ue,B as D,C as I,j as F,D as J,u as t,E as z,G as O,H as de,I as Y,F as pe,k as ce,s as me,c as fe,w as V,o as T,b as k,a as n,t as h,m as ye,f as $,n as L,d as N,e as A,q as ve,J as ge}from"./app-Dln4v3uo.js";import{_ as be}from"./AdminLayout-BxIq3fDP.js";import{L as he}from"./LoadingButton-CLwn58zy.js";import{X as xe}from"./XInput-7ATZzzop.js";import{X as _e}from"./XSelect-w1LDfj2b.js";import{X as ke}from"./XCheckbox-CbUUF_41.js";import{s as X}from"./vue-multiselect.esm-D47ht4Fg.js";import{i as we}from"./index.es-Bb-QoPWU.js";import{_ as Re}from"./InputError-hOCs4iai.js";import{i as q,A as M,o as U,E as Se,T as Ee,a as C}from"./keyboard-BkUZhFXh.js";import{i as j,O as Oe,f as Ve,u as Ce,P as H,N as P,T as K}from"./hidden-DmicaYNf.js";import"./AppLayout-RO3V1HyV.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Icon-BcTkSHl7.js";import"./useAuthorizable-BdMhWprW.js";import"./open-closed-C6JSqlmH.js";import"./CloudArrowDownIcon-DRYnCYW5.js";import"./index-DyRuvfFj.js";function Te(e,a,o){let s=R(o==null?void 0:o.value),i=b(()=>e.value!==void 0);return[b(()=>i.value?e.value:s.value),function(p){return i.value||(s.value=p),a==null?void 0:a(p)}]}function $e({container:e,accept:a,walk:o,enabled:s}){ue(()=>{let i=e.value;if(!i||s!==void 0&&!s.value)return;let p=j(e);if(!p)return;let r=Object.assign(y=>a(y),{acceptNode:a}),v=p.createTreeWalker(i,NodeFilter.SHOW_ELEMENT,r,!1);for(;v.nextNode();)o(v.currentNode)})}function Q(e={},a=null,o=[]){for(let[s,i]of Object.entries(e))ee(o,Z(a,s),i);return o}function Z(e,a){return e?e+"["+a+"]":a}function ee(e,a,o){if(Array.isArray(o))for(let[s,i]of o.entries())ee(e,Z(a,s.toString()),i);else o instanceof Date?e.push([a,o.toISOString()]):typeof o=="boolean"?e.push([a,o?"1":"0"]):typeof o=="string"?e.push([a,o]):typeof o=="number"?e.push([a,`${o}`]):o==null?e.push([a,""]):Q(o,a,e)}function Le(e){var a,o;let s=(a=e==null?void 0:e.form)!=null?a:e.closest("form");if(s){for(let i of s.elements)if(i!==e&&(i.tagName==="INPUT"&&i.type==="submit"||i.tagName==="BUTTON"&&i.type==="submit"||i.nodeName==="INPUT"&&i.type==="image")){i.click();return}(o=s.requestSubmit)==null||o.call(s)}}let Ne=Symbol("DescriptionContext");function ae({slot:e=R({}),name:a="Description",props:o={}}={}){let s=R([]);function i(p){return s.value.push(p),()=>{let r=s.value.indexOf(p);r!==-1&&s.value.splice(r,1)}}return D(Ne,{register:i,slot:e,name:a,props:o}),b(()=>s.value.length>0?s.value.join(" "):void 0)}let te=Symbol("LabelContext");function re(){let e=z(te,null);if(e===null){let a=new Error("You used a <Label /> component, but it is not inside a parent.");throw Error.captureStackTrace&&Error.captureStackTrace(a,re),a}return e}function le({slot:e={},name:a="Label",props:o={}}={}){let s=R([]);function i(p){return s.value.push(p),()=>{let r=s.value.indexOf(p);r!==-1&&s.value.splice(r,1)}}return D(te,{register:i,slot:e,name:a,props:o}),b(()=>s.value.length>0?s.value.join(" "):void 0)}let Ae=I({name:"Label",props:{as:{type:[Object,String],default:"label"},passive:{type:[Boolean],default:!1},id:{type:String,default:null}},setup(e,{slots:a,attrs:o}){var s;let i=(s=e.id)!=null?s:`headlessui-label-${q()}`,p=re();return F(()=>J(p.register(i))),()=>{let{name:r="Label",slot:v={},props:y={}}=p,{passive:w,...S}=e,m={...Object.entries(y).reduce((u,[x,d])=>Object.assign(u,{[x]:t(d)}),{}),id:i};return w&&(delete m.onClick,delete m.htmlFor,delete S.onClick),M({ourProps:m,theirProps:S,slot:v,attrs:o,slots:a,name:r})}}});function Pe(e,a){return e===a}let oe=Symbol("RadioGroupContext");function se(e){let a=z(oe,null);if(a===null){let o=new Error(`<${e} /> is missing a parent <RadioGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(o,se),o}return a}let je=I({name:"RadioGroup",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"div"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>Pe},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},id:{type:String,default:null}},inheritAttrs:!1,setup(e,{emit:a,attrs:o,slots:s,expose:i}){var p;let r=(p=e.id)!=null?p:`headlessui-radiogroup-${q()}`,v=R(null),y=R([]),w=le({name:"RadioGroupLabel"}),S=ae({name:"RadioGroupDescription"});i({el:v,$el:v});let[m,u]=Te(b(()=>e.modelValue),l=>a("update:modelValue",l),b(()=>e.defaultValue)),x={options:y,value:m,disabled:b(()=>e.disabled),firstOption:b(()=>y.value.find(l=>!l.propsRef.disabled)),containsCheckedOption:b(()=>y.value.some(l=>x.compare(O(l.propsRef.value),O(e.modelValue)))),compare(l,f){if(typeof e.by=="string"){let c=e.by;return(l==null?void 0:l[c])===(f==null?void 0:f[c])}return e.by(l,f)},change(l){var f;if(e.disabled||x.compare(O(m.value),O(l)))return!1;let c=(f=y.value.find(_=>x.compare(O(_.propsRef.value),O(l))))==null?void 0:f.propsRef;return c!=null&&c.disabled?!1:(u(l),!0)},registerOption(l){y.value.push(l),y.value=Oe(y.value,f=>f.element)},unregisterOption(l){let f=y.value.findIndex(c=>c.id===l);f!==-1&&y.value.splice(f,1)}};D(oe,x),$e({container:b(()=>U(v)),accept(l){return l.getAttribute("role")==="radio"?NodeFilter.FILTER_REJECT:l.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(l){l.setAttribute("role","none")}});function d(l){if(!v.value||!v.value.contains(l.target))return;let f=y.value.filter(c=>c.propsRef.disabled===!1).map(c=>c.element);switch(l.key){case C.Enter:Le(l.currentTarget);break;case C.ArrowLeft:case C.ArrowUp:if(l.preventDefault(),l.stopPropagation(),H(f,P.Previous|P.WrapAround)===K.Success){let c=y.value.find(_=>{var g;return _.element===((g=j(v))==null?void 0:g.activeElement)});c&&x.change(c.propsRef.value)}break;case C.ArrowRight:case C.ArrowDown:if(l.preventDefault(),l.stopPropagation(),H(f,P.Next|P.WrapAround)===K.Success){let c=y.value.find(_=>{var g;return _.element===((g=j(_.element))==null?void 0:g.activeElement)});c&&x.change(c.propsRef.value)}break;case C.Space:{l.preventDefault(),l.stopPropagation();let c=y.value.find(_=>{var g;return _.element===((g=j(_.element))==null?void 0:g.activeElement)});c&&x.change(c.propsRef.value)}break}}let E=b(()=>{var l;return(l=U(v))==null?void 0:l.closest("form")});return F(()=>{de([E],()=>{if(!E.value||e.defaultValue===void 0)return;function l(){x.change(e.defaultValue)}return E.value.addEventListener("reset",l),()=>{var f;(f=E.value)==null||f.removeEventListener("reset",l)}},{immediate:!0})}),()=>{let{disabled:l,name:f,form:c,..._}=e,g={ref:v,id:r,role:"radiogroup","aria-labelledby":w.value,"aria-describedby":S.value,onKeydown:d};return Y(pe,[...f!=null&&m.value!=null?Q({[f]:m.value}).map(([B,G])=>Y(Ve,Se({features:Ce.Hidden,key:B,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:c,disabled:l,name:B,value:G}))):[],M({ourProps:g,theirProps:{...o,...Ee(_,["modelValue","defaultValue","by"])},slot:{},attrs:o,slots:s,name:"RadioGroup"})])}}});var Ue=(e=>(e[e.Empty=1]="Empty",e[e.Active=2]="Active",e))(Ue||{});let W=I({name:"RadioGroupOption",props:{as:{type:[Object,String],default:"div"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1},id:{type:String,default:null}},setup(e,{attrs:a,slots:o,expose:s}){var i;let p=(i=e.id)!=null?i:`headlessui-radiogroup-option-${q()}`,r=se("RadioGroupOption"),v=le({name:"RadioGroupLabel"}),y=ae({name:"RadioGroupDescription"}),w=R(null),S=b(()=>({value:e.value,disabled:e.disabled})),m=R(1);s({el:w,$el:w});let u=b(()=>U(w));F(()=>r.registerOption({id:p,element:u,propsRef:S})),J(()=>r.unregisterOption(p));let x=b(()=>{var g;return((g=r.firstOption.value)==null?void 0:g.id)===p}),d=b(()=>r.disabled.value||e.disabled),E=b(()=>r.compare(O(r.value.value),O(e.value))),l=b(()=>d.value?-1:E.value||!r.containsCheckedOption.value&&x.value?0:-1);function f(){var g;r.change(e.value)&&(m.value|=2,(g=U(w))==null||g.focus())}function c(){m.value|=2}function _(){m.value&=-3}return()=>{let{value:g,disabled:B,...G}=e,ne={checked:E.value,disabled:d.value,active:!!(m.value&2)},ie={id:p,ref:w,role:"radio","aria-checked":E.value?"true":"false","aria-labelledby":v.value,"aria-describedby":y.value,"aria-disabled":d.value?!0:void 0,tabIndex:l.value,onClick:d.value?void 0:f,onFocus:d.value?void 0:c,onBlur:d.value?void 0:_};return M({ourProps:ie,theirProps:G,slot:ne,attrs:a,slots:o,name:"RadioGroupOption"})}}}),Be=Ae;const Ge={class:"max-w-6xl px-10 py-12 mx-auto"},De={class:"flex justify-between mb-8"},Ie={class:"text-3xl font-bold text-gray-500 dark:text-gray-300"},Fe={class:"mt-10 sm:mt-0"},qe={class:"mt-5 md:mt-0 md:col-span-2"},Me={class:"shadow sm:rounded-md"},Ye={class:"px-4 py-5 bg-white dark:bg-cool-gray-800 sm:p-6"},Xe={class:"grid grid-cols-6 gap-6"},He={class:"col-span-6 sm:col-span-6"},Ke={class:"flex items-center justify-center"},We=["checked"],Je={class:"ms-2"},ze={class:"flex items-center justify-center"},Qe=["checked"],Ze={class:"ms-2"},ea={class:"col-span-6 sm:col-span-6"},aa={class:"mb-2 text-gray-700 dark:text-gray-300 font-semibold"},ta={class:"text-sm text-red-500 mt-0.5"},ra={class:"col-span-6 sm:col-span-6"},la={key:0,class:"flex flex-col items-end mb-2"},oa={class:"text-gray-700 dark:text-gray-300 text-sm font-semibold"},sa={class:"text-sm text-right text-gray-600 dark:text-gray-400"},na={class:"col-span-6 sm:col-span-6 relative"},ia={for:"execute_at",class:"absolute -top-2.5 left-0 px-3 py-5 text-xs text-gray-500 h-full pointer-events-none transform origin-left transition-all duration-100 ease-in-out"},ua={key:0,class:"col-span-6 sm:col-span-6"},da={key:1,class:"col-span-6 sm:col-span-6"},pa={class:"mb-2 text-gray-700 dark:text-gray-300 font-semibold"},ca={class:"text-sm text-red-500 mt-0.5"},ma={key:2,class:"col-span-6 sm:col-span-6"},fa={class:"flex justify-end px-4 py-3 bg-gray-50 dark:bg-cool-gray-800 sm:px-6"},Na={__name:"CreateCommandQueue",props:{servers:{type:Array}},setup(e){const{__:a}=ve(),o={all:"All - for every player in the web",linked:"Linked Only - for every player who are linked to a user account",unlinked:"Unlinked Only - for every player who are not linked to a user account",custom:"Custom - select players from dropdown"},s=R([]),i=R(!1);let p=null;const r=ce({scope:"global",command:"",execute_at:null,servers:[],players:{scope:"all",is_player_online_required:!1,id:[]}});function v({name:m,hostname:u}){return`${m} - ${u}`}function y({username:m,uuid:u}){return`${m} - ${u}`}const w=m=>{if(p&&clearTimeout(p),!m||m.length<2){s.value=[];return}p=setTimeout(async()=>{i.value=!0;try{const u=await ge.get("/stats",{params:{"filter[q]":m}});s.value=u.data.data||u.data||[]}catch(u){console.error("Error searching players:",u),s.value=[]}finally{i.value=!1}},300)},S=()=>{r.post(route("admin.command-queue.store"),{preserveScroll:!0,onSuccess:()=>{r.reset("command","servers","players","execute_at")}})};return(m,u)=>{const x=me("app-head");return T(),fe(be,null,{default:V(()=>[k(x,{title:"Run Command"}),n("div",Ge,[n("div",De,[n("h1",Ie,h(t(a)("Run Command")),1)]),n("div",Fe,[n("div",qe,[n("form",{onSubmit:ye(S,["prevent"])},[n("div",Me,[n("div",Ye,[n("div",Xe,[n("div",He,[k(t(je),{modelValue:t(r).scope,"onUpdate:modelValue":u[0]||(u[0]=d=>t(r).scope=d),class:"flex justify-between gap-2"},{default:V(()=>[k(t(Be),{class:"flex items-center flex-none w-1/12 font-semibold text-gray-700 dark:text-gray-300"},{default:V(()=>[$(h(t(a)("Scope")),1)]),_:1}),k(t(W),{class:"flex-1 text-sm text-center uppercase",value:"global"},{default:V(({checked:d})=>[n("div",{class:L(["p-3 rounded shadow-sm cursor-pointer",d?"dark:bg-gray-900 dark:text-gray-200 font-bold bg-sky-400 text-white":"dark:bg-gray-600 dark:text-gray-300 bg-gray-200 text-gray-700"])},[n("div",Ke,[n("input",{checked:d,type:"radio",disabled:"",class:"w-4 h-4 bg-gray-100 border-gray-300 text-sky-600 focus:ring-sky-500 dark:focus:ring-sky-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,8,We),n("label",Je,h(t(a)("Global")),1)]),n("div",null,[n("span",{class:L([d?"text-gray-200 dark:text-gray-400":"text-gray-400","text-xs"])},h(t(a)("Run generic command")),3)])],2)]),_:1}),k(t(W),{class:"flex-1 text-sm text-center uppercase",value:"player"},{default:V(({checked:d})=>[n("div",{class:L(["p-3 rounded shadow-sm cursor-pointer",d?"dark:bg-gray-900 dark:text-gray-200 font-bold bg-sky-400 text-white":"dark:bg-gray-600 dark:text-gray-300 bg-gray-200 text-gray-700"])},[n("div",ze,[n("input",{checked:d,type:"radio",disabled:"",class:"w-4 h-4 bg-gray-100 border-gray-300 text-sky-600 focus:ring-sky-500 dark:focus:ring-sky-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,8,Qe),n("label",Ze,h(t(a)("Player")),1)]),n("div",null,[n("span",{class:L([d?"text-gray-200 dark:text-gray-400":"text-gray-400","text-xs"])},h(t(a)("Run against players")),3)])],2)]),_:1})]),_:1},8,["modelValue"])]),n("div",ea,[n("p",aa,h(t(a)("Servers to run on")),1),k(t(X),{modelValue:t(r).servers,"onUpdate:modelValue":u[1]||(u[1]=d=>t(r).servers=d),class:"block w-full border-gray-900 rounded-md shadow-sm focus:ring-light-blue-500 focus:border-light-blue-500 sm:text-sm",options:e.servers,"custom-label":v,"track-by":"id",multiple:!0,"close-on-select":!1,"clear-on-select":!1,searchable:!1,placeholder:t(a)("Leave empty to run on all servers")+"..."},null,8,["modelValue","options","placeholder"]),n("p",ta,h(t(r).errors.servers),1)]),n("div",ra,[t(r).scope==="player"?(T(),N("div",la,[n("h3",oa,h(t(a)("Available Placeholders")),1),n("ol",sa,[n("li",null,[u[7]||(u[7]=n("code",{class:"text-sm bg-gray-100 dark:bg-cool-gray-700 dark:text-gray-300 p-1 rounded-md"},"{PLAYER_USERNAME}",-1)),$(" - "+h(t(a)("Username of the player.")),1)]),n("li",null,[u[8]||(u[8]=n("code",{class:"text-sm bg-gray-100 dark:bg-cool-gray-700 dark:text-gray-300 p-1 rounded-md"},"{PLAYER_UUID}",-1)),$(" - "+h(t(a)("Unique Id of the player.")),1)])])])):A("",!0),k(xe,{id:"command",modelValue:t(r).command,"onUpdate:modelValue":u[2]||(u[2]=d=>t(r).command=d),label:t(a)("Enter command to run..."),error:t(r).errors.command,type:"text",name:"command",help:t(r).scope=="player"?t(a)("Eg: give {PLAYER_USERNAME} diamond 64"):t(a)("Eg: broadcast Hello world!"),"help-error-flex":"flex-row"},null,8,["modelValue","label","error","help"])]),n("div",na,[k(t(we),{id:"execute_at",value:t(r).execute_at,"onUpdate:value":u[3]||(u[3]=d=>t(r).execute_at=d),placeholder:t(a)("Leave empty to run immediately without any delay")+"...",class:"w-full","value-type":"date",type:"datetime",format:"YYYY-MM-DD hh:mm:ss A","input-class":"border-gray-300 h-14 p-3 text-sm pt-7 focus:border-light-blue-300 focus:ring focus:ring-light-blue-200 focus:ring-opacity-50 rounded-md block w-full dark:bg-cool-gray-900 dark:text-gray-300 dark:border-gray-900"},null,8,["value","placeholder"]),n("label",ia,h(t(a)("Run at")),1),k(Re,{message:t(r).errors.execute_at,class:"mt-2"},null,8,["message"])]),t(r).scope==="player"?(T(),N("div",ua,[k(_e,{id:"players.scope",modelValue:t(r).players.scope,"onUpdate:modelValue":u[4]||(u[4]=d=>t(r).players.scope=d),error:t(r).errors["players.scope"],name:"players.scope",label:t(a)("Players to run on"),"select-list":o},null,8,["modelValue","error","label"])])):A("",!0),t(r).players.scope==="custom"&&t(r).scope==="player"?(T(),N("div",da,[n("p",pa,h(t(a)("Select players")),1),k(t(X),{modelValue:t(r).players.id,"onUpdate:modelValue":u[5]||(u[5]=d=>t(r).players.id=d),class:"block w-full border-gray-900 rounded-md shadow-sm focus:ring-light-blue-500 focus:border-light-blue-500 sm:text-sm",options:s.value,"custom-label":y,"track-by":"id",multiple:!0,"close-on-select":!1,"clear-on-select":!1,searchable:!0,"hide-selected":!0,loading:i.value,"internal-search":!1,onSearchChange:w,placeholder:t(a)("Type to search players")+"...","no-options":t(a)("Type at least 2 characters to search")},null,8,["modelValue","options","loading","placeholder","no-options"]),n("p",ca,h(t(r).errors["players.id"]),1)])):A("",!0),t(r).scope==="player"?(T(),N("div",ma,[k(ke,{id:"players.is_player_online_required",modelValue:t(r).players.is_player_online_required,"onUpdate:modelValue":u[6]||(u[6]=d=>t(r).players.is_player_online_required=d),label:t(a)("Require player to be online"),help:t(a)("This command should only run if player is online on running server. If not online it will be queued to run when player comes online."),name:"players.is_player_online_required",error:t(r).errors["players.is_player_online_required"]},null,8,["modelValue","label","help","error"])])):A("",!0)])]),n("div",fa,[k(he,{loading:t(r).processing,class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-green-500 hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50",type:"submit"},{default:V(()=>[$(h(t(r).execute_at?t(a)("Schedule Command"):t(a)("Run Command")),1)]),_:1},8,["loading"])])])],32)])])])]),_:1})}}};export{Na as default};
