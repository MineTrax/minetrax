import{_ as T}from"./AppLayout-d9csB1GD.js";import{S as z}from"./ServerStatusBox-DBFaa1zu.js";import{S as H}from"./ShoutBox-C6Hg1UEd.js";import{U as x,M as N,e as y,y as v,c as g,w as n,s as O,o as c,b as r,a as s,i as F,t as u,g as p,d as k,j as m,L as E,n as J,k as K}from"./app-U7F8fpli.js";import{u as M}from"./useFormKit-DsPcY36i.js";import{_ as P}from"./AlertCard-D2bqN5RU.js";import{_ as V}from"./AppBreadcrumb-BPQO0NRQ.js";import"./BaseLayout-DEET2uXb.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Icon-B7smHmqf.js";import"./useForwardPropsEmits-Cna_72YH.js";import"./chevron-down-DD1FIYC6.js";import"./Teleport-BxlbW6xz.js";import"./index-DJrfnRDw.js";import"./utils-D-KgF5mV.js";import"./VisuallyHidden-ZQVZzJuH.js";import"./x-CG4zJPiG.js";import"./useAuthorizable-CBLWtNMn.js";import"./Card-rlQgMSQR.js";import"./CardContent-r4Z7iLTW.js";import"./CopyToClipboard-o78WAkIw.js";import"./index-BIDzpq-S.js";import"./Input-Jm5v012Z.js";import"./Skeleton-Dr5hNwd0.js";import"./XMarkIcon-CqHHbBCc.js";const Y={class:"py-4 px-2 md:px-10 max-w-screen-2xl mx-auto"},A={class:"flex flex-col md:flex-row md:space-x-4"},I={class:"md:w-9/12 flex-1"},L={class:"min-w-full"},U={class:"bg-card text-card-foreground border rounded-lg shadow p-4 md:p-6"},$={class:"font-bold text-4xl text-foreground mb-5"},j=["innerHTML"],D={key:1,class:"text-xs text-muted-foreground text-right"},ye={__name:"ShowCustomForm",props:{customForm:{type:Object},currentUserCanSubmit:{type:Boolean}},setup(o){const{__:e}=O(),t=o,S=M().generateSchemaFromFieldsArray(t.customForm.fields),f=x().props.generalSettings.enable_sticky_header_menu,w=[{text:e("Home"),url:route("home"),current:!1},{text:e("Forms"),url:route("custom-form.index"),current:!1},{text:N.truncate(t.customForm.title,{length:50}),current:!0}],B=async i=>{await C(i)},C=i=>new Promise((h,l)=>{K({...i}).post(route("custom-form.submit",t.customForm.slug),{onSuccess:d=>{h(d)},onError:d=>{l(d)}})}),a=y(()=>t.customForm.status.value!=="active"||!t.currentUserCanSubmit),b=y(()=>a.value?t.customForm.status.value==="disabled"?{title:e("Oh Jeez! This form is currently disabled."),body:e("It seems the form is no longer accepting submissions. Please check back later.")}:t.customForm.status.value!=="active"?{title:e("Oh Jeez! This form is not active."),body:e("It seems the form is not active yet. Please check back later.")}:["auth","staff"].includes(t.customForm.can_create_submission)&&!x().props.auth.user?{title:e("Oh Jeez! You need to be logged in to submit this form."),body:e("Please login and try again.")}:{title:e("Oh Jeez! You have already submitted this form."),body:e("You have already submitted this form maximum number of times allowed.")}:{title:null,body:null});return(i,h)=>{const l=v("AppHead"),_=v("FormKit");return c(),g(T,null,{default:n(()=>[r(l,{title:o.customForm.title},null,8,["title"]),r(V,{items:w}),s("div",Y,[s("div",A,[s("div",I,[a.value?(c(),g(P,{key:0,"text-color":"text-orange-800 dark:text-orange-500","border-color":"border-orange-500"},{body:n(()=>[F(u(b.value.body),1)]),default:n(()=>[F(u(b.value.title)+" ",1)]),_:1})):p("",!0),s("div",L,[s("div",U,[s("h1",$,u(o.customForm.title),1),o.customForm.description?(c(),k("div",{key:0,class:"prose dark:prose-invert max-w-none mb-6 pb-6 border-b border-border",innerHTML:o.customForm.description_html},null,8,j)):p("",!0),r(_,{disabled:a.value,type:"form",onSubmit:B},{default:n(()=>[r(m(E),{schema:m(S)},null,8,["schema"])]),_:1},8,["disabled"]),!a.value&&o.customForm.max_submission_per_user?(c(),k("p",D,u(m(e)("You can submit this form only :count times.",{count:o.customForm.max_submission_per_user})),1)):p("",!0)])])]),s("div",{class:J(["hidden md:flex flex-col md:w-3/12 flex-none space-y-4 sticky",{"top-16":m(f),"top-5":!m(f)}])},[r(z),r(H)],2)])])]),_:1})}}};export{ye as default};
