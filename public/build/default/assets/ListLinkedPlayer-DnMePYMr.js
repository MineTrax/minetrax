import{o as r,d as a,a as e,U as R,h as P,e as S,p as Z,D as Y,y as E,z as I,c as x,w as i,b as l,j as t,t as n,i as C,g as _,n as v,v as h,l as q,F as W,s as F}from"./app-D9GuHpcZ.js";import{_ as G}from"./AppLayout-DkSe-eud.js";import{I as J}from"./Icon-DCyQcqwq.js";import{S as K,W as Q}from"./viewer-DElAxp3u.js";import{u as X}from"./BaseLayout-B3-iVEMv.js";import{_ as ee}from"./CopyToClipboard-o78WAkIw.js";import{_ as M}from"./Card-oMkD0KjW.js";import{_ as z}from"./CardContent-C9CiR_8_.js";import{_ as w}from"./index-B5if8pRS.js";import{_ as te}from"./AppBreadcrumb-6YgoLuD3.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useForwardPropsEmits-Ci0C5-5c.js";import"./chevron-down-BRQ4-0aA.js";import"./Teleport-Ck1GoC8n.js";import"./index-CybQGOSJ.js";import"./utils-D-KgF5mV.js";import"./VisuallyHidden-bdJjphAo.js";import"./x-ChK5Vw_y.js";import"./useAuthorizable-jSLZg7XL.js";function se(d,s){return r(),a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{d:"M3.53 2.47a.75.75 0 0 0-1.06 1.06l18 18a.75.75 0 1 0 1.06-1.06l-18-18ZM20.25 5.507v11.561L5.853 2.671c.15-.043.306-.075.467-.094a49.255 49.255 0 0 1 11.36 0c1.497.174 2.57 1.46 2.57 2.93ZM3.75 21V6.932l14.063 14.063L12 18.088l-7.165 3.583A.75.75 0 0 1 3.75 21Z"})])}function oe(d,s){return r(),a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M12 1.5a5.25 5.25 0 0 0-5.25 5.25v3a3 3 0 0 0-3 3v6.75a3 3 0 0 0 3 3h10.5a3 3 0 0 0 3-3v-6.75a3 3 0 0 0-3-3v-3c0-2.9-2.35-5.25-5.25-5.25Zm3.75 8.25v-3a3.75 3.75 0 1 0-7.5 0v3h7.5Z","clip-rule":"evenodd"})])}function ne(d,s){return r(),a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M20.599 1.5c-.376 0-.743.111-1.055.32l-5.08 3.385a18.747 18.747 0 0 0-3.471 2.987 10.04 10.04 0 0 1 4.815 4.815 18.748 18.748 0 0 0 2.987-3.472l3.386-5.079A1.902 1.902 0 0 0 20.599 1.5Zm-8.3 14.025a18.76 18.76 0 0 0 1.896-1.207 8.026 8.026 0 0 0-4.513-4.513A18.75 18.75 0 0 0 8.475 11.7l-.278.5a5.26 5.26 0 0 1 3.601 3.602l.502-.278ZM6.75 13.5A3.75 3.75 0 0 0 3 17.25a1.5 1.5 0 0 1-1.601 1.497.75.75 0 0 0-.7 1.123 5.25 5.25 0 0 0 9.8-2.62 3.75 3.75 0 0 0-3.75-3.75Z","clip-rule":"evenodd"})])}const re={class:"max-w-screen-xl space-y-4 mx-auto py-4 px-2 sm:py-6 sm:px-4 lg:px-8"},ae={key:0,class:"absolute inset-0 bg-destructive/10 backdrop-blur-md z-10 flex items-center justify-center"},ie={class:"rounded-lg p-6 max-w-md mx-4 text-center space-y-4"},le={class:"text-xl font-bold text-destructive mb-2"},de={class:"text-muted-foreground"},ce={class:"flex"},ue={class:"py-1"},me={class:"w-full"},fe={key:0},pe={key:1},he={class:"flex flex-col items-center mt-2 text-sm"},_e={class:"text-muted-foreground"},ve={class:"font-mono text-6xl font-extrabold tracking-widest text-center text-foreground mt-2"},xe=["title","disabled","onClick"],ge={key:0},ke={key:1},ye={class:"text-xs font-bold mt-2 text-destructive"},we={key:0,class:"flex justify-center pt-5 pb-5"},be={class:"italic text-destructive"},Pe={class:"flex flex-col items-center"},Ce={class:"flex justify-center pr-10"},Te=["id"],Le={class:"flex flex-col space-y-2"},Oe={class:"username"},Ae={class:"text-xs text-muted-foreground"},je={class:"flex items-center justify-between"},Ne={class:"font-bold text-foreground"},Se={class:"flex items-center space-x-2 text-sm font-extrabold text-center text-primary"},Ee={key:0,class:"px-2 text-lg border-2 rounded border-primary bg-primary/10"},Ie={key:1,class:"text-sm italic text-muted-foreground"},Me={class:"flex items-center justify-between"},ze={class:"font-bold text-foreground"},Be={key:1,class:"text-sm italic text-muted-foreground"},Ve={class:"flex items-center justify-between"},$e={class:"font-bold text-foreground"},He={class:"flex items-center space-x-2"},Ue={key:0,class:"text-foreground"},De={key:1,class:"text-sm italic text-muted-foreground"},Re=["src","alt","title"],Ze={class:"flex items-center justify-between"},Ye={class:"font-bold text-foreground"},qe={class:"flex items-center space-x-2"},We={class:"text-foreground"},Fe=["title","src","alt"],Ge={class:"flex items-center justify-between"},Je={class:"font-bold text-foreground"},Ke={class:"flex items-center space-x-2"},Qe=["title"],Xe={class:"flex justify-end space-x-2 mt-4 w-full"},et={class:"hidden md:inline"},tt={class:"hidden md:inline"},st={class:"hidden md:inline"},Pt={__name:"ListLinkedPlayer",props:{linkedPlayers:{type:Array,required:!0},maxPlayerPerUser:{type:Number,required:!0},currentLinkOtp:{type:Object,required:!1},isUnlinkingDisabled:{type:Boolean,default:!1}},setup(d){var O;const{__:s}=F(),{formatTimeAgoToNow:B,formatToDayDateString:V}=X(),T=R().props,g=d,L=P([]),b=P(null),c=P((O=g.currentLinkOtp)!=null&&O.expires_at?Math.floor((new Date(g.currentLinkOtp.expires_at).getTime()-new Date().getTime())/1e3):null),f=S(()=>g.maxPlayerPerUser-g.linkedPlayers.length),$=()=>{c.value>0&&(b.value=setInterval(()=>{c.value--,c.value<=0&&clearInterval(b.value)},1e3))};Z(()=>{for(const u of g.linkedPlayers){let m=new K({canvas:document.getElementById(`skin_container_${u.uuid}`),width:200,height:300,skin:route("player.skin.get",{uuid:u.uuid,username:u.username,textureid:u.skin_texture_id})});m.autoRotate=!0,m.animation=new Q,m.animation.speed=.1,m.autoRotateSpeed=.5,L.value.push(m)}$()}),Y(()=>{for(const u of L.value)u.dispose();clearInterval(b.value)});const H=S(()=>[{text:s("Home"),url:route("home"),current:!1},{text:s("Linked Players"),current:!0}]);return(u,m)=>{const U=E("AppHead"),k=E("InertiaLink"),p=I("tippy"),D=I("confirm");return r(),x(G,null,{default:i(()=>[l(U,{title:t(s)("Your Linked Players")},null,8,["title"]),l(te,{class:"max-w-screen-xl mx-auto",items:H.value},null,8,["items"]),e("div",re,[l(t(M),{class:v(["border-t-4 relative overflow-hidden transition-all duration-300",{"border-primary":f.value>0&&c.value>0,"border-orange-500 opacity-35":f.value<=0,"border-destructive":c.value<=0&&f.value>0}])},{default:i(()=>[c.value<=0?(r(),a("div",ae,[e("div",ie,[m[1]||(m[1]=e("div",{class:"flex justify-center"},[e("div",{class:"bg-destructive/10 p-3 rounded-full"},[e("svg",{class:"w-12 h-12 text-destructive",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])])],-1)),e("div",null,[e("h3",le,n(t(s)("OTP Expired")),1),e("p",de,n(t(s)("This One-Time Password has expired. Please refresh the page to generate a new OTP.")),1)]),l(t(w),{"as-child":"",variant:"default",size:"lg",class:"w-full"},{default:i(()=>[l(k,{href:u.route("linked-player.list")},{default:i(()=>[m[0]||(m[0]=e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)),C(" "+n(t(s)("Refresh & Get New OTP")),1)]),_:1},8,["href"])]),_:1})])])):_("",!0),l(t(z),{class:v(["pt-6 transition-all duration-300",{"blur-sm":c.value<=0}])},{default:i(()=>{var o,y;return[e("div",ce,[e("div",ue,[(r(),a("svg",{class:v(["w-6 h-6 mr-4 fill-current",{"text-primary":f.value>0,"text-orange-500":f.value<=0}]),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},m[2]||(m[2]=[e("path",{d:"M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z"},null,-1)]),2))]),e("div",me,[e("p",{class:v(["font-bold",f.value>0?"text-primary":"text-orange-900 dark:text-orange-400"])},[f.value>0?(r(),a("span",fe,n(t(s)("You can link upto :count :player to your account! ( :left available )",{count:d.maxPlayerPerUser,player:d.maxPlayerPerUser===1?t(s)("player"):t(s)("players"),left:f.value})),1)):(r(),a("span",pe,n(t(s)("You have already linked maximum number of players to your account!")),1))],2),e("div",he,[e("p",_e,n(t(s)("To link a player to your account, join server and type '/link :otp' in your chat.",{otp:(o=d.currentLinkOtp)==null?void 0:o.otp})),1),e("h1",ve,n((y=d.currentLinkOtp)==null?void 0:y.otp),1),l(ee,null,{default:i(A=>{var j;return[h((r(),a("button",{title:c.value<=0?t(s)("OTP Expired"):t(s)("Click to Copy"),type:"button",disabled:c.value<=0,class:v(["p-2 mt-3 font-semibold text-center font-mono tracking-wider transition duration-150 ease-in-out border rounded-md w-full md:w-1/2 focus:ring-2 focus:ring-ring focus:ring-offset-2 focus:outline-none disabled:opacity-50 disabled:cursor-not-allowed",{"text-foreground border-border hover:bg-accent hover:text-accent-foreground":c.value>0,"text-muted-foreground border-muted":c.value<=0}]),onClick:nt=>{var N;return A.copy("/link "+((N=d.currentLinkOtp)==null?void 0:N.otp))}},[A.status!=="copied"?(r(),a("span",ge,n("/link "+((j=d.currentLinkOtp)==null?void 0:j.otp)),1)):(r(),a("span",ke,n(t(s)("Copied!")),1))],10,xe)),[[p]])]}),_:1}),c.value>0?(r(),a("p",{key:0,class:v(["italic text-muted-foreground mt-4",{"text-orange-600 dark:text-orange-400":c.value<=60}])},n(t(s)("This OTP will expire in :seconds seconds.",{seconds:c.value})),3)):_("",!0),e("div",ye,n(t(s)("CAUTION: NEVER SHARE THIS OTP WITH ANYONE!")),1)])])])]}),_:1},8,["class"])]),_:1},8,["class"]),e("div",{class:v(["gap-4 space-y-2 md:grid md:space-y-0",d.linkedPlayers.length>1?"grid-cols-2":"grid-cols-1 place-items-center"])},[d.linkedPlayers.length<=0?(r(),a("div",we,[e("p",be,n(t(s)("No players linked to your account right now.")),1)])):_("",!0),(r(!0),a(W,null,q(d.linkedPlayers,o=>(r(),x(t(M),{key:o.uuid,class:"shadow-sm"},{default:i(()=>[l(t(z),{class:"p-4"},{default:i(()=>{var y;return[e("div",Pe,[e("div",Ce,[e("canvas",{id:`skin_container_${o.uuid}`},null,8,Te),e("div",Le,[e("div",Oe,[l(k,{as:"a",href:u.route("player.show",o.uuid),class:"text-lg font-bold text-primary hover:text-primary/80"},{default:i(()=>[C(n(o.username),1)]),_:2},1032,["href"]),e("p",Ae,n(o.uuid),1)]),e("div",je,[e("p",Ne,n(t(s)("Position"))+":",1),e("div",Se,[o.position?(r(),a("span",Ee,n(o.position),1)):(r(),a("span",Ie,n(t(s)("None")),1))])]),e("div",Me,[e("p",ze,n(t(s)("Rating"))+":",1),o.rating!=null?h((r(),x(J,{key:0,class:"w-8 h-8 focus:outline-none",name:`rating-${o.rating}`,content:o.rating},null,8,["name","content"])),[[p]]):(r(),a("p",Be,n(t(s)("None")),1))]),e("div",Ve,[e("p",$e,n(t(s)("Rank"))+":",1),e("div",He,[o.rank?(r(),a("p",Ue,n(o.rank.name),1)):(r(),a("p",De,n(t(s)("None")),1)),o.rank&&o.rank.photo_url?h((r(),a("img",{key:2,src:o.rank.photo_url,alt:o.rank.name,title:o.rank.name,class:"max-h-12 max-w-12 focus:outline-none"},null,8,Re)),[[p]]):_("",!0)])]),e("div",Ze,[e("p",Ye,n(t(s)("Country"))+":",1),e("div",qe,[e("p",We,n(o.country.name),1),h(e("img",{title:o.country.name,src:o.country.photo_path,alt:o.country.name,class:"h-8 w-8 -mt-0.5 focus:outline-none"},null,8,Fe),[[p]])])]),e("div",Ge,[e("p",Je,n(t(s)("Last Seen"))+":",1),e("div",Ke,[h((r(),a("p",{class:"focus:outline-none text-foreground",title:t(V)(o.last_seen_at)},[C(n(t(B)(o.last_seen_at)),1)],8,Qe)),[[p]])])])])]),e("div",Xe,[(y=t(T).pluginSettings)!=null&&y.playerPasswordResetEnabled?h((r(),x(t(w),{key:0,"as-child":"",variant:"outline",size:"sm",title:t(s)("Change Password of this player.")},{default:i(()=>[l(k,{href:u.route("reset-player-password.show",{player_uuid:o.uuid})},{default:i(()=>[l(t(oe),{class:"w-4 h-4"}),e("span",et,n(t(s)("Change Password")),1)]),_:2},1032,["href"])]),_:2},1032,["title"])),[[p]]):_("",!0),t(T).playerSkinChangerEnabled?h((r(),x(t(w),{key:1,"as-child":"",variant:"default",size:"sm",title:t(s)("Change Skin of this player.")},{default:i(()=>[l(k,{href:u.route("change-player-skin.show",{player_uuid:o.uuid})},{default:i(()=>[l(t(ne),{class:"w-4 h-4"}),e("span",tt,n(t(s)("Change Skin")),1)]),_:2},1032,["href"])]),_:2},1032,["title"])),[[p]]):_("",!0),d.isUnlinkingDisabled?_("",!0):h((r(),x(t(w),{key:2,"as-child":"",variant:"destructive",size:"sm",title:t(s)("Unlink this player from your account.")},{default:i(()=>[l(k,{method:"delete","preserve-scroll":!0,"preserve-state":!1,href:u.route("account-link.delete",o.uuid)},{default:i(()=>[l(t(se),{class:"w-4 h-4"}),e("span",st,n(t(s)("Unlink Player")),1)]),_:2},1032,["href"])]),_:2},1032,["title"])),[[p],[D,{message:t(s)("Are you sure you want to unlink this player from your account?")}]])])])]}),_:2},1024)]),_:2},1024))),128))],2)])]),_:1})}}};export{Pt as default};
