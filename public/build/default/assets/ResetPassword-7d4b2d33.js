import{o as d,d as m,a as r,r as S,T as N,i as h,s as B,c as f,w as i,V as C,b as c,u as o,t as a,L as A,e as p,f as g,l as H}from"./app-309ec2d0.js";import{s as L}from"./vue-multiselect.esm-6c961ab3.js";import{X as x}from"./XInput-9a426272.js";import{u as U,A as Y}from"./AppLayout-2122863e.js";import{L as j}from"./LoadingButton-d82e2a30.js";import{_ as b}from"./AlertCard-bbd7ec1a.js";import{r as M}from"./CheckCircleIcon-3d057f56.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./Icon-612a869f.js";import"./useAuthorizable-a07adc3e.js";import"./XMarkIcon-669ca6d5.js";function T(y,n){return d(),m("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[r("path",{"fill-rule":"evenodd",d:"M4.755 10.059a7.5 7.5 0 0112.548-3.364l1.903 1.903h-3.183a.75.75 0 100 1.5h4.992a.75.75 0 00.75-.75V4.356a.75.75 0 00-1.5 0v3.18l-1.9-1.9A9 9 0 003.306 9.67a.75.75 0 101.45.388zm15.408 3.352a.75.75 0 00-.919.53 7.5 7.5 0 01-12.548 3.364l-1.902-1.903h3.183a.75.75 0 000-1.5H2.984a.75.75 0 00-.75.75v4.992a.75.75 0 001.5 0v-3.18l1.9 1.9a9 9 0 0015.059-4.035.75.75 0 00-.53-.918z","clip-rule":"evenodd"})])}const q={class:"max-w-6xl px-2 py-3 mx-auto space-y-4 md:py-12 md:px-10"},z={class:"flex flex-col md:flex-row md:items-center md:justify-between"},D={key:0,class:"text-lg mb-2 md:mb-0 md:text-2xl font-bold text-gray-700 dark:text-gray-200"},X={key:1,class:"text-lg italic mb-2 md:mb-0 md:text-2xl font-bold text-gray-500 dark:text-gray-500"},$={key:0,class:"text-xs text-gray-500 dark:text-gray-500"},E={class:"text-xl"},F={class:"text-sm"},G={class:"text-sm"},I={as:"div",class:"w-full p-6 text-gray-500 rounded-lg text-medium dark:text-gray-400 bg-white shadow dark:bg-gray-800"},K=["onSubmit"],J={class:"grid grid-cols-6 gap-6"},O={class:"col-span-6 sm:col-span-6 flex space-x-2"},Q=["disabled"],W={class:"hidden md:block"},Z={class:"col-span-6 sm:col-span-6"},ee={class:"mt-6"},oe={key:0,class:"text-sm text-orange-500 dark:text-orange-500 flex mt-2"},me={__name:"ResetPassword",props:{uuid:{type:String,required:!1},players:{type:Array,required:!0},cooldown:{type:Number},cannotPlayerPasswordReset:{type:Boolean}},setup(y){const n=y,{generateRandomString:v,secondsToHMS:k}=U();let s=S(n.players[0]);const _=n.players.find(e=>e.uuid===n.uuid);_&&(s.value=_);const t=N({player_uuid:null,new_password:null,new_password_confirmation:null,reason:null}),P=()=>{t.player_uuid=s.value.uuid,t.post(route("reset-player-password.update"),{onSuccess:()=>{t.reset()}})},w=h(()=>t.processing||!s.value||n.cannotPlayerPasswordReset||n.cooldown>0),V=h(()=>{var e,l;return((l=(e=C().props)==null?void 0:e.toast)==null?void 0:l.type)==="success"});return(e,l)=>{const R=B("AppHead");return d(),f(Y,null,{default:i(()=>[c(R,{title:e.__("Reset Player Password")},null,8,["title"]),r("div",q,[r("div",z,[o(s)?(d(),m("h2",D,a(e.__("Reset password for :username",{username:o(s).username})),1)):(d(),m("h2",X,a(e.__("No Linked Players")),1)),c(o(L),{id:"username",modelValue:o(s),"onUpdate:modelValue":l[0]||(l[0]=u=>A(s)?s.value=u:s=u),class:"w-full md:w-1/3 bg-gray-300 border-gray-300 rounded-md shadow-sm focus:ring-light-blue-500 focus:border-light-blue-500 sm:text-sm dark:bg-gray-900",options:y.players,multiple:!1,placeholder:e.__("Search")+"...",label:"username","allow-empty":!1,"deselect-label":e.__("Can't remove"),"track-by":"id"},null,8,["modelValue","options","placeholder","deselect-label"])]),o(s)?(d(),m("p",$,a(e.__("Player Uuid"))+": "+a(o(s).uuid),1)):p("",!0),V.value?(d(),f(b,{key:1,"text-color":"text-green-800 dark:text-green-500","border-color":"border-green-500"},{icon:i(()=>[c(o(M),{class:"fill-current h-6 w-6 text-green-500 mr-4"})]),body:i(()=>[r("p",F,a("Your player password has been changed successfully. You can now join the server with new password."),1)]),default:i(()=>[r("h2",E,a(e.__("Password changed successfully!")),1)]),_:1})):p("",!0),o(s)?p("",!0):(d(),f(b,{key:2,"text-color":"text-red-800 dark:text-red-500","border-color":"border-red-500"},{default:i(()=>[g(a(e.__("No linked players found. Please link a player to your account.")),1)]),_:1})),y.cannotPlayerPasswordReset?(d(),f(b,{key:3,"text-color":"text-red-800 dark:text-red-500","border-color":"border-red-500"},{body:i(()=>[r("p",G,a(e.__("Site administrator has explicitly disabled this feature for your role. Contact for more information.")),1)]),default:i(()=>[g(a(e.__("Your are not allowed to reset your player passwords."))+" ",1)]),_:1})):p("",!0),r("div",I,[r("form",{class:"w-full mt-4",onSubmit:H(P,["prevent"])},[r("div",J,[r("div",O,[c(x,{id:"new_password",modelValue:o(t).new_password,"onUpdate:modelValue":l[1]||(l[1]=u=>o(t).new_password=u),disabled:w.value,label:e.__("New Password"),error:o(t).errors.new_password,type:"text",name:"new_password","help-error-flex":"flex-row"},null,8,["modelValue","disabled","label","error"]),r("div",null,[r("button",{disabled:w.value,type:"button",class:"inline-flex items-center px-4 py-4 bg-white border border-gray-300 rounded-md font-semibold text-xs text-gray-700 tracking-widest whitespace-nowrap shadow-sm hover:text-gray-500 focus:outline-none active:text-gray-800 active:mt-0.5 active:bg-gray-50 transition ease-in-out duration-150 dark:bg-cool-gray-700 dark:text-gray-200 dark:border-gray-800 dark:hover:text-white dark:hover:bg-cool-gray-600 disabled:active:mt-0 disabled:cursor-not-allowed disabled:opacity-50",onClick:l[2]||(l[2]=u=>o(t).new_password=o(v)(16))},[c(o(T),{class:"inline h-5 w-5 mr-1"}),r("span",W,a(e.__("Generate Secure Password")),1)],8,Q)])]),r("div",Z,[c(x,{id:"reason",modelValue:o(t).reason,"onUpdate:modelValue":l[3]||(l[3]=u=>o(t).reason=u),disabled:w.value,label:e.__("Reason"),error:o(t).errors.reason,type:"text",name:"reason","help-error-flex":"flex-row",help:e.__("Small reason why are you changing the password?")},null,8,["modelValue","disabled","label","error","help"])])]),r("div",ee,[c(j,{loading:o(t).processing,class:"inline-flex justify-center py-3 px-6 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-light-blue-500 hover:bg-light-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-light-blue-500 disabled:opacity-50",disabled:w.value,type:"submit"},{default:i(()=>[g(a(e.__("Reset Player Password")),1)]),_:1},8,["loading","disabled"])]),n.cooldown>0?(d(),m("span",oe,a(e.__("You are on a cooldown because you have recently changed your password. Refresh the page and try again after :cooldown.",{cooldown:o(k)(n.cooldown,!0)})),1)):p("",!0)],40,K)])])]),_:1})}}};export{me as default};
