import{r as d,i as k,j as O,o as D,d as C,a as y,t as M,u as l,b as c,K as L,q as $,J as T,c as S,w as Y,_ as B}from"./app-B6MSbjiR.js";import{_ as R}from"./AdminLayout-CxVM27ib.js";import{_ as V}from"./ServerIntelServerSelector-CBIAg81w.js";import{_ as z,a as H,b as Z}from"./PlayersMinecraftVersionMetricBox-C7EgtCHP.js";import{_ as A}from"./Chart-DB6JVM7L.js";import{i as P}from"./index.es-BVTy_4GU.js";import{s as o,a as I}from"./AppLayout-D09sHPWy.js";import{e as n,s as m,a as g,b as _,c as j}from"./subMonths-C6suF6X1.js";import"./keyboard-D8XalHIH.js";import"./open-closed-LifvgtoZ.js";import"./useAuthorizable-Cf1MTXSt.js";import"./CloudArrowDownIcon-CMU1uDwp.js";import"./index-DwFICxA8.js";import"./XSelect-u_rqq2TM.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Icon-DyYhHgsS.js";const q={class:"bg-white dark:bg-surface-800 rounded w-full h-full space-y-2 p-3 shadow"},E={class:"flex justify-between"},J={class:"font-extrabold text-secondary-800 dark:text-secondary-200 flex items-center"},N={__name:"PlayersJoinAddressOverTimeMetricBox",props:{servers:{type:Array,required:!1},chartHeight:{type:String,default:"400px"}},setup(i){const{__:s}=$(),f=i;let u=d({}),h=d([]),p=d([]),v=d(!0),a=d(null);const b=k(()=>a.value===null||a.value.length<=0||a.value[0]===null||a.value[1]===null);async function x(){v.value=!0;let e={};b.value||(e.from_date=a.value[0],e.to_date=a.value[1]),f.servers&&f.servers.length>0&&(e.servers=f.servers);const t=await T.get(route("admin.graph.player-join-addresses.timeseries",e));v.value=!1,h.value=t.data.data,p.value=t.data.series,u.value={tooltip:{trigger:"axis",axisPointer:{type:"cross"}},legend:{},toolbox:{feature:{dataZoom:{yAxisIndex:"none"},restore:{},saveAsImage:{}}},dataZoom:[{type:"inside",zoomLock:!0},{}],xAxis:{type:"time"},yAxis:{type:"value"},series:p.value.map(r=>({name:r,type:"bar",stack:"total",emphasis:{focus:"series"},datasetIndex:p.value.indexOf(r)})),dataset:h.value}}O(async()=>{await x()});const w=[{text:s("Today"),onClick(){const e=new Date;return[o(e),n(e)]}},{text:s("Yesterday"),onClick(){const e=m(new Date,1);return[o(e),n(e)]}},{text:s("Last 7 Days"),onClick(){const e=new Date,t=m(e,7);return[o(t),n(e)]}},{text:s("Last 30 Days"),onClick(){const e=new Date,t=m(e,30);return[o(t),n(e)]}},{text:s("This Month"),onClick(){const e=new Date,t=g(e);return[o(t),n(e)]}},{text:s("Last Month"),onClick(){const e=new Date,t=g(_(e,1)),r=j(_(e,1));return[o(t),n(r)]}},{text:s("This Year"),onClick(){const e=new Date,t=I(e);return[o(t),n(e)]}}];return(e,t)=>(D(),C("div",q,[y("div",E,[y("h3",J,M(l(s)("Join Addresses over time")),1),c(l(P),{value:l(a),"onUpdate:value":t[0]||(t[0]=r=>L(a)?a.value=r:a=r),type:"date",range:"",placeholder:l(s)("View for date range"),"input-class":"block w-full p-2 text-sm border-secondary-300 rounded-md focus:border-primary-300 focus:ring focus:ring-primary-200 focus:ring-opacity-50 dark:bg-surface-900 dark:text-secondary-300 dark:border-secondary-900",shortcuts:w,onChange:t[1]||(t[1]=r=>x())},null,8,["value","placeholder"])]),c(A,{options:l(u),height:i.chartHeight,loading:l(v),autoresize:!0},null,8,["options","height","loading"])]))}},U={class:"bg-white dark:bg-surface-800 rounded w-full h-full space-y-2 p-3 shadow"},K={class:"flex justify-between"},F={class:"font-extrabold text-secondary-800 dark:text-secondary-200 flex items-center"},G={__name:"PlayersMinecraftVersionOverTimeMetricBox",props:{servers:{type:Array,required:!1},chartHeight:{type:String,default:"400px"}},setup(i){const{__:s}=$(),f=i;let u=d({}),h=d([]),p=d([]),v=d(!0),a=d(null);const b=k(()=>a.value===null||a.value.length<=0||a.value[0]===null||a.value[1]===null);async function x(){v.value=!0;let e={};b.value||(e.from_date=a.value[0],e.to_date=a.value[1]),f.servers&&f.servers.length>0&&(e.servers=f.servers);const t=await T.get(route("admin.graph.player-minecraft-versions.timeseries",e));v.value=!1,h.value=t.data.data,p.value=t.data.series,u.value={tooltip:{trigger:"axis",axisPointer:{type:"cross"}},legend:{},toolbox:{feature:{dataZoom:{yAxisIndex:"none"},restore:{},saveAsImage:{}}},dataZoom:[{type:"inside",zoomLock:!0},{}],xAxis:{type:"time"},yAxis:{type:"value"},series:p.value.map(r=>({name:r,type:"bar",stack:"total",emphasis:{focus:"series"},datasetIndex:p.value.indexOf(r)})),dataset:h.value}}O(async()=>{await x()});const w=[{text:s("Today"),onClick(){const e=new Date;return[o(e),n(e)]}},{text:s("Yesterday"),onClick(){const e=m(new Date,1);return[o(e),n(e)]}},{text:s("Last 7 Days"),onClick(){const e=new Date,t=m(e,7);return[o(t),n(e)]}},{text:s("Last 30 Days"),onClick(){const e=new Date,t=m(e,30);return[o(t),n(e)]}},{text:s("This Month"),onClick(){const e=new Date,t=g(e);return[o(t),n(e)]}},{text:s("Last Month"),onClick(){const e=new Date,t=g(_(e,1)),r=j(_(e,1));return[o(t),n(r)]}},{text:s("This Year"),onClick(){const e=new Date,t=I(e);return[o(t),n(e)]}}];return(e,t)=>(D(),C("div",U,[y("div",K,[y("h3",F,M(l(s)("Player Client Versions over time")),1),c(l(P),{value:l(a),"onUpdate:value":t[0]||(t[0]=r=>L(a)?a.value=r:a=r),type:"date",range:"",placeholder:l(s)("View for date range"),"input-class":"block w-full p-2 text-sm border-secondary-300 rounded-md focus:border-primary-300 focus:ring focus:ring-primary-200 focus:ring-opacity-50 dark:bg-surface-900 dark:text-secondary-300 dark:border-secondary-900",shortcuts:w,onChange:t[1]||(t[1]=r=>x())},null,8,["value","placeholder"])]),c(A,{options:l(u),height:i.chartHeight,loading:l(v),autoresize:!0},null,8,["options","height","loading"])]))}},Q={class:"p-4 mx-auto space-y-4 px-10"},W={id:"row1"},X={id:"row2",class:"flex justify-between flex-1 space-x-4"},ee={id:"row3",class:"flex justify-between flex-1 space-x-4"},me={__name:"Playerbase",props:{serverList:{type:Object},filters:{type:Object}},setup(i){const s=i,f=k(()=>{var u;return route("admin.intel.server.playerbase.countries",{servers:(u=s.filters)==null?void 0:u.servers})});return(u,h)=>(D(),S(R,null,{default:Y(()=>[c(B,{title:u.__("Playerbase - ServerIntel")},null,8,["title"]),y("div",Q,[c(V,{title:u.__("Playerbase"),"server-list":i.serverList,filters:i.filters},null,8,["title","server-list","filters"]),y("div",W,[c(z,{"map-height":"500px","route-name":f.value},null,8,["route-name"])]),y("div",X,[c(N,{"chart-height":"387px",class:"basis-2/3",servers:i.filters.servers},null,8,["servers"]),c(H,{class:"basis-1/3","chart-height":"400px",servers:i.filters.servers},null,8,["servers"])]),y("div",ee,[c(G,{class:"basis-2/3","chart-height":"387px",servers:i.filters.servers},null,8,["servers"]),c(Z,{class:"basis-1/3","chart-height":"400px",servers:i.filters.servers},null,8,["servers"])])])]),_:1}))}};export{me as default};
