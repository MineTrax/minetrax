import{_ as k}from"./CopyToClipboard-o78WAkIw.js";import{E as x}from"./BaseLayout-sXkR-4Uw.js";import{_ as S}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{s as h,z as w,o as t,d as n,a as s,t as o,e as c,c as C,w as m,f as l,b as Q,p as B}from"./app-jpCRGzWE.js";const I={components:{ErrorMessage:x,CopyToClipboard:k},props:{server:Object},data(){return{serverInfo:Object,loading:!0,error:null,interval:null}},computed:{enabled(){return this.$page.props.generalSettings.enable_mcserver_statuspingbox?!!(this.server||this.$page.props.defaultQueryServer.server):!1}},created(){this.enabled&&(this.getServerQuery(),this.interval=setInterval(()=>this.getServerQuery(),1e4))},unmounted(){clearInterval(this.interval)},methods:{getServerQuery(){let e=this.server;e||(e=this.$page.props.defaultQueryServer.server),axios.get(route("server.ping.get",e.id)).then(r=>{this.serverInfo=r.data,this.error=null}).catch(r=>{this.error=r.response.data.message||r.message,this.serverInfo=null}).finally(()=>{this.loading=!1})}}},V={key:0},N={class:"p-3 sm:px-5 bg-white dark:bg-surface-800 rounded shadow break-words"},j={class:"font-extrabold text-secondary-800 dark:text-secondary-200"},z={key:0,class:"flex p-4 justify-center"},D={key:2,class:"flex flex-col"},E={class:"mt-3 text-secondary-700 dark:text-secondary-300 text-center font-semibold"},O={class:"font-bold text-primary-500 dark:text-primary-400"},T=["title","onClick"],M={key:0},A={key:1};function H(e,r,i,J,a,_){const f=h("error-message"),g=h("copy-to-clipboard"),b=w("tippy");return _.enabled?(t(),n("div",V,[s("div",N,[s("h3",j,o(e.__("Server Status")),1),a.loading?(t(),n("div",z,r[0]||(r[0]=[s("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-primary-600 dark:text-primary-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):c("",!0),a.error?(t(),C(f,{key:1},{default:m(()=>[l(o(a.error),1)]),_:1})):c("",!0),!a.loading&&!a.error?(t(),n("div",D,[s("div",E,[l(o(e.__("Join"))+" ",1),s("span",O,o(a.serverInfo.players.online),1),l(" "+o(e.__("Online Players"))+"! ",1)]),Q(g,null,{default:m(d=>{var p,u;return[B((t(),n("button",{title:e.__("Click to Copy"),type:"button",class:"text-center font-extrabold mt-3 border border-secondary-200 dark:border-secondary-700 text-secondary-600 dark:text-secondary-300 rounded p-2 hover:text-primary-500 dark:hover:text-primary-400 hover:bg-primary-50 dark:hover:bg-surface-900 hover:border-primary-500 dark:hover:border-secondary-800 focus:ring focus:ring-primary-200 focus:ring-opacity-50 transition duration-150 ease-in-out focus:outline-none",onClick:P=>{var v,y;return d.copy(i.server?i.server.hostname:(y=(v=e.$page.props.defaultQueryServer)==null?void 0:v.server)==null?void 0:y.hostname)}},[d.status!=="copied"?(t(),n("span",M,o(i.server?i.server.hostname:(u=(p=e.$page.props.defaultQueryServer)==null?void 0:p.server)==null?void 0:u.hostname),1)):(t(),n("span",A,o(e.__("Copied!")),1))],8,T)),[[b]])]}),_:1})])):c("",!0)])])):c("",!0)}const L=S(I,[["render",H]]);export{L as S};
