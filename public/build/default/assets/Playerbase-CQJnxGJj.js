import{h as f,e as k,p as L,o as O,c as C,w as _,b as n,j as o,a as v,t as $,B as A,s as M,A as T,_ as R}from"./app-Bh5uq5T2.js";import{_ as V}from"./AdminLayout-CjagHNcW.js";import{_ as z}from"./AppBreadcrumb-CEuU89zV.js";import{_ as H}from"./ServerIntelServerSelector-b5RBSHEG.js";import{_ as Z,a as q,b as E}from"./PlayersMinecraftVersionMetricBox-DNdN42O3.js";import{_ as I}from"./Chart-B_TJGdjR.js";import{i as S}from"./index.es-C81gQyvq.js";import{_ as P}from"./Card-CzH_Id9h.js";import{_ as j}from"./CardContent-Blze7ZpO.js";import{s as i,b as Y}from"./BaseLayout-DfXV1WNK.js";import{e as l,s as g,a as w,b as D,c as B}from"./subMonths-DIa98mlV.js";import"./useAuthorizable-B2TCKEv8.js";import"./CloudArrowDownIcon-peUI9MxF.js";import"./index-BlQc97mu.js";import"./utils-D-KgF5mV.js";import"./XSelect-BNHpxeBM.js";import"./Label-Ba68SC45.js";import"./SelectValue-B7I_M8gp.js";import"./useForwardPropsEmits-CoSvaN6q.js";import"./Teleport-C8LT0wZ6.js";import"./chevron-down-BM8GSVcu.js";import"./VisuallyHidden-C0pHwiql.js";import"./useFormControl-pZlKIA-M.js";import"./CardHeader-BH2Bo_Mo.js";import"./CardTitle-SGSULV0T.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Icon-B54a8he6.js";import"./x-Dxr5v1SF.js";const J={class:"flex justify-between items-center"},N={class:"font-extrabold text-foreground flex items-center"},U={__name:"PlayersJoinAddressOverTimeMetricBox",props:{servers:{type:Array,required:!1},chartHeight:{type:String,default:"400px"}},setup(u){const{__:s}=M(),c=u;let h=f({}),y=f([]),m=f([]),d=f(!0),r=f(null);const x=k(()=>r.value===null||r.value.length<=0||r.value[0]===null||r.value[1]===null);async function p(){d.value=!0;let e={};x.value||(e.from_date=r.value[0],e.to_date=r.value[1]),c.servers&&c.servers.length>0&&(e.servers=c.servers);const t=await T.get(route("admin.graph.player-join-addresses.timeseries",e));d.value=!1,y.value=t.data.data,m.value=t.data.series,h.value={tooltip:{trigger:"axis",axisPointer:{type:"cross"}},legend:{},toolbox:{feature:{dataZoom:{yAxisIndex:"none"},restore:{},saveAsImage:{}}},dataZoom:[{type:"inside",zoomLock:!0},{}],xAxis:{type:"time"},yAxis:{type:"value"},series:m.value.map(a=>({name:a,type:"bar",stack:"total",emphasis:{focus:"series"},datasetIndex:m.value.indexOf(a)})),dataset:y.value}}L(async()=>{await p()});const b=[{text:s("Today"),onClick(){const e=new Date;return[i(e),l(e)]}},{text:s("Yesterday"),onClick(){const e=g(new Date,1);return[i(e),l(e)]}},{text:s("Last 7 Days"),onClick(){const e=new Date,t=g(e,7);return[i(t),l(e)]}},{text:s("Last 30 Days"),onClick(){const e=new Date,t=g(e,30);return[i(t),l(e)]}},{text:s("This Month"),onClick(){const e=new Date,t=w(e);return[i(t),l(e)]}},{text:s("Last Month"),onClick(){const e=new Date,t=w(D(e,1)),a=B(D(e,1));return[i(t),l(a)]}},{text:s("This Year"),onClick(){const e=new Date,t=Y(e);return[i(t),l(e)]}}];return(e,t)=>(O(),C(o(P),{class:"w-full h-full"},{default:_(()=>[n(o(j),{class:"p-4 space-y-4"},{default:_(()=>[v("div",J,[v("h3",N,$(o(s)("Join Addresses over time")),1),n(o(S),{value:o(r),"onUpdate:value":t[0]||(t[0]=a=>A(r)?r.value=a:r=a),type:"date",range:"",placeholder:o(s)("View for date range"),"input-class":"block w-full p-2 text-sm border border-input rounded-md bg-background text-foreground placeholder:text-muted-foreground focus:border-primary focus:ring-1 focus:ring-ring",shortcuts:b,onChange:t[1]||(t[1]=a=>p())},null,8,["value","placeholder"])]),n(I,{options:o(h),height:u.chartHeight,loading:o(d),autoresize:!0},null,8,["options","height","loading"])]),_:1})]),_:1}))}},F={class:"flex justify-between items-center"},G={class:"font-extrabold text-foreground flex items-center"},K={__name:"PlayersMinecraftVersionOverTimeMetricBox",props:{servers:{type:Array,required:!1},chartHeight:{type:String,default:"400px"}},setup(u){const{__:s}=M(),c=u;let h=f({}),y=f([]),m=f([]),d=f(!0),r=f(null);const x=k(()=>r.value===null||r.value.length<=0||r.value[0]===null||r.value[1]===null);async function p(){d.value=!0;let e={};x.value||(e.from_date=r.value[0],e.to_date=r.value[1]),c.servers&&c.servers.length>0&&(e.servers=c.servers);const t=await T.get(route("admin.graph.player-minecraft-versions.timeseries",e));d.value=!1,y.value=t.data.data,m.value=t.data.series,h.value={tooltip:{trigger:"axis",axisPointer:{type:"cross"}},legend:{},toolbox:{feature:{dataZoom:{yAxisIndex:"none"},restore:{},saveAsImage:{}}},dataZoom:[{type:"inside",zoomLock:!0},{}],xAxis:{type:"time"},yAxis:{type:"value"},series:m.value.map(a=>({name:a,type:"bar",stack:"total",emphasis:{focus:"series"},datasetIndex:m.value.indexOf(a)})),dataset:y.value}}L(async()=>{await p()});const b=[{text:s("Today"),onClick(){const e=new Date;return[i(e),l(e)]}},{text:s("Yesterday"),onClick(){const e=g(new Date,1);return[i(e),l(e)]}},{text:s("Last 7 Days"),onClick(){const e=new Date,t=g(e,7);return[i(t),l(e)]}},{text:s("Last 30 Days"),onClick(){const e=new Date,t=g(e,30);return[i(t),l(e)]}},{text:s("This Month"),onClick(){const e=new Date,t=w(e);return[i(t),l(e)]}},{text:s("Last Month"),onClick(){const e=new Date,t=w(D(e,1)),a=B(D(e,1));return[i(t),l(a)]}},{text:s("This Year"),onClick(){const e=new Date,t=Y(e);return[i(t),l(e)]}}];return(e,t)=>(O(),C(o(P),{class:"w-full h-full"},{default:_(()=>[n(o(j),{class:"p-4 space-y-4"},{default:_(()=>[v("div",F,[v("h3",G,$(o(s)("Player Client Versions over time")),1),n(o(S),{value:o(r),"onUpdate:value":t[0]||(t[0]=a=>A(r)?r.value=a:r=a),type:"date",range:"",placeholder:o(s)("View for date range"),"input-class":"block w-full p-2 text-sm border border-input rounded-md bg-background text-foreground placeholder:text-muted-foreground focus:border-primary focus:ring-1 focus:ring-ring",shortcuts:b,onChange:t[1]||(t[1]=a=>p())},null,8,["value","placeholder"])]),n(I,{options:o(h),height:u.chartHeight,loading:o(d),autoresize:!0},null,8,["options","height","loading"])]),_:1})]),_:1}))}},Q={class:"px-10 py-8 mx-auto space-y-4"},W={class:"flex justify-between items-center"},X={id:"row1"},ee={id:"row2",class:"flex justify-between flex-1 space-x-4"},te={id:"row3",class:"flex justify-between flex-1 space-x-4"},Ae={__name:"Playerbase",props:{serverList:{type:Object},filters:{type:Object}},setup(u){var d,r,x;const{__:s}=M(),c=u;let h=(r=(d=c.filters)==null?void 0:d.servers)!=null&&r.length?(x=c.filters)==null?void 0:x.servers[0]:null;const y=[{text:s("Admin"),current:!1},{text:s("Server Intel"),current:!1},{text:s("Playerbase"),current:!0},{text:c.serverList[h]??s("All Servers"),current:!0}],m=k(()=>{var p;return route("admin.intel.server.playerbase.countries",{servers:(p=c.filters)==null?void 0:p.servers})});return(p,b)=>(O(),C(V,null,{default:_(()=>[n(R,{title:o(s)("Playerbase - ServerIntel")},null,8,["title"]),v("div",Q,[v("div",W,[n(z,{class:"mt-0","breadcrumb-class":"max-w-none px-0 md:px-0",items:y}),n(H,{"server-list":u.serverList,filters:u.filters},null,8,["server-list","filters"])]),v("div",X,[n(Z,{"map-height":"500px","route-name":m.value},null,8,["route-name"])]),v("div",ee,[n(U,{"chart-height":"387px",class:"basis-2/3",servers:u.filters.servers},null,8,["servers"]),n(q,{class:"basis-1/3","chart-height":"400px",servers:u.filters.servers},null,8,["servers"])]),v("div",te,[n(K,{class:"basis-2/3","chart-height":"387px",servers:u.filters.servers},null,8,["servers"]),n(E,{class:"basis-1/3","chart-height":"400px",servers:u.filters.servers},null,8,["servers"])])])]),_:1}))}};export{Ae as default};
