import{r as T,i as V,H as B,q as L,y as D,c as u,w as a,p as S,o as n,b as l,u as e,_ as E,a as r,t as o,L as I,f as y,x as O,m as b,d as w,e as $,M as z,K as F}from"./app-Dpl9gX7Q.js";import{u as H}from"./AppLayout-DXZxqPA-.js";import{_ as U}from"./AdminLayout-S_Vb7XqI.js";import{_ as X}from"./DataTable-DDnOX9AC.js";import{D as m}from"./DtRowItem-BlDfCqF-.js";import{u as G}from"./useAuthorizable-CurI0iCo.js";import{X as K}from"./XSelect-dRksjx3p.js";import{_ as M}from"./CommonStatusBadge-DRPWd9r0.js";import{_ as R}from"./UserDisplayname-yMuFW7IR.js";import{r as J}from"./EyeIcon-QuqeQ-EV.js";import{r as P}from"./TrashIcon-BJgDz_OZ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Icon-DaGQmWS8.js";import"./keyboard-CRyVILOh.js";import"./open-closed-Dap3_g_L.js";import"./CloudArrowDownIcon-vljs0lD4.js";import"./index-Cq9rKLa8.js";import"./vue-multiselect.esm-DEJEudDK.js";import"./XMarkIcon-DHZWClRQ.js";import"./hidden-Dddd2Ili.js";const Q={class:"p-4 mx-auto space-y-4 px-10"},W={class:"flex items-center justify-between"},Y={class:"text-xl font-extrabold text-gray-800 dark:text-gray-200"},Z={class:"text-sm px-4 font-medium text-left text-gray-800 whitespace-nowrap dark:text-gray-200"},tt={class:"px-4"},et={class:"flex-shrink-0 h-10 w-10 mr-2"},st=["src"],at={class:"flex-col"},rt={class:"text-sm text-gray-500"},lt=["title"],ot={class:"text-xs text-gray-400 dark:text-gray-500"},it={key:1,class:"text-gray-400 text-sm italic"},nt={class:"text-xs text-gray-400 dark:text-gray-500"},ct={key:1,class:"text-gray-400 text-sm italic"},dt={class:"px-6 py-4 space-x-2 text-sm font-medium text-right whitespace-nowrap"},Tt={__name:"IndexRecruitmentSubmission",props:{forms:{type:Object},filters:{type:Object},submissions:{type:Object},closed:{type:Boolean,default:!1}},setup(c){var k,v,A;const{can:j}=G(),{__:s}=S(),{formatTimeAgoToNow:f,formatToDayDateString:g}=H(),d=c,C=[{key:"id",label:s("ID"),sortable:!0,class:"text-left w-[5%]",filterable:{key:"id",type:"text"}},{key:"user_id",sortable:!0,label:s("Applicant"),class:"w-3/12",filterable:{key:"user.name",type:"text"}},{key:"recruitment_id",label:s("Application"),sortable:!0},{key:"status",label:s("Status"),sortable:!0,filterable:{type:"multiselect",options:["pending","inprogress","approved","rejected","withdrawn","onhold"]}},{key:"last_act_at",sortable:!0,label:s("Last Actor"),class:"text-right",filterable:{key:"lastActor.name",type:"text"}},{key:"last_comment_at",sortable:!0,label:s("Last Comment"),class:"text-right",filterable:{key:"lastCommentor.name",type:"text"}},{key:"created_at",label:s("Created At"),class:"text-right w-1/12 whitespace-nowrap",sortable:!0},{key:"updated_at",label:s("Updated At"),class:"text-right w-1/12 whitespace-nowrap",sortable:!0},{key:"actions",label:s("Actions"),sortable:!1,class:"w-1/12 text-right"}];let p=T((v=(k=d.filters)==null?void 0:k.forms)!=null&&v.length?(A=d.filters)==null?void 0:A.forms[0]:null);const q=V(()=>d.filters.forms&&d.filters.forms.length>0?d.filters.forms.map(i=>d.forms[i]).join(", "):null);return B(p,i=>{const _={forms:i?[i]:null};z.get(route(route().current()),F.pickBy(_))}),(i,_)=>{const h=L("InertiaLink"),x=D("tippy"),N=D("confirm");return n(),u(U,null,{default:a(()=>[l(E,{title:c.closed?e(s)("Closed Request - Applications"):e(s)("Open Requests - Applications")},null,8,["title"]),r("div",Q,[r("div",W,[r("h3",Y,o(c.closed?e(s)("Closed Requests:"):e(s)("Open Requests:"))+" "+o(q.value??e(s)("All Applications")),1),l(K,{id:"selectForms",modelValue:e(p),"onUpdate:modelValue":_[0]||(_[0]=t=>I(p)?p.value=t:p=t),name:"selectForms","select-list":c.forms,placeholder:e(s)("All Applications"),class:"w-48 max-w-48 dark:border dark:rounded dark:border-gray-700"},null,8,["modelValue","select-list","placeholder"])]),r("div",null,[l(X,{class:"bg-white rounded shadow dark:bg-gray-800",header:C,data:c.submissions,filters:c.filters},{default:a(({item:t})=>[r("td",Z,[l(h,{as:"a",href:i.route("admin.recruitment-submission.show",t.id),class:"hover:text-sky-500"},{default:a(()=>[y(o(t.id),1)]),_:2},1032,["href"])]),r("td",tt,[l(h,{href:i.route("admin.recruitment-submission.show",t.id),class:"flex items-center"},{default:a(()=>[r("div",et,[r("img",{class:"h-10 w-10 rounded-full",src:t.user.profile_photo_url,alt:"Avatar"},null,8,st)]),r("div",at,[r("div",{class:"text-sm font-semibold text-gray-900 dark:text-gray-300 whitespace-nowrap truncate",style:O([t.user.roles[0].color?{color:t.user.roles[0].color}:null])},o(t.user.name),5),r("div",rt," @"+o(t.user.username),1)])]),_:2},1032,["href"])]),l(m,null,{default:a(()=>[b((n(),w("p",{title:t.recruitment.title,class:"truncate w-32"},[y(o(t.recruitment.title),1)],8,lt)),[[x]])]),_:2},1024),l(m,null,{default:a(()=>[l(M,{status:t.status.value},null,8,["status"])]),_:2},1024),l(m,{class:"text-right whitespace-nowrap"},{default:a(()=>[t.last_actor?(n(),u(R,{key:0,"text-class":"text-sm text-gray-700 dark:text-gray-400",user:t.last_actor,"show-badges":!0},{default:a(()=>[r("div",ot,o(e(f)(t.last_act_at)),1)]),_:2},1032,["user"])):(n(),w("span",it,o(e(s)("None")),1))]),_:2},1024),l(m,{class:"text-right whitespace-nowrap"},{default:a(()=>[t.last_commentor?(n(),u(R,{key:0,"text-class":"text-sm text-gray-700 dark:text-gray-400",user:t.last_commentor,"show-badges":!0},{default:a(()=>[r("div",nt,o(e(f)(t.last_comment_at)),1)]),_:2},1032,["user"])):(n(),w("span",ct,o(e(s)("None")),1))]),_:2},1024),b((n(),u(m,{class:"text-right whitespace-nowrap",content:e(g)(t.created_at)},{default:a(()=>[y(o(e(f)(t.created_at)),1)]),_:2},1032,["content"])),[[x]]),b((n(),u(m,{class:"text-right whitespace-nowrap",content:e(g)(t.updated_at)},{default:a(()=>[y(o(e(f)(t.updated_at)),1)]),_:2},1032,["content"])),[[x]]),r("td",dt,[l(h,{as:"a",href:i.route("admin.recruitment-submission.show",t.id),class:"inline-flex items-center justify-center text-blue-500 hover:text-blue-800"},{default:a(()=>[l(e(J),{class:"inline-block w-5 h-5"})]),_:2},1032,["href"]),e(j)("delete recruitment_submissions")&&c.closed?b((n(),u(h,{key:0,as:"button",method:"DELETE",href:i.route("admin.recruitment-submission.delete",t.id),class:"inline-flex items-center justify-center text-red-600 hover:text-red-900 focus:outline-none",title:e(s)("Delete Submission")},{default:a(()=>[l(e(P),{class:"inline-block w-5 h-5"})]),_:2},1032,["href","title"])),[[N,{message:"Delete this Request? This action cannot be undone."}],[x]]):$("",!0)])]),_:1},8,["data","filters"])])])]),_:1})}}};export{Tt as default};
