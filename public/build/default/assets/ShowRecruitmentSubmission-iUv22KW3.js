import{o as a,d as g,a as e,e as B,h as F,k as V,y as j,z as S,c,w as r,b as n,j as s,_ as L,i as m,t as o,v as b,g as d,N as M,M as N,L as O,s as E}from"./app-CCKLH5ME.js";import{u as I}from"./BaseLayout-EMqiVgMT.js";import{_ as K}from"./AdminLayout-y-VDq6pb.js";import{u as P}from"./useFormKit-DsPcY36i.js";import{_ as U}from"./RecruitmentMessagesBox-nfNqIrJX.js";import{_ as C}from"./CommonStatusBadge-DhJOpYMk.js";import{a as q}from"./DialogModal-Ddb5Yiui.js";import{_ as z}from"./SecondaryButton-BeJFk2aT.js";import{_ as H}from"./XTextarea-CKgEP4Pn.js";import{L as Z}from"./LoadingButton-Bjoy-Inx.js";import{I as w}from"./Icon-DlyfKWQ8.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useForwardPropsEmits-Dm3zbijY.js";import"./chevron-down-BttFxFy5.js";import"./Teleport-EbLwDdUQ.js";import"./index-B_t7zORc.js";import"./utils-D-KgF5mV.js";import"./VisuallyHidden-GtrTMWr0.js";import"./x-DbrWVFCU.js";import"./useAuthorizable-BcHdws2r.js";import"./CloudArrowDownIcon-C08Kt2Ph.js";import"./LoadingSpinner-mRN1OuPz.js";import"./UserDisplayname-CmytMFC0.js";import"./AlertCard-DxQ-1NO6.js";import"./Card-DgOxmuJh.js";import"./CardContent-pSETb6z5.js";import"./XMarkIcon-BFJSCvQG.js";import"./Textarea-BSeHE2lz.js";import"./Label-JlxotZKr.js";import"./index-EGyC-5xi.js";import"./loader-circle-CMIQx9pD.js";function A(t,i){return a(),g("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m11.25 9-3 3m0 0 3 3m-3-3h7.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}const G={class:"p-4 px-10 mx-auto space-y-4"},J={class:"py-3 flex justify-between"},Q={class:"text-xl font-extrabold text-foreground dark:text-foreground"},W={class:"flex gap-4"},X={class:"flex items-center justify-center"},Y={class:"flex items-center justify-center"},ee={class:"flex w-full gap-4"},te={class:"w-1/2 space-y-4"},se={class:"p-2 overflow-hidden bg-white rounded shadow max-w-none dark:bg-surface-800"},oe={class:"flex flex-col mt-3"},ie={class:"inline-flex items-center px-4 py-3 -mt-px text-sm font-semibold text-foreground gap-x-2 first:rounded-t-lg first:mt-0 last:rounded-b-lg dark:text-foreground"},ne={class:"flex items-center justify-between w-full"},re={class:"flex-shrink-0 h-10 w-10 mr-2"},ae=["src"],ue={class:"flex-col"},le={class:"text-sm text-foreground"},de={class:"inline-flex items-center px-4 py-3 -mt-px text-sm font-semibold text-foreground gap-x-2 first:rounded-t-lg first:mt-0 last:rounded-b-lg dark:text-foreground"},ce={class:"flex items-center justify-between w-full"},me={class:"inline-flex items-center px-4 py-3 -mt-px text-sm font-semibold text-foreground gap-x-2 first:rounded-t-lg first:mt-0 last:rounded-b-lg dark:text-foreground"},fe={class:"flex items-center justify-between w-full"},be=["title"],xe={class:"inline-flex items-center px-4 py-3 -mt-px text-sm font-semibold text-foreground gap-x-2 first:rounded-t-lg first:mt-0 last:rounded-b-lg dark:text-foreground"},ge={class:"flex items-center justify-between w-full"},he=["title"],pe={class:"inline-flex items-center px-4 py-3 -mt-px text-sm font-semibold text-foreground gap-x-2 first:rounded-t-lg first:mt-0 last:rounded-b-lg dark:text-foreground"},ve={class:"flex items-center justify-between w-full"},we={key:0,class:"inline-flex items-center px-4 py-3 -mt-px text-sm font-semibold text-foreground gap-x-2 first:rounded-t-lg first:mt-0 last:rounded-b-lg dark:text-foreground"},ye={class:"flex items-center justify-between w-full"},ke={class:"w-1/2 whitespace-pre-line text-right"},_e={key:1,class:"inline-flex items-center px-4 py-3 -mt-px text-sm font-semibold text-foreground gap-x-2 first:rounded-t-lg first:mt-0 last:rounded-b-lg dark:text-foreground"},je={class:"flex items-center justify-between w-full"},Se={class:"button-group flex space-x-4 justify-end p-4"},Ce={class:"p-2 overflow-hidden bg-white rounded shadow max-w-none dark:bg-surface-800"},Ae={class:"md:w-1/2 px-3 py-2 overflow-hidden bg-white rounded shadow max-w-none dark:bg-surface-800 md:px-10 md:py-5 no-disabled-effect"},Te={class:"text-lg font-bold"},rt={__name:"ShowRecruitmentSubmission",props:{submission:{type:Object}},setup(t){const{__:i}=E(),{formatTimeAgoToNow:y,formatToDayDateString:k}=I(),T=t,$=B(()=>T.submission.data.map(u=>({...u,value:u.data}))),D=P().generateSchemaFromFieldsArray($.value,!0),h=F(!1),p=V({action:"rejected",reason:""});return(u,l)=>{const f=j("InertiaLink"),R=j("FormKit"),_=S("confirm"),x=S("tippy");return a(),c(K,null,{default:r(()=>[n(L,{title:s(i)(":user application for :recruitmenttitle #:index - Applications",{user:t.submission.user.name,index:t.submission.id,recruitmenttitle:t.submission.recruitment.title})},null,8,["title"]),e("div",G,[e("div",J,[e("h3",Q,[m(o(s(i)(":user application for :recruitmenttitle #:index",{user:t.submission.user.name,index:t.submission.id,recruitmenttitle:t.submission.recruitment.title}))+" ",1),n(C,{status:t.submission.status.value},null,8,["status"])]),e("div",W,[t.submission.i_can_delete?b((a(),c(f,{key:0,as:"button",method:"DELETE",href:u.route("admin.recruitment-submission.delete",t.submission.id),class:"inline-flex items-center px-4 py-2 text-xs font-semibold tracking-widest text-white uppercase transition duration-150 ease-in-out bg-error-600 border border-transparent rounded-md hover:bg-error-700 active:bg-error-900 focus:outline-none focus:border-error-900 focus:shadow-outline-gray"},{default:r(()=>[e("span",null,o(s(i)("Delete")),1)]),_:1},8,["href"])),[[_,{message:"Delete this Submission? This action cannot be undone."}],[x]]):d("",!0),n(f,{href:u.route("admin.recruitment-submission.index-open"),class:"inline-flex items-center px-4 py-2 text-xs font-semibold tracking-widest text-white uppercase transition duration-150 ease-in-out bg-surface-400 border border-transparent rounded-md hover:bg-surface-500 active:bg-surface-600 focus:outline-none focus:border-foreground focus:shadow-outline-gray dark:bg-surface-800 dark:hover:bg-surface-700 dark:active:bg-surface-900 dark:focus:border-foreground"},{default:r(()=>[e("span",X,[n(s(A),{class:"h-4 mr-2"}),m(" "+o(s(i)("Open")),1)])]),_:1},8,["href"]),n(f,{href:u.route("admin.recruitment-submission.index-closed"),class:"inline-flex items-center px-4 py-2 text-xs font-semibold tracking-widest text-white uppercase transition duration-150 ease-in-out bg-surface-400 border border-transparent rounded-md hover:bg-surface-500 active:bg-surface-600 focus:outline-none focus:border-foreground focus:shadow-outline-gray dark:bg-surface-800 dark:hover:bg-surface-700 dark:active:bg-surface-900 dark:focus:border-foreground"},{default:r(()=>[e("span",Y,[n(s(A),{class:"h-4 mr-2"}),m(" "+o(s(i)("Closed")),1)])]),_:1},8,["href"])])]),e("div",ee,[e("div",te,[e("div",se,[e("ul",oe,[e("li",ie,[e("div",ne,[e("span",null,o(s(i)("Applicant")),1),e("div",null,[n(f,{href:u.route("user.public.get",t.submission.user.username),class:"flex items-center"},{default:r(()=>[e("div",re,[e("img",{class:"h-10 w-10 rounded-full",src:t.submission.user.profile_photo_url,alt:"Avatar"},null,8,ae)]),e("div",ue,[e("div",{class:"text-sm font-semibold text-foreground dark:text-foreground whitespace-nowrap truncate",style:M([t.submission.user.roles[0].color?{color:t.submission.user.roles[0].color}:null])},[m(o(t.submission.user.name)+" ",1),t.submission.user.verified_at?b((a(),c(w,{key:0,name:"verified-check-fill",title:s(i)("Verified Account"),class:"inline mb-1 fill-current focus:outline-none text-primary w-5 h-5"},null,8,["title"])),[[x]]):d("",!0),t.submission.user.is_staff?b((a(),c(w,{key:1,name:"shield-check-fill",title:s(i)("Staff Member"),class:"inline mb-1 text-amber-400 fill-current focus:outline-none w-5 h-5"},null,8,["title"])),[[x]]):d("",!0),t.submission.user.muted_at?b((a(),c(w,{key:2,name:"volume-off-fill",title:s(i)("Muted User"),class:"inline mb-1 text-error-500 fill-current focus:outline-none w-5 h-5"},null,8,["title"])),[[x]]):d("",!0)],4),e("div",le," @"+o(t.submission.user.username),1)])]),_:1},8,["href"])])])]),e("li",de,[e("div",ce,[e("span",null,o(s(i)("Application")),1),e("span",null,o(t.submission.recruitment.title),1)])]),e("li",me,[e("div",fe,[e("span",null,o(s(i)("Created At")),1),b((a(),g("span",{title:s(y)(t.submission.created_at)},[m(o(s(k)(t.submission.created_at)),1)],8,be)),[[x]])])]),e("li",xe,[e("div",ge,[e("span",null,o(s(i)("Last Updated At")),1),b((a(),g("span",{title:s(y)(t.submission.updated_at)},[m(o(s(k)(t.submission.updated_at)),1)],8,he)),[[x]])])]),e("li",pe,[e("div",ve,[e("span",null,o(s(i)("Request Status")),1),n(C,{status:t.submission.status.value},null,8,["status"])])]),t.submission.last_act_reason?(a(),g("li",we,[e("div",ye,[e("span",null,o(s(i)("Reason")),1),e("span",ke,o(t.submission.last_act_reason),1)])])):d("",!0),t.submission.last_act_by?(a(),g("li",_e,[e("div",je,[e("span",null,o(s(i)("Marked :status By",{status:s(N.startCase)(t.submission.status.value)})),1),e("span",null,"@"+o(t.submission.last_actor.username),1)])])):d("",!0)]),e("div",Se,[t.submission.i_can_act&&["pending","onhold"].includes(t.submission.status.value)?(a(),c(f,{key:0,as:"button",class:"inline-flex items-center px-4 py-2 text-xs font-semibold tracking-widest text-white uppercase transition duration-150 ease-in-out bg-primary border border-transparent rounded-md hover:bg-primary active:bg-primary focus:outline-none focus:border-primary focus:shadow-outline-gray",method:"POST",href:u.route("admin.recruitment-submission.act",t.submission.id),data:{action:"inprogress"}},{default:r(()=>[e("span",null,o(s(i)("Mark In-Progress")),1)]),_:1},8,["href"])):d("",!0),t.submission.i_can_act&&t.submission.status.value!="onhold"?(a(),c(f,{key:1,as:"button",class:"inline-flex items-center px-4 py-2 text-xs font-semibold tracking-widest text-white uppercase transition duration-150 ease-in-out bg-surface-500 border border-transparent rounded-md hover:bg-surface-700 active:bg-surface-900 focus:outline-none focus:border-foreground focus:shadow-outline-gray",method:"POST",href:u.route("admin.recruitment-submission.act",t.submission.id),data:{action:"onhold"}},{default:r(()=>[e("span",null,o(s(i)("Mark On-Hold")),1)]),_:1},8,["href"])):d("",!0),t.submission.i_can_act?b((a(),c(f,{key:2,as:"button",method:"POST",href:u.route("admin.recruitment-submission.act",t.submission.id),data:{action:"approved"},class:"inline-flex items-center px-4 py-2 text-xs font-semibold tracking-widest text-white uppercase transition duration-150 ease-in-out bg-success-500 border border-transparent rounded-md hover:bg-success-700 active:bg-success-900 focus:outline-none focus:border-success-900 focus:shadow-outline-gray"},{default:r(()=>[e("span",null,o(s(i)("Approve")),1)]),_:1},8,["href"])),[[_,{title:"Approve",confirmButtonColor:"green",icon:"success",message:"Approve this request? This action cannot be undone."}]]):d("",!0),t.submission.i_can_act?(a(),g("button",{key:3,class:"inline-flex items-center px-4 py-2 text-xs font-semibold tracking-widest text-white uppercase transition duration-150 ease-in-out bg-error-500 border border-transparent rounded-md hover:bg-error-700 active:bg-error-900 focus:outline-none focus:border-error-900 focus:shadow-outline-gray",onClick:l[0]||(l[0]=v=>h.value=!0)},[e("span",null,o(s(i)("Reject")),1)])):d("",!0)])]),e("div",Ce,[n(U,{submission:t.submission,"for-admin":!0},null,8,["submission"])])]),e("div",Ae,[n(R,{disabled:!0,type:"form","submit-attrs":{inputClass:"hidden"}},{default:r(()=>[n(s(O),{schema:s(D)},null,8,["schema"])]),_:1})])])]),n(q,{show:h.value,onClose:l[4]||(l[4]=v=>h.value=!1)},{title:r(()=>[e("h3",Te,o(s(i)("Reject Application")),1)]),content:r(()=>[n(H,{modelValue:s(p).reason,"onUpdate:modelValue":l[1]||(l[1]=v=>s(p).reason=v),label:s(i)("Reason for Rejection"),error:s(p).errors.reason},null,8,["modelValue","label","error"])]),footer:r(()=>[n(z,{class:"mr-2",onClick:l[2]||(l[2]=v=>h.value=!1)},{default:r(()=>[m(o(s(i)("Cancel")),1)]),_:1}),n(Z,{loading:s(p).processing,class:"inline-flex items-center px-4 py-2 text-xs font-semibold tracking-widest text-white uppercase transition duration-150 ease-in-out bg-error-500 border border-transparent rounded-md hover:bg-error-700 active:bg-error-900 focus:outline-none focus:border-error-900 focus:shadow-outline-gray",onClick:l[3]||(l[3]=()=>{s(p).post(u.route("admin.recruitment-submission.act",t.submission.id),{onSuccess:()=>{h.value=!1}})})},{default:r(()=>[m(o(s(i)("Reject")),1)]),_:1},8,["loading"])]),_:1},8,["show"])]),_:1})}}};export{rt as default};
