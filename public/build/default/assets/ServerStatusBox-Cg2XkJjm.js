import{_ as I}from"./Card-xSJBqBdx.js";import{_ as w}from"./CardContent-CE_SpfjF.js";import{_ as E}from"./CopyToClipboard-o78WAkIw.js";import{_ as y}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{o as t,d as c,r as L,y as n,z as N,c as p,w as l,b as u,a as m,t as s,g as d,i as f,v as V}from"./app-Ia0bJDXi.js";import{_ as j}from"./index-Bf3skjKm.js";import{L as D}from"./LoadingSpinner-r7xua1a_.js";const O={name:"ErrorMessage"},T={class:"bg-destructive/5 border border-destructive rounded mt-2 p-1 text-center text-destructive"};function z(e,o,a,b,r,v){return t(),c("div",T,[L(e.$slots,"default")])}const M=y(O,[["render",z]]),J={components:{ErrorMessage:M,CopyToClipboard:E,Card:I,CardContent:w,Button:j,LoadingSpinner:D},props:{server:Object},data(){return{serverInfo:Object,loading:!0,error:null,interval:null}},computed:{enabled(){return this.$page.props.generalSettings.enable_mcserver_statuspingbox?!!(this.server||this.$page.props.defaultQueryServer.server):!1}},created(){this.enabled&&(this.getServerQuery(),this.interval=setInterval(()=>this.getServerQuery(),1e4))},unmounted(){clearInterval(this.interval)},methods:{getServerQuery(){let e=this.server;e||(e=this.$page.props.defaultQueryServer.server),axios.get(route("server.ping.get",e.id)).then(o=>{this.serverInfo=o.data,this.error=null}).catch(o=>{this.error=o.response.data.message||o.message,this.serverInfo=null}).finally(()=>{this.loading=!1})}}},P={class:"font-extrabold text-card-foreground"},q={key:0,class:"flex p-4 justify-center"},A={key:2,class:"flex flex-col"},F={class:"mt-3 text-card-foreground text-center font-semibold"},G={class:"font-bold text-primary"},H={key:0},K={key:1};function R(e,o,a,b,r,v){const C=n("LoadingSpinner"),S=n("error-message"),k=n("Button"),x=n("copy-to-clipboard"),$=n("CardContent"),B=n("Card"),Q=N("tippy");return v.enabled?(t(),p(B,{key:0},{default:l(()=>[u($,{class:"p-3 sm:px-5 break-words"},{default:l(()=>[m("h3",P,s(e.__("Server Status")),1),r.loading?(t(),c("div",q,[u(C,{loading:r.loading,class:"w-5 h-5"},null,8,["loading"])])):d("",!0),r.error?(t(),p(S,{key:1},{default:l(()=>[f(s(r.error),1)]),_:1})):d("",!0),!r.loading&&!r.error?(t(),c("div",A,[m("div",F,[f(s(e.__("Join"))+" ",1),m("span",G,s(r.serverInfo.players.online),1),f(" "+s(e.__("Online Players"))+"! ",1)]),u(x,null,{default:l(g=>[V((t(),p(k,{class:"mt-3 font-extrabold",size:"lg",title:e.__("Click to Copy"),type:"button",onClick:_=>{var i,h;return g.copy(a.server?a.server.hostname:(h=(i=e.$page.props.defaultQueryServer)==null?void 0:i.server)==null?void 0:h.hostname)}},{default:l(()=>{var _,i;return[g.status!=="copied"?(t(),c("span",H,s(a.server?a.server.hostname:(i=(_=e.$page.props.defaultQueryServer)==null?void 0:_.server)==null?void 0:i.hostname),1)):(t(),c("span",K,s(e.__("Copied!")),1))]}),_:2},1032,["title","onClick"])),[[Q]])]),_:1})])):d("",!0)]),_:1})]),_:1})):d("",!0)}const te=y(J,[["render",R]]);export{M as E,te as S};
