import{_ as j}from"./AdminLayout-BwN0mh-k.js";import{u as $}from"./useAuthorizable-CYy4Wh89.js";import{u as C}from"./BaseLayout-D4bLMm7A.js";import{y as I,z as w,c as n,w as a,s as T,o,b as r,j as e,a as i,i as _,t as l,P as h,g as x,d as c,l as B,F as E,v as u}from"./app-Do9q-MyE.js";import{_ as L}from"./DataTable-VEChXCNt.js";import{D as p}from"./DtRowItem-DJIkcU6H.js";import{_ as V}from"./AppBreadcrumb-DZUMC8fH.js";import{_ as O}from"./index-oDi_KVMO.js";import{_ as S}from"./index-CFxITNL-.js";import{I as v}from"./Icon-DFL_HybF.js";import{r as q}from"./LockClosedIcon-43ZocKFk.js";import{r as z}from"./LockOpenIcon-C2fqJ7z1.js";import{r as F}from"./TrashIcon-Bw-WGA2N.js";import"./CloudArrowDownIcon-BPF7BCYT.js";import"./index-DlYoUYeQ.js";import"./utils-D-KgF5mV.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useForwardPropsEmits-L3e3_QW0.js";import"./chevron-down-DrlPincR.js";import"./Teleport-YoVnS0TY.js";import"./VisuallyHidden-Ckc87s0l.js";import"./x-DOdw7ujo.js";import"./SelectValue-CKzp-AAz.js";import"./useFormControl-DGZk-wbf.js";import"./vue-multiselect.esm-Bll4-Ezs.js";import"./XMarkIcon-BurOU1Wc.js";const R={class:"px-10 py-8 mx-auto text-foreground"},H={class:"flex justify-between mb-4"},M={class:"flex"},Q={class:"px-4 py-4 text-sm font-medium text-center text-foreground whitespace-nowrap dark:text-foreground"},U={class:"text-sm font-medium text-foreground dark:text-foreground"},G={class:"px-4 py-3 space-x-1 space-y-1 text-sm"},J={key:1,class:"italic text-foreground"},K=["content"],W=["content"],X={key:1,class:"italic"},Y=["content"],Z={key:0},ee={key:1,class:"italic text-error-600"},te={class:"px-6 py-4 space-x-2 text-sm font-medium text-right whitespace-nowrap"},$e={__name:"IndexPoll",props:{polls:Object,filters:Object},setup(b){const{can:f}=$(),{__:t}=T(),{formatTimeAgoToNow:y,formatToDayDateString:k}=C(),D=[{text:t("Admin"),current:!1},{text:t("Polls"),current:!0}],P=[{key:"id",label:t("ID"),sortable:!0,class:"text-center"},{key:"question",sortable:!0,label:t("Question")},{key:"options",sortable:!1,label:t("Options")},{key:"started_at",sortable:!0,label:t("Started At")},{key:"closed_at",label:t("End At"),sortable:!0},{key:"created_at",label:t("Created At"),sortable:!0},{key:"created_by",label:t("Created By"),sortable:!0},{key:"is_closed",sortable:!0,label:t("Locked")},{key:"actions",label:t("Actions"),sortable:!1,class:"w-1/12 text-right"}];return(m,se)=>{const A=I("app-head"),d=w("tippy"),N=w("confirm");return o(),n(j,null,{default:a(()=>[r(A,{title:e(t)("Manage Polls")},null,8,["title"]),i("div",R,[i("div",H,[r(V,{class:"mt-0","breadcrumb-class":"max-w-none px-0 md:px-0",items:D}),i("div",M,[e(f)("create polls")?(o(),n(e(O),{key:0,"as-child":""},{default:a(()=>[r(e(h),{href:m.route("admin.poll.create")},{default:a(()=>[_(l(e(t)("Create Poll")),1)]),_:1},8,["href"])]),_:1})):x("",!0)])]),r(L,{class:"bg-card rounded-lg shadow",header:P,data:b.polls,filters:b.filters},{default:a(({item:s})=>[i("td",Q,l(s.id),1),r(p,null,{default:a(()=>[i("div",U,l(s.question),1)]),_:2},1024),i("td",G,[s.options.length>0?(o(!0),c(E,{key:0},B(s.options,g=>(o(),n(e(S),{key:g.id,variant:"outline"},{default:a(()=>[_(l(g.name),1)]),_:2},1024))),128)):(o(),c("span",J,l(e(t)("No options.")),1))]),r(p,null,{default:a(()=>[u((o(),c("span",{class:"focus:outline-none",content:e(k)(s.started_at)},[_(l(e(y)(s.started_at)),1)],8,K)),[[d]])]),_:2},1024),r(p,null,{default:a(()=>[s.closed_at?u((o(),c("span",{key:0,class:"focus:outline-none",content:e(k)(s.closed_at)},[_(l(e(y)(s.closed_at)),1)],8,W)),[[d]]):(o(),c("span",X,l(e(t)("None")),1))]),_:2},1024),r(p,null,{default:a(()=>[u((o(),c("span",{class:"focus:outline-none",content:e(k)(s.created_at)},[_(l(e(y)(s.created_at)),1)],8,Y)),[[d]])]),_:2},1024),r(p,null,{default:a(()=>[s.creator?(o(),c("span",Z,l(s.creator.username),1)):(o(),c("span",ee,l(e(t)("None")),1))]),_:2},1024),r(p,null,{default:a(()=>[s.is_closed?(o(),n(v,{key:0,class:"text-success-500",name:"check-circle"})):(o(),n(v,{key:1,class:"text-error-500",name:"cross-circle"}))]),_:2},1024),i("td",te,[e(f)("update polls")&&!s.is_closed?u((o(),n(e(h),{key:0,as:"button",method:"put",href:m.route("admin.poll.lock",s.id),class:"inline-flex items-center justify-center text-warning-600 dark:text-warning-500 hover:text-warning-800 dark:hover:text-warning-800",title:e(t)("Lock Poll")},{default:a(()=>[r(e(q),{class:"inline-block w-5 h-5"})]),_:2},1032,["href","title"])),[[d]]):x("",!0),e(f)("update polls")&&s.is_closed?u((o(),n(e(h),{key:1,as:"button",method:"put",href:m.route("admin.poll.unlock",s.id),class:"inline-flex items-center justify-center text-success-600 dark:text-success-500 hover:text-success-800 dark:hover:text-success-800",title:e(t)("Unlock Poll")},{default:a(()=>[r(e(z),{class:"inline-block w-5 h-5"})]),_:2},1032,["href","title"])),[[d]]):x("",!0),e(f)("delete polls")?u((o(),n(e(h),{key:2,as:"button",method:"DELETE",href:m.route("admin.poll.delete",s.id),class:"inline-flex items-center justify-center text-error-600 hover:text-error-900 focus:outline-none",title:e(t)("Delete Poll")},{default:a(()=>[r(e(F),{class:"inline-block w-5 h-5"})]),_:2},1032,["href","title"])),[[N,{message:"Are you sure you want to delete this Poll permanently?"}],[d]]):x("",!0)])]),_:1},8,["data","filters"])])]),_:1})}}};export{$e as default};
