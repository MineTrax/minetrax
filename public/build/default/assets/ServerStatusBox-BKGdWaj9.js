import{_ as k}from"./CopyToClipboard-o78WAkIw.js";import{E as x}from"./AppLayout-CqcjxrDM.js";import{_ as S}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{q as v,y as w,o as t,d as n,a as o,t as s,e as l,c as C,w as _,f as c,b as Q,m as B}from"./app-DGL2Fa5_.js";const I={components:{ErrorMessage:x,CopyToClipboard:k},props:{server:Object},data(){return{serverInfo:Object,loading:!0,error:null,interval:null}},computed:{enabled(){return this.$page.props.generalSettings.enable_mcserver_statuspingbox?!!(this.server||this.$page.props.defaultQueryServer.server):!1}},created(){this.enabled&&(this.getServerQuery(),this.interval=setInterval(()=>this.getServerQuery(),1e4))},unmounted(){clearInterval(this.interval)},methods:{getServerQuery(){let e=this.server;e||(e=this.$page.props.defaultQueryServer.server),axios.get(route("server.ping.get",e.id)).then(r=>{this.serverInfo=r.data,this.error=null}).catch(r=>{this.error=r.response.data.message||r.message,this.serverInfo=null}).finally(()=>{this.loading=!1})}}},V={key:0},N={class:"p-3 sm:px-5 bg-white dark:bg-cool-gray-800 rounded shadow break-words"},j={class:"font-extrabold text-gray-800 dark:text-gray-200"},D={key:0,class:"flex p-4 justify-center"},E={key:2,class:"flex flex-col"},O={class:"mt-3 text-gray-700 dark:text-gray-300 text-center font-semibold"},T={class:"font-bold text-light-blue-500 dark:text-light-blue-400"},z=["title","onClick"],M={key:0},q={key:1};function A(e,r,i,H,a,y){const f=v("error-message"),m=v("copy-to-clipboard"),b=w("tippy");return y.enabled?(t(),n("div",V,[o("div",N,[o("h3",j,s(e.__("Server Status")),1),a.loading?(t(),n("div",D,r[0]||(r[0]=[o("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-light-blue-600 dark:text-light-blue-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):l("",!0),a.error?(t(),C(f,{key:1},{default:_(()=>[c(s(a.error),1)]),_:1})):l("",!0),!a.loading&&!a.error?(t(),n("div",E,[o("div",O,[c(s(e.__("Join"))+" ",1),o("span",T,s(a.serverInfo.players.online),1),c(" "+s(e.__("Online Players"))+"! ",1)]),Q(m,null,{default:_(d=>{var u,h;return[B((t(),n("button",{title:e.__("Click to Copy"),type:"button",class:"text-center font-extrabold mt-3 border border-gray-200 dark:border-gray-700 text-gray-600 dark:text-gray-300 rounded p-2 hover:text-light-blue-500 dark:hover:text-light-blue-400 hover:bg-light-blue-50 dark:hover:bg-cool-gray-900 hover:border-light-blue-500 dark:hover:border-cool-gray-800 focus:ring focus:ring-light-blue-200 focus:ring-opacity-50 transition duration-150 ease-in-out focus:outline-none",onClick:J=>{var p,g;return d.copy(i.server?i.server.hostname:(g=(p=e.$page.props.defaultQueryServer)==null?void 0:p.server)==null?void 0:g.hostname)}},[d.status!=="copied"?(t(),n("span",M,s(i.server?i.server.hostname:(h=(u=e.$page.props.defaultQueryServer)==null?void 0:u.server)==null?void 0:h.hostname),1)):(t(),n("span",q,s(e.__("Copied!")),1))],8,z)),[[b]])]}),_:1})])):l("",!0)])])):l("",!0)}const L=S(I,[["render",A]]);export{L as S};
